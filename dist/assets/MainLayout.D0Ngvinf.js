import{r as ee,a as te,b as O,j as e,a3 as q,a4 as bt,w as E,a5 as Ee,s as m,T as w,i as c,o as Le,O as D,a6 as Re,d as g,a7 as ce,k as T,U as Z,q as ae,Q as de,g as $e,V as U,l as re,a8 as H,R as A,a9 as ft,aa as jt,I as He,ab as yt,ac as vt,m as Ct,P as Ae,v as wt,t as kt,ad as pe,$ as St}from"./vendor-mui.08p3AH88.js";import{r,a as he,u as We,d as me,L as ie}from"./vendor-router.BRqU_Zs2.js";import{A as Te}from"./AccountCircle.C55a0IjL.js";import{r as oe,N as xe,c as Be,P as De,M as _t,G as Pe,d as Mt,I as j,e as zt,f as Ft,R as It,g as Zt,F as Et,A as ue,T as ge,u as Ve,h as Oe,D as Lt}from"./index.CdVNWeFt.js";import{g as ne}from"./vendor-react.DF-_cTkv.js";import{S as Rt}from"./Settings.DGZpUNrl.js";import{P as $t}from"./PlayArrow.GqmCGL4o.js";import{P as Ht}from"./Pause.r8mC42rq.js";import{V as At,a as Wt}from"./VolumeOff.CdPtQMO_.js";import{A as Tt}from"./Add.BKfOzMjp.js";import{C as Ue}from"./Clear.ONWxSfjH.js";import{V as Ne}from"./thumbnails.CEJMDkxh.js";import{F as Bt}from"./balls.C0g-ojbU.js";import{C as Dt}from"./Close.BG2YHWMj.js";import{D as Pt}from"./DoneAll.CiznCgP9.js";import{a as L}from"./vendor.CL98q8z6.js";import{f as Vt}from"./dateUtils.JaLtthGQ.js";import{E as Ge}from"./ExpandMore.Ch98balh.js";import{E as qe}from"./ExpandLess.DNDWbxvJ.js";import{N as k,M as Ot}from"./TransferMenu.2g5UFehs.js";import{M as Ut}from"./MobilePlayer.Dn8-ai5r.js";import{D as Nt}from"./DesktopPlayer.ChZXszp_.js";import"./History.BL_2VNvs.js";import"./Delete.C47j6PO2.js";import"./Save.D4JlNQm5.js";import"./MoreVert.C0-1U5Ci.js";import"./Person.B_G_dVGx.js";import"./Send.DjUSpM3V.js";import"./KeyboardArrowDown.Cwa-wUfu.js";import"./MusicNote.D4Jp3FIY.js";import"./Edit.6-hI7nty.js";import"./QueueMusic.Dom8AGTx.js";import"./imageUtils.BkCfy0de.js";var Ye,Y={};function Gt(){if(Ye)return Y;Ye=1;var t=ee();Object.defineProperty(Y,"__esModule",{value:!0}),Y.default=void 0;var a=t(oe()),n=te();return Y.default=(0,a.default)((0,n.jsx)("path",{d:"M10.09 15.59 11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"}),"ExitToApp"),Y}const qt=ne(Gt());var Ke,K={};function Yt(){if(Ke)return K;Ke=1;var t=ee();Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var a=t(oe()),n=te();return K.default=(0,a.default)((0,n.jsx)("path",{d:"M6 6h2v12H6zm3.5 6 8.5 6V6z"}),"SkipPrevious"),K}const Kt=ne(Yt());var Qe,Q={};function Qt(){if(Qe)return Q;Qe=1;var t=ee();Object.defineProperty(Q,"__esModule",{value:!0}),Q.default=void 0;var a=t(oe()),n=te();return Q.default=(0,a.default)((0,n.jsx)("path",{d:"m6 18 8.5-6L6 6zM16 6v12h2V6z"}),"SkipNext"),Q}const Xt=ne(Qt()),Jt=r.forwardRef(({title:t,titleId:a,...n},o)=>r.createElement("svg",{width:204,height:212,viewBox:"0 0 204 212",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:o,"aria-labelledby":a,...n},t?r.createElement("title",{id:a},t):null,r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M78.6142 192.304L89.3052 204.105C95.2179 210.632 104.79 210.632 110.688 204.105L121.379 192.304C109.569 179.269 90.4244 179.269 78.6142 192.304ZM35.8491 145.101L57.2316 168.703C80.8068 142.665 119.186 142.665 142.777 168.703L164.159 145.101C128.728 105.977 71.2799 105.977 35.8491 145.101ZM195.567 110.417L185.542 121.484C138.301 69.3405 61.7078 69.3405 14.4516 121.484L4.42589 110.417C-1.98582 103.34 -1.33575 91.6251 5.75646 85.366C60.7399 36.878 139.268 36.878 194.252 85.366C201.344 91.6251 201.979 103.34 195.567 110.417Z",fill:"url(#paint0_linear_992_181)"}),r.createElement("path",{d:"M171.5 159L163.152 177.152L145 185.5L163.152 193.781L171.5 212L179.781 193.781L198 185.5L179.781 177.152",fill:"url(#paint1_linear_992_181)"}),r.createElement("path",{d:"M24.5 0L16.8438 16.8438L0 24.5L16.8438 32.1562L24.5 49L32.1562 32.1562L49 24.5L32.1562 16.8438",fill:"url(#paint2_linear_992_181)"}),r.createElement("path",{d:"M187.5 20L182.344 31.3438L171 36.5L182.344 41.6562L187.5 53L192.656 41.6562L204 36.5L192.656 31.3438",fill:"url(#paint3_linear_992_181)"}),r.createElement("defs",null,r.createElement("linearGradient",{id:"paint0_linear_992_181",x1:100,y1:49,x2:100,y2:209,gradientUnits:"userSpaceOnUse"},r.createElement("stop",{stopColor:"#D0BCFF"}),r.createElement("stop",{offset:1,stopColor:"#9365FF"})),r.createElement("linearGradient",{id:"paint1_linear_992_181",x1:171.5,y1:159,x2:171.5,y2:212,gradientUnits:"userSpaceOnUse"},r.createElement("stop",{stopColor:"#D0BCFF"}),r.createElement("stop",{offset:1,stopColor:"#9365FF"})),r.createElement("linearGradient",{id:"paint2_linear_992_181",x1:24.5,y1:0,x2:24.5,y2:49,gradientUnits:"userSpaceOnUse"},r.createElement("stop",{stopColor:"#D0BCFF"}),r.createElement("stop",{offset:1,stopColor:"#9365FF"})),r.createElement("linearGradient",{id:"paint3_linear_992_181",x1:187.5,y1:20,x2:187.5,y2:53,gradientUnits:"userSpaceOnUse"},r.createElement("stop",{stopColor:"#D0BCFF"}),r.createElement("stop",{offset:1,stopColor:"#9365FF"})))));var Xe,X={};function ea(){if(Xe)return X;Xe=1;var t=ee();Object.defineProperty(X,"__esModule",{value:!0}),X.default=void 0;var a=t(oe()),n=te();return X.default=(0,a.default)((0,n.jsx)("path",{d:"M5 13h14v-2H5zm-2 4h14v-2H3zM7 7v2h14V7z"}),"ClearAll"),X}const ta=ne(ea()),aa=m(Re)(({theme:t})=>({"& .MuiPaper-root":{borderRadius:12,minWidth:380,maxWidth:380,maxHeight:"calc(100vh - 100px)",boxShadow:"0 8px 24px rgba(0,0,0,0.15)",padding:t.spacing(1),backgroundColor:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(10px)",border:`1px solid ${g(t.palette.divider,.1)}`,overflow:"visible",backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.08))",[t.breakpoints.down("sm")]:{minWidth:"100vw",maxWidth:"100vw",width:"100vw",margin:0,borderRadius:0,position:"fixed",top:"0 !important",left:"0 !important",right:"0 !important",bottom:"0 !important",height:"100vh",maxHeight:"100vh",border:"none",boxShadow:"none"},"& .MuiMenuItem-root":{padding:"10px 16px",borderRadius:"8px",margin:"2px 8px",transition:"all 0.2s",backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.08))","&:hover":{backgroundColor:a=>g(a.palette.primary.main,.08)}}}})),ra=m(c)(({theme:t})=>({display:"flex",justifyContent:"space-between",alignItems:"center",padding:t.spacing(1,2),marginBottom:t.spacing(1),backgroundColor:"transparent"})),ia=m(de)(({theme:t,unread:a})=>({transition:"all 0.2s ease",borderRadius:8,margin:t.spacing(.5,0),backgroundColor:a?g(t.palette.primary.main,.08):"transparent",position:"relative",overflow:"hidden","&:hover":{backgroundColor:a?g(t.palette.primary.main,.12):g(t.palette.action.hover,.5)},"& .notification-bg-icon":{position:"absolute",right:20,top:"50%",transform:"translateY(-50%) rotate(-15deg)",fontSize:"3rem",opacity:.3,color:t.palette.primary.main,pointerEvents:"none",filter:"blur(2px)","& svg":{filter:`drop-shadow(0 0 8px ${g(t.palette.primary.main,.6)})`}}}));m(c)(({theme:t,type:a="default"})=>{const n=()=>{switch(a){case"comment_like":case"reply_like":case"post_like":return t.palette.error.main;case"follow":return t.palette.success.main;default:return t.palette.primary.main}};return{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:32,borderRadius:"50%",backgroundColor:g(n(),.1),color:n(),marginRight:t.spacing(1.5)}});const Je=m(c)(({theme:t})=>({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:t.spacing(4),textAlign:"center",color:t.palette.text.secondary})),be=m(ae)(({theme:t})=>({"& .MuiChip-avatar":{width:24,height:24,marginLeft:4,marginRight:-4},"& .MuiChip-label":{paddingLeft:8},borderRadius:"16px",height:32})),oa=m("img")({width:24,height:24,marginRight:4}),na=t=>{switch(t){case"comment_like":case"reply_like":case"post_like":return e.jsx(Et,{sx:{fontSize:"3rem"}});case"comment":case"reply":return e.jsx(Zt,{sx:{fontSize:"3rem"}});case"follow":return e.jsx(De,{sx:{fontSize:"3rem"}});case"repost":return e.jsx(It,{sx:{fontSize:"3rem"}});case"wall_post":return e.jsx(Ft,{sx:{fontSize:"3rem"}});case"points_transfer":return e.jsx(j,{icon:zt,width:"3rem",height:"3rem"});case"badge_purchase":case"username_auction_bid":case"username_bid_accepted":case"username_auction_outbid":case"username_auction_sold":case"username_auction_won":case"username_auction_cancelled":case"username_auction_bid_increased":case"auction_win":case"auction_sold":case"auction_refund":case"new_auction_bid":return e.jsx(Mt,{sx:{fontSize:"3rem"}});case"moderation":case"ban":case"unban":case"warning":return e.jsx(Pe,{sx:{fontSize:"3rem"}});case"mention":return e.jsx(_t,{sx:{fontSize:"3rem"}});case"medal":return e.jsx(Be,{sx:{fontSize:"3rem"}});default:return e.jsx(xe,{sx:{fontSize:"3rem"}})}},sa=t=>{if(!t)return"\u0422\u043E\u043B\u044C\u043A\u043E \u0447\u0442\u043E";try{const a=new Date(t);if(isNaN(a.getTime()))return"\u041D\u0435\u0434\u0430\u0432\u043D\u043E";const n=new Date-a,o=Math.floor(n/1e3);if(o<60)return"\u0422\u043E\u043B\u044C\u043A\u043E \u0447\u0442\u043E";const b=Math.floor(o/60);if(b<60)return`${b} ${la(b)} \u043D\u0430\u0437\u0430\u0434`;const x=Math.floor(b/60);if(x<24)return`${x} ${ca(x)} \u043D\u0430\u0437\u0430\u0434`;const f=Math.floor(x/24);return f<7?`${f} ${da(f)} \u043D\u0430\u0437\u0430\u0434`:Vt(t)}catch{return"\u041D\u0435\u0434\u0430\u0432\u043D\u043E"}},la=t=>t%10==1&&t%100!=11?"\u043C\u0438\u043D\u0443\u0442\u0443":[2,3,4].includes(t%10)&&![12,13,14].includes(t%100)?"\u043C\u0438\u043D\u0443\u0442\u044B":"\u043C\u0438\u043D\u0443\u0442",ca=t=>t%10==1&&t%100!=11?"\u0447\u0430\u0441":[2,3,4].includes(t%10)&&![12,13,14].includes(t%100)?"\u0447\u0430\u0441\u0430":"\u0447\u0430\u0441\u043E\u0432",da=t=>t%10==1&&t%100!=11?"\u0434\u0435\u043D\u044C":[2,3,4].includes(t%10)&&![12,13,14].includes(t%100)?"\u0434\u043D\u044F":"\u0434\u043D\u0435\u0439",pa=he.memo(({notification:t,onClick:a})=>{const n=O(),o=t.sender_user?.name||"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C",b=(x=t.sender_user)&&x.photo?`/static/uploads/avatar/${x.id}/${x.photo}`:"/static/uploads/avatar/system/avatar.png";var x;const f=(t.type,"primary"),d=r.useCallback(()=>{if(!t.message)return null;const h=t.message.match(/(\d+)\s+балл[а-я]*/),C=h?h[1]:null,S=t.message.match(/бейджик «([^»]+)»/),u=S?S[1]:null,p=t.message.match(/юзернейм "([^"]+)"/),s=p?p[1]:null;let y=t.message,z=!0;return t.type==="points_transfer"?(z=y.includes("\u0441 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435\u043C:"),z&&(y=y.split("\u0441 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435\u043C:")[1]?.trim()||"")):y.includes("\u0441 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435\u043C:")&&(y=y.split("\u0441 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435\u043C:")[1]?.trim()||y),e.jsxs(c,{sx:{mt:1},children:[z&&y&&e.jsx(w,{variant:"body2",color:"text.primary",children:y}),(C||u||s)&&e.jsxs(c,{sx:{display:"flex",gap:1,mt:1,flexWrap:"wrap"},children:[C&&e.jsx(be,{size:"small",avatar:e.jsx(oa,{src:"/static/icons/KBalls.svg",alt:"points"}),label:`${_=parseInt(C),_>=1e6?(_/1e6).toFixed(1).replace(/\.0$/,"")+"M":_>=1e3?(_/1e3).toFixed(1).replace(/\.0$/,"")+"K":_.toString()} \u0431\u0430\u043B\u043B\u043E\u0432`,variant:"outlined"}),u&&e.jsx(be,{size:"small",icon:e.jsx(Be,{}),label:u,variant:"outlined"}),s&&e.jsx(be,{size:"small",icon:e.jsx(De,{}),label:s,variant:"outlined"})]})]});var _},[t]);return e.jsxs(ia,{button:!0,unread:t.is_read?0:1,onClick:()=>a(t),sx:{borderLeft:`2px solid ${t.is_read?"transparent":n.palette[f].main}`,mb:1,borderRadius:1,"&:hover":{backgroundColor:g(n.palette[f].main,.08)}},children:[e.jsx(ce,{children:e.jsx(T,{src:b,alt:o,sx:{width:40,height:40,border:t.is_read?"none":`2px solid ${n.palette[f].main}`},onError:h=>{h.currentTarget&&h.currentTarget.setAttribute&&h.currentTarget.setAttribute("src","/static/uploads/avatar/system/avatar.png")}})}),e.jsx(Z,{primary:e.jsxs(c,{sx:{display:"flex",justifyContent:"flex-start",alignItems:"center"},children:[e.jsx(w,{variant:"body2",fontWeight:t.is_read?400:600,sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"calc(100% - 80px)"},children:o}),e.jsx(w,{variant:"caption",color:"text.secondary",sx:{ml:1,whiteSpace:"nowrap",flexShrink:0,fontSize:"0.65rem"},children:sa(t.created_at)})]}),secondary:d()}),e.jsx(c,{className:"notification-bg-icon",children:na(t.type||"default")})]})}),ha=he.memo(({onNewNotification:t})=>{const[a,n]=r.useState([]),[o,b]=r.useState(!1),[x,f]=r.useState(null),[d,h]=r.useState(0),[C,S]=r.useState(null),u=We(),p=O(),s=r.useCallback(async()=>{try{const l=await L.get("/api/notifications");l.data&&l.data.success&&h(l.data.unread_count||0)}catch{}},[]);r.useEffect(()=>{s()},[s]),r.useEffect(()=>{const l=setInterval(s,3e4);return()=>{clearInterval(l)}},[s]);const y=r.useCallback(async()=>{if(!o)try{b(!0),S(null);const l=await L.get("/api/notifications");if(l.data&&l.data.success){const M=l.data.notifications||[];if(n(M),h(l.data.unread_count||0),M.length>0){const $=M[0];new Date-new Date($.created_at)<=6e4&&t&&t($)}}else n([]),h(0)}catch{S("Failed to load notifications"),n([]),h(0)}finally{b(!1)}},[o,t]),z=r.useCallback(async()=>{try{const l=await L.post("/api/notifications/mark-all-read");l.data&&l.data.success&&(n(M=>M.map($=>({...$,is_read:!0}))),h(0))}catch{}},[]),_=r.useCallback(async l=>{if(l&&l.id)try{await L.post(`/api/notifications/${l.id}/read`),n(M=>M.map($=>$.id===l.id?{...$,is_read:!0}:$)),l.is_read||h(M=>Math.max(0,M-1)),l.link&&(u(l.link),R())}catch{}},[u]),F=r.useCallback(l=>{f(l.currentTarget),y()},[y]),R=r.useCallback(()=>{f(null)},[]),I=r.useCallback(async()=>{try{const l=await L.delete("/api/notifications");l.data&&l.data.success&&(n([]),h(0))}catch{}},[]),N=r.useMemo(()=>[...a].sort((l,M)=>!l.is_read&&M.is_read?-1:l.is_read&&!M.is_read?1:new Date(M.created_at)-new Date(l.created_at)),[a]);return e.jsxs(e.Fragment,{children:[e.jsx(q,{title:"\u0423\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u044F",arrow:!0,TransitionComponent:bt,children:e.jsx(E,{onClick:F,sx:{position:"relative",color:x?"primary.main":"inherit"},children:e.jsx(Ee,{badgeContent:d,color:"primary",overlap:"circular",max:99,sx:{"& .MuiBadge-badge":{fontSize:"0.6rem",height:16,minWidth:16,padding:"0 4px"}},children:e.jsx(xe,{})})})}),e.jsxs(aa,{anchorEl:x,open:!!x,onClose:R,transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[e.jsxs(ra,{children:[e.jsxs(w,{variant:"subtitle1",fontWeight:"bold",children:["\u0423\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u044F",d>0&&e.jsx(Ee,{badgeContent:d,color:"primary",sx:{ml:2}})]}),e.jsxs(c,{children:[a.length>0&&e.jsx(q,{title:"\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u0432\u0441\u0435 \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u044F",children:e.jsx(E,{size:"small",onClick:I,disabled:a.length===0,sx:{opacity:a.length>0?1:.5,mr:1},children:e.jsx(ta,{fontSize:"small"})})}),d>0&&e.jsx(q,{title:"\u041E\u0442\u043C\u0435\u0442\u0438\u0442\u044C \u0432\u0441\u0435 \u043A\u0430\u043A \u043F\u0440\u043E\u0447\u0438\u0442\u0430\u043D\u043D\u044B\u0435",arrow:!0,children:e.jsx(E,{size:"small",onClick:z,sx:{mr:1},children:e.jsx(Pt,{fontSize:"small"})})}),e.jsx(q,{title:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C",arrow:!0,children:e.jsx(E,{size:"small",onClick:R,children:e.jsx(Dt,{fontSize:"small"})})})]})]}),e.jsx(c,{sx:{maxHeight:"calc(100vh - 200px)",overflowY:"auto",px:1,[p.breakpoints.down("sm")]:{maxHeight:"calc(100vh - 120px)",height:"calc(100vh - 120px)"}},children:o?e.jsx(c,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx(Le,{size:30,color:"primary"})}):C?e.jsx(Je,{children:e.jsx(w,{variant:"body2",color:"error",children:C})}):N.length>0?e.jsx(D,{sx:{width:"100%",p:0},children:N.map(l=>e.jsx(pa,{notification:l,onClick:_},l.id))}):e.jsxs(Je,{children:[e.jsx(xe,{sx:{fontSize:40,opacity:.5,mb:2}}),e.jsx(w,{variant:"body1",children:"\u041D\u0435\u0442 \u043D\u043E\u0432\u044B\u0445 \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0439"}),e.jsx(w,{variant:"body2",color:"text.secondary",children:"\u0417\u0434\u0435\u0441\u044C \u0431\u0443\u0434\u0443\u0442 \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0430\u0442\u044C\u0441\u044F \u0432\u0430\u0448\u0438 \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u044F"})]})})]})]})}),ma=m(yt)(({theme:t})=>({backgroundImage:"none",color:"#FFFFFF",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.2)",borderBottom:"1px solid rgba(255, 255, 255, 0.05)",position:"fixed",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",borderRadius:"0 !important",zIndex:t.zIndex.appBar,[t.breakpoints.up("md")]:{width:"100%"},height:48})),xa=m(vt)(({theme:t})=>({display:"flex",justifyContent:"space-between",alignItems:"center",padding:t.spacing(0,1),height:48,[t.breakpoints.up("md")]:{padding:t.spacing(0,"15%"),width:"100%",margin:"0 auto"}})),ua=m(c)(({theme:t})=>({display:"flex",alignItems:"center",marginRight:t.spacing(1)})),ga=m(w)(({theme:t})=>({fontWeight:"bold",fontSize:"1.2rem",marginLeft:t.spacing(1),display:"flex",alignItems:"center",color:t.palette.mode==="dark"?"#FFFFFF":t.palette.text.primary})),ba=m(c)(({theme:t})=>({display:"flex",alignItems:"center",justifyContent:"center",flexGrow:1,maxWidth:400,[t.breakpoints.down("md")]:{display:"none"}})),fa=m(c)(({theme:t})=>({display:"flex",alignItems:"center",justifyContent:"center",gap:t.spacing(.5)})),ja=m(c)(({theme:t})=>({display:"flex",alignItems:"center",position:"relative","&:hover .volume-slider":{width:60,opacity:1,marginLeft:t.spacing(.5)}})),ya=m("input")(({theme:t})=>({width:0,height:3,borderRadius:1.5,backgroundColor:g(t.palette.primary.main,.2),appearance:"none",outline:"none",transition:"all 0.2s ease",opacity:0,"&::-webkit-slider-thumb":{appearance:"none",width:10,height:10,borderRadius:"50%",backgroundColor:t.palette.primary.main,cursor:"pointer"},"&.volume-slider":{}})),va=m(c)(({theme:t})=>({display:"flex",alignItems:"center",gap:t.spacing(.5)}));m(ae)(({theme:t})=>({borderRadius:20,fontWeight:"bold",background:`linear-gradient(45deg, #d0bcff 30%, ${g("#d0bcff",.8)} 90%)`,color:"#1a1a1a",border:"none",boxShadow:"0 2px 5px rgba(0,0,0,0.1)",height:32,"& .MuiChip-icon":{color:"inherit"},[t.breakpoints.down("md")]:{display:"none"}}));const Ca=m(c)(({theme:t})=>({display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20,"& svg":{width:"100%",height:"100%"}})),wa=m(c)(({theme:t,fullWidth:a})=>({position:"relative",borderRadius:16,backgroundColor:"#131313",width:a?"100%":450,display:"flex",transition:"all 0.3s ease",[t.breakpoints.down("sm")]:{width:"100vw",margin:0,borderRadius:0,position:"fixed",top:0,left:0,right:0,bottom:0,height:"100vh",zIndex:1300}})),ka=m(Ct)(({theme:t})=>({width:"100%","& .MuiInputBase-root":{color:t.palette.common.white,backgroundColor:"#131313",borderRadius:24,padding:t.spacing(.5,1),"&:hover":{backgroundColor:g(t.palette.common.white,.1)}},"& .MuiOutlinedInput-notchedOutline":{borderColor:g(t.palette.common.white,.2)},"& .MuiInputBase-input":{padding:t.spacing(1)}})),Sa=m(Ae)(({theme:t})=>({position:"absolute",top:"100%",left:10,right:10,zIndex:1200,maxHeight:"calc(80vh - 70px)",overflow:"auto",marginTop:t.spacing(.5),backgroundColor:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",borderRadius:12,boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.1)",backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.08))",[t.breakpoints.down("sm")]:{position:"fixed",top:"48px",left:0,right:0,bottom:0,maxHeight:"calc(100vh - 48px)",height:"calc(100vh - 48px)",margin:0,borderRadius:0,border:"none",boxShadow:"none"}})),_a=m(wt)(({theme:t})=>({minHeight:40,"& .MuiTabs-indicator":{backgroundColor:"#D0BCFF",height:3}})),et=m(kt)(({theme:t})=>({minHeight:40,textTransform:"none",fontWeight:500,fontSize:"0.875rem"})),Ma=he.memo(({toggleSidebar:t})=>{const{user:a,logout:n,setUser:o}=r.useContext(ue),{themeSettings:b}=r.useContext(ge),x=We(),f=me(),d=O(),h=$e(d.breakpoints.down("md")),[C,S]=r.useState([]),[u,p]=r.useState({current_account:null,main_account:null,channels:[]}),[s,y]=r.useState(0),[z,_]=r.useState(!1),[F,R]=r.useState(""),[I,N]=r.useState({users:[],channels:[]}),[l,M]=r.useState(0),[$,fe]=r.useState(!1),[rt,B]=r.useState(!1),je=r.useRef(null),ye=r.useMemo(()=>{const i=b.textColor||d.palette.text.primary;return{primaryColor:b.primaryColor||d.palette.primary.main,headerStyle:{background:"rgba(255, 255, 255, 0.03)",color:i,boxShadow:`0 4px 15px ${g("#000000",.07)}`,borderColor:g(i,.08)}}},[b,d]),it=f.pathname==="/music",{currentTrack:G,isPlaying:ot,isMuted:ve,volume:Ce,togglePlay:nt,nextTrack:st,prevTrack:lt,toggleMute:ct,setVolume:dt}=Ve(),[we,ke]=r.useState(null),pt=!!we,[ht,se]=r.useState(!1),[J,mt]=r.useState(null),Se=r.useRef(null),P=()=>{ke(null)},V=i=>{P(),x(i)},_e=async i=>{try{const v=await L.post("/api/users/switch-account",{account_id:i});v.data.success&&(o({...v.data.account,id:v.data.account.id}),P(),window.location.reload())}catch{}},Me=(i,v=25)=>!i||i.length<=v?i:i.substring(0,v)+"...";r.useEffect(()=>{a&&xt()},[a]);const xt=async()=>{try{const i=await L.get("/api/users/my-channels");i.data.success&&p(i.data)}catch{}};r.useEffect(()=>{if(a){const i=async()=>{try{const W=await L.get("/api/notifications");if(W.data&&W.data.success){const gt=W.data.unread_count||0;if(y(gt),W.data.notifications&&W.data.notifications.length>0){const le=W.data.notifications[0];le.id!==Se.current&&(Se.current=le.id,ze(le))}}}catch{}};i();const v=setInterval(i,3e4);return()=>{clearInterval(v)}}},[a]);const ze=i=>{i.is_read||(mt(i),se(!0),setTimeout(()=>{se(!1)},5e3))},Fe=async i=>{if(!(i.trim().length<2)){fe(!0);try{const v=await L.get("/api/search/",{params:{q:i,type:"users",per_page:5}}),W=await L.get("/api/search/channels",{params:{q:i,per_page:5}});N({users:v.data?.users||[],channels:W.data?.channels||[]})}catch{}finally{fe(!1)}}},Ie=()=>{_(!z),z?(R(""),B(!1)):setTimeout(()=>{je.current?.focus()},100)},Ze=i=>{x(i),B(!1),_(!1)};r.useEffect(()=>{const i=setTimeout(()=>{F.trim().length>=2&&Fe(F)},300);return()=>{clearTimeout(i)}},[F]);const ut=e.jsxs(Re,{anchorEl:we,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:pt,onClose:P,PaperProps:{elevation:3,sx:{minWidth:280,mt:.5,boxShadow:"0 8px 24px rgba(0,0,0,0.15)",borderRadius:"14px",overflow:"visible",backgroundColor:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(10px)",border:i=>`1px solid ${g(i.palette.divider,.1)}`,[d.breakpoints.down("sm")]:{minWidth:"100vw",maxWidth:"100vw",width:"100vw",margin:0,borderRadius:0,position:"fixed",top:"0 !important",left:"0 !important",right:"0 !important",bottom:"0 !important",height:"100vh",maxHeight:"100vh",border:"none",boxShadow:"none"},"& .MuiMenuItem-root":{padding:"10px 16px",borderRadius:"8px",margin:"2px 8px",transition:"all 0.2s","&:hover":{backgroundColor:i=>g(i.palette.primary.main,.08)}}}},children:[a&&e.jsxs(e.Fragment,{children:[e.jsxs(c,{sx:{px:3,py:3,textAlign:"center",position:"relative"},children:[h&&e.jsx(E,{onClick:P,sx:{position:"absolute",right:8,top:8,color:"text.secondary","&:hover":{backgroundColor:g(d.palette.primary.main,.08)}},children:e.jsx(Ue,{})}),e.jsx(T,{src:a.photo?`/static/uploads/avatar/${a.id}/${a.photo}`:"/static/uploads/avatar/system/avatar.png",alt:a.name||a.username,sx:{width:80,height:80,mx:"auto",border:`2px solid ${ye.primaryColor}`,boxShadow:"0 4px 8px rgba(0,0,0,0.1)"}}),e.jsx(w,{variant:"h6",sx:{mt:2,fontWeight:600},children:a.name||a.username}),e.jsxs(w,{variant:"body1",color:"text.secondary",sx:{mt:.5},children:["@",a.username]}),a.account_type==="channel"&&e.jsx(ae,{size:"small",label:"\u041A\u0430\u043D\u0430\u043B",color:"primary",sx:{mt:1,fontWeight:500,px:1}})]}),e.jsx(U,{sx:{opacity:.1,mx:2}}),h&&e.jsxs(e.Fragment,{children:[e.jsxs(c,{sx:{px:2,py:1,display:"flex",gap:1},children:[e.jsx(re,{component:ie,to:"/balance",startIcon:e.jsx(j,{icon:"solar:wallet-money-bold",width:"18",height:"18"}),sx:{flex:1,borderRadius:2,textTransform:"none",backgroundColor:g(d.palette.primary.main,.08),color:"primary.main","&:hover":{backgroundColor:g(d.palette.primary.main,.12)}},children:"\u041A\u043E\u0448\u0435\u043B\u0435\u043A"}),e.jsx(re,{component:ie,to:"/badge-shop",startIcon:e.jsx(j,{icon:"solar:shop-bold",width:"18",height:"18"}),sx:{flex:1,borderRadius:2,textTransform:"none",backgroundColor:g(d.palette.primary.main,.08),color:"primary.main","&:hover":{backgroundColor:g(d.palette.primary.main,.12)}},children:"\u041C\u0430\u0433\u0430\u0437\u0438\u043D"})]}),e.jsx(U,{sx:{opacity:.1,mx:2,my:1}})]})]}),e.jsxs(H,{onClick:()=>V(`/profile/${a?.username}`),children:[e.jsx(A,{children:e.jsx(Te,{fontSize:"small",color:"primary"})}),e.jsx(Z,{children:"\u041C\u043E\u0439 \u043F\u0440\u043E\u0444\u0438\u043B\u044C"})]}),e.jsxs(H,{onClick:()=>V("/settings"),children:[e.jsx(A,{children:e.jsx(Rt,{fontSize:"small",color:"primary"})}),e.jsx(Z,{children:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438"})]}),h&&e.jsxs(e.Fragment,{children:[e.jsxs(H,{onClick:()=>V("/search"),children:[e.jsx(A,{children:e.jsx(j,{icon:"solar:magnifer-bold",width:"20",height:"20"})}),e.jsx(Z,{children:"\u041F\u043E\u0438\u0441\u043A"})]}),e.jsxs(H,{onClick:()=>V("/subscriptions"),children:[e.jsx(A,{children:e.jsx(j,{icon:"solar:users-group-rounded-bold",width:"20",height:"20"})}),e.jsx(Z,{children:"\u041F\u043E\u0434\u043F\u0438\u0441\u043A\u0438"})]}),e.jsxs(H,{onClick:()=>V("/channels"),children:[e.jsx(A,{children:e.jsx(j,{icon:"solar:play-stream-bold",width:"20",height:"20"})}),e.jsx(Z,{children:"\u041A\u0430\u043D\u0430\u043B\u044B"})]}),e.jsxs(H,{onClick:()=>V("/leaderboard"),children:[e.jsx(A,{children:e.jsx(j,{icon:"solar:chart-bold",width:"20",height:"20"})}),e.jsx(Z,{children:"\u0420\u0435\u0439\u0442\u0438\u043D\u0433"})]})]}),e.jsx(U,{sx:{opacity:.1,mx:2,my:1}}),u.channels.length<3&&e.jsxs(H,{onClick:()=>{P(),x("/register/channel")},children:[e.jsx(A,{children:e.jsx(Tt,{fontSize:"small",color:"primary"})}),e.jsx(Z,{children:"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043A\u0430\u043D\u0430\u043B"})]}),u.main_account&&u.current_account?.account_type==="channel"&&e.jsxs(e.Fragment,{children:[e.jsx(U,{sx:{opacity:.1,mx:2,my:1}}),e.jsx(w,{variant:"caption",sx:{px:3,py:.5,display:"block",color:"text.secondary",fontWeight:500},children:"\u041E\u0441\u043D\u043E\u0432\u043D\u043E\u0439 \u0430\u043A\u043A\u0430\u0443\u043D\u0442"}),e.jsxs(H,{onClick:()=>_e(u.main_account.id),children:[e.jsx(A,{children:e.jsx(T,{src:u.main_account.photo,sx:{width:30,height:30}})}),e.jsx(Z,{children:u.main_account.name})]},u.main_account.id)]}),u.channels&&u.channels.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(U,{sx:{opacity:.1,mx:2,my:1}}),e.jsx(w,{variant:"caption",sx:{px:3,py:.5,display:"block",color:"text.secondary",fontWeight:500},children:"\u041C\u043E\u0438 \u043A\u0430\u043D\u0430\u043B\u044B"}),u.channels.map(i=>e.jsxs(H,{onClick:()=>_e(i.id),children:[e.jsx(A,{children:e.jsx(T,{src:i.photo,sx:{width:30,height:30}})}),e.jsx(Z,{children:i.name})]},i.id))]}),e.jsx(U,{sx:{opacity:.1,mx:2,my:1}}),e.jsxs(H,{onClick:async()=>{P();try{await n()}catch{x("/login")}},sx:{color:i=>i.palette.error.main,"&:hover":{backgroundColor:i=>g(i.palette.error.main,.08)}},children:[e.jsx(A,{children:e.jsx(qt,{fontSize:"small",style:{color:"inherit"}})}),e.jsx(Z,{children:"\u0412\u044B\u0439\u0442\u0438"})]})]});return e.jsxs(ma,{sx:{display:it&&h?"none":"block"},style:ye.headerStyle,children:[e.jsx(ft,{styles:{".MuiToolbar-root":{minHeight:"48px !important",height:"48px !important",paddingTop:0,paddingBottom:0}}}),e.jsxs(xa,{children:[e.jsx(ua,{children:e.jsxs(ie,{to:"/",style:{textDecoration:"none",color:"inherit",display:"flex",alignItems:"center"},children:[e.jsx(Jt,{style:{height:32,width:"auto"}}),!h&&e.jsxs(ga,{children:[e.jsx(c,{component:"span",sx:{color:"primary.main"},children:"\u041A"}),e.jsx(c,{component:"span",sx:{color:d.palette.mode==="dark"?"white":"black",opacity:.9},children:"-\u041A\u041E\u041D\u041D\u0415\u041A\u0422"})]})]})}),e.jsx(c,{sx:{display:"flex",justifyContent:"center",flexGrow:1},children:z?e.jsx(wa,{children:e.jsx(jt,{onClickAway:()=>{B(!1)},children:e.jsxs(c,{sx:{width:"100%",position:"relative"},children:[e.jsx(ka,{placeholder:"\u041F\u043E\u0438\u0441\u043A...",value:F,onChange:i=>{const v=i.target.value;R(v),v.trim().length>=2?(Fe(v),B(!0)):(N({users:[],channels:[]}),B(!1))},onFocus:()=>{B(!0)},inputRef:je,variant:"outlined",fullWidth:!0,InputProps:{startAdornment:e.jsx(He,{position:"start",children:e.jsx(Oe,{sx:{color:"rgba(255, 255, 255, 0.7)"}})}),endAdornment:e.jsx(He,{position:"end",children:e.jsx(E,{size:"small",edge:"end",onClick:Ie,sx:{color:"rgba(255, 255, 255, 0.7)"},children:e.jsx(Ue,{})})})}}),rt&&e.jsxs(Sa,{children:[e.jsxs(_a,{value:l,onChange:(i,v)=>{M(v)},variant:"fullWidth",children:[e.jsx(et,{label:"\u0412\u0441\u0435"}),e.jsx(et,{label:"\u041A\u0430\u043D\u0430\u043B\u044B"})]}),e.jsxs(c,{sx:{p:1,[d.breakpoints.down("sm")]:{height:"calc(100% - 40px)",overflowY:"auto"}},children:[$?e.jsx(c,{sx:{display:"flex",justifyContent:"center",p:2},children:e.jsx(Le,{size:24})}):l===0?e.jsx(e.Fragment,{children:I.users.length>0?e.jsx(D,{sx:{p:0},children:I.users.map(i=>e.jsxs(de,{button:!0,onClick:()=>Ze(`/profile/${i.username}`),sx:{borderRadius:1},children:[e.jsx(ce,{children:e.jsx(T,{src:i.photo?`/static/uploads/avatar/${i.id}/${i.photo}`:"/static/uploads/avatar/system/avatar.png",alt:i.name||i.username})}),e.jsx(Z,{primary:e.jsxs(c,{sx:{display:"flex",alignItems:"center"},children:[i.name,i.verification_status==="verified"&&e.jsx(Ne,{sx:{fontSize:14,ml:.5,color:"#D0BCFF"}})]}),secondary:`@${i.username}`})]},i.id))}):e.jsx(c,{sx:{p:2,textAlign:"center"},children:e.jsx(w,{variant:"body2",color:"text.secondary",children:"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0438 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u044B"})})}):e.jsx(e.Fragment,{children:I.channels.length>0?e.jsx(D,{sx:{p:0},children:I.channels.map(i=>e.jsxs(de,{button:!0,onClick:()=>Ze(`/profile/${i.username}`),sx:{borderRadius:1},children:[e.jsx(ce,{children:e.jsx(T,{src:i.photo,alt:i.name,onError:v=>{v.target.onerror=null,v.target.src="/static/uploads/avatar/system/avatar.png"}})}),e.jsx(Z,{primary:e.jsxs(c,{sx:{display:"flex",alignItems:"center"},children:[i.name,i.is_verified&&e.jsx(Ne,{sx:{fontSize:14,ml:.5,color:"#D0BCFF"}})]}),secondary:`@${i.username}`})]},i.id))}):e.jsx(c,{sx:{p:2,textAlign:"center"},children:e.jsx(w,{variant:"body2",color:"text.secondary",children:"\u041A\u0430\u043D\u0430\u043B\u044B \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u044B"})})}),l===0&&I.users.length>0||l===1&&I.channels.length>0?e.jsx(c,{sx:{p:1,display:"flex",justifyContent:"center"},children:e.jsx(re,{size:"small",onClick:()=>{x(l===0?`/search?q=${F}&type=users`:`/channels?q=${F}`),B(!1),_(!1)},sx:{textTransform:"none",color:"#D0BCFF","&:hover":{backgroundColor:g("#D0BCFF",.1)}},children:"\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u0432\u0441\u0435"})}):null]})]})]})})}):e.jsx(ba,{children:G&&e.jsxs(c,{sx:{display:"flex",alignItems:"center",width:"100%",justifyContent:"space-between"},children:[e.jsxs(c,{component:ie,to:"/music",sx:{display:"flex",alignItems:"center",textDecoration:"none",color:"inherit",flex:"1",minWidth:0},children:[e.jsx(T,{variant:"rounded",src:G.cover_path||"/static/uploads/system/album_placeholder.jpg",alt:G.title,sx:{width:32,height:32,mr:1,borderRadius:"4px"}}),e.jsxs(c,{sx:{minWidth:0},children:[" ",e.jsx(w,{variant:"body2",fontWeight:"medium",noWrap:!0,children:Me(G.title,20)}),e.jsx(w,{variant:"caption",color:"text.secondary",noWrap:!0,children:Me(G.artist,20)})]})]}),e.jsxs(fa,{children:[e.jsx(E,{size:"small",onClick:lt,sx:{p:.5},children:e.jsx(Kt,{sx:{fontSize:"1.1rem"}})}),e.jsx(E,{onClick:nt,size:"small",sx:{color:"primary.main",bgcolor:g(d.palette.primary.main,.05),"&:hover":{bgcolor:g(d.palette.primary.main,.15)},p:.7,mx:.5},children:ot?e.jsx(Ht,{sx:{fontSize:"1.1rem"}}):e.jsx($t,{sx:{fontSize:"1.1rem"}})}),e.jsx(E,{size:"small",onClick:st,sx:{p:.5},children:e.jsx(Xt,{sx:{fontSize:"1.1rem"}})}),e.jsxs(ja,{children:[e.jsx(E,{size:"small",onClick:ct,sx:{p:.5,ml:.5},children:ve||Ce===0?e.jsx(At,{sx:{fontSize:"1.1rem"}}):e.jsx(Wt,{sx:{fontSize:"1.1rem"}})}),e.jsx(ya,{className:"volume-slider",type:"range",min:0,max:1,step:.01,value:ve?0:Ce,onChange:i=>dt(parseFloat(i.target.value))})]})]})]})})}),e.jsxs(va,{children:[a&&!h&&e.jsx(q,{title:"\u041A\u043E\u0448\u0435\u043B\u0435\u043A",children:e.jsx(ae,{icon:e.jsx(Ca,{children:e.jsx(Bt,{})}),label:"\u041A\u043E\u0448\u0435\u043B\u0435\u043A",onClick:()=>x("/balance"),clickable:!0,sx:{borderRadius:20,fontWeight:"bold",background:`linear-gradient(45deg, #d0bcff 30%, ${g("#d0bcff",.8)} 90%)`,color:"#1a1a1a",border:"none",boxShadow:"0 2px 5px rgba(0,0,0,0.1)",height:32,"& .MuiChip-icon":{color:"inherit"},[d.breakpoints.down("md")]:{display:"none"}}})}),e.jsx(E,{color:"inherit",onClick:Ie,sx:{bgcolor:z?g(d.palette.primary.main,.1):"transparent",color:z?"primary.main":"inherit",transition:"all 0.2s ease","&:hover":{bgcolor:g(d.palette.primary.main,.08),transform:"scale(1.05)"}},children:e.jsx(Oe,{})}),a&&e.jsx(ha,{onNewNotification:ze}),e.jsx(E,{edge:"end","aria-label":"account","aria-haspopup":"true",onClick:i=>{ke(i.currentTarget)},color:"inherit",sx:{ml:.5,transition:"all 0.2s ease","&:hover":{transform:"scale(1.05)"}},children:a?e.jsx(T,{src:a.photo?`/static/uploads/avatar/${a.id}/${a.photo}`:"/static/uploads/avatar/system/avatar.png",alt:a.name||a.username,sx:{width:30,height:30,border:`1px solid ${g(d.palette.primary.main,.3)}`}}):e.jsx(Te,{})})]})]}),ht&&J&&e.jsx(Lt,{open:!0,message:J.message,shortMessage:J.sender_user?.name||"\u041D\u043E\u0432\u043E\u0435 \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0435",notificationType:"notification",animationType:"pill",autoHideDuration:5e3,onClose:()=>se(!1),notificationData:J}),ut]})}),tt=r.createContext(),za=({children:t})=>{const[a,n]=r.useState(!1),[o,b]=r.useState(!1),[x,f]=r.useState(!1),d=r.useCallback(()=>{n(u=>!u)},[]),h=r.useCallback(()=>{b(u=>!u)},[]),C=r.useCallback(()=>{f(u=>!u)},[]),S=r.useMemo(()=>({expandedMore:a,expandedAdminMod:o,expandedShops:x,toggleExpandMore:d,toggleExpandAdminMod:h,toggleExpandShops:C}),[a,o,x,d,h,C]);return e.jsx(tt.Provider,{value:S,children:t})},Fa={width:24,height:24,body:'<defs><path id="solarHomeBold0" fill-rule="evenodd" d="M10.75 9.5a1.25 1.25 0 1 1 2.5 0a1.25 1.25 0 0 1-2.5 0Z" clip-rule="evenodd"/></defs><g fill="currentColor"><path d="M18.5 3H16a.5.5 0 0 0-.5.5v.059l3.5 2.8V3.5a.5.5 0 0 0-.5-.5Z"/><use href="#solarHomeBold0" fill-rule="evenodd" clip-rule="evenodd"/><path fill-rule="evenodd" d="m20.75 10.96l.782.626a.75.75 0 0 0 .936-1.172l-8.125-6.5a3.75 3.75 0 0 0-4.686 0l-8.125 6.5a.75.75 0 0 0 .937 1.172l.781-.626v10.29H2a.75.75 0 0 0 0 1.5h20a.75.75 0 0 0 0-1.5h-1.25V10.96ZM9.25 9.5a2.75 2.75 0 1 1 5.5 0a2.75 2.75 0 0 1-5.5 0Zm2.8 3.75c.664 0 1.237 0 1.696.062c.492.066.963.215 1.345.597s.531.853.597 1.345c.058.43.062.96.062 1.573v4.423h-1.5V17c0-.728-.002-1.2-.048-1.546c-.044-.325-.114-.427-.172-.484c-.057-.057-.159-.128-.484-.172c-.347-.046-.818-.048-1.546-.048c-.728 0-1.2.002-1.546.048c-.325.044-.427.115-.484.172c-.057.057-.128.159-.172.484c-.046.347-.048.818-.048 1.546v4.25h-1.5v-4.3c0-.664 0-1.237.062-1.696c.066-.492.215-.963.597-1.345s.854-.531 1.345-.597c.459-.062 1.032-.062 1.697-.062h.098Z" clip-rule="evenodd"/><use href="#solarHomeBold0" fill-rule="evenodd" clip-rule="evenodd"/></g>'},Ia={width:24,height:24,body:'<g fill="currentColor"><circle cx="12" cy="6" r="4"/><path d="M20 17.5c0 2.485 0 4.5-8 4.5s-8-2.015-8-4.5S7.582 13 12 13s8 2.015 8 4.5Z"/></g>'},Za={width:24,height:24,body:'<path fill="currentColor" d="m12.75 12.508l8.5-3.4v5.653a3.25 3.25 0 1 0 1.5 2.74V7.945c0-1.143 0-2.101-.08-2.865a7.747 7.747 0 0 0-.04-.315c-.078-.522-.214-1.008-.479-1.415a2.18 2.18 0 0 0-.62-.63l-.007-.005c-.708-.47-1.503-.437-2.322-.228c-.792.202-1.774.613-2.978 1.117l-2.094.876c-.565.236-1.043.437-1.418.644c-.4.22-.743.48-1.001.868c-.258.388-.366.805-.415 1.259c-.046.426-.046.945-.046 1.557v7.952a3.25 3.25 0 1 0 1.5 2.74v-6.993ZM7.75 2a.75.75 0 0 0-1.5 0v5.76a3.25 3.25 0 1 0 1.5 2.74V5.005c.699.504 1.53.745 2.25.745a.75.75 0 0 0 0-1.5a2.443 2.443 0 0 1-1.488-.552c-.434-.357-.762-.9-.762-1.698Z"/>'},Ea={width:24,height:24,body:'<path fill="currentColor" fill-rule="evenodd" d="M21.788 21.788a.723.723 0 0 0 0-1.022L18.122 17.1a9.157 9.157 0 1 0-1.022 1.022l3.666 3.666a.723.723 0 0 0 1.022 0Z" clip-rule="evenodd"/>'},La={width:24,height:24,body:'<path fill="currentColor" d="m12.37 15.835l6.43-6.63C19.201 8.79 18.958 8 18.43 8H5.57c-.528 0-.771.79-.37 1.205l6.43 6.63c.213.22.527.22.74 0Z"/>'},Ra={width:24,height:24,body:'<path fill="currentColor" d="m12.37 8.165l6.43 6.63c.401.414.158 1.205-.37 1.205H5.57c-.528 0-.771-.79-.37-1.205l6.43-6.63a.499.499 0 0 1 .74 0Z"/>'},$a={width:24,height:24,body:'<path fill="currentColor" fill-rule="evenodd" d="m10.667 6.134l-.502-.355A4.241 4.241 0 0 0 7.715 5h-.612c-.405 0-.813.025-1.194.16c-2.383.846-4.022 3.935-3.903 10.943c.024 1.412.354 2.972 1.628 3.581A3.2 3.2 0 0 0 5.027 20a2.74 2.74 0 0 0 1.53-.437c.41-.268.77-.616 1.13-.964c.444-.43.888-.86 1.424-1.138a4.106 4.106 0 0 1 1.89-.461H13c.658 0 1.306.158 1.89.46c.536.279.98.709 1.425 1.139c.36.348.72.696 1.128.964c.39.256.895.437 1.531.437a3.2 3.2 0 0 0 1.393-.316c1.274-.609 1.604-2.17 1.628-3.581c.119-7.008-1.52-10.097-3.903-10.942C17.71 5.025 17.3 5 16.897 5h-.612a4.24 4.24 0 0 0-2.45.78l-.502.354a2.308 2.308 0 0 1-2.666 0ZM16.75 9a.75.75 0 1 1 0 1.5a.75.75 0 0 1 0-1.5Zm-9.25.25a.75.75 0 0 1 .75.75v.75H9a.75.75 0 0 1 0 1.5h-.75V13a.75.75 0 0 1-1.5 0v-.75H6a.75.75 0 0 1 0-1.5h.75V10a.75.75 0 0 1 .75-.75Zm11.5 2a.75.75 0 1 1-1.5 0a.75.75 0 0 1 1.5 0Zm-3.75.75a.75.75 0 1 0 0-1.5a.75.75 0 0 0 0 1.5Zm2.25.75a.75.75 0 1 0-1.5 0a.75.75 0 0 0 1.5 0Z" clip-rule="evenodd"/>'},Ha={width:24,height:24,body:'<path fill="currentColor" d="M15.5 7.5a3.5 3.5 0 1 1-7 0a3.5 3.5 0 0 1 7 0Zm2.5 9c0 1.933-2.686 3.5-6 3.5s-6-1.567-6-3.5S8.686 13 12 13s6 1.567 6 3.5ZM7.122 5c.178 0 .35.017.518.05A4.977 4.977 0 0 0 7 7.5c0 .868.221 1.685.61 2.396c-.158.03-.32.045-.488.045c-1.414 0-2.561-1.106-2.561-2.47C4.561 6.106 5.708 5 7.122 5ZM5.447 18.986C4.88 18.307 4.5 17.474 4.5 16.5c0-.944.357-1.756.896-2.423C3.49 14.225 2 15.267 2 16.529c0 1.275 1.517 2.325 3.447 2.457ZM17 7.5c0 .868-.221 1.685-.61 2.396c.157.03.32.045.488.045c1.414 0 2.56-1.106 2.56-2.47c0-1.365-1.146-2.471-2.56-2.471c-.178 0-.35.017-.518.05c.407.724.64 1.56.64 2.45Zm1.553 11.486c1.93-.132 3.447-1.182 3.447-2.457c0-1.263-1.491-2.304-3.396-2.452c.54.667.896 1.479.896 2.423c0 .974-.38 1.807-.947 2.486Z"/>'},Aa={width:24,height:24,body:'<path fill="currentColor" d="M17.416 2.624a.75.75 0 1 0-.832-1.248L13.669 3.32A4.488 4.488 0 0 0 12 3c-.59 0-1.153.113-1.669.32L7.416 1.376a.75.75 0 0 0-.832 1.248l2.36 1.573a4.493 4.493 0 0 0-1.368 2.475A5.447 5.447 0 0 1 8.938 6.5h6.125c.47 0 .926.06 1.361.172a4.493 4.493 0 0 0-1.368-2.475l2.36-1.573ZM1.25 14a.75.75 0 0 1 .75-.75h3v-1.312c0-.836.26-1.611.704-2.248l-2.483-.994a.75.75 0 0 1 .558-1.392l3.136 1.254A3.92 3.92 0 0 1 8.937 8h6.126c.739 0 1.43.204 2.022.558l3.136-1.254a.75.75 0 1 1 .558 1.392l-2.483.994A3.92 3.92 0 0 1 19 11.938v1.312h3a.75.75 0 0 1 0 1.5h-3V15a6.97 6.97 0 0 1-.808 3.269l2.587 1.035a.75.75 0 0 1-.558 1.393l-2.892-1.158a6.987 6.987 0 0 1-4.579 2.421V15a.75.75 0 1 0-1.5 0v6.96a6.988 6.988 0 0 1-4.579-2.42L3.78 20.696a.75.75 0 1 1-.558-1.393l2.588-1.035A6.97 6.97 0 0 1 5 15v-.25H2a.75.75 0 0 1-.75-.75Z"/>'},Wa={width:24,height:24,body:'<path fill="currentColor" fill-rule="evenodd" d="M3 10.417c0-3.198 0-4.797.378-5.335c.377-.537 1.88-1.052 4.887-2.081l.573-.196C10.405 2.268 11.188 2 12 2c.811 0 1.595.268 3.162.805l.573.196c3.007 1.029 4.51 1.544 4.887 2.081C21 5.62 21 7.22 21 10.417v1.574c0 5.638-4.239 8.375-6.899 9.536C13.38 21.842 13.02 22 12 22s-1.38-.158-2.101-.473C7.239 20.365 3 17.63 3 11.991v-1.574ZM14 9a2 2 0 1 1-4 0a2 2 0 0 1 4 0Zm-2 8c4 0 4-.895 4-2s-1.79-2-4-2s-4 .895-4 2s0 2 4 2Z" clip-rule="evenodd"/>'},Ta={width:24,height:24,body:'<path fill="currentColor" d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2S2 6.477 2 12c0 1.6.376 3.112 1.043 4.453c.178.356.237.763.134 1.148l-.595 2.226a1.3 1.3 0 0 0 1.591 1.591l2.226-.595a1.634 1.634 0 0 1 1.149.133A9.958 9.958 0 0 0 12 22Z"/>'},Ba={width:24,height:24,body:'<path fill="currentColor" d="M20 13.75a.75.75 0 0 0-.75-.75h-3a.75.75 0 0 0-.75.75v6.75H14V4.25c0-.728-.002-1.2-.048-1.546c-.044-.325-.115-.427-.172-.484c-.057-.057-.159-.128-.484-.172C12.949 2.002 12.478 2 11.75 2c-.728 0-1.2.002-1.546.048c-.325.044-.427.115-.484.172c-.057.057-.128.159-.172.484c-.046.347-.048.818-.048 1.546V20.5H8V8.75A.75.75 0 0 0 7.25 8h-3a.75.75 0 0 0-.75.75V20.5H1.75a.75.75 0 0 0 0 1.5h20a.75.75 0 0 0 0-1.5H20v-6.75Z"/>'},Da={width:24,height:24,body:'<path fill="currentColor" fill-rule="evenodd" d="M3.378 5.082C3 5.62 3 7.22 3 10.417v1.574c0 5.638 4.239 8.375 6.899 9.536c.721.315 1.082.473 2.101.473c1.02 0 1.38-.158 2.101-.473C16.761 20.365 21 17.63 21 11.991v-1.574c0-3.198 0-4.797-.378-5.335c-.377-.537-1.88-1.052-4.887-2.081l-.573-.196C13.595 2.268 12.812 2 12 2c-.811 0-1.595.268-3.162.805L8.265 3c-3.007 1.03-4.51 1.545-4.887 2.082Zm7.483 3.281l-.13.235c-.145.259-.217.388-.329.473c-.112.085-.252.117-.532.18l-.254.058c-.984.222-1.476.334-1.593.71c-.117.377.218.769.889 1.553l.174.203c.19.223.285.334.328.472c.043.138.029.287 0 .584l-.026.27c-.102 1.047-.152 1.57.154 1.803c.306.233.767.02 1.688-.403l.239-.11c.261-.12.392-.181.531-.181s.27.06.531.18l.239.11c.92.425 1.382.637 1.688.404c.306-.232.256-.756.154-1.802l-.026-.271c-.029-.297-.043-.446 0-.584c.043-.138.138-.25.328-.472l.174-.203c.67-.784 1.006-1.176.889-1.553c-.117-.376-.609-.488-1.593-.71l-.254-.058c-.28-.063-.42-.095-.532-.18c-.112-.085-.184-.214-.328-.473l-.131-.235C12.632 7.454 12.379 7 12 7s-.632.454-1.139 1.363Z" clip-rule="evenodd"/>'},Pa={width:24,height:24,body:'<path fill="currentColor" fill-rule="evenodd" d="M4.172 3.172C3 4.343 3 6.229 3 10v4c0 3.771 0 5.657 1.172 6.828C5.343 22 7.229 22 11 22h2c3.771 0 5.657 0 6.828-1.172C21 19.657 21 17.771 21 14v-4c0-3.771 0-5.657-1.172-6.828C18.657 2 16.771 2 13 2h-2C7.229 2 5.343 2 4.172 3.172ZM7.25 8A.75.75 0 0 1 8 7.25h8a.75.75 0 0 1 0 1.5H8A.75.75 0 0 1 7.25 8Zm0 4a.75.75 0 0 1 .75-.75h8a.75.75 0 0 1 0 1.5H8a.75.75 0 0 1-.75-.75ZM8 15.25a.75.75 0 0 0 0 1.5h5a.75.75 0 0 0 0-1.5H8Z" clip-rule="evenodd"/>'},Va={width:24,height:24,body:'<path fill="currentColor" d="M7 12a2 2 0 1 1-4 0a2 2 0 0 1 4 0Zm7 0a2 2 0 1 1-4 0a2 2 0 0 1 4 0Zm7 0a2 2 0 1 1-4 0a2 2 0 0 1 4 0Z"/>'},Oa={width:24,height:24,body:'<path fill="currentColor" d="M3.778 3.655c-.181.36-.27.806-.448 1.696l-.598 2.99a3.06 3.06 0 1 0 6.043.904l.07-.69a3.167 3.167 0 1 0 6.306-.038l.074.728a3.06 3.06 0 1 0 6.043-.904l-.598-2.99c-.178-.89-.267-1.335-.448-1.696a3 3 0 0 0-1.888-1.548C17.944 2 17.49 2 16.582 2H7.418c-.908 0-1.362 0-1.752.107a3 3 0 0 0-1.888 1.548Zm14.49 9.845a4.53 4.53 0 0 0 2.232-.581V14c0 3.771 0 5.657-1.172 6.828c-.943.944-2.348 1.127-4.828 1.163V18.5c0-.935 0-1.402-.201-1.75a1.5 1.5 0 0 0-.549-.549C13.402 16 12.935 16 12 16s-1.402 0-1.75.201a1.5 1.5 0 0 0-.549.549c-.201.348-.201.815-.201 1.75v3.491c-2.48-.036-3.885-.22-4.828-1.163C3.5 19.657 3.5 17.771 3.5 14v-1.081a4.53 4.53 0 0 0 2.232.581a4.549 4.549 0 0 0 3.112-1.228A4.643 4.643 0 0 0 12 13.5a4.644 4.644 0 0 0 3.155-1.228A4.549 4.549 0 0 0 18.27 13.5Z"/>'},Ua={width:24,height:24,body:'<path fill="currentColor" d="M14.18 4.276a.75.75 0 0 1 .531.918l-3.973 14.83a.75.75 0 0 1-1.45-.389l3.974-14.83a.75.75 0 0 1 .919-.53Zm2.262 3.052a.75.75 0 0 1 1.06-.056l1.737 1.564c.737.662 1.347 1.212 1.767 1.71c.44.525.754 1.088.754 1.784c0 .695-.313 1.258-.754 1.782c-.42.499-1.03 1.049-1.767 1.711l-1.737 1.564a.75.75 0 0 1-1.004-1.115l1.697-1.527c.788-.709 1.319-1.19 1.663-1.598c.33-.393.402-.622.402-.818c0-.195-.072-.424-.402-.817c-.344-.409-.875-.89-1.663-1.598l-1.697-1.527a.75.75 0 0 1-.056-1.06Zm-8.94 1.059a.75.75 0 1 0-1.004-1.115L4.761 8.836c-.737.662-1.347 1.212-1.767 1.71c-.44.525-.754 1.088-.754 1.784c0 .695.313 1.258.754 1.782c.42.499 1.03 1.049 1.767 1.711l1.737 1.564a.75.75 0 0 0 1.004-1.115l-1.697-1.527c-.788-.709-1.319-1.19-1.663-1.598c-.33-.393-.402-.622-.402-.818c0-.195.072-.424.402-.817c.344-.409.875-.89 1.663-1.598l1.697-1.527Z"/>'},Na={width:24,height:24,body:'<path fill="currentColor" d="m19.687 14.093l.184-1.705c.097-.91.162-1.51.111-1.888H20a1.5 1.5 0 1 0-1.136-.52c-.326.201-.752.626-1.393 1.265c-.495.493-.742.739-1.018.777a.833.833 0 0 1-.45-.063c-.254-.112-.424-.416-.763-1.025l-1.79-3.209c-.209-.375-.384-.69-.542-.942a2 2 0 1 0-1.816 0c-.158.253-.333.567-.543.942L8.76 10.934c-.34.609-.51.913-.764 1.025a.833.833 0 0 1-.45.063c-.275-.038-.522-.284-1.017-.777c-.641-.639-1.067-1.064-1.393-1.265A1.5 1.5 0 1 0 4 10.5h.018c-.051.378.014.979.111 1.888l.184 1.705c.102.946.186 1.847.29 2.657h14.794c.104-.81.188-1.71.29-2.657ZM10.912 21h2.176c2.836 0 4.254 0 5.2-.847c.413-.37.674-1.036.863-1.903H4.849c.189.867.45 1.534.863 1.903c.946.847 2.364.847 5.2.847Z"/>'},Ga=r.memo(({isAdmin:t,isModeratorUser:a,isChannel:n,primaryColor:o,user:b})=>{const x=me(),{expandedMore:f,expandedAdminMod:d,expandedShops:h,toggleExpandMore:C,toggleExpandAdminMod:S,toggleExpandShops:u}=r.useContext(tt),p=r.useCallback(I=>I==="/"&&x.pathname==="/"||x.pathname===I,[x.pathname]),s=r.useMemo(()=>({person:e.jsx(j,{icon:Ia,width:"20",height:"20"}),home:e.jsx(j,{icon:Fa,width:"20",height:"20"}),music:e.jsx(j,{icon:Za,width:"20",height:"20"}),people:e.jsx(j,{icon:Ha,width:"20",height:"20"}),channels:e.jsx(j,{icon:"solar:users-group-rounded-bold",width:"20",height:"20"}),search:e.jsx(j,{icon:Ea,width:"20",height:"20"}),shop:e.jsx(j,{icon:Oa,width:"20",height:"20"}),admin:e.jsx(j,{icon:Wa,width:"20",height:"20"}),moderator:e.jsx(j,{icon:Da,width:"20",height:"20"}),games:e.jsx(j,{icon:$a,width:"20",height:"20"}),subscription:e.jsx(j,{icon:Na,width:"20",height:"20"}),more:e.jsx(j,{icon:Va,width:"20",height:"20"}),arrowUp:e.jsx(j,{icon:Ra,width:"20",height:"20"}),arrowDown:e.jsx(j,{icon:La,width:"20",height:"20"}),leaderboard:e.jsx(j,{icon:Ba,width:"20",height:"20"}),bug:e.jsx(j,{icon:Aa,width:"20",height:"20"}),rules:e.jsx(j,{icon:Pa,width:"20",height:"20"}),api:e.jsx(j,{icon:Ua,width:"20",height:"20"}),auction:e.jsx(Pe,{sx:{fontSize:20}})}),[]),y=r.useMemo(()=>e.jsxs(e.Fragment,{children:[e.jsx(k,{text:"\u041C\u043E\u0439 \u043F\u0440\u043E\u0444\u0438\u043B\u044C",icon:s.person,path:`/profile/${b?.username||b?.id}`,active:p(`/profile/${b?.username||b?.id}`),themeColor:o}),e.jsx(k,{text:"\u041B\u0435\u043D\u0442\u0430",icon:s.home,path:"/",active:p("/"),themeColor:o}),e.jsx(k,{text:"\u041C\u0435\u0441\u0441\u0435\u043D\u0434\u0436\u0435\u0440",icon:e.jsx(j,{icon:Ta,width:"20",height:"20"}),path:"/messenger",active:p("/messenger"),themeColor:o}),e.jsx(k,{text:"\u041C\u0443\u0437\u044B\u043A\u0430",icon:s.music,path:"/music",active:p("/music"),themeColor:o}),e.jsx(k,{text:"\u041F\u043E\u0434\u043F\u0438\u0441\u043A\u0438",icon:s.people,path:"/subscriptions",active:p("/subscriptions"),themeColor:o}),e.jsx(k,{text:"\u041A\u0430\u043D\u0430\u043B\u044B",icon:s.channels,path:"/channels",active:p("/channels"),themeColor:o}),e.jsx(k,{text:"\u041F\u043E\u0438\u0441\u043A",icon:s.search,path:"/search",active:p("/search"),themeColor:o})]}),[s,p,o,b]),z=r.useMemo(()=>(t||a)&&e.jsxs(e.Fragment,{children:[e.jsx(k,{text:"\u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435",icon:s.admin,active:d,isSpecial:!0,onClick:S,endIcon:d?e.jsx(qe,{}):e.jsx(Ge,{})}),e.jsx(pe,{in:d,timeout:"auto",unmountOnExit:!0,children:e.jsxs(D,{component:"div",disablePadding:!0,sx:{pl:1.5,pt:.5},children:[t&&e.jsx(k,{text:"\u0410\u0434\u043C\u0438\u043D \u041F\u0430\u043D\u0435\u043B\u044C",icon:s.admin,path:"/admin",active:p("/admin"),isSpecial:!0,nested:!0}),a&&e.jsx(k,{text:"\u041C\u043E\u0434\u0435\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C",icon:s.moderator,path:"/moderator",active:p("/moderator"),isSpecial:!0,nested:!0})]})})]}),[s,p,t,a,d,S]),_=r.useMemo(()=>e.jsxs(e.Fragment,{children:[e.jsx(k,{text:"\u041C\u0430\u0433\u0430\u0437\u0438\u043D\u044B",icon:s.shop,active:h,onClick:u,endIcon:h?e.jsx(qe,{}):e.jsx(Ge,{}),themeColor:o}),e.jsx(pe,{in:h,timeout:"auto",unmountOnExit:!0,children:e.jsxs(D,{component:"div",disablePadding:!0,sx:{pl:1.5,pt:.5},children:[e.jsx(k,{text:"\u041C\u0430\u0433\u0430\u0437\u0438\u043D \u0431\u0435\u0439\u0434\u0436\u0438\u043A\u043E\u0432",icon:s.shop,path:"/badge-shop",active:p("/badge-shop"),themeColor:o,nested:!0}),e.jsx(k,{text:"\u0410\u0443\u043A\u0446\u0438\u043E\u043D \u044E\u0437\u0435\u0440\u043D\u0435\u0439\u043C\u043E\u0432",icon:s.auction,path:"/username-auction",active:p("/username-auction"),themeColor:o,nested:!0})]})})]}),[s,p,o,h,u]),F=r.useMemo(()=>!n&&e.jsxs(e.Fragment,{children:[e.jsx(k,{text:"\u041C\u0438\u043D\u0438-\u0438\u0433\u0440\u044B",icon:s.games,path:"/minigames",active:p("/minigames"),themeColor:o}),e.jsx(k,{text:"\u041F\u043B\u0430\u043D\u044B \u043F\u043E\u0434\u043F\u0438\u0441\u043E\u043A",icon:s.subscription,path:"/sub-planes",active:p("/sub-planes"),themeColor:o})]}),[s,p,n,o]),R=r.useMemo(()=>e.jsxs(e.Fragment,{children:[e.jsx(Ot,{text:"\u0415\u0449\u0435",icon:s.more,active:f,themeColor:o,onClick:C,arrowUpIcon:s.arrowUp,arrowDownIcon:s.arrowDown}),e.jsx(pe,{in:f,timeout:"auto",unmountOnExit:!0,children:e.jsxs(D,{component:"div",disablePadding:!0,sx:{pl:1.5,pt:.5},children:[!n&&e.jsxs(e.Fragment,{children:[e.jsx(k,{text:"\u041B\u0438\u0434\u0435\u0440\u0431\u043E\u0440\u0434",icon:s.leaderboard,path:"/leaderboard",active:p("/leaderboard"),themeColor:o,nested:!0}),e.jsx(k,{text:"\u0411\u0430\u0433-\u0440\u0435\u043F\u043E\u0440\u0442\u044B",icon:s.bug,path:"/bugs",active:p("/bugs"),themeColor:o,nested:!0})]}),e.jsx(k,{text:"\u041F\u0440\u0430\u0432\u0438\u043B\u0430",icon:s.rules,path:"/rules",active:p("/rules"),themeColor:o,nested:!0}),e.jsx(k,{text:"API \u0414\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u0430\u0446\u0438\u044F",icon:s.api,path:"/api-docs",active:p("/api-docs"),themeColor:o,nested:!0}),e.jsx(k,{text:"\u041E \u043F\u043B\u0430\u0442\u0444\u043E\u0440\u043C\u0435",icon:s.rules,path:"/about",active:p("/about"),themeColor:o,nested:!0,target:"_blank",rel:"noopener noreferrer"})]})})]}),[s,p,n,o,f,C]);return e.jsxs(D,{component:"nav",sx:{p:1,mt:1},children:[y,z,_,F,R]})}),qa=m(c)(({theme:t})=>({display:"flex",alignItems:"center",padding:t.spacing(1.5),position:"relative",gap:t.spacing(1.5),"&::after":{content:'""',position:"absolute",bottom:0,left:"10%",right:"10%",height:"1px",background:t.palette.mode==="dark"?"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent)":"linear-gradient(90deg, transparent, rgba(0, 0, 0, 0.1), transparent)"}})),Ya=m(T)(({theme:t})=>({width:48,height:48,border:t.palette.mode==="dark"?"1px solid rgba(255, 255, 255, 0.1)":"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",transition:"transform 0.2s ease",flexShrink:0,"&:hover":{transform:"scale(1.05)"}})),Ka=m(c)({display:"flex",flexDirection:"column",justifyContent:"center",flex:1,minWidth:0}),Qa=m(w)(({theme:t})=>({fontWeight:"600",fontSize:"0.95rem",color:t.palette.mode==="dark"?"#FFFFFF":t.palette.text.primary,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"})),Xa=m(w)(({theme:t})=>({color:t.palette.mode==="dark"?"rgba(255, 255, 255, 0.5)":"rgba(0, 0, 0, 0.5)",fontSize:"0.75rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}));m(re)(({theme:t})=>({padding:t.spacing(.25,1.5),borderRadius:"6px",textTransform:"none",fontSize:"0.7rem",marginTop:t.spacing(.5),color:t.palette.mode==="dark"?"rgba(255, 255, 255, 0.7)":"rgba(0, 0, 0, 0.7)",background:t.palette.mode==="dark"?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.05)",border:t.palette.mode==="dark"?"1px solid rgba(255, 255, 255, 0.1)":"1px solid rgba(0, 0, 0, 0.1)","&:hover":{background:t.palette.mode==="dark"?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"}}));const Ja=r.memo(({user:t})=>t?e.jsxs(qa,{children:[e.jsx(Ya,{src:t?.photo?t.photo.startsWith("/")?t.photo:`/static/uploads/avatar/${t.id}/${t.photo}`:void 0,alt:t?.name||"User",onError:a=>{a.target.onerror=null,a.target.src="/static/uploads/avatar/system/avatar.png"}}),e.jsxs(Ka,{children:[e.jsx(Qa,{variant:"h6",children:t?.name||"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C"}),e.jsxs(Xa,{variant:"body2",children:["@",t?.username||"username"]})]})]}):null,(t,a)=>t.user?.id===a.user?.id&&t.user?.name===a.user?.name&&t.user?.username===a.user?.username&&t.user?.photo===a.user?.photo&&t.primaryColor===a.primaryColor),er=m(c)(({theme:t,themecolor:a})=>({marginTop:"auto",padding:t.spacing(1.5,1,.8),textAlign:"center",position:"relative","&::before":{content:'""',position:"absolute",top:0,left:"15%",right:"15%",height:"1px",background:t.palette.mode==="dark"?"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent)":"linear-gradient(90deg, transparent, rgba(0, 0, 0, 0.1), transparent)"},[t.breakpoints.down("lg")]:{padding:t.spacing(1.2,1,.6)}})),at=m(w)(({theme:t})=>({color:t.palette.mode==="dark"?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.6)",fontSize:{xs:"0.6rem",sm:"0.65rem",md:"0.7rem"}})),tr=r.memo(({primaryColor:t})=>{const a=O();return e.jsxs(er,{themecolor:t,children:[e.jsx(w,{variant:"subtitle2",sx:{fontWeight:500,color:a.palette.mode==="dark"?"rgba(255, 255, 255, 0.9)":"rgba(0, 0, 0, 0.9)",mb:.8,letterSpacing:"0.4px",fontSize:{xs:"0.7rem",sm:"0.75rem",md:"0.8rem"}},children:"\u041A-\u041A\u043E\u043D\u043D\u0435\u043A\u0442 v2.8"}),e.jsx(at,{variant:"caption",display:"block",children:"\u041F\u0440\u0430\u0432\u043E\u043E\u0431\u043B\u0430\u0434\u0430\u0442\u0435\u043B\u044F\u043C"}),e.jsx(at,{variant:"caption",display:"block",sx:{pt:.2},children:"verif@k-connect.ru"})]})},(t,a)=>t.primaryColor===a.primaryColor),ar=m(Ae)(({theme:t})=>({padding:t.spacing(2,1.5),borderRadius:t.spacing(2),height:"calc(100vh - 65px)",position:"sticky",top:"55px",overflowY:"auto",overflowX:"hidden",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.07)",background:t.palette.mode==="dark"?"rgba(255, 255, 255, 0.03)":"rgba(0, 0, 0, 0.03)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:t.palette.mode==="dark"?"1px solid rgba(255, 255, 255, 0.08)":"1px solid rgba(0, 0, 0, 0.08)",display:"flex",flexDirection:"column",justifyContent:"space-between",transition:"all 0.3s ease",scrollbarWidth:"none","&::-webkit-scrollbar":{width:"0px",background:"transparent"},"&::-webkit-scrollbar-track":{backgroundColor:"transparent"},"&::-webkit-scrollbar-thumb":{backgroundColor:"transparent"},"&:hover":{boxShadow:"0 6px 20px rgba(0, 0, 0, 0.1)"},[t.breakpoints.up("md")]:{width:"230px",marginRight:0,marginLeft:"auto"},[t.breakpoints.down("lg")]:{padding:t.spacing(1.5,1.2),width:"220px"},[t.breakpoints.down("md")]:{width:"210px",padding:t.spacing(1.2,1)}})),rr=r.memo(()=>{const{user:t}=r.useContext(ue),{themeSettings:a}=r.useContext(ge),[n,o]=r.useState(!1),b=O(),x=r.useMemo(()=>{a.paperColor||b.palette.background.paper;const p=a.textColor||b.palette.text.primary;return{primaryColor:a.primaryColor||b.palette.primary.main,sidebarStyle:{color:p,boxShadow:`0 4px 15px ${g("#000000",.07)}`,borderColor:g(p,.08)}}},[a,b]),f=t?.id===3,d=t?.account_type==="channel";r.useEffect(()=>{t&&S()},[t]);const[h,C]=r.useState(0),S=async()=>{try{if(window._moderatorCheckInProgress)return;const p=Date.now();if(p-h<9e5)return;window._moderatorCheckInProgress=!0;const s=await L.get("/api/moderator/quick-status");s.data&&s.data.is_moderator?o(!0):o(!1),C(p)}catch{o(!1)}finally{window._moderatorCheckInProgress=!1}},u=r.useMemo(()=>({isAdmin:f,isModeratorUser:n,isChannel:d,user:t}),[f,n,d,t]);return e.jsxs(ar,{elevation:2,style:x.sidebarStyle,children:[e.jsx(za,{children:e.jsxs(c,{children:[e.jsx(Ja,{user:t,primaryColor:x.primaryColor}),e.jsx(Ga,{...u,primaryColor:x.primaryColor})]})}),e.jsx(tr,{primaryColor:x.primaryColor})]})},(t,a)=>!0),ir=m(c)(({theme:t})=>({display:"flex",flexDirection:"column",minHeight:"100vh",backgroundColor:t.palette.background.default,backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"fixed",color:t.palette.text.primary})),or=m(c)(({theme:t})=>({display:"flex",flexGrow:1,paddingTop:40})),nr=m(c)(({theme:t,open:a})=>({flexShrink:0,marginLeft:"auto",[t.breakpoints.down("md")]:{position:"fixed",zIndex:t.zIndex.drawer,right:a?0:-280,left:"auto",transition:t.transitions.create("right",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen})}})),sr=m(c)(({theme:t})=>({flexGrow:1,paddingBottom:t.spacing(2),transition:t.transitions.create("margin",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),marginRight:{xs:0,md:0},maxWidth:"100%",color:t.palette.text.primary,[t.breakpoints.up("md")]:{maxWidth:"1050px",paddingRight:"10px",paddingLeft:"10px",marginRight:"auto"},[t.breakpoints.down("sm")]:{padding:0}})),lr=m(c)(({theme:t})=>({position:"fixed",width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:t.zIndex.drawer-1,opacity:0,visibility:"hidden",transition:"opacity 0.3s ease, visibility 0.3s ease","&.active":{opacity:1,visibility:"visible"}})),cr=r.memo(({toggleSidebar:t,isMobile:a})=>e.jsx(Ma,{toggleSidebar:t,isMobile:a})),dr=r.memo(({open:t,onClose:a})=>e.jsx(rr,{open:t,onClose:a})),pr=r.memo(({children:t})=>{const a=O(),{themeSettings:n,profileBackground:o}=r.useContext(ge),{user:b,isLoading:x}=r.useContext(ue),[f,d]=r.useState(!1),h=$e(a.breakpoints.down("md")),C=me(),{currentTrack:S}=Ve();r.useEffect(()=>{h&&d(!1)},[C,h]);const u=()=>{d(!1)},p=["/login","/register","/register/profile","/confirm-email"].some(I=>C.pathname.startsWith(I)),s=C.pathname.startsWith("/music"),y=h&&S&&s,z=!h&&S&&s,_=b&&b.ban===0,F=C.pathname==="/ban",R=!_||!F;return p?e.jsx(c,{sx:{backgroundColor:n?.backgroundColor||a.palette.background.default,color:n?.textColor||a.palette.text.primary,minHeight:"100vh",display:"flex",flexDirection:"column"},children:t}):e.jsxs(ir,{sx:{backgroundColor:n?.backgroundColor||a.palette.background.default,backgroundImage:n?.backgroundImage?`url(${n.backgroundImage})`:"none",color:n?.textColor||a.palette.text.primary},children:[o&&e.jsx("div",{className:"profile-bg-image",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundImage:`url(${o})`,backgroundSize:"cover",backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundAttachment:"scroll",pointerEvents:"none"},children:e.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"rgba(0,0,0,0.45)"}})}),e.jsx(St,{}),R&&e.jsx(cr,{toggleSidebar:()=>{d(!f)},isMobile:h}),e.jsxs(or,{children:[e.jsx(lr,{className:f?"active":"",onClick:u}),e.jsx(nr,{open:f,sx:{width:280},children:e.jsx(dr,{open:f,onClose:u})}),e.jsx(sr,{sx:{color:n?.textColor||a.palette.text.primary,width:{md:"calc(100% - 280px)"},paddingBottom:{xs:y?a.spacing(12):0,sm:y?a.spacing(12):0,md:y?a.spacing(12):a.spacing(2)}},children:t})]}),y&&e.jsx(Ut,{}),z&&e.jsx(Nt,{})]})});export{pr as default};
