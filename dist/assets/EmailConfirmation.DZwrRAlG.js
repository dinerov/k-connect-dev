import{j as r,i as x,P as g,o as h,T as t,A as u,l}from"./vendor-mui.08p3AH88.js";import{e as p,u as b,r as i}from"./vendor-router.BRqU_Zs2.js";import{b as f,E as j}from"./index.CdVNWeFt.js";import{a as v}from"./vendor.CL98q8z6.js";import"./vendor-react.DF-_cTkv.js";const y=()=>{const{token:n}=p(),e=b(),[s,c]=i.useState("loading"),[o,d]=i.useState(""),[k,m]=i.useState("");return i.useEffect(()=>{(async()=>{try{const a=await v.get(`/api/auth/confirm-email/${n}`);a.data.success&&(c("success"),d(a.data.message),a.data.chat_id&&(m(a.data.chat_id),localStorage.setItem("k-connect-chat-id",a.data.chat_id)),a.data.needs_profile_setup?setTimeout(()=>{e("/register/profile",{replace:!0})},2e3):setTimeout(()=>{e("/login",{replace:!0})},2e3))}catch(a){c("error"),d(a.response?.data?.error||"\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u0438 email.")}})()},[n,e]),r.jsx(x,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",padding:2,backgroundImage:"linear-gradient(120deg, #321d5b 0%, #1a1a1a 100%)"},children:r.jsxs(g,{elevation:6,sx:{padding:4,borderRadius:2,maxWidth:500,width:"100%",textAlign:"center",backgroundColor:"rgba(26, 26, 26, 0.9)",backdropFilter:"blur(10px)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.2)"},children:[s==="loading"&&r.jsxs(r.Fragment,{children:[r.jsx(h,{size:80,sx:{color:"var(--primary)",mb:3}}),r.jsx(t,{variant:"h5",gutterBottom:!0,sx:{fontWeight:"bold"},children:"\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u0435 Email"}),r.jsx(t,{variant:"body1",color:"text.secondary",children:"\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u043F\u043E\u0434\u043E\u0436\u0434\u0438\u0442\u0435, \u043C\u044B \u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0430\u0435\u043C \u0432\u0430\u0448 Email..."})]}),s==="success"&&r.jsxs(r.Fragment,{children:[r.jsx(f,{sx:{fontSize:80,color:"success.main",mb:3}}),r.jsx(t,{variant:"h5",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Email \u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D!"}),r.jsx(t,{variant:"body1",color:"text.secondary",sx:{mb:3},children:o}),r.jsx(u,{severity:"info",sx:{mb:3},children:"\u0412\u044B \u0431\u0443\u0434\u0435\u0442\u0435 \u043F\u0435\u0440\u0435\u043D\u0430\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u044B \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0438 \u0447\u0435\u0440\u0435\u0437 \u043D\u0435\u0441\u043A\u043E\u043B\u044C\u043A\u043E \u0441\u0435\u043A\u0443\u043D\u0434."}),r.jsx(l,{variant:"contained",color:"primary",onClick:()=>{s==="success"&&o.includes("\u0441\u043E\u0437\u0434\u0430\u0442\u044C \u043F\u0440\u043E\u0444\u0438\u043B\u044C")?e("/register/profile"):e("/login")},sx:{borderRadius:"20px",background:"var(--primary)","&:hover":{background:"var(--primary-dark)"}},children:s==="success"&&o.includes("\u0441\u043E\u0437\u0434\u0430\u0442\u044C \u043F\u0440\u043E\u0444\u0438\u043B\u044C")?"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043F\u0440\u043E\u0444\u0438\u043B\u044C":"\u041F\u0435\u0440\u0435\u0439\u0442\u0438 \u043D\u0430 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0443 \u0432\u0445\u043E\u0434\u0430"})]}),s==="error"&&r.jsxs(r.Fragment,{children:[r.jsx(j,{sx:{fontSize:80,color:"error.main",mb:3}}),r.jsx(t,{variant:"h5",gutterBottom:!0,sx:{fontWeight:"bold"},children:"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u044F"}),r.jsx(t,{variant:"body1",color:"text.secondary",sx:{mb:3},children:o}),r.jsx(l,{variant:"contained",color:"primary",onClick:()=>e("/login"),sx:{borderRadius:"20px",background:"var(--primary)","&:hover":{background:"var(--primary-dark)"}},children:"\u0412\u0435\u0440\u043D\u0443\u0442\u044C\u0441\u044F \u043D\u0430 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0443 \u0432\u0445\u043E\u0434\u0430"})]})]})})};export{y as default};
