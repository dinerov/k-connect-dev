import{r as Qe,a as Ue,j as e,D as W,E as $,w as y,H as P,i as a,T as i,l as x,P as S,G as v,au as M,av as de,aw as Y,a8 as f,m as D,J as F,o as _,h as Hs,s as Ae,v as Xe,t as w,k as G,q as b,O as Ye,Q as Ze,U as es,V as ss,a7 as Ts,C as rs,be as is,p as as,F as E,n as B,af as Vs,A as Ls,ax as xe,ay as he,az as je,aA as z,aB as t,aC as me,bf as Rs,bg as Os}from"./vendor-mui.08p3AH88.js";import{r as l,u as Ks,N as qs,a as ns}from"./vendor-router.BRqU_Zs2.js";import{r as ts,A as Js,f as Gs,h as Ns,b as H,I as ls,E as Qs,d as cs,c as Us}from"./index.CdVNWeFt.js";import{A as Xs,C as Ys,V as Zs}from"./VpnKey.CiWBcDiF.js";import{B as er}from"./Block.CDlxe_qq.js";import{D as T}from"./Delete.C47j6PO2.js";import{V as os}from"./VerifiedUser.CnoA7dRM.js";import{P as sr}from"./People.xr_JbldX.js";import{C as rr}from"./Close.BG2YHWMj.js";import{M as Me}from"./MusicNote.D4Jp3FIY.js";import{V as ir}from"./Visibility.Bq_lujd_.js";import{S as ue}from"./Security.Cr7xxssj.js";import{g as ds}from"./vendor-react.DF-_cTkv.js";import{P as ar}from"./Photo.tXKr-C4h.js";import{B as xs}from"./BugReport.CJI6Qv1X.js";import{B as nr}from"./Badge.Dv8azNVM.js";import{A as He}from"./AccountCircle.C55a0IjL.js";import{D as tr}from"./Done.DH0PNvDW.js";import{K as lr}from"./Key.B17fLC_C.js";import{C as cr}from"./ContentCopy.BChjYHZa.js";import{a as m}from"./vendor.CL98q8z6.js";var hs,Z={};function or(){if(hs)return Z;hs=1;var p=Qe();Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var h=p(ts()),Q=Ue();return Z.default=(0,h.default)((0,Q.jsx)("path",{d:"M19 5v14H5V5zm1.1-2H3.9c-.5 0-.9.4-.9.9v16.2c0 .4.4.9.9.9h16.2c.4 0 .9-.5.9-.9V3.9c0-.5-.5-.9-.9-.9M11 7h6v2h-6zm0 4h6v2h-6zm0 4h6v2h-6zM7 7h2v2H7zm0 4h2v2H7zm0 4h2v2H7z"}),"ListAlt"),Z}const dr=ds(or());var js,ee={};function xr(){if(js)return ee;js=1;var p=Qe();Object.defineProperty(ee,"__esModule",{value:!0}),ee.default=void 0;var h=p(ts()),Q=Ue();return ee.default=(0,h.default)((0,Q.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"ModeEdit"),ee}const hr=ds(xr()),jr=Ae(a)(({theme:p})=>({display:"flex",alignItems:"center",marginBottom:p.spacing(3),padding:p.spacing(2,0)})),N=Ae(S)(({theme:p})=>({padding:p.spacing(3),marginBottom:p.spacing(3),borderRadius:2*p.shape.borderRadius,boxShadow:"0 4px 20px rgba(0, 0, 0, 0.1)"})),mr=Ae(a)(({theme:p})=>({display:"flex",alignItems:"center",marginBottom:p.spacing(3),gap:p.spacing(2)})),ur=()=>{const{user:p}=l.useContext(Js);Ks();const[h,Q]=l.useState(0),[V,pe]=l.useState([]),[pr,gr]=l.useState([]),[fr,br]=l.useState([]),[ms,us]=l.useState([]),[u,o]=l.useState(!1),[ge,ps]=l.useState(""),[n,L]=l.useState(null),[R,fe]=l.useState([]),[O,be]=l.useState([]),[gs,se]=l.useState(!1),[fs,re]=l.useState(!1),[bs,ie]=l.useState(!1),[vs,ae]=l.useState(!1),[ys,ne]=l.useState(!1),[_s,ve]=l.useState(!1),[Cs,U]=l.useState(!1),[ye,Te]=l.useState(1),[_e,Ve]=l.useState(""),[te,ws]=l.useState(null),[K,ks]=l.useState(null),[Ce,Le]=l.useState(""),[j,k]=l.useState({delete_music:!1,delete_posts:!1,delete_avatar:!1,delete_comments:!1,change_user_name:!1,change_username:!1,manage_bug_reports:!1,delete_bug_reports:!1}),[A,le]=l.useState([]),[we,ke]=l.useState([]),[Se,Re]=l.useState(0),[ce,Ss]=l.useState(10),[ze,Ie]=l.useState({open:!1,message:"",severity:"success"}),[zs,X]=l.useState(!1),[q,We]=l.useState([]),[d,I]=l.useState({type:"points",points:1e3,subscription_type:"basic",subscription_duration_days:30,max_uses:1,count:1,description:"",expires_days:30}),[J,Oe]=l.useState(!1),[Is,Ws]=l.useState([]),[$s,Ke]=l.useState(!1),[$e,Ps]=l.useState({page:1,per_page:10,total:0,pages:0});if(!p||p.id!==3)return e.jsx(qs,{to:"/"});l.useEffect(()=>{Pe(),Es(),Bs(),As()},[]),l.useEffect(()=>{h===1?Ds():h===2?Fs():h===6&&Fe()},[h]);const Ds=async()=>{try{o(!0);const s=await m.get("/api/posts/feed?limit=50");s.data&&s.data.posts&&fe(s.data.posts)}catch{c("error","\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u043F\u043E\u0441\u0442\u044B")}finally{o(!1)}},Fs=async()=>{try{o(!0);const s=await m.get("/api/music");s.data&&s.data.tracks&&be(s.data.tracks)}catch{c("error","\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0442\u0440\u0435\u043A\u0438")}finally{o(!1)}},Pe=async()=>{try{o(!0);let s="/api/admin/users";ge&&(s+=`?search=${ge}`);const r=await m.get(s);pe(r.data.users||[])}catch{c("error","\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439")}finally{o(!1)}},Es=async()=>{try{const s=await m.get("/api/admin/badge-types");us(s.data.badge_types||[])}catch{c("error","\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0434\u043E\u0441\u0442\u0443\u043F\u043D\u044B\u0435 \u0437\u043D\u0430\u0447\u043A\u0438")}},Bs=async()=>{try{o(!0);const s=await m.get("/api/admin/moderators");le(s.data.moderators||[])}catch{c("error","\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u043C\u043E\u0434\u0435\u0440\u0430\u0442\u043E\u0440\u043E\u0432")}finally{o(!1)}},As=async()=>{try{o(!0);const s=await m.get("/api/admin/bug-reports");ke(s.data.bug_reports||[])}catch{c("error","\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0431\u0430\u0433-\u0440\u0435\u043F\u043E\u0440\u0442\u044B")}finally{o(!1)}},c=(s,r)=>{Ie({open:!0,message:r,severity:s})},qe=(s,r)=>{Q(r)},Je=()=>{Pe()},Ge=s=>{ws(s),ae(!0)},De=async()=>{try{let s;o(!0),oe(n.id)?(s=await m.delete(`/api/admin/moderators/${n.id}`),s.data.success&&(c("success","\u041C\u043E\u0434\u0435\u0440\u0430\u0442\u043E\u0440\u0441\u043A\u0438\u0435 \u043F\u0440\u0430\u0432\u0430 \u043E\u0442\u043E\u0437\u0432\u0430\u043D\u044B"),le(A.filter(r=>r.user_id!==n.id)))):(s=await m.post("/api/admin/moderators",{user_id:n.id,permissions:j}),s.data.success&&(c("success","\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u043D\u0430\u0437\u043D\u0430\u0447\u0435\u043D \u043C\u043E\u0434\u0435\u0440\u0430\u0442\u043E\u0440\u043E\u043C"),le([...A,{user_id:n.id,user_name:n.name,user_username:n.username,permissions:j}])))}catch{c("error","\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u0441\u0442\u0430\u0442\u0443\u0441 \u043C\u043E\u0434\u0435\u0440\u0430\u0442\u043E\u0440\u0430")}finally{o(!1),U(!1)}},Ne=s=>{L(s);const r=A.find(g=>g.user_id===s.id);k(r?r.permissions:{delete_music:!1,delete_posts:!1,delete_avatar:!1,delete_comments:!1,change_user_name:!1,change_username:!1,manage_bug_reports:!1,delete_bug_reports:!1}),U(!0)},oe=s=>A.some(r=>r.user_id===s),Fe=async(s=1)=>{try{Ke(!0);const r=await m.get(`/api/admin/users/${p.id}/keys?page=${s}&per_page=10&_nocache=${Date.now()}`);Ws(r.data.keys||[]),Ps({page:r.data.page,per_page:r.data.per_page,total:r.data.total,pages:r.data.pages})}catch{c("error","\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u043A\u043B\u044E\u0447\u0438 \u0430\u043A\u0442\u0438\u0432\u0430\u0446\u0438\u0438")}finally{Ke(!1)}},Ms=e.jsxs(W,{open:zs,onClose:()=>!J&&X(!1),fullWidth:!0,maxWidth:"sm",children:[e.jsxs($,{children:["\u0413\u0435\u043D\u0435\u0440\u0430\u0446\u0438\u044F \u043A\u043B\u044E\u0447\u0435\u0439 \u0430\u043A\u0442\u0438\u0432\u0430\u0446\u0438\u0438",!J&&e.jsx(y,{"aria-label":"close",onClick:()=>X(!1),sx:{position:"absolute",right:8,top:8},children:e.jsx(rr,{})})]}),e.jsx(P,{children:e.jsx(a,{sx:{mt:1},children:q.length>0?e.jsxs(a,{sx:{mb:2},children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsx(i,{variant:"subtitle1",fontWeight:"bold",children:"\u0421\u0433\u0435\u043D\u0435\u0440\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u044B\u0435 \u043A\u043B\u044E\u0447\u0438:"}),e.jsx(x,{size:"small",startIcon:e.jsx(cr,{}),onClick:()=>{if(q.length>0){const s=q.join(`
`);navigator.clipboard.writeText(s).then(()=>{c("success","\u041A\u043B\u044E\u0447\u0438 \u0441\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u043D\u044B \u0432 \u0431\u0443\u0444\u0435\u0440 \u043E\u0431\u043C\u0435\u043D\u0430")}).catch(r=>{c("error","\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0441\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043A\u043B\u044E\u0447\u0438")})}},children:"\u041A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0432\u0441\u0435"})]}),e.jsx(S,{variant:"outlined",sx:{p:2,maxHeight:200,overflow:"auto",bgcolor:"rgba(0, 0, 0, 0.03)"},children:q.map((s,r)=>e.jsx(i,{variant:"body2",fontFamily:"monospace",sx:{mb:.5},children:s},r))}),e.jsx(a,{sx:{mt:2,display:"flex",justifyContent:"center"},children:e.jsx(x,{variant:"outlined",onClick:()=>{We([])},children:"\u0421\u0433\u0435\u043D\u0435\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0435\u0449\u0435"})})]}):e.jsxs(v,{container:!0,spacing:2,children:[e.jsx(v,{item:!0,xs:12,children:e.jsxs(M,{fullWidth:!0,children:[e.jsx(de,{children:"\u0422\u0438\u043F \u043A\u043B\u044E\u0447\u0430"}),e.jsxs(Y,{value:d.type,label:"\u0422\u0438\u043F \u043A\u043B\u044E\u0447\u0430",onChange:s=>{const r=s.target.value;I({...d,type:r,points:r==="points"?1e3:0,subscription_type:"basic",subscription_duration_days:r==="subscription"?30:0})},children:[e.jsx(f,{value:"points",children:"\u0411\u0430\u043B\u043B\u044B"}),e.jsx(f,{value:"subscription",children:"\u041F\u043E\u0434\u043F\u0438\u0441\u043A\u0430"})]})]})}),d.type==="points"?e.jsx(v,{item:!0,xs:12,sm:6,children:e.jsx(D,{label:"\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0431\u0430\u043B\u043B\u043E\u0432",type:"number",fullWidth:!0,value:d.points,onChange:s=>I({...d,points:parseInt(s.target.value)||0}),InputProps:{inputProps:{min:1}}})}):e.jsxs(e.Fragment,{children:[e.jsx(v,{item:!0,xs:12,sm:6,children:e.jsxs(M,{fullWidth:!0,children:[e.jsx(de,{children:"\u0422\u0438\u043F \u043F\u043E\u0434\u043F\u0438\u0441\u043A\u0438"}),e.jsxs(Y,{value:d.subscription_type,label:"\u0422\u0438\u043F \u043F\u043E\u0434\u043F\u0438\u0441\u043A\u0438",onChange:s=>I({...d,subscription_type:s.target.value}),children:[e.jsx(f,{value:"basic",children:"\u0411\u0430\u0437\u043E\u0432\u0430\u044F"}),e.jsx(f,{value:"premium",children:"\u041F\u0440\u0435\u043C\u0438\u0443\u043C"}),e.jsx(f,{value:"ultimate",children:"\u0423\u043B\u044C\u0442\u0438\u043C\u0435\u0439\u0442"})]})]})}),e.jsx(v,{item:!0,xs:12,sm:6,children:e.jsx(D,{label:"\u0421\u0440\u043E\u043A \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044F \u043F\u043E\u0434\u043F\u0438\u0441\u043A\u0438 (\u0434\u043D\u0435\u0439)",type:"number",fullWidth:!0,value:d.subscription_duration_days,onChange:s=>I({...d,subscription_duration_days:parseInt(s.target.value)||30}),InputProps:{inputProps:{min:1}}})})]}),e.jsx(v,{item:!0,xs:12,sm:6,children:e.jsx(D,{label:"\u041C\u0430\u043A\u0441. \u0447\u0438\u0441\u043B\u043E \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u0439",type:"number",fullWidth:!0,value:d.max_uses,onChange:s=>I({...d,max_uses:parseInt(s.target.value)||1}),InputProps:{inputProps:{min:1}},helperText:"\u0421\u043A\u043E\u043B\u044C\u043A\u043E \u0440\u0430\u0437 \u043C\u043E\u0436\u043D\u043E \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C \u043A\u0430\u0436\u0434\u044B\u0439 \u043A\u043B\u044E\u0447"})}),e.jsx(v,{item:!0,xs:12,sm:6,children:e.jsx(D,{label:"\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u043A\u043B\u044E\u0447\u0435\u0439",type:"number",fullWidth:!0,value:d.count,onChange:s=>I({...d,count:parseInt(s.target.value)||1}),InputProps:{inputProps:{min:1,max:100}},helperText:"\u041E\u0442 1 \u0434\u043E 100 \u043A\u043B\u044E\u0447\u0435\u0439"})}),e.jsx(v,{item:!0,xs:12,sm:6,children:e.jsx(D,{label:"\u0421\u0440\u043E\u043A \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044F (\u0434\u043D\u0435\u0439)",type:"number",fullWidth:!0,value:d.expires_days,onChange:s=>I({...d,expires_days:parseInt(s.target.value)||0}),InputProps:{inputProps:{min:0}},helperText:"0 = \u0431\u0435\u0441\u0441\u0440\u043E\u0447\u043D\u043E"})}),e.jsx(v,{item:!0,xs:12,children:e.jsx(D,{label:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435",fullWidth:!0,multiline:!0,rows:2,value:d.description,onChange:s=>I({...d,description:s.target.value}),helperText:"\u041D\u0435\u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0434\u043B\u044F \u0430\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440\u043E\u0432"})})]})})}),e.jsxs(F,{children:[q.length===0&&e.jsxs(e.Fragment,{children:[e.jsx(x,{onClick:()=>X(!1),disabled:J,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),e.jsx(x,{variant:"contained",color:"primary",onClick:async()=>{try{if(Oe(!0),d.type==="points"){if(d.points<=0)return void c("error","\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0431\u0430\u043B\u043B\u043E\u0432 \u0434\u043E\u043B\u0436\u043D\u043E \u0431\u044B\u0442\u044C \u0431\u043E\u043B\u044C\u0448\u0435 \u043D\u0443\u043B\u044F")}else if(d.type==="subscription"&&d.subscription_duration_days<=0)return void c("error","\u0421\u0440\u043E\u043A \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044F \u043F\u043E\u0434\u043F\u0438\u0441\u043A\u0438 \u0434\u043E\u043B\u0436\u0435\u043D \u0431\u044B\u0442\u044C \u0431\u043E\u043B\u044C\u0448\u0435 \u043D\u0443\u043B\u044F");const s=await m.post(`/api/admin/users/${p.id}/generate-keys`,d);s.data.success?(We(s.data.keys),c("success",`\u0423\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u0433\u0435\u043D\u0435\u0440\u0438\u0440\u043E\u0432\u0430\u043D\u043E ${s.data.keys.length} \u043A\u043B\u044E\u0447\u0435\u0439`),Fe()):c("error",s.data.error||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0433\u0435\u043D\u0435\u0440\u0430\u0446\u0438\u0438 \u043A\u043B\u044E\u0447\u0435\u0439")}catch(s){c("error",s.response?.data?.error||"\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0433\u0435\u043D\u0435\u0440\u0430\u0446\u0438\u0438 \u043A\u043B\u044E\u0447\u0435\u0439")}finally{Oe(!1)}},disabled:J,startIcon:J?e.jsx(_,{size:20}):null,children:J?"\u0413\u0435\u043D\u0435\u0440\u0430\u0446\u0438\u044F...":"\u0421\u0433\u0435\u043D\u0435\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C"})]}),q.length>0&&e.jsx(x,{onClick:()=>{X(!1),We([])},children:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C"})]})]});return e.jsxs(Hs,{maxWidth:"lg",sx:{py:4},children:[e.jsxs(jr,{children:[e.jsx(Xs,{sx:{fontSize:40,mr:2,color:"primary.main"}}),e.jsx(i,{variant:"h4",component:"h1",children:"\u041F\u0430\u043D\u0435\u043B\u044C \u0430\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440\u0430"})]}),e.jsx(a,{sx:{mb:3},children:e.jsxs(Xe,{value:h,onChange:qe,variant:"scrollable",scrollButtons:"auto",sx:{borderBottom:1,borderColor:"divider",mb:3},children:[e.jsx(w,{icon:e.jsx(sr,{}),label:"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0438",id:"tab-0","aria-controls":"tabpanel-0"}),e.jsx(w,{icon:e.jsx(Gs,{}),label:"\u041F\u043E\u0441\u0442\u044B",id:"tab-1","aria-controls":"tabpanel-1"}),e.jsx(w,{icon:e.jsx(Me,{}),label:"\u041C\u0443\u0437\u044B\u043A\u0430",id:"tab-2","aria-controls":"tabpanel-2"}),e.jsx(w,{icon:e.jsx(ue,{}),label:"\u041C\u043E\u0434\u0435\u0440\u0430\u0442\u043E\u0440\u044B",id:"tab-3","aria-controls":"tabpanel-3"}),e.jsx(w,{icon:e.jsx(xs,{}),label:"\u0411\u0430\u0433-\u0440\u0435\u043F\u043E\u0440\u0442\u044B",id:"tab-4","aria-controls":"tabpanel-4"}),e.jsx(w,{icon:e.jsx(He,{}),label:"\u0410\u043A\u043A\u0430\u0443\u043D\u0442\u044B",id:"tab-5","aria-controls":"tabpanel-5",disabled:!0}),e.jsx(w,{icon:e.jsx(lr,{}),label:"\u041A\u043B\u044E\u0447\u0438",id:"tab-6","aria-controls":"tabpanel-6"})]})}),h===0&&e.jsx(e.Fragment,{children:e.jsxs(N,{children:[e.jsx(mr,{children:e.jsx(D,{label:"\u041F\u043E\u0438\u0441\u043A \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F",variant:"outlined",value:ge,onChange:s=>ps(s.target.value),fullWidth:!0,size:"small",onKeyPress:s=>s.key==="Enter"&&Je(),InputProps:{endAdornment:e.jsx(y,{size:"small",onClick:Je,children:e.jsx(Ns,{})})}})}),u?e.jsx(a,{sx:{display:"flex",justifyContent:"center",my:3},children:e.jsx(_,{})}):e.jsxs(xe,{children:[e.jsxs(he,{children:[e.jsx(je,{children:e.jsxs(z,{children:[e.jsx(t,{children:"ID"}),e.jsx(t,{children:"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C"}),e.jsx(t,{children:"Email / Telegram ID"}),e.jsx(t,{children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),e.jsx(t,{children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044F"})]})}),e.jsx(me,{children:V.slice(Se*ce,Se*ce+ce).map(s=>e.jsxs(z,{children:[e.jsx(t,{children:s.id}),e.jsx(t,{children:e.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(G,{src:s.photo?s.photo.startsWith("/")?s.photo:`/static/uploads/avatar/${s.id}/${s.photo}`:void 0,sx:{mr:1},onError:r=>{r.target.onerror=null,r.target.src="/static/uploads/avatar/system/avatar.png"}}),e.jsxs(a,{children:[e.jsxs(i,{variant:"subtitle2",sx:{fontWeight:"bold",display:"flex",alignItems:"center"},children:[s.name,s.verification_status==="verified"&&e.jsx(H,{sx:{fontSize:16,ml:.5,color:s.verification_level===1?"#9e9e9e":s.verification_level===2?"#d67270":s.verification_level===3?"#b39ddb":s.verification_level===4?"#ff9800":s.verification_level===5?"#4caf50":s.verification_level===6?"#1e88e5":s.verification_level===7?"#7c4dff":"#D0BCFF"}})]}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:["@",s.username]})]})]})}),e.jsx(t,{children:e.jsxs(a,{children:[s.email?e.jsx(i,{variant:"body2",children:s.email}):e.jsx(i,{variant:"body2",color:"text.secondary",children:"\u041D\u0435\u0442 email"}),s.telegram_id&&e.jsxs(i,{variant:"caption",color:"text.secondary",children:["Telegram ID: ",s.telegram_id]})]})}),e.jsx(t,{children:s.is_banned?e.jsx(b,{size:"small",label:"\u0417\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u043D",color:"error",variant:"outlined"}):e.jsx(b,{size:"small",label:"\u0410\u043A\u0442\u0438\u0432\u0435\u043D",color:"success",variant:"outlined"})}),e.jsx(t,{children:e.jsxs(a,{sx:{display:"flex",gap:1},children:[e.jsx(y,{size:"small",color:"primary",onClick:()=>(r=>{L(r),(async g=>{try{const C=await m.get(`/api/admin/users/${g}/posts`);fe(C.data.posts||[])}catch{c("error","\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u043F\u043E\u0441\u0442\u044B \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F")}})(r.id),(async g=>{try{const C=await m.get(`/api/admin/users/${g}/tracks`);be(C.data.tracks||[])}catch{c("error","\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0442\u0440\u0435\u043A\u0438 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F")}})(r.id),ve(!0)})(s),children:e.jsx(ir,{fontSize:"small"})}),e.jsx(y,{size:"small",color:"primary",onClick:()=>(r=>{L(r),Te(r.verification_level||1),se(!0)})(s),children:e.jsx(os,{fontSize:"small"})}),e.jsx(y,{size:"small",color:"secondary",onClick:()=>(r=>{L(r),Ve(""),re(!0)})(s),children:e.jsx(Us,{fontSize:"small"})}),e.jsx(y,{size:"small",color:s.is_banned?"success":"error",onClick:()=>(r=>{L(r),Le(""),ie(!0)})(s),children:e.jsx(er,{fontSize:"small"})}),e.jsx(y,{color:oe(s.id)?"success":"default",onClick:()=>Ne(s),children:e.jsx(ue,{fontSize:"small"})})]})})]},s.id))})]}),e.jsx(Os,{rowsPerPageOptions:[5,10,25],component:"div",count:V.length,rowsPerPage:ce,page:Se,onPageChange:(s,r)=>Re(r),onRowsPerPageChange:s=>{Ss(parseInt(s.target.value,10)),Re(0)}})]})]})}),h===1&&e.jsx(N,{children:u?e.jsx(a,{sx:{display:"flex",justifyContent:"center",my:3},children:e.jsx(_,{})}):e.jsxs(a,{children:[e.jsx(i,{variant:"h6",sx:{mb:2},children:"\u041F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435 \u043F\u043E\u0441\u0442\u044B"}),R.length>0?R.map(s=>e.jsxs(S,{sx:{p:2,mb:2,bgcolor:"background.default"},children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(G,{src:s.author_avatar?s.author_avatar.startsWith("/")?s.author_avatar:`/static/uploads/avatar/${s.author_id}/${s.author_avatar}`:void 0,sx:{mr:1}}),e.jsxs(a,{children:[e.jsx(i,{variant:"subtitle2",children:s.author_name}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:["@",s.author_username]})]})]}),e.jsx(y,{color:"error",onClick:()=>Ge(s),children:e.jsx(T,{})})]}),e.jsx(i,{variant:"body1",sx:{mb:2,whiteSpace:"pre-wrap"},children:s.content}),s.image&&e.jsx(a,{sx:{mb:2,maxWidth:"100%",maxHeight:300,overflow:"hidden"},children:e.jsx("img",{src:s.image.startsWith("/")?s.image:`/static/uploads/posts/${s.id}/${s.image}`,alt:"Post attachment",style:{width:"100%",height:"auto",borderRadius:"8px"}})}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:[new Date(s.created_at).toLocaleString()," \u2022 ",s.comments_count," \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0435\u0432 \u2022 ",s.likes_count," \u043B\u0430\u0439\u043A\u043E\u0432"]})]},s.id)):e.jsx(i,{children:"\u041D\u0435\u0442 \u043F\u043E\u0441\u0442\u043E\u0432 \u0434\u043B\u044F \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F"})]})}),h===2&&e.jsx(N,{children:u?e.jsx(a,{sx:{display:"flex",justifyContent:"center",my:3},children:e.jsx(_,{})}):e.jsxs(a,{children:[e.jsx(i,{variant:"h6",sx:{mb:2},children:"\u041C\u0443\u0437\u044B\u043A\u0430\u043B\u044C\u043D\u044B\u0435 \u0442\u0440\u0435\u043A\u0438"}),O.length>0?O.map(s=>e.jsxs(S,{sx:{p:2,mb:2,bgcolor:"background.default"},children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(G,{src:s.cover?`/static/uploads/tracks/${s.id}/${s.cover}`:void 0,sx:{mr:1,width:50,height:50}}),e.jsxs(a,{children:[e.jsx(i,{variant:"subtitle1",children:s.title}),e.jsx(i,{variant:"subtitle2",children:s.artist}),e.jsx(i,{variant:"caption",color:"text.secondary",children:s.album||"\u0411\u0435\u0437 \u0430\u043B\u044C\u0431\u043E\u043C\u0430"})]})]}),e.jsx(y,{color:"error",onClick:()=>(r=>{ks(r),ne(!0)})(s),children:e.jsx(T,{})})]}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:["\u0417\u0430\u0433\u0440\u0443\u0436\u0435\u043D: ",new Date(s.created_at).toLocaleString()," \u2022 ",s.duration?`${Math.floor(s.duration/60)}:${String(s.duration%60).padStart(2,"0")}`:"\u041D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u043E"," \u2022 ",s.play_count||0," \u043F\u0440\u043E\u0441\u043B\u0443\u0448\u0438\u0432\u0430\u043D\u0438\u0439"]})]},s.id)):e.jsx(i,{children:"\u041D\u0435\u0442 \u0442\u0440\u0435\u043A\u043E\u0432 \u0434\u043B\u044F \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F"})]})}),h===3&&e.jsxs(N,{children:[e.jsxs(i,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center"},children:[e.jsx(ue,{sx:{mr:1}}),"\u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u043C\u043E\u0434\u0435\u0440\u0430\u0442\u043E\u0440\u0430\u043C\u0438"]}),e.jsx(xe,{component:S,sx:{mb:3},children:e.jsxs(he,{children:[e.jsx(je,{children:e.jsxs(z,{children:[e.jsx(t,{children:"ID"}),e.jsx(t,{children:"\u0418\u043C\u044F"}),e.jsx(t,{children:"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C"}),e.jsx(t,{children:"\u041F\u0440\u0430\u0432\u0430"}),e.jsx(t,{children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044F"})]})}),e.jsxs(me,{children:[A.map(s=>e.jsxs(z,{children:[e.jsx(t,{children:s.user_id}),e.jsx(t,{children:s.user_name}),e.jsxs(t,{children:["@",s.user_username]}),e.jsx(t,{children:e.jsxs(a,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:[s.permissions.delete_music&&e.jsx(b,{label:"\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u043C\u0443\u0437\u044B\u043A\u0438",size:"small",color:"info"}),s.permissions.delete_posts&&e.jsx(b,{label:"\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u043F\u043E\u0441\u0442\u043E\u0432",size:"small",color:"info"}),s.permissions.delete_avatar&&e.jsx(b,{label:"\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u0430\u0432\u0430\u0442\u0430\u0440\u043E\u0432",size:"small",color:"info"}),s.permissions.delete_comments&&e.jsx(b,{label:"\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0435\u0432",size:"small",color:"info"}),s.permissions.change_user_name&&e.jsx(b,{label:"\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435 \u0438\u043C\u0435\u043D\u0438",size:"small",color:"info"}),s.permissions.change_username&&e.jsx(b,{label:"\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435 username",size:"small",color:"info"}),s.permissions.manage_bug_reports&&e.jsx(b,{label:"\u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0431\u0430\u0433-\u0440\u0435\u043F\u043E\u0440\u0442\u0430\u043C\u0438",size:"small",color:"info"}),s.permissions.delete_bug_reports&&e.jsx(b,{label:"\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u0431\u0430\u0433-\u0440\u0435\u043F\u043E\u0440\u0442\u043E\u0432",size:"small",color:"info"})]})}),e.jsx(t,{children:e.jsxs(a,{sx:{display:"flex"},children:[e.jsx(y,{color:"primary",onClick:()=>{const r=V.find(g=>g.id===s.user_id)||{id:s.user_id,name:s.user_name,username:s.user_username};Ne(r)},children:e.jsx(hr,{})}),e.jsx(y,{color:"error",onClick:()=>{const r=V.find(g=>g.id===s.user_id)||{id:s.user_id,name:s.user_name,username:s.user_username};L(r),De()},children:e.jsx(T,{})})]})})]},s.user_id)),A.length===0&&e.jsx(z,{children:e.jsx(t,{colSpan:5,align:"center",children:"\u041D\u0435\u0442 \u043C\u043E\u0434\u0435\u0440\u0430\u0442\u043E\u0440\u043E\u0432"})})]})]})}),e.jsxs(i,{variant:"body1",sx:{mb:2},children:["\u0414\u043B\u044F \u043D\u0430\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F \u043C\u043E\u0434\u0435\u0440\u0430\u0442\u043E\u0440\u043E\u043C, \u043D\u0430\u0439\u0434\u0438\u0442\u0435 \u0435\u0433\u043E \u0432 \u0441\u043F\u0438\u0441\u043A\u0435 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439 \u0438 \u043D\u0430\u0436\u043C\u0438\u0442\u0435 \u0438\u043A\u043E\u043D\u043A\u0443 ",e.jsx(ue,{fontSize:"small",sx:{verticalAlign:"middle"}})]})]}),h===4&&e.jsxs(N,{children:[e.jsxs(i,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center"},children:[e.jsx(xs,{sx:{mr:1}}),"\u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0431\u0430\u0433-\u0440\u0435\u043F\u043E\u0440\u0442\u0430\u043C\u0438"]}),e.jsx(xe,{component:S,sx:{mb:3},children:e.jsxs(he,{children:[e.jsx(je,{children:e.jsxs(z,{children:[e.jsx(t,{children:"ID"}),e.jsx(t,{children:"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C"}),e.jsx(t,{children:"\u0417\u0430\u0433\u043E\u043B\u043E\u0432\u043E\u043A"}),e.jsx(t,{children:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435"}),e.jsx(t,{children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),e.jsx(t,{children:"\u0414\u0430\u0442\u0430"}),e.jsx(t,{children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044F"})]})}),e.jsx(me,{children:we.map(s=>e.jsxs(z,{children:[e.jsx(t,{children:s.id}),e.jsx(t,{children:e.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(G,{src:s.user_photo?s.user_photo.startsWith("/")?s.user_photo:`/static/uploads/avatar/${s.user_id}/${s.user_photo}`:void 0,sx:{mr:1,width:24,height:24}}),e.jsx(i,{variant:"body2",children:s.user_name})]})}),e.jsx(t,{children:e.jsx(i,{variant:"body2",children:s.title})}),e.jsx(t,{children:e.jsx(i,{variant:"body2",sx:{maxWidth:200,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:s.description})}),e.jsx(t,{children:e.jsx(b,{label:s.status==="new"?"\u041D\u043E\u0432\u044B\u0439":s.status==="in_progress"?"\u0412 \u0440\u0430\u0431\u043E\u0442\u0435":s.status==="fixed"?"\u0418\u0441\u043F\u0440\u0430\u0432\u043B\u0435\u043D":s.status==="wont_fix"?"\u041D\u0435 \u0431\u0443\u0434\u0435\u0442 \u0438\u0441\u043F\u0440\u0430\u0432\u043B\u0435\u043D":"\u041D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u043E",color:s.status==="new"?"info":s.status==="in_progress"?"warning":s.status==="fixed"?"success":s.status==="wont_fix"?"error":"default",size:"small"})}),e.jsx(t,{children:e.jsx(i,{variant:"body2",children:new Date(s.created_at).toLocaleDateString()})}),e.jsx(t,{children:e.jsxs(a,{sx:{display:"flex"},children:[e.jsx(M,{variant:"standard",sx:{minWidth:120,mr:1},children:e.jsxs(Y,{value:s.status,onChange:r=>(async(g,C)=>{try{o(!0);const Ee=await m.put(`/api/admin/bug-reports/${g}`,{status:C});if(!Ee.data.success)throw new Error(Ee.data.error||"Failed to update bug report status");c("success","\u0421\u0442\u0430\u0442\u0443\u0441 \u0431\u0430\u0433-\u0440\u0435\u043F\u043E\u0440\u0442\u0430 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D"),ke(we.map(Be=>Be.id===g?{...Be,status:C}:Be))}catch{c("error","\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u0441\u0442\u0430\u0442\u0443\u0441 \u0431\u0430\u0433-\u0440\u0435\u043F\u043E\u0440\u0442\u0430")}finally{o(!1)}})(s.id,r.target.value),size:"small",children:[e.jsx(f,{value:"new",children:"\u041D\u043E\u0432\u044B\u0439"}),e.jsx(f,{value:"in_progress",children:"\u0412 \u0440\u0430\u0431\u043E\u0442\u0435"}),e.jsx(f,{value:"fixed",children:"\u0418\u0441\u043F\u0440\u0430\u0432\u043B\u0435\u043D"}),e.jsx(f,{value:"wont_fix",children:"\u041D\u0435 \u0431\u0443\u0434\u0435\u0442 \u0438\u0441\u043F\u0440\u0430\u0432\u043B\u0435\u043D"})]})}),e.jsx(y,{color:"error",onClick:()=>(async r=>{try{o(!0);const g=await m.delete(`/api/admin/bug-reports/${r}`);if(!g.data.success)throw new Error(g.data.error||"Failed to delete bug report");c("success","\u0411\u0430\u0433-\u0440\u0435\u043F\u043E\u0440\u0442 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0443\u0434\u0430\u043B\u0435\u043D"),ke(we.filter(C=>C.id!==r))}catch{c("error","\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u0431\u0430\u0433-\u0440\u0435\u043F\u043E\u0440\u0442")}finally{o(!1)}})(s.id),size:"small",children:e.jsx(T,{fontSize:"small"})})]})})]},s.id))})]})})]}),h===5&&e.jsx(N,{children:e.jsxs(a,{sx:{display:"flex",flexDirection:"column",alignItems:"center",py:4},children:[e.jsx(He,{sx:{fontSize:60,color:"text.secondary",mb:2}}),e.jsx(i,{variant:"h6",color:"text.secondary",children:"\u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0430\u043A\u043A\u0430\u0443\u043D\u0442\u0430\u043C\u0438 \u0432 \u0440\u0430\u0437\u0440\u0430\u0431\u043E\u0442\u043A\u0435"})]})}),h===6&&e.jsx(a,{sx:{mt:2},children:e.jsxs(S,{sx:{mb:3,p:0,overflow:"hidden"},children:[e.jsxs(a,{sx:{p:2,display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid rgba(0, 0, 0, 0.12)"},children:[e.jsx(i,{variant:"h6",component:"h2",children:"\u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u043A\u043B\u044E\u0447\u0430\u043C\u0438 \u0430\u043A\u0442\u0438\u0432\u0430\u0446\u0438\u0438"}),e.jsxs(a,{sx:{display:"flex",gap:2},children:[e.jsx(x,{variant:"outlined",color:"primary",startIcon:e.jsx(cs,{}),component:"a",href:"https://www.donationalerts.com/r/qsoul",target:"_blank",rel:"noopener noreferrer",children:"\u041E\u0442\u043A\u0440\u044B\u0442\u044C Donation Alerts"}),e.jsx(x,{variant:"contained",color:"primary",startIcon:e.jsx(Zs,{}),onClick:()=>X(!0),children:"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043A\u043B\u044E\u0447\u0438"})]})]}),$s?e.jsx(a,{sx:{display:"flex",justifyContent:"center",p:3},children:e.jsx(_,{})}):e.jsxs(e.Fragment,{children:[e.jsx(xe,{children:e.jsxs(he,{children:[e.jsx(je,{children:e.jsxs(z,{children:[e.jsx(t,{children:"\u041A\u043B\u044E\u0447"}),e.jsx(t,{children:"\u0422\u0438\u043F"}),e.jsx(t,{children:"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435"}),e.jsx(t,{children:"\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u0439"}),e.jsx(t,{children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),e.jsx(t,{children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044F"})]})}),e.jsx(me,{children:Is.map(s=>e.jsxs(z,{children:[e.jsx(t,{children:s.key}),e.jsx(t,{align:"center",children:s.key_type==="points"?e.jsx(b,{icon:e.jsx(cs,{style:{color:"#7c4dff"}}),label:`${s.points_value} \u0431\u0430\u043B\u043B\u043E\u0432`,color:"primary",variant:"outlined",sx:{fontWeight:"bold",fontSize:15,px:1.5,bgcolor:"rgba(124,77,255,0.08)"}}):s.key_type==="subscription"?e.jsx(b,{icon:e.jsx(os,{style:{color:"#4caf50"}}),label:s.subscription_type==="basic"?"\u0411\u0430\u0437\u043E\u0432\u0430\u044F":s.subscription_type==="premium"?"\u041F\u0440\u0435\u043C\u0438\u0443\u043C":s.subscription_type==="ultimate"?"\u0423\u043B\u044C\u0442\u0438\u043C\u0435\u0439\u0442":s.subscription_type,color:"success",variant:"outlined",sx:{fontWeight:"bold",fontSize:15,px:1.5,bgcolor:"rgba(76,175,80,0.08)"}}):"-"}),e.jsxs(t,{children:[s.current_uses,"/",s.max_uses]}),e.jsx(t,{children:s.is_valid?e.jsx(b,{label:"\u0410\u043A\u0442\u0438\u0432\u0435\u043D",color:"success",size:"small"}):e.jsx(b,{label:"\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D",color:"error",size:"small"})}),e.jsx(t,{children:e.jsx(y,{size:"small",onClick:()=>handleDeleteKey(s.id),color:"error",children:e.jsx(T,{})})})]},s.id))})]})}),$e.pages>1&&e.jsx(a,{sx:{display:"flex",justifyContent:"center",p:2},children:e.jsx(Rs,{count:$e.pages,page:$e.page,onChange:(s,r)=>Fe(r),color:"primary"})})]})]})}),e.jsxs(W,{open:gs,onClose:()=>se(!1),children:[e.jsx($,{children:"\u0412\u0435\u0440\u0438\u0444\u0438\u043A\u0430\u0446\u0438\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F"}),e.jsx(P,{children:e.jsxs(a,{sx:{py:2},children:[e.jsxs(M,{fullWidth:!0,sx:{mb:2},children:[e.jsx(de,{id:"verification-level-label",children:"\u0423\u0440\u043E\u0432\u0435\u043D\u044C \u0432\u0435\u0440\u0438\u0444\u0438\u043A\u0430\u0446\u0438\u0438"}),e.jsxs(Y,{labelId:"verification-level-label",id:"verification-level",value:ye,onChange:s=>Te(s.target.value),label:"\u0423\u0440\u043E\u0432\u0435\u043D\u044C \u0432\u0435\u0440\u0438\u0444\u0438\u043A\u0430\u0446\u0438\u0438",children:[e.jsx(f,{value:0,children:e.jsx("em",{children:"\u041D\u0435\u0442 \u0432\u0435\u0440\u0438\u0444\u0438\u043A\u0430\u0446\u0438\u0438"})}),e.jsx(f,{value:1,children:e.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(H,{sx:{color:"#9e9e9e",mr:1}}),"\u0412\u0435\u0440\u0438\u0444\u0438\u0446\u0438\u0440\u043E\u0432\u0430\u043D"]})}),e.jsx(f,{value:2,children:e.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(H,{sx:{color:"#d67270",mr:1}}),"\u041E\u0444\u0438\u0446\u0438\u0430\u043B\u044C\u043D\u044B\u0439 \u0430\u043A\u043A\u0430\u0443\u043D\u0442"]})}),e.jsx(f,{value:3,children:e.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(H,{sx:{color:"#b39ddb",mr:1}}),"VIP \u0430\u043A\u043A\u0430\u0443\u043D\u0442"]})}),e.jsx(f,{value:4,children:e.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(H,{sx:{color:"#ff9800",mr:1}}),"\u041C\u043E\u0434\u0435\u0440\u0430\u0442\u043E\u0440"]})}),e.jsx(f,{value:5,children:e.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(H,{sx:{color:"#4caf50",mr:1}}),"\u041F\u043E\u0434\u0434\u0435\u0440\u0436\u043A\u0430"]})}),e.jsx(f,{value:6,children:e.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ls,{icon:"material-symbols:verified-rounded",style:{fontSize:"24px",color:"#1e88e5",marginRight:"8px"}}),"\u041A\u0430\u043D\u0430\u043B (\u0412\u0435\u0440\u0438\u0444\u0438\u0446\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u044B\u0439)"]})}),e.jsx(f,{value:7,children:e.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ls,{icon:"material-symbols:verified-user-rounded",style:{fontSize:"24px",color:"#7c4dff",marginRight:"8px"}}),"\u041A\u0430\u043D\u0430\u043B (\u041F\u0440\u0435\u043C\u0438\u0443\u043C)"]})})]})]}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"\u0412\u0435\u0440\u0438\u0444\u0438\u043A\u0430\u0446\u0438\u044F \u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0430\u0435\u0442, \u0447\u0442\u043E \u0434\u0430\u043D\u043D\u044B\u0439 \u0430\u043A\u043A\u0430\u0443\u043D\u0442 \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043E\u0444\u0438\u0446\u0438\u0430\u043B\u044C\u043D\u044B\u043C \u0438\u043B\u0438 \u0438\u043C\u0435\u0435\u0442 \u043E\u0441\u043E\u0431\u044B\u0439 \u0441\u0442\u0430\u0442\u0443\u0441"})]})}),e.jsxs(F,{children:[e.jsx(x,{onClick:()=>se(!1),color:"inherit",children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),e.jsx(x,{onClick:async()=>{try{o(!0);const s=await m.post(`/api/admin/users/${n.id}/verify`,{verification_level:ye});if(!s.data.success)throw new Error(s.data.error||"Failed to verify user");c("success","\u0421\u0442\u0430\u0442\u0443\u0441 \u0432\u0435\u0440\u0438\u0444\u0438\u043A\u0430\u0446\u0438\u0438 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D"),pe(V.map(r=>r.id===n.id?{...r,verification_status:s.data.verification_status,verification_level:ye}:r))}catch{c("error","\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u0441\u0442\u0430\u0442\u0443\u0441 \u0432\u0435\u0440\u0438\u0444\u0438\u043A\u0430\u0446\u0438\u0438")}finally{o(!1),se(!1)}},color:"primary",variant:"contained",disabled:u,children:u?e.jsx(_,{size:24}):"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"})]})]}),e.jsxs(W,{open:fs,onClose:()=>re(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx($,{children:"\u0412\u044B\u0434\u0430\u0442\u044C \u0437\u043D\u0430\u0447\u043E\u043A \u0434\u043E\u0441\u0442\u0438\u0436\u0435\u043D\u0438\u044F"}),e.jsx(P,{children:e.jsxs(a,{sx:{my:2},children:[e.jsxs(i,{variant:"subtitle1",sx:{mb:2},children:["\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C: ",n?.name," (@",n?.username,")"]}),e.jsxs(M,{fullWidth:!0,sx:{mt:2},children:[e.jsx(de,{children:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0437\u043D\u0430\u0447\u043E\u043A"}),e.jsx(Y,{value:_e,onChange:s=>Ve(s.target.value),label:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0437\u043D\u0430\u0447\u043E\u043A",children:ms.map(s=>e.jsx(f,{value:s.id,children:e.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(a,{component:"img",src:s.image_path,alt:s.name,sx:{width:30,height:30,mr:2,borderRadius:"50%"},onError:r=>{r.target.src="/static/img/default-badge.png"}}),e.jsx(i,{children:s.display_name}),s.users_count>0&&e.jsx(b,{size:"small",label:`${s.users_count} \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439`,color:"primary",variant:"outlined",sx:{ml:2}})]})},s.id))})]})]})}),e.jsxs(F,{children:[e.jsx(x,{onClick:()=>re(!1),color:"inherit",children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),e.jsx(x,{onClick:async()=>{try{o(!0);const s=await m.post(`/api/admin/users/${n.id}/give-achievement`,{badge_type_id:_e});if(!s.data.success)throw new Error(s.data.error||"Failed to give achievement");c("success","\u0414\u043E\u0441\u0442\u0438\u0436\u0435\u043D\u0438\u0435 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0432\u044B\u0434\u0430\u043D\u043E \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044E"),Pe()}catch{c("error","\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0432\u044B\u0434\u0430\u0442\u044C \u0434\u043E\u0441\u0442\u0438\u0436\u0435\u043D\u0438\u0435")}finally{o(!1),re(!1)}},color:"primary",variant:"contained",disabled:u||!_e,children:u?e.jsx(_,{size:24}):"\u0412\u044B\u0434\u0430\u0442\u044C \u0437\u043D\u0430\u0447\u043E\u043A"})]})]}),e.jsxs(W,{open:bs,onClose:()=>ie(!1),children:[e.jsx($,{children:n?.is_banned?"\u0420\u0430\u0437\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F":"\u0417\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F"}),e.jsx(P,{children:e.jsxs(a,{sx:{my:2},children:[e.jsxs(i,{variant:"subtitle1",sx:{mb:2},children:["\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C: ",n?.name," (",n?.username,")"]}),!n?.is_banned&&e.jsx(D,{fullWidth:!0,label:"\u041F\u0440\u0438\u0447\u0438\u043D\u0430 \u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u043A\u0438",multiline:!0,rows:4,value:Ce,onChange:s=>Le(s.target.value),variant:"outlined",sx:{mt:2}})]})}),e.jsxs(F,{children:[e.jsx(x,{onClick:()=>ie(!1),color:"inherit",children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),e.jsx(x,{onClick:async()=>{try{o(!0);const s=await m.post(`/api/admin/users/${n.id}/ban`,{reason:Ce,is_banned:!n.is_banned});if(!s.data.success)throw new Error(s.data.error||"Failed to update ban status");c("success",n.is_banned?"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u0440\u0430\u0437\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u043D":"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u0437\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u043D"),pe(V.map(r=>r.id===n.id?{...r,is_banned:!r.is_banned}:r))}catch{c("error","\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0438\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u0441\u0442\u0430\u0442\u0443\u0441 \u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u043A\u0438")}finally{o(!1),ie(!1)}},color:n?.is_banned?"success":"error",variant:"contained",disabled:u||!n?.is_banned&&!Ce,children:u?e.jsx(_,{size:24}):n?.is_banned?"\u0420\u0430\u0437\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u0442\u044C":"\u0417\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u0442\u044C"})]})]}),e.jsxs(W,{open:vs,onClose:()=>ae(!1),children:[e.jsx($,{children:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043F\u043E\u0441\u0442"}),e.jsx(P,{children:e.jsxs(a,{sx:{my:2},children:[e.jsx(i,{variant:"subtitle1",children:"\u0412\u044B \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u044D\u0442\u043E\u0442 \u043F\u043E\u0441\u0442?"}),te&&e.jsx(S,{sx:{p:2,mt:2,bgcolor:"background.default"},children:e.jsx(i,{variant:"body2",children:te.content})})]})}),e.jsxs(F,{children:[e.jsx(x,{onClick:()=>ae(!1),color:"inherit",children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),e.jsx(x,{onClick:async()=>{try{o(!0);const s=await m.delete(`/api/admin/posts/${te.id}`);if(!s.data.success)throw new Error(s.data.error||"Failed to delete post");c("success","\u041F\u043E\u0441\u0442 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0443\u0434\u0430\u043B\u0435\u043D"),fe(R.filter(r=>r.id!==te.id))}catch{c("error","\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u043F\u043E\u0441\u0442")}finally{o(!1),ae(!1)}},color:"error",variant:"contained",disabled:u,children:u?e.jsx(_,{size:24}):"\u0423\u0434\u0430\u043B\u0438\u0442\u044C"})]})]}),e.jsxs(W,{open:_s,onClose:()=>ve(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx($,{children:e.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(G,{src:n?.photo?`/static/uploads/avatar/${n?.id}/${n?.photo}`:void 0,sx:{mr:2}}),e.jsxs(a,{children:[e.jsxs(i,{variant:"h6",children:[n?.name,n?.verification_status==="verified"&&e.jsx(H,{sx:{fontSize:16,ml:.5,color:n?.verification_level===1?"#9e9e9e":n?.verification_level===2?"#d67270":n?.verification_level===3?"#b39ddb":n?.verification_level===4?"#ff9800":n?.verification_level===5?"#4caf50":n?.verification_level===6?"#1e88e5":n?.verification_level===7?"#7c4dff":"#D0BCFF"}})]}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:["@",n?.username]})]})]})}),e.jsxs(P,{children:[e.jsxs(Xe,{value:h,onChange:qe,sx:{mb:2},children:[e.jsx(w,{label:"\u041F\u043E\u0441\u0442\u044B"}),e.jsx(w,{label:"\u0422\u0440\u0435\u043A\u0438"}),e.jsx(w,{label:"\u041E\u0431\u0449\u0430\u044F \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F"})]}),h===0&&e.jsxs(a,{children:[e.jsx(i,{variant:"h6",sx:{mb:2},children:"\u041F\u043E\u0441\u0442\u044B \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F"}),R.length===0?e.jsx(i,{variant:"body1",children:"\u0423 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F \u043D\u0435\u0442 \u043F\u043E\u0441\u0442\u043E\u0432"}):e.jsx(Ye,{children:R.map(s=>e.jsxs(ns.Fragment,{children:[e.jsx(Ze,{secondaryAction:e.jsx(y,{edge:"end",onClick:()=>Ge(s),children:e.jsx(T,{})}),children:e.jsx(es,{primary:s.content,secondary:new Date(s.created_at).toLocaleString()})}),e.jsx(ss,{})]},s.id))})]}),h===1&&e.jsxs(a,{children:[e.jsx(i,{variant:"h6",sx:{mb:2},children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u043D\u044B\u0435 \u0442\u0440\u0435\u043A\u0438"}),O.length===0?e.jsx(i,{variant:"body1",children:"\u0423 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F \u043D\u0435\u0442 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u043D\u044B\u0445 \u0442\u0440\u0435\u043A\u043E\u0432"}):e.jsx(Ye,{children:O.map(s=>e.jsxs(ns.Fragment,{children:[e.jsxs(Ze,{children:[e.jsx(Ts,{children:e.jsx(G,{children:e.jsx(Me,{})})}),e.jsx(es,{primary:s.title,secondary:`\u0410\u0440\u0442\u0438\u0441\u0442: ${s.artist} | \u0410\u043B\u044C\u0431\u043E\u043C: ${s.album}`})]}),e.jsx(ss,{})]},s.id))})]}),h===2&&e.jsxs(v,{container:!0,spacing:2,children:[e.jsx(v,{item:!0,xs:12,md:6,children:e.jsxs(rs,{children:[e.jsx(is,{title:"\u041E\u0441\u043D\u043E\u0432\u043D\u0430\u044F \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F"}),e.jsxs(as,{children:[e.jsxs(i,{children:[e.jsx("strong",{children:"ID:"})," ",n?.id]}),e.jsxs(i,{children:[e.jsx("strong",{children:"Email:"})," ",n?.email||"\u041D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D"]}),n?.telegram_id&&e.jsxs(i,{children:[e.jsx("strong",{children:"Telegram ID:"})," ",n?.telegram_id]}),e.jsxs(i,{children:[e.jsx("strong",{children:"\u0414\u0430\u0442\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438:"})," ",new Date(n?.created_at).toLocaleString()]}),e.jsxs(i,{children:[e.jsx("strong",{children:"\u0421\u0442\u0430\u0442\u0443\u0441:"})," "," ",n?.is_banned?e.jsx(b,{size:"small",label:"\u0417\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u043D",color:"error"}):e.jsx(b,{size:"small",label:"\u0410\u043A\u0442\u0438\u0432\u0435\u043D",color:"success"})]})]})]})}),e.jsx(v,{item:!0,xs:12,md:6,children:e.jsxs(rs,{children:[e.jsx(is,{title:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0430"}),e.jsxs(as,{children:[e.jsxs(i,{children:[e.jsx("strong",{children:"\u041F\u043E\u0434\u043F\u0438\u0441\u0447\u0438\u043A\u043E\u0432:"})," ",n?.followers_count||0]}),e.jsxs(i,{children:[e.jsx("strong",{children:"\u041F\u043E\u0434\u043F\u0438\u0441\u043E\u043A:"})," ",n?.following_count||0]}),e.jsxs(i,{children:[e.jsx("strong",{children:"\u041F\u043E\u0441\u0442\u043E\u0432:"})," ",R.length]}),e.jsxs(i,{children:[e.jsx("strong",{children:"\u0422\u0440\u0435\u043A\u043E\u0432:"})," ",O.length]})]})]})})]})]}),e.jsx(F,{children:e.jsx(x,{onClick:()=>ve(!1),children:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C"})})]}),e.jsxs(W,{open:ys,onClose:()=>ne(!1),children:[e.jsx($,{children:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0442\u0440\u0435\u043A"}),e.jsx(P,{children:e.jsxs(a,{sx:{my:2},children:[e.jsx(i,{variant:"subtitle1",children:"\u0412\u044B \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u044D\u0442\u043E\u0442 \u0442\u0440\u0435\u043A?"}),K&&e.jsxs(S,{sx:{p:2,mt:2,bgcolor:"background.default"},children:[e.jsx(i,{variant:"body1",fontWeight:"bold",children:K.title}),e.jsxs(i,{variant:"body2",children:["\u0410\u0440\u0442\u0438\u0441\u0442: ",K.artist]}),e.jsxs(i,{variant:"body2",children:["\u0410\u043B\u044C\u0431\u043E\u043C: ",K.album||"\u041D\u0435\u0442 \u0434\u0430\u043D\u043D\u044B\u0445"]})]})]})}),e.jsxs(F,{children:[e.jsx(x,{onClick:()=>ne(!1),color:"inherit",children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),e.jsx(x,{onClick:()=>{K&&((async s=>{try{o(!0);const r=await m.delete(`/api/admin/tracks/${s}`);if(!r.data.success)throw new Error(r.data.error||"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u0442\u0440\u0435\u043A");c("success","\u0422\u0440\u0435\u043A \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0443\u0434\u0430\u043B\u0435\u043D"),be(O.filter(g=>g.id!==s))}catch{c("error","\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u0442\u0440\u0435\u043A")}finally{o(!1)}})(K.id),ne(!1))},color:"error",variant:"contained",disabled:u,children:u?e.jsx(_,{size:24}):"\u0423\u0434\u0430\u043B\u0438\u0442\u044C"})]})]}),e.jsxs(W,{open:Cs,onClose:()=>U(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx($,{children:oe(n?.id)?"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u043F\u0440\u0430\u0432 \u043C\u043E\u0434\u0435\u0440\u0430\u0442\u043E\u0440\u0430":"\u041D\u0430\u0437\u043D\u0430\u0447\u0438\u0442\u044C \u043C\u043E\u0434\u0435\u0440\u0430\u0442\u043E\u0440\u043E\u043C"}),e.jsx(P,{children:e.jsxs(a,{sx:{my:2},children:[e.jsxs(i,{variant:"subtitle1",sx:{mb:2},children:["\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C: ",n?.name," (@",n?.username,")"]}),e.jsxs(i,{variant:"h6",sx:{mt:3,mb:2},children:[e.jsx(dr,{sx:{mr:1,verticalAlign:"middle"}}),"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043F\u0440\u0430\u0432\u0430 \u0434\u043E\u0441\u0442\u0443\u043F\u0430"]}),e.jsxs(v,{container:!0,spacing:3,children:[e.jsx(v,{item:!0,xs:12,md:6,children:e.jsxs(M,{component:"fieldset",children:[e.jsx(i,{variant:"subtitle2",sx:{fontWeight:"bold",mb:1},children:"\u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u043A\u043E\u043D\u0442\u0435\u043D\u0442\u043E\u043C"}),e.jsx(E,{control:e.jsx(B,{checked:j.delete_posts,onChange:s=>k({...j,delete_posts:s.target.checked})}),label:e.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(T,{fontSize:"small",sx:{mr:1}}),e.jsx(i,{children:"\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u043F\u043E\u0441\u0442\u043E\u0432"})]})}),e.jsx(E,{control:e.jsx(B,{checked:j.delete_music,onChange:s=>k({...j,delete_music:s.target.checked})}),label:e.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Me,{fontSize:"small",sx:{mr:1}}),e.jsx(i,{children:"\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u043C\u0443\u0437\u044B\u043A\u0438"})]})}),e.jsx(E,{control:e.jsx(B,{checked:j.delete_comments,onChange:s=>k({...j,delete_comments:s.target.checked})}),label:e.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Ys,{fontSize:"small",sx:{mr:1}}),e.jsx(i,{children:"\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0435\u0432"})]})}),e.jsx(E,{control:e.jsx(B,{checked:j.delete_avatar,onChange:s=>k({...j,delete_avatar:s.target.checked})}),label:e.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ar,{fontSize:"small",sx:{mr:1}}),e.jsx(i,{children:"\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u0430\u0432\u0430\u0442\u0430\u0440\u043E\u0432"})]})})]})}),e.jsx(v,{item:!0,xs:12,md:6,children:e.jsxs(M,{component:"fieldset",children:[e.jsx(i,{variant:"subtitle2",sx:{fontWeight:"bold",mb:1},children:"\u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F\u043C\u0438 \u0438 \u0431\u0430\u0433-\u0440\u0435\u043F\u043E\u0440\u0442\u0430\u043C\u0438"}),e.jsx(E,{control:e.jsx(B,{checked:j.change_user_name,onChange:s=>k({...j,change_user_name:s.target.checked})}),label:e.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(nr,{fontSize:"small",sx:{mr:1}}),e.jsx(i,{children:"\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435 \u0438\u043C\u0435\u043D\u0438 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F"})]})}),e.jsx(E,{control:e.jsx(B,{checked:j.change_username,onChange:s=>k({...j,change_username:s.target.checked})}),label:e.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(He,{fontSize:"small",sx:{mr:1}}),e.jsx(i,{children:"\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435 username"})]})}),e.jsx(E,{control:e.jsx(B,{checked:j.manage_bug_reports,onChange:s=>k({...j,manage_bug_reports:s.target.checked})}),label:e.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(tr,{fontSize:"small",sx:{mr:1}}),e.jsx(i,{children:"\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u0431\u0430\u0433-\u0440\u0435\u043F\u043E\u0440\u0442\u0430"})]})}),e.jsx(E,{control:e.jsx(B,{checked:j.delete_bug_reports,onChange:s=>k({...j,delete_bug_reports:s.target.checked})}),label:e.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Qs,{fontSize:"small",sx:{mr:1}}),e.jsx(i,{children:"\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u0431\u0430\u0433-\u0440\u0435\u043F\u043E\u0440\u0442\u043E\u0432"})]})})]})})]})]})}),e.jsxs(F,{children:[e.jsx(x,{onClick:()=>U(!1),color:"inherit",children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),oe(n?.id)?e.jsxs(e.Fragment,{children:[e.jsx(x,{onClick:async()=>{try{o(!0),(await m.put(`/api/admin/moderators/${n.id}`,{permissions:j})).data.success&&(c("success","\u041F\u0440\u0430\u0432\u0430 \u043C\u043E\u0434\u0435\u0440\u0430\u0442\u043E\u0440\u0430 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u044B"),le(A.map(s=>s.user_id===n.id?{...s,permissions:j}:s)))}catch{c("error","\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u043F\u0440\u0430\u0432\u0430 \u043C\u043E\u0434\u0435\u0440\u0430\u0442\u043E\u0440\u0430")}finally{o(!1),U(!1)}},color:"primary",variant:"contained",disabled:u,children:u?e.jsx(_,{size:24}):"\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u043F\u0440\u0430\u0432\u0430"}),e.jsx(x,{onClick:De,color:"error",variant:"outlined",disabled:u,children:u?e.jsx(_,{size:24}):"\u0421\u043D\u044F\u0442\u044C \u043C\u043E\u0434\u0435\u0440\u0430\u0442\u043E\u0440\u0430"})]}):e.jsx(x,{onClick:De,color:"primary",variant:"contained",disabled:u,children:u?e.jsx(_,{size:24}):"\u041D\u0430\u0437\u043D\u0430\u0447\u0438\u0442\u044C \u043C\u043E\u0434\u0435\u0440\u0430\u0442\u043E\u0440\u043E\u043C"})]})]}),e.jsx(Vs,{open:ze.open,autoHideDuration:6e3,onClose:()=>Ie(s=>({...s,open:!1})),anchorOrigin:{vertical:"bottom",horizontal:"right"},children:e.jsx(Ls,{onClose:()=>Ie(s=>({...s,open:!1})),severity:ze.severity,sx:{width:"100%"},children:ze.message})}),Ms]})};export{ur as default};
