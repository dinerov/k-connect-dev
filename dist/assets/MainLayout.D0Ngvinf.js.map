{"version":3,"file":"MainLayout.D0Ngvinf.js","sources":["../../node_modules/@mui/icons-material/ExitToApp.js","../../node_modules/@mui/icons-material/SkipPrevious.js","../../node_modules/@mui/icons-material/SkipNext.js","../../src/assets/Logo.svg","../../node_modules/@mui/icons-material/ClearAll.js","../../src/components/Notifications/NotificationList.js","../../src/components/Layout/Header.js","../../src/context/SidebarContext.js","../../node_modules/@iconify-icons/solar/home-bold.js","../../node_modules/@iconify-icons/solar/user-bold.js","../../node_modules/@iconify-icons/solar/music-notes-bold.js","../../node_modules/@iconify-icons/solar/magnifer-bold.js","../../node_modules/@iconify-icons/solar/alt-arrow-down-bold.js","../../node_modules/@iconify-icons/solar/alt-arrow-up-bold.js","../../node_modules/@iconify-icons/solar/gamepad-bold.js","../../node_modules/@iconify-icons/solar/users-group-two-rounded-bold.js","../../node_modules/@iconify-icons/solar/bug-bold.js","../../node_modules/@iconify-icons/solar/shield-user-bold.js","../../node_modules/@iconify-icons/solar/chat-round-bold.js","../../node_modules/@iconify-icons/solar/chart-bold.js","../../node_modules/@iconify-icons/solar/shield-star-bold.js","../../node_modules/@iconify-icons/solar/document-text-bold.js","../../node_modules/@iconify-icons/solar/menu-dots-bold.js","../../node_modules/@iconify-icons/solar/shop-bold.js","../../node_modules/@iconify-icons/solar/code-bold.js","../../node_modules/@iconify-icons/solar/crown-bold.js","../../src/components/Layout/SidebarNavigation.js","../../src/components/Layout/UserProfileBlock.js","../../src/components/Layout/SidebarFooter.js","../../src/components/Layout/Sidebar.js","../../src/components/Layout/MainLayout.js"],"sourcesContent":["\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M10.09 15.59 11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2\"\n}), 'ExitToApp');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M6 6h2v12H6zm3.5 6 8.5 6V6z\"\n}), 'SkipPrevious');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"m6 18 8.5-6L6 6zM16 6v12h2V6z\"\n}), 'SkipNext');","import * as React from \"react\";\nimport { forwardRef } from \"react\";\nconst SvgLogo = ({\n  title,\n  titleId,\n  ...props\n}, ref) => /* @__PURE__ */ React.createElement(\"svg\", { width: 204, height: 212, viewBox: \"0 0 204 212\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ref, \"aria-labelledby\": titleId, ...props }, title ? /* @__PURE__ */ React.createElement(\"title\", { id: titleId }, title) : null, /* @__PURE__ */ React.createElement(\"path\", { fillRule: \"evenodd\", clipRule: \"evenodd\", d: \"M78.6142 192.304L89.3052 204.105C95.2179 210.632 104.79 210.632 110.688 204.105L121.379 192.304C109.569 179.269 90.4244 179.269 78.6142 192.304ZM35.8491 145.101L57.2316 168.703C80.8068 142.665 119.186 142.665 142.777 168.703L164.159 145.101C128.728 105.977 71.2799 105.977 35.8491 145.101ZM195.567 110.417L185.542 121.484C138.301 69.3405 61.7078 69.3405 14.4516 121.484L4.42589 110.417C-1.98582 103.34 -1.33575 91.6251 5.75646 85.366C60.7399 36.878 139.268 36.878 194.252 85.366C201.344 91.6251 201.979 103.34 195.567 110.417Z\", fill: \"url(#paint0_linear_992_181)\" }), /* @__PURE__ */ React.createElement(\"path\", { d: \"M171.5 159L163.152 177.152L145 185.5L163.152 193.781L171.5 212L179.781 193.781L198 185.5L179.781 177.152\", fill: \"url(#paint1_linear_992_181)\" }), /* @__PURE__ */ React.createElement(\"path\", { d: \"M24.5 0L16.8438 16.8438L0 24.5L16.8438 32.1562L24.5 49L32.1562 32.1562L49 24.5L32.1562 16.8438\", fill: \"url(#paint2_linear_992_181)\" }), /* @__PURE__ */ React.createElement(\"path\", { d: \"M187.5 20L182.344 31.3438L171 36.5L182.344 41.6562L187.5 53L192.656 41.6562L204 36.5L192.656 31.3438\", fill: \"url(#paint3_linear_992_181)\" }), /* @__PURE__ */ React.createElement(\"defs\", null, /* @__PURE__ */ React.createElement(\"linearGradient\", { id: \"paint0_linear_992_181\", x1: 100, y1: 49, x2: 100, y2: 209, gradientUnits: \"userSpaceOnUse\" }, /* @__PURE__ */ React.createElement(\"stop\", { stopColor: \"#D0BCFF\" }), /* @__PURE__ */ React.createElement(\"stop\", { offset: 1, stopColor: \"#9365FF\" })), /* @__PURE__ */ React.createElement(\"linearGradient\", { id: \"paint1_linear_992_181\", x1: 171.5, y1: 159, x2: 171.5, y2: 212, gradientUnits: \"userSpaceOnUse\" }, /* @__PURE__ */ React.createElement(\"stop\", { stopColor: \"#D0BCFF\" }), /* @__PURE__ */ React.createElement(\"stop\", { offset: 1, stopColor: \"#9365FF\" })), /* @__PURE__ */ React.createElement(\"linearGradient\", { id: \"paint2_linear_992_181\", x1: 24.5, y1: 0, x2: 24.5, y2: 49, gradientUnits: \"userSpaceOnUse\" }, /* @__PURE__ */ React.createElement(\"stop\", { stopColor: \"#D0BCFF\" }), /* @__PURE__ */ React.createElement(\"stop\", { offset: 1, stopColor: \"#9365FF\" })), /* @__PURE__ */ React.createElement(\"linearGradient\", { id: \"paint3_linear_992_181\", x1: 187.5, y1: 20, x2: 187.5, y2: 53, gradientUnits: \"userSpaceOnUse\" }, /* @__PURE__ */ React.createElement(\"stop\", { stopColor: \"#D0BCFF\" }), /* @__PURE__ */ React.createElement(\"stop\", { offset: 1, stopColor: \"#9365FF\" }))));\nconst ForwardRef = forwardRef(SvgLogo);\nexport { ForwardRef as ReactComponent };\n","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M5 13h14v-2H5zm-2 4h14v-2H3zM7 7v2h14V7z\"\n}), 'ClearAll');","import React, { useState, useCallback, useMemo, useEffect } from 'react';\nimport {\n  Box,\n  List,\n  ListItem,\n  ListItemText,\n  ListItemAvatar,\n  Avatar,\n  Typography,\n  IconButton,\n  Badge,\n  Menu,\n  CircularProgress,\n  alpha,\n  useTheme,\n  Tooltip,\n  styled,\n  Zoom,\n  Chip\n} from '@mui/material';\nimport { useNavigate } from 'react-router-dom';\nimport NotificationsIcon from '@mui/icons-material/Notifications';\nimport FavoriteIcon from '@mui/icons-material/Favorite';\nimport ChatBubbleIcon from '@mui/icons-material/ChatBubble';\nimport PersonAddIcon from '@mui/icons-material/PersonAdd';\nimport ClearAllIcon from '@mui/icons-material/ClearAll';\nimport CloseIcon from '@mui/icons-material/Close';\nimport ForumIcon from '@mui/icons-material/Forum';\nimport ArticleIcon from '@mui/icons-material/Article';\nimport PersonIcon from '@mui/icons-material/Person';\nimport DoneAllIcon from '@mui/icons-material/DoneAll';\nimport RepeatIcon from '@mui/icons-material/Repeat';\nimport WarningIcon from '@mui/icons-material/Warning';\nimport EmojiEventsIcon from '@mui/icons-material/EmojiEvents';\nimport MonetizationOnIcon from '@mui/icons-material/MonetizationOn';\nimport GavelIcon from '@mui/icons-material/Gavel';\nimport MessageIcon from '@mui/icons-material/Message';\nimport PostAddIcon from '@mui/icons-material/PostAdd';\nimport { Icon } from '@iconify/react';\nimport walletMoneyIcon from '@iconify-icons/solar/wallet-money-bold';\nimport axios from 'axios';\nimport { formatDateTimeShort } from '../../utils/dateUtils';\n\nconst StyledMenu = styled(Menu)(({ theme }) => ({\n  '& .MuiPaper-root': {\n    borderRadius: 12,\n    minWidth: 380,\n    maxWidth: 380,\n    maxHeight: 'calc(100vh - 100px)',\n    boxShadow: '0 8px 24px rgba(0,0,0,0.15)',\n    padding: theme.spacing(1),\n    backgroundColor: 'rgba(0, 0, 0, 0.8)',\n    backdropFilter: 'blur(10px)',\n    border: `1px solid ${alpha(theme.palette.divider, 0.1)}`,\n    overflow: 'visible',\n    backgroundImage: 'linear-gradient(rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.08))',\n    [theme.breakpoints.down('sm')]: {\n      minWidth: '100vw',\n      maxWidth: '100vw',\n      width: '100vw',\n      margin: 0,\n      borderRadius: 0,\n      position: 'fixed',\n      top: '0 !important',\n      left: '0 !important',\n      right: '0 !important',\n      bottom: '0 !important',\n      height: '100vh',\n      maxHeight: '100vh',\n      border: 'none',\n      boxShadow: 'none',\n    },\n    '& .MuiMenuItem-root': {\n      padding: '10px 16px',\n      borderRadius: '8px',\n      margin: '2px 8px',\n      transition: 'all 0.2s',\n      backgroundImage: 'linear-gradient(rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.08))',\n      '&:hover': {\n        backgroundColor: (theme) => alpha(theme.palette.primary.main, 0.08),\n      }\n    },\n  },\n}));\n\nconst NotificationHeader = styled(Box)(({ theme }) => ({\n  display: 'flex',\n  justifyContent: 'space-between',\n  alignItems: 'center',\n  padding: theme.spacing(1, 2),\n  marginBottom: theme.spacing(1),\n  backgroundColor: 'transparent',\n}));\n\nconst StyledNotificationItem = styled(ListItem)(({ theme, unread }) => ({\n  transition: 'all 0.2s ease',\n  borderRadius: 8,\n  margin: theme.spacing(0.5, 0),\n  backgroundColor: unread ? alpha(theme.palette.primary.main, 0.08) : 'transparent',\n  position: 'relative',\n  overflow: 'hidden',\n  '&:hover': {\n    backgroundColor: unread ? alpha(theme.palette.primary.main, 0.12) : alpha(theme.palette.action.hover, 0.5),\n  },\n  '& .notification-bg-icon': {\n    position: 'absolute',\n    right: 20,\n    top: '50%',\n    transform: 'translateY(-50%) rotate(-15deg)',\n    fontSize: '3rem',\n    opacity: 0.3,\n    color: theme.palette.primary.main,\n    pointerEvents: 'none',\n    filter: 'blur(2px)',\n    '& svg': {\n      filter: `drop-shadow(0 0 8px ${alpha(theme.palette.primary.main, 0.6)})`,\n    }\n  }\n}));\n\nconst NotificationIcon = styled(Box)(({ theme, type = 'default' }) => {\n  const getColor = () => {\n    switch (type) {\n      case 'comment_like':\n      case 'reply_like':\n      case 'post_like':\n        return theme.palette.error.main;\n      case 'follow':\n        return theme.palette.success.main;\n      default:\n        return theme.palette.primary.main;\n    }\n  };\n\n  return {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    width: 32,\n    height: 32,\n    borderRadius: '50%',\n    backgroundColor: alpha(getColor(), 0.1),\n    color: getColor(),\n    marginRight: theme.spacing(1.5),\n  };\n});\n\nconst EmptyNotifications = styled(Box)(({ theme }) => ({\n  display: 'flex',\n  flexDirection: 'column',\n  alignItems: 'center',\n  justifyContent: 'center',\n  padding: theme.spacing(4),\n  textAlign: 'center',\n  color: theme.palette.text.secondary,\n}));\n\nconst StyledChip = styled(Chip)(({ theme }) => ({\n  '& .MuiChip-avatar': {\n    width: 24,\n    height: 24,\n    marginLeft: 4,\n    marginRight: -4,\n  },\n  '& .MuiChip-label': {\n    paddingLeft: 8,\n  },\n  borderRadius: '16px',\n  height: 32,\n}));\n\nconst PointsIcon = styled('img')({\n  width: 24,\n  height: 24,\n  marginRight: 4,\n});\n\nconst getNotificationIcon = (type) => {\n  switch (type) {\n    case 'comment_like':\n    case 'reply_like':\n    case 'post_like':\n      return <FavoriteIcon sx={{ fontSize: '3rem' }} />;\n    case 'comment':\n    case 'reply':\n      return <ChatBubbleIcon sx={{ fontSize: '3rem' }} />;\n    case 'follow':\n      return <PersonAddIcon sx={{ fontSize: '3rem' }} />;\n    case 'repost':\n      return <RepeatIcon sx={{ fontSize: '3rem' }} />;\n    case 'wall_post':\n      return <PostAddIcon sx={{ fontSize: '3rem' }} />;\n    case 'points_transfer':\n      return <Icon icon={walletMoneyIcon} width=\"3rem\" height=\"3rem\" />;\n    case 'badge_purchase':\n    case 'username_auction_bid':\n    case 'username_bid_accepted':\n    case 'username_auction_outbid':\n    case 'username_auction_sold':\n    case 'username_auction_won':\n    case 'username_auction_cancelled':\n    case 'username_auction_bid_increased':\n    case 'auction_win':\n    case 'auction_sold':\n    case 'auction_refund':\n    case 'new_auction_bid':\n      return <MonetizationOnIcon sx={{ fontSize: '3rem' }} />;\n    case 'moderation':\n    case 'ban':\n    case 'unban':\n    case 'warning':\n      return <GavelIcon sx={{ fontSize: '3rem' }} />;\n    case 'mention':\n      return <MessageIcon sx={{ fontSize: '3rem' }} />;\n    case 'medal':\n      return <EmojiEventsIcon sx={{ fontSize: '3rem' }} />;\n    default:\n      return <NotificationsIcon sx={{ fontSize: '3rem' }} />;\n  }\n};\n\nconst getNotificationColor = (type) => {\n  switch (type) {\n    case 'comment_like':\n    case 'reply_like':\n    case 'post_like':\n      return 'primary';\n    case 'follow':\n      return 'primary';\n    case 'points_transfer':\n    case 'badge_purchase':\n    case 'username_auction_bid':\n    case 'username_bid_accepted':\n    case 'username_auction_outbid':\n    case 'username_auction_sold':\n    case 'username_auction_won':\n    case 'username_auction_cancelled':\n    case 'username_auction_bid_increased':\n    case 'auction_win':\n    case 'auction_sold':\n    case 'auction_refund':\n    case 'new_auction_bid':\n      return 'primary';\n    case 'moderation':\n    case 'ban':\n    case 'unban':\n    case 'warning':\n      return 'primary';\n    case 'medal':\n      return 'primary';\n    default:\n      return 'primary';\n  }\n};\n\nconst formatRelativeTime = (dateString) => {\n  if (!dateString) return 'Только что';\n  \n  try {\n    \n    const date = new Date(dateString);\n    \n    \n    if (isNaN(date.getTime())) {\n      console.error('Invalid date string:', dateString);\n      return 'Недавно';\n    }\n    \n    \n    const now = new Date();\n    \n    \n    const diffMs = now - date;\n    const seconds = Math.floor(diffMs / 1000);\n    \n    \n    if (seconds < 60) {\n      return 'Только что';\n    }\n    \n    \n    const minutes = Math.floor(seconds / 60);\n    if (minutes < 60) {\n      return `${minutes} ${getMinutesString(minutes)} назад`;\n    }\n    \n    \n    const hours = Math.floor(minutes / 60);\n    if (hours < 24) {\n      return `${hours} ${getHoursString(hours)} назад`;\n    }\n    \n    \n    const days = Math.floor(hours / 24);\n    if (days < 7) {\n      return `${days} ${getDaysString(days)} назад`;\n    }\n    \n    \n    return formatDateTimeShort(dateString);\n  } catch (error) {\n    console.error('Error formatting relative time:', error);\n    return 'Недавно';\n  }\n};\n\nconst getMinutesString = (minutes) => {\n  if (minutes % 10 === 1 && minutes % 100 !== 11) {\n    return 'минуту';\n  } else if ([2, 3, 4].includes(minutes % 10) && ![12, 13, 14].includes(minutes % 100)) {\n    return 'минуты';\n  } else {\n    return 'минут';\n  }\n};\n\nconst getHoursString = (hours) => {\n  if (hours % 10 === 1 && hours % 100 !== 11) {\n    return 'час';\n  } else if ([2, 3, 4].includes(hours % 10) && ![12, 13, 14].includes(hours % 100)) {\n    return 'часа';\n  } else {\n    return 'часов';\n  }\n};\n\nconst getDaysString = (days) => {\n  if (days % 10 === 1 && days % 100 !== 11) {\n    return 'день';\n  } else if ([2, 3, 4].includes(days % 10) && ![12, 13, 14].includes(days % 100)) {\n    return 'дня';\n  } else {\n    return 'дней';\n  }\n};\n\nconst parseNotificationLink = (link) => {\n  if (!link) return { type: 'unknown' };\n  \n  \n  if (link.startsWith('/profile/')) {\n    return {\n      type: 'profile',\n      username: link.split('/profile/')[1]\n    };\n  }\n  \n  \n  if (link.includes('?comment=') && link.includes('&reply=')) {\n    const postId = link.split('/post/')[1].split('?')[0];\n    const commentId = link.split('comment=')[1].split('&')[0];\n    const replyId = link.split('reply=')[1];\n    \n    return {\n      type: 'reply',\n      postId,\n      commentId,\n      replyId\n    };\n  }\n  \n  \n  if (link.includes('?comment=')) {\n    const postId = link.split('/post/')[1].split('?')[0];\n    const commentId = link.split('comment=')[1];\n    \n    return {\n      type: 'comment',\n      postId,\n      commentId\n    };\n  }\n  \n  \n  if (link.startsWith('/post/')) {\n    const postId = link.split('/post/')[1];\n    \n    return {\n      type: 'post',\n      postId\n    };\n  }\n  \n  return { type: 'unknown' };\n};\n\nconst truncateText = (text, maxLength) => {\n  if (!text) return '';\n  return text.length > maxLength ? text.substring(0, maxLength) + '...' : text;\n};\n\nconst getContextIcon = (link) => {\n  if (!link) return null;\n  \n  const linkInfo = parseNotificationLink(link);\n  \n  switch (linkInfo.type) {\n    case 'post':\n      return <ArticleIcon fontSize=\"small\" sx={{ opacity: 0.7 }} />;\n    case 'comment':\n    case 'reply':\n      return <ForumIcon fontSize=\"small\" sx={{ opacity: 0.7 }} />;\n    case 'profile':\n      return <PersonIcon fontSize=\"small\" sx={{ opacity: 0.7 }} />;\n    default:\n      return null;\n  }\n};\n\nconst getAvatarUrl = (user) => {\n  if (!user) return '/static/uploads/avatar/system/avatar.png';\n  return user.photo ? `/static/uploads/avatar/${user.id}/${user.photo}` : '/static/uploads/avatar/system/avatar.png';\n};\n\nconst getContextText = (notification) => {\n  if (!notification || !notification.link) return '';\n  \n  const linkInfo = parseNotificationLink(notification.link);\n  \n  switch (linkInfo.type) {\n    case 'post':\n      \n      if (notification.post_data) {\n        if (notification.post_data.preview) {\n          return notification.post_data.preview;\n        } else if (notification.post_data.text) {\n          return truncateText(notification.post_data.text, 150);\n        } else if (notification.post_content) {\n          return truncateText(notification.post_content, 150);\n        }\n      }\n      return \"публикацию\";\n      \n    case 'comment':\n      \n      if (notification.comment_data) {\n        if (notification.comment_data.preview) {\n          return notification.comment_data.preview;\n        } else if (notification.comment_data.text) {\n          return truncateText(notification.comment_data.text, 150);\n        } else if (notification.comment_content) {\n          return truncateText(notification.comment_content, 150);\n        }\n      }\n      return \"комментарий\";\n      \n    case 'reply':\n      \n      if (notification.reply_data) {\n        if (notification.reply_data.preview) {\n          return notification.reply_data.preview;\n        } else if (notification.reply_data.text) {\n          return truncateText(notification.reply_data.text, 150);\n        } else if (notification.reply_content) {\n          return truncateText(notification.reply_content, 150);\n        }\n      }\n      return \"ответ на комментарий\";\n      \n    case 'profile':\n      return `профиль`;\n      \n    default:\n      return '';\n  }\n};\n\nconst getContextTitle = (notification) => {\n  if (!notification || !notification.link) return '';\n  \n  const linkInfo = parseNotificationLink(notification.link);\n  \n  switch (linkInfo.type) {\n    case 'post':\n      return \"Публикация:\";\n    case 'comment':\n      return \"Комментарий:\";\n    case 'reply':\n      return \"Ответ:\";\n    case 'profile':\n      return \"Профиль\";\n    default:\n      return '';\n  }\n};\n\nconst formatNumber = (num) => {\n  if (num >= 1000000) {\n    return (num / 1000000).toFixed(1).replace(/\\.0$/, '') + 'M';\n  }\n  if (num >= 1000) {\n    return (num / 1000).toFixed(1).replace(/\\.0$/, '') + 'K';\n  }\n  return num.toString();\n};\n\nconst NotificationItemComponent = React.memo(({ notification, onClick }) => {\n  const theme = useTheme();\n  const senderName = notification.sender_user?.name || 'Пользователь';\n  const avatar = getAvatarUrl(notification.sender_user);\n  const notificationColor = getNotificationColor(notification.type);\n\n  const renderNotificationContent = useCallback(() => {\n    if (!notification.message) return null;\n\n    const pointsMatch = notification.message.match(/(\\d+)\\s+балл[а-я]*/);\n    const points = pointsMatch ? pointsMatch[1] : null;\n    const badgeMatch = notification.message.match(/бейджик «([^»]+)»/);\n    const badgeName = badgeMatch ? badgeMatch[1] : null;\n    const usernameMatch = notification.message.match(/юзернейм \"([^\"]+)\"/);\n    const username = usernameMatch ? usernameMatch[1] : null;\n\n    let message = notification.message;\n    let showMessage = true;\n\n    if (notification.type === 'points_transfer') {\n      showMessage = message.includes('с сообщением:');\n      if (showMessage) {\n        const parts = message.split('с сообщением:');\n        message = parts[1]?.trim() || '';\n      }\n    } else if (message.includes('с сообщением:')) {\n      const parts = message.split('с сообщением:');\n      message = parts[1]?.trim() || message;\n    }\n\n    return (\n      <Box sx={{ mt: 1 }}>\n        {showMessage && message && (\n          <Typography variant=\"body2\" color=\"text.primary\">\n            {message}\n          </Typography>\n        )}\n        {(points || badgeName || username) && (\n          <Box sx={{ display: 'flex', gap: 1, mt: 1, flexWrap: 'wrap' }}>\n            {points && (\n              <StyledChip\n                size=\"small\"\n                avatar={<PointsIcon src=\"/static/icons/KBalls.svg\" alt=\"points\" />}\n                label={`${formatNumber(parseInt(points))} баллов`}\n                variant=\"outlined\"\n              />\n            )}\n            {badgeName && (\n              <StyledChip\n                size=\"small\"\n                icon={<EmojiEventsIcon />}\n                label={badgeName}\n                variant=\"outlined\"\n              />\n            )}\n            {username && (\n              <StyledChip\n                size=\"small\"\n                icon={<PersonAddIcon />}\n                label={username}\n                variant=\"outlined\"\n              />\n            )}\n          </Box>\n        )}\n      </Box>\n    );\n  }, [notification]);\n\n  return (\n    <StyledNotificationItem \n      button \n      unread={!notification.is_read ? 1 : 0}\n      onClick={() => onClick(notification)}\n      sx={{ \n        borderLeft: `2px solid ${!notification.is_read ? theme.palette[notificationColor].main : 'transparent'}`,\n        mb: 1,\n        borderRadius: 1,\n        '&:hover': {\n          backgroundColor: alpha(theme.palette[notificationColor].main, 0.08),\n        }\n      }}\n    >\n      <ListItemAvatar>\n        <Avatar \n          src={avatar} \n          alt={senderName}\n          sx={{ \n            width: 40, \n            height: 40,\n            border: !notification.is_read ? `2px solid ${theme.palette[notificationColor].main}` : 'none',\n          }}\n          onError={(e) => {\n            if (e.currentTarget && e.currentTarget.setAttribute) {\n              e.currentTarget.setAttribute('src', '/static/uploads/avatar/system/avatar.png');\n            }\n          }}\n        />\n      </ListItemAvatar>\n      <ListItemText\n        primary={\n          <Box sx={{ display: 'flex', justifyContent: 'flex-start', alignItems: 'center' }}>\n            <Typography \n              variant=\"body2\" \n              fontWeight={!notification.is_read ? 600 : 400}\n              sx={{ \n                overflow: 'hidden',\n                textOverflow: 'ellipsis',\n                whiteSpace: 'nowrap',\n                maxWidth: 'calc(100% - 80px)'\n              }}\n            >\n              {senderName}\n            </Typography>\n            <Typography \n              variant=\"caption\" \n              color=\"text.secondary\"\n              sx={{ \n                ml: 1,\n                whiteSpace: 'nowrap',\n                flexShrink: 0,\n                fontSize: '0.65rem'\n              }}\n            >\n              {formatRelativeTime(notification.created_at)}\n            </Typography>\n          </Box>\n        }\n        secondary={renderNotificationContent()}\n      />\n      <Box className=\"notification-bg-icon\">\n        {getNotificationIcon(notification.type || 'default')}\n      </Box>\n    </StyledNotificationItem>\n  );\n});\n\nconst NotificationList = ({ onNewNotification }) => {\n  const [notifications, setNotifications] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [unreadCount, setUnreadCount] = useState(0);\n  const [error, setError] = useState(null);\n  const navigate = useNavigate();\n  const theme = useTheme();\n\n  const fetchUnreadCount = useCallback(async () => {\n    try {\n      const response = await axios.get('/api/notifications');\n      if (response.data && response.data.success) {\n        setUnreadCount(response.data.unread_count || 0);\n      }\n    } catch (error) {\n      console.error('Error fetching unread count:', error);\n    }\n  }, []);\n\n  useEffect(() => {\n    fetchUnreadCount();\n  }, [fetchUnreadCount]);\n\n  useEffect(() => {\n    const intervalId = setInterval(fetchUnreadCount, 30000); // Update every 30 seconds\n\n    return () => {\n      clearInterval(intervalId);\n    };\n  }, [fetchUnreadCount]);\n\n  const fetchNotifications = useCallback(async () => {\n    if (loading) return;\n  \n    try {\n      setLoading(true);\n      setError(null);\n      const response = await axios.get('/api/notifications');\n      \n      if (response.data && response.data.success) {\n        const newNotifications = response.data.notifications || [];\n        setNotifications(newNotifications);\n        setUnreadCount(response.data.unread_count || 0);\n\n        // Check for new notifications\n        if (newNotifications.length > 0) {\n          const latestNotification = newNotifications[0];\n          const now = new Date();\n          const notificationTime = new Date(latestNotification.created_at);\n          const timeDiff = now - notificationTime;\n          \n          // If notification is less than 1 minute old, show popup\n          if (timeDiff <= 60000 && onNewNotification) {\n            onNewNotification(latestNotification);\n          }\n        }\n      } else {\n        setNotifications([]);\n        setUnreadCount(0);\n      }\n    } catch (error) {\n      console.error('Error fetching notifications:', error);\n      setError('Failed to load notifications');\n      setNotifications([]);\n      setUnreadCount(0);\n    } finally {\n      setLoading(false);\n    }\n  }, [loading, onNewNotification]);\n  \n  const markAllAsRead = useCallback(async () => {\n    try {\n      const response = await axios.post('/api/notifications/mark-all-read');\n      \n      if (response.data && response.data.success) {\n        setNotifications(prev => \n          prev.map(n => ({ ...n, is_read: true }))\n        );\n        setUnreadCount(0);\n      }\n    } catch (error) {\n      console.error('Error marking all notifications as read:', error);\n    }\n  }, []);\n\n  const handleNotificationClick = useCallback(async (notification) => {\n    if (!notification || !notification.id) return;\n    \n    try {\n      await axios.post(`/api/notifications/${notification.id}/read`);\n      \n      setNotifications(prev => \n        prev.map(n => n.id === notification.id ? { ...n, is_read: true } : n)\n      );\n      \n      if (!notification.is_read) {\n        setUnreadCount(prev => Math.max(0, prev - 1));\n      }\n      \n      if (notification.link) {\n        navigate(notification.link);\n        handleMenuClose();\n      }\n    } catch (error) {\n      console.error('Error marking notification as read:', error);\n    }\n  }, [navigate]);\n\n  const handleMenuOpen = useCallback((event) => {\n    setAnchorEl(event.currentTarget);\n    fetchNotifications();\n  }, [fetchNotifications]);\n\n  const handleMenuClose = useCallback(() => {\n    setAnchorEl(null);\n  }, []);\n\n  const clearAllNotifications = useCallback(async () => {\n    try {\n      const response = await axios.delete('/api/notifications');\n      if (response.data && response.data.success) {\n        setNotifications([]);\n        setUnreadCount(0);\n      }\n    } catch (error) {\n      console.error('Error clearing notifications:', error);\n    }\n  }, []);\n\n  const sortedNotifications = useMemo(() => {\n    return [...notifications].sort((a, b) => {\n      if (!a.is_read && b.is_read) return -1;\n      if (a.is_read && !b.is_read) return 1;\n      return new Date(b.created_at) - new Date(a.created_at);\n    });\n  }, [notifications]);\n\n  return (\n    <>\n      <Tooltip title=\"Уведомления\" arrow TransitionComponent={Zoom}>\n        <IconButton \n          onClick={handleMenuOpen}\n          sx={{ \n            position: 'relative',\n            color: Boolean(anchorEl) ? 'primary.main' : 'inherit',\n          }}\n        >\n          <Badge \n            badgeContent={unreadCount} \n            color=\"primary\" \n            overlap=\"circular\"\n            max={99}\n            sx={{\n              '& .MuiBadge-badge': {\n                fontSize: '0.6rem',\n                height: 16,\n                minWidth: 16,\n                padding: '0 4px',\n              }\n            }}\n          >\n            <NotificationsIcon />\n          </Badge>\n        </IconButton>\n      </Tooltip>\n      \n      <StyledMenu\n        anchorEl={anchorEl}\n        open={Boolean(anchorEl)}\n        onClose={handleMenuClose}\n        transformOrigin={{ horizontal: 'right', vertical: 'top' }}\n        anchorOrigin={{ horizontal: 'right', vertical: 'bottom' }}\n      >\n        <NotificationHeader>\n          <Typography variant=\"subtitle1\" fontWeight=\"bold\">\n            Уведомления\n            {unreadCount > 0 && (\n              <Badge \n                badgeContent={unreadCount} \n                color=\"primary\" \n                sx={{ ml: 2 }}\n              />\n            )}\n          </Typography>\n          <Box>\n            {notifications.length > 0 && (\n              <Tooltip title=\"Очистить все уведомления\">\n                <IconButton \n                  size=\"small\" \n                  onClick={clearAllNotifications}\n                  disabled={notifications.length === 0}\n                  sx={{ \n                    opacity: notifications.length > 0 ? 1 : 0.5,\n                    mr: 1\n                  }}\n                >\n                  <ClearAllIcon fontSize=\"small\" />\n                </IconButton>\n              </Tooltip>\n            )}\n            {unreadCount > 0 && (\n              <Tooltip title=\"Отметить все как прочитанные\" arrow>\n                <IconButton size=\"small\" onClick={markAllAsRead} sx={{ mr: 1 }}>\n                  <DoneAllIcon fontSize=\"small\" />\n                </IconButton>\n              </Tooltip>\n            )}\n            <Tooltip title=\"Закрыть\" arrow>\n              <IconButton size=\"small\" onClick={handleMenuClose}>\n                <CloseIcon fontSize=\"small\" />\n              </IconButton>\n            </Tooltip>\n          </Box>\n        </NotificationHeader>\n        \n        <Box sx={{ \n          maxHeight: 'calc(100vh - 200px)',\n          overflowY: 'auto',\n          px: 1,\n          [theme.breakpoints.down('sm')]: {\n            maxHeight: 'calc(100vh - 120px)',\n            height: 'calc(100vh - 120px)'\n          }\n        }}>\n          {loading ? (\n            <Box sx={{ display: 'flex', justifyContent: 'center', py: 4 }}>\n              <CircularProgress size={30} color=\"primary\" />\n            </Box>\n          ) : error ? (\n            <EmptyNotifications>\n              <Typography variant=\"body2\" color=\"error\">\n                {error}\n              </Typography>\n            </EmptyNotifications>\n          ) : sortedNotifications.length > 0 ? (\n            <List sx={{ width: '100%', p: 0 }}>\n              {sortedNotifications.map((notification) => (\n                <NotificationItemComponent\n                  key={notification.id} \n                  notification={notification}\n                  onClick={handleNotificationClick}\n                />\n              ))}\n            </List>\n          ) : (\n            <EmptyNotifications>\n              <NotificationsIcon sx={{ fontSize: 40, opacity: 0.5, mb: 2 }} />\n              <Typography variant=\"body1\">Нет новых уведомлений</Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                Здесь будут отображаться ваши уведомления\n              </Typography>\n            </EmptyNotifications>\n          )}\n        </Box>\n      </StyledMenu>\n    </>\n  );\n};\n\nexport default React.memo(NotificationList); ","import React, { useState, useContext, useEffect, useRef, useMemo } from 'react';\nimport {\n  AppBar,\n  Toolbar,\n  Box,\n  IconButton,\n  Typography,\n  Badge,\n  Avatar,\n  Menu,\n  MenuItem,\n  ListItemIcon,\n  ListItemText,\n  Divider,\n  useTheme,\n  styled,\n  alpha,\n  Tooltip,\n  Chip,\n  Switch,\n  FormControlLabel,\n  useMediaQuery,\n  TextField,\n  InputAdornment,\n  Paper,\n  List,\n  ListItem,\n  ListItemAvatar,\n  Tabs,\n  Tab,\n  ClickAwayListener,\n  CircularProgress,\n  Button,\n  GlobalStyles,\n  Zoom\n} from '@mui/material';\nimport { Link, useNavigate, useLocation } from 'react-router-dom';\nimport MenuIcon from '@mui/icons-material/Menu';\nimport NotificationsIcon from '@mui/icons-material/Notifications';\nimport AccountCircleIcon from '@mui/icons-material/AccountCircle';\nimport HomeIcon from '@mui/icons-material/Home';\nimport SearchIcon from '@mui/icons-material/Search';\nimport ExitToAppIcon from '@mui/icons-material/ExitToApp';\nimport SettingsIcon from '@mui/icons-material/Settings';\nimport MusicNoteIcon from '@mui/icons-material/MusicNote';\nimport PlayArrowIcon from '@mui/icons-material/PlayArrow';\nimport PauseIcon from '@mui/icons-material/Pause';\nimport SkipPreviousIcon from '@mui/icons-material/SkipPrevious';\nimport SkipNextIcon from '@mui/icons-material/SkipNext';\nimport VolumeUpIcon from '@mui/icons-material/VolumeUp';\nimport VolumeOffIcon from '@mui/icons-material/VolumeOff';\nimport AddIcon from '@mui/icons-material/Add';\nimport SwapHorizIcon from '@mui/icons-material/SwapHoriz';\nimport ClearIcon from '@mui/icons-material/Clear';\nimport PersonAddIcon from '@mui/icons-material/PersonAdd';\nimport PersonRemoveIcon from '@mui/icons-material/PersonRemove';\nimport VerifiedIcon from '@mui/icons-material/Verified';\nimport { AuthContext } from '../../context/AuthContext';\nimport { useMusic } from '../../context/MusicContext';\nimport { ThemeSettingsContext } from '../../App';\nimport { ReactComponent as LogoSVG } from '../../assets/Logo.svg';\nimport { ReactComponent as BallsSVG } from '../../assets/balls.svg';\nimport NotificationList from '../Notifications/NotificationList';\nimport axios from 'axios';\nimport { Icon } from '@iconify/react';\nimport DynamicIslandNotification from '../DynamicIslandNotification';\n\nconst StyledAppBar = styled(AppBar)(({ theme }) => ({\n  backgroundImage: 'none',\n  color: '#FFFFFF',\n  boxShadow: '0 4px 20px rgba(0, 0, 0, 0.2)',\n  borderBottom: '1px solid rgba(255, 255, 255, 0.05)',\n  position: 'fixed',\n  backdropFilter: 'blur(20px)',\n  WebkitBackdropFilter: 'blur(20px)',\n  borderRadius: '0 !important',\n  zIndex: theme.zIndex.appBar,\n  [theme.breakpoints.up('md')]: {\n    width: '100%',\n  },\n  height: 48,\n}));\n\nconst StyledToolbar = styled(Toolbar)(({ theme }) => ({\n  display: 'flex',\n  justifyContent: 'space-between',\n  alignItems: 'center',\n  padding: theme.spacing(0, 1),\n  height: 48,\n  [theme.breakpoints.up('md')]: {\n    padding: theme.spacing(0, '15%'), \n    width: '100%',\n    margin: '0 auto',\n  },\n}));\n\nconst LogoSection = styled(Box)(({ theme }) => ({\n  display: 'flex',\n  alignItems: 'center',\n  marginRight: theme.spacing(1),\n}));\n\nconst LogoText = styled(Typography)(({ theme }) => ({\n  fontWeight: 'bold',\n  fontSize: '1.2rem',\n  marginLeft: theme.spacing(1),\n  display: 'flex',\n  alignItems: 'center',\n  color: theme.palette.mode === 'dark' ? '#FFFFFF' : theme.palette.text.primary,\n}));\n\nconst PlayerSection = styled(Box)(({ theme }) => ({\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'center',\n  flexGrow: 1,\n  maxWidth: 400,\n  [theme.breakpoints.down('md')]: {\n    display: 'none',\n  },\n}));\n\nconst PlayerControls = styled(Box)(({ theme }) => ({\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'center',\n  gap: theme.spacing(0.5),\n}));\n\nconst VolumeControl = styled(Box)(({ theme }) => ({\n  display: 'flex',\n  alignItems: 'center',\n  position: 'relative',\n  '&:hover .volume-slider': {\n    width: 60,\n    opacity: 1,\n    marginLeft: theme.spacing(0.5),\n  }\n}));\n\nconst VolumeSlider = styled('input')(({ theme }) => ({\n  width: 0,\n  height: 3,\n  borderRadius: 1.5,\n  backgroundColor: alpha(theme.palette.primary.main, 0.2),\n  appearance: 'none',\n  outline: 'none',\n  transition: 'all 0.2s ease',\n  opacity: 0,\n  '&::-webkit-slider-thumb': {\n    appearance: 'none',\n    width: 10,\n    height: 10,\n    borderRadius: '50%',\n    backgroundColor: theme.palette.primary.main,\n    cursor: 'pointer',\n  },\n  '&.volume-slider': {},\n}));\n\nconst ActionsSection = styled(Box)(({ theme }) => ({\n  display: 'flex',\n  alignItems: 'center',\n  gap: theme.spacing(0.5),\n}));\n\nconst PointsChip = styled(Chip)(({ theme }) => ({\n  borderRadius: 20,\n  fontWeight: 'bold',\n  background: `linear-gradient(45deg, #d0bcff 30%, ${alpha('#d0bcff', 0.8)} 90%)`,\n  color: '#1a1a1a',\n  border: 'none',\n  boxShadow: '0 2px 5px rgba(0,0,0,0.1)',\n  height: 32,\n  '& .MuiChip-icon': {\n    color: 'inherit',\n  },\n  [theme.breakpoints.down('md')]: {\n    display: 'none',\n  },\n}));\n\nconst PointsIcon = styled(Box)(({ theme }) => ({\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'center',\n  width: 20,\n  height: 20,\n  '& svg': {\n    width: '100%',\n    height: '100%',\n  }\n}));\n\nconst SearchInputWrapper = styled(Box)(({ theme, fullWidth }) => ({\n  position: 'relative',\n  borderRadius: 16,\n  backgroundColor: '#131313',\n  width: fullWidth ? '100%' : 450,\n  display: 'flex',\n  transition: 'all 0.3s ease',\n  [theme.breakpoints.down('sm')]: {\n    width: '100vw',\n    margin: 0,\n    borderRadius: 0,\n    position: 'fixed',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    height: '100vh',\n    zIndex: 1300,\n  }\n}));\n\nconst StyledSearchInput = styled(TextField)(({ theme }) => ({\n  width: '100%',\n  '& .MuiInputBase-root': {\n    color: theme.palette.common.white,\n    backgroundColor: '#131313',\n    borderRadius: 24,\n    padding: theme.spacing(0.5, 1),\n    '&:hover': {\n      backgroundColor: alpha(theme.palette.common.white, 0.1),\n    },\n  },\n  '& .MuiOutlinedInput-notchedOutline': {\n    borderColor: alpha(theme.palette.common.white, 0.2),\n  },\n  '& .MuiInputBase-input': {\n    padding: theme.spacing(1),\n  }\n}));\n\nconst SearchResultsContainer = styled(Paper)(({ theme }) => ({\n  position: 'absolute',\n  top: '100%',\n  left: 10,\n  right: 10,\n  zIndex: 1200,\n  maxHeight: 'calc(80vh - 70px)',\n  overflow: 'auto',\n  marginTop: theme.spacing(0.5),\n  backgroundColor: 'rgba(0, 0, 0, 0.8)',\n  backdropFilter: 'blur(10px)',\n  WebkitBackdropFilter: 'blur(10px)',\n  borderRadius: 12,\n  boxShadow: '0 4px 20px rgba(0, 0, 0, 0.3)',\n  border: '1px solid rgba(255, 255, 255, 0.1)',\n  backgroundImage: 'linear-gradient(rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.08))',\n  [theme.breakpoints.down('sm')]: {\n    position: 'fixed',\n    top: '48px',\n    left: 0,\n    right: 0,\n    bottom: 0,\n    maxHeight: 'calc(100vh - 48px)',\n    height: 'calc(100vh - 48px)',\n    margin: 0,\n    borderRadius: 0,\n    border: 'none',\n    boxShadow: 'none',\n  }\n}));\n\nconst SearchResultTabs = styled(Tabs)(({ theme }) => ({\n  minHeight: 40,\n  '& .MuiTabs-indicator': {\n    backgroundColor: '#D0BCFF',\n    height: 3,\n  },\n}));\n\nconst SearchResultTab = styled(Tab)(({ theme }) => ({\n  minHeight: 40,\n  textTransform: 'none',\n  fontWeight: 500,\n  fontSize: '0.875rem',\n}));\n\nconst Header = ({ toggleSidebar }) => {\n  const { user, logout, setUser } = useContext(AuthContext);\n  const { themeSettings } = useContext(ThemeSettingsContext);\n  const navigate = useNavigate();\n  const location = useLocation();\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('md'));\n  const [userChannels, setUserChannels] = useState([]);\n  const [accounts, setAccounts] = useState({\n    current_account: null,\n    main_account: null,\n    channels: []\n  });\n  const [unreadNotificationsCount, setUnreadNotificationsCount] = useState(0);\n  \n  const [showSearch, setShowSearch] = useState(false);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchResults, setSearchResults] = useState({ users: [], channels: [] });\n  const [searchTab, setSearchTab] = useState(0);\n  const [searchLoading, setSearchLoading] = useState(false);\n  const [showSearchResults, setShowSearchResults] = useState(false);\n  const searchInputRef = useRef(null);\n  \n  const themeValues = useMemo(() => {\n    const headerTextColor = themeSettings.textColor || theme.palette.text.primary;\n    const primaryColor = themeSettings.primaryColor || theme.palette.primary.main;\n\n    const headerStyle = {\n      background: 'rgba(255, 255, 255, 0.03)',\n      color: headerTextColor,\n      boxShadow: `0 4px 15px ${alpha('#000000', 0.07)}`,\n      borderColor: alpha(headerTextColor, 0.08)\n    };\n\n    return {\n      primaryColor,\n      headerStyle\n    };\n  }, [themeSettings, theme]);\n  \n  const isMusicPage = location.pathname === '/music';\n\n  const { \n    currentTrack, \n    isPlaying, \n    isMuted,\n    volume,\n    togglePlay, \n    nextTrack,\n    prevTrack,\n    toggleMute,\n    setVolume \n  } = useMusic();\n\n  const [anchorEl, setAnchorEl] = useState(null);\n  const isMenuOpen = Boolean(anchorEl);\n\n  const [showNewNotification, setShowNewNotification] = useState(false);\n  const [newNotification, setNewNotification] = useState(null);\n  const lastNotificationId = useRef(null);\n\n  const handleProfileMenuOpen = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleMenuClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleNavigate = (path) => {\n    handleMenuClose();\n    navigate(path);\n  };\n\n  const handleLogout = async () => {\n    handleMenuClose();\n    try {\n      await logout();\n    } catch (error) {\n      navigate('/login');\n    }\n  };\n\n  const handleCreateChannel = () => {\n    handleMenuClose();\n    navigate('/register/channel');\n  };\n\n  const handleSwitchAccount = async (accountId) => {\n    try {\n      const response = await axios.post('/api/users/switch-account', { \n        account_id: accountId \n      });\n      \n      if (response.data.success) {\n        setUser({\n          ...response.data.account,\n          id: response.data.account.id\n        });\n        \n        handleMenuClose();\n        window.location.reload();\n      }\n    } catch (error) {\n      console.error('Error switching account:', error);\n    }\n  };\n\n  const truncateTitle = (title, maxLength = 25) => {\n    if (!title || title.length <= maxLength) return title;\n    return title.substring(0, maxLength) + '...';\n  };\n\n  useEffect(() => {\n    if (user) {\n      fetchUserChannels();\n    }\n  }, [user]);\n\n  const fetchUserChannels = async () => {\n    try {\n      const response = await axios.get('/api/users/my-channels');\n      if (response.data.success) {\n        setAccounts(response.data);\n      }\n    } catch (error) {\n      console.error('Error fetching user channels:', error);\n    }\n  };\n\n  useEffect(() => {\n    if (user) {\n      const fetchUnreadCount = async () => {\n        try {\n          const response = await axios.get('/api/notifications');\n          if (response.data && response.data.success) {\n            const newCount = response.data.unread_count || 0;\n            setUnreadNotificationsCount(newCount);\n\n            // Check for new notifications\n            if (response.data.notifications && response.data.notifications.length > 0) {\n              const latestNotification = response.data.notifications[0];\n              \n              // If this is a new notification (different ID than last one)\n              if (latestNotification.id !== lastNotificationId.current) {\n                lastNotificationId.current = latestNotification.id;\n                handleNewNotification(latestNotification);\n              }\n            }\n          }\n        } catch (error) {\n          console.error('Error fetching unread count:', error);\n        }\n      };\n\n      // Initial fetch\n      fetchUnreadCount();\n\n      // Set up periodic fetch\n      const intervalId = setInterval(fetchUnreadCount, 30000); // Every 30 seconds\n\n      return () => {\n        clearInterval(intervalId);\n      };\n    }\n  }, [user]);\n\n  const handleNewNotification = (notification) => {\n    if (!notification.is_read) {\n      setNewNotification(notification);\n      setShowNewNotification(true);\n      \n      // Hide notification after 5 seconds\n      setTimeout(() => {\n        setShowNewNotification(false);\n      }, 5000);\n    }\n  };\n\n  const handleSearchChange = (e) => {\n    const query = e.target.value;\n    setSearchQuery(query);\n    \n    if (query.trim().length >= 2) {\n      performSearch(query);\n      setShowSearchResults(true);\n    } else {\n      setSearchResults({ users: [], channels: [] });\n      setShowSearchResults(false);\n    }\n  };\n  \n  const performSearch = async (query) => {\n    if (query.trim().length < 2) return;\n    \n    setSearchLoading(true);\n    try {\n      const usersResponse = await axios.get('/api/search/', {\n        params: { \n          q: query,\n          type: 'users',\n          per_page: 5 \n        }\n      });\n      \n      const channelsResponse = await axios.get('/api/search/channels', {\n        params: { \n          q: query,\n          per_page: 5 \n        }\n      });\n      \n      setSearchResults({\n        users: usersResponse.data?.users || [],\n        channels: channelsResponse.data?.channels || []\n      });\n    } catch (error) {\n      console.error('Search error:', error);\n    } finally {\n      setSearchLoading(false);\n    }\n  };\n  \n  const handleSearchFocus = () => {\n    setShowSearchResults(true);\n  };\n  \n  const handleClickAway = () => {\n    setShowSearchResults(false);\n  };\n  \n  const toggleSearch = () => {\n    setShowSearch(!showSearch);\n    if (!showSearch) {\n      setTimeout(() => {\n        searchInputRef.current?.focus();\n      }, 100);\n    } else {\n      setSearchQuery('');\n      setShowSearchResults(false);\n    }\n  };\n  \n  const handleSearchTabChange = (event, newValue) => {\n    setSearchTab(newValue);\n  };\n  \n  const handleViewAll = () => {\n    if (searchTab === 0) {\n      navigate(`/search?q=${searchQuery}&type=users`);\n    } else {\n      navigate(`/channels?q=${searchQuery}`);\n    }\n    setShowSearchResults(false);\n    setShowSearch(false);\n  };\n  \n  const handleSearchItemClick = (path) => {\n    navigate(path);\n    setShowSearchResults(false);\n    setShowSearch(false);\n  };\n  \n  useEffect(() => {\n    const handler = setTimeout(() => {\n      if (searchQuery.trim().length >= 2) {\n        performSearch(searchQuery);\n      }\n    }, 300);\n    \n    return () => {\n      clearTimeout(handler);\n    };\n  }, [searchQuery]);\n\n  const profileMenu = (\n    <Menu\n      anchorEl={anchorEl}\n      anchorOrigin={{ vertical: 'bottom', horizontal: 'right' }}\n      transformOrigin={{ vertical: 'top', horizontal: 'right' }}\n      open={isMenuOpen}\n      onClose={handleMenuClose}\n      PaperProps={{ \n        elevation: 3,\n        sx: { \n          minWidth: 280,\n          mt: 0.5,\n          boxShadow: '0 8px 24px rgba(0,0,0,0.15)',\n          borderRadius: '14px',\n          overflow: 'visible',\n          backgroundColor: 'rgba(0, 0, 0, 0.8)',\n          backdropFilter: 'blur(10px)',\n          border: (theme) => `1px solid ${alpha(theme.palette.divider, 0.1)}`,\n          [theme.breakpoints.down('sm')]: {\n            minWidth: '100vw',\n            maxWidth: '100vw',\n            width: '100vw',\n            margin: 0,\n            borderRadius: 0,\n            position: 'fixed',\n            top: '0 !important',\n            left: '0 !important',\n            right: '0 !important',\n            bottom: '0 !important',\n            height: '100vh',\n            maxHeight: '100vh',\n            border: 'none',\n            boxShadow: 'none',\n          },\n          '& .MuiMenuItem-root': {\n            padding: '10px 16px',\n            borderRadius: '8px',\n            margin: '2px 8px',\n            transition: 'all 0.2s',\n            '&:hover': {\n              backgroundColor: (theme) => alpha(theme.palette.primary.main, 0.08),\n            }\n          },\n        }\n      }}\n    >\n      {user && (\n        <>\n          <Box sx={{ px: 3, py: 3, textAlign: 'center', position: 'relative' }}>\n            {isMobile && (\n              <IconButton\n                onClick={handleMenuClose}\n                sx={{\n                  position: 'absolute',\n                  right: 8,\n                  top: 8,\n                  color: 'text.secondary',\n                  '&:hover': {\n                    backgroundColor: alpha(theme.palette.primary.main, 0.08),\n                  }\n                }}\n              >\n                <ClearIcon />\n              </IconButton>\n            )}\n            <Avatar \n              src={user.photo ? `/static/uploads/avatar/${user.id}/${user.photo}` : '/static/uploads/avatar/system/avatar.png'} \n              alt={user.name || user.username} \n              sx={{ \n                width: 80,\n                height: 80,\n                mx: 'auto',\n                border: `2px solid ${themeValues.primaryColor}`,\n                boxShadow: '0 4px 8px rgba(0,0,0,0.1)'\n              }}\n            />\n            <Typography variant=\"h6\" sx={{ mt: 2, fontWeight: 600 }}>\n              {user.name || user.username}\n            </Typography>\n            <Typography variant=\"body1\" color=\"text.secondary\" sx={{ mt: 0.5 }}>\n              @{user.username}\n            </Typography>\n            {user.account_type === 'channel' && (\n              <Chip \n                size=\"small\"\n                label=\"Канал\"\n                color=\"primary\"\n                sx={{ mt: 1, fontWeight: 500, px: 1 }}\n              />\n            )}\n          </Box>\n          <Divider sx={{ opacity: 0.1, mx: 2 }} />\n\n          {isMobile && (\n            <>\n              <Box sx={{ px: 2, py: 1, display: 'flex', gap: 1 }}>\n                <Button\n                  component={Link}\n                  to=\"/balance\"\n                  startIcon={<Icon icon=\"solar:wallet-money-bold\" width=\"18\" height=\"18\" />}\n                  sx={{\n                    flex: 1,\n                    borderRadius: 2,\n                    textTransform: 'none',\n                    backgroundColor: alpha(theme.palette.primary.main, 0.08),\n                    color: 'primary.main',\n                    '&:hover': {\n                      backgroundColor: alpha(theme.palette.primary.main, 0.12),\n                    }\n                  }}\n                >\n                  Кошелек\n                </Button>\n                <Button\n                  component={Link}\n                  to=\"/badge-shop\"\n                  startIcon={<Icon icon=\"solar:shop-bold\" width=\"18\" height=\"18\" />}\n                  sx={{\n                    flex: 1,\n                    borderRadius: 2,\n                    textTransform: 'none',\n                    backgroundColor: alpha(theme.palette.primary.main, 0.08),\n                    color: 'primary.main',\n                    '&:hover': {\n                      backgroundColor: alpha(theme.palette.primary.main, 0.12),\n                    }\n                  }}\n                >\n                  Магазин\n                </Button>\n              </Box>\n              <Divider sx={{ opacity: 0.1, mx: 2, my: 1 }} />\n            </>\n          )}\n        </>\n      )}\n      \n      <MenuItem onClick={() => handleNavigate(`/profile/${user?.username}`)}>\n        <ListItemIcon>\n          <AccountCircleIcon fontSize=\"small\" color=\"primary\" />\n        </ListItemIcon>\n        <ListItemText>Мой профиль</ListItemText>\n      </MenuItem>\n\n      <MenuItem onClick={() => handleNavigate('/settings')}>\n        <ListItemIcon>\n          <SettingsIcon fontSize=\"small\" color=\"primary\" />\n        </ListItemIcon>\n        <ListItemText>Настройки</ListItemText>\n      </MenuItem>\n\n      {isMobile && (\n        <>\n          <MenuItem onClick={() => handleNavigate('/search')}>\n            <ListItemIcon>\n              <Icon icon=\"solar:magnifer-bold\" width=\"20\" height=\"20\" />\n            </ListItemIcon>\n            <ListItemText>Поиск</ListItemText>\n          </MenuItem>\n\n          <MenuItem onClick={() => handleNavigate('/subscriptions')}>\n            <ListItemIcon>\n              <Icon icon=\"solar:users-group-rounded-bold\" width=\"20\" height=\"20\" />\n            </ListItemIcon>\n            <ListItemText>Подписки</ListItemText>\n          </MenuItem>\n\n          <MenuItem onClick={() => handleNavigate('/channels')}>\n            <ListItemIcon>\n              <Icon icon=\"solar:play-stream-bold\" width=\"20\" height=\"20\" />\n            </ListItemIcon>\n            <ListItemText>Каналы</ListItemText>\n          </MenuItem>\n\n          <MenuItem onClick={() => handleNavigate('/leaderboard')}>\n            <ListItemIcon>\n              <Icon icon=\"solar:chart-bold\" width=\"20\" height=\"20\" />\n            </ListItemIcon>\n            <ListItemText>Рейтинг</ListItemText>\n          </MenuItem>\n        </>\n      )}\n\n      <Divider sx={{ opacity: 0.1, mx: 2, my: 1 }} />\n\n      {accounts.channels.length < 3 && (\n        <MenuItem onClick={handleCreateChannel}>\n          <ListItemIcon>\n            <AddIcon fontSize=\"small\" color=\"primary\" />\n          </ListItemIcon>\n          <ListItemText>Создать канал</ListItemText>\n        </MenuItem>\n      )}\n\n      {accounts.main_account && accounts.current_account?.account_type === 'channel' && (\n        <>\n          <Divider sx={{ opacity: 0.1, mx: 2, my: 1 }} />\n          <Typography\n            variant=\"caption\"\n            sx={{\n              px: 3,\n              py: 0.5,\n              display: 'block',\n              color: 'text.secondary',\n              fontWeight: 500\n            }}\n          >\n            Основной аккаунт\n          </Typography>\n          <MenuItem \n            key={accounts.main_account.id}\n            onClick={() => handleSwitchAccount(accounts.main_account.id)}\n          >\n            <ListItemIcon>\n              <Avatar\n                src={accounts.main_account.photo}\n                sx={{ width: 30, height: 30 }}\n              />\n            </ListItemIcon>\n            <ListItemText>{accounts.main_account.name}</ListItemText>\n          </MenuItem>\n        </>\n      )}\n\n      {accounts.channels && accounts.channels.length > 0 && (\n        <>\n          <Divider sx={{ opacity: 0.1, mx: 2, my: 1 }} />\n          <Typography\n            variant=\"caption\"\n            sx={{\n              px: 3,\n              py: 0.5,\n              display: 'block',\n              color: 'text.secondary',\n              fontWeight: 500\n            }}\n          >\n            Мои каналы\n          </Typography>\n          {accounts.channels.map(channel => (\n            <MenuItem \n              key={channel.id}\n              onClick={() => handleSwitchAccount(channel.id)}\n            >\n              <ListItemIcon>\n                <Avatar\n                  src={channel.photo}\n                  sx={{ width: 30, height: 30 }}\n                />\n              </ListItemIcon>\n              <ListItemText>{channel.name}</ListItemText>\n            </MenuItem>\n          ))}\n        </>\n      )}\n\n      <Divider sx={{ opacity: 0.1, mx: 2, my: 1 }} />\n\n      <MenuItem \n        onClick={handleLogout}\n        sx={{ \n          color: theme => theme.palette.error.main,\n          '&:hover': {\n            backgroundColor: theme => alpha(theme.palette.error.main, 0.08),\n          }\n        }}\n      >\n        <ListItemIcon>\n          <ExitToAppIcon fontSize=\"small\" style={{ color: 'inherit' }} />\n        </ListItemIcon>\n        <ListItemText>Выйти</ListItemText>\n      </MenuItem>\n    </Menu>\n  );\n\n  return (\n    <StyledAppBar \n      sx={{ \n        display: isMusicPage && isMobile ? 'none' : 'block',\n      }}\n      style={themeValues.headerStyle}\n    >\n      <GlobalStyles styles={{\n        '.MuiToolbar-root': {\n          minHeight: '48px !important',\n          height: '48px !important',\n          paddingTop: 0,\n          paddingBottom: 0,\n        }\n      }} />\n      <StyledToolbar>\n        <LogoSection>\n          <Link to=\"/\" style={{ textDecoration: 'none', color: 'inherit', display: 'flex', alignItems: 'center' }}>\n            <LogoSVG \n              style={{ \n                height: 32, \n                width: 'auto'\n              }} \n            />\n            {!isMobile && (\n              <LogoText>\n                <Box component=\"span\" sx={{ color: 'primary.main' }}>К</Box>\n                <Box component=\"span\" sx={{ \n                  color: theme.palette.mode === 'dark' ? 'white' : 'black', \n                  opacity: 0.9 \n                }}>-КОННЕКТ</Box>\n              </LogoText>\n            )}\n          </Link>\n        </LogoSection>\n\n        <Box sx={{ display: 'flex', justifyContent: 'center', flexGrow: 1 }}>\n          {showSearch ? (\n            <SearchInputWrapper>\n              <ClickAwayListener onClickAway={handleClickAway}>\n                <Box sx={{ width: '100%', position: 'relative' }}>\n                  <StyledSearchInput\n                    placeholder=\"Поиск...\"\n                    value={searchQuery}\n                    onChange={handleSearchChange}\n                    onFocus={handleSearchFocus}\n                    inputRef={searchInputRef}\n                    variant=\"outlined\"\n                    fullWidth\n                    InputProps={{\n                      startAdornment: (\n                        <InputAdornment position=\"start\">\n                          <SearchIcon sx={{ color: 'rgba(255, 255, 255, 0.7)' }} />\n                        </InputAdornment>\n                      ),\n                      endAdornment: (\n                        <InputAdornment position=\"end\">\n                          <IconButton \n                            size=\"small\" \n                            edge=\"end\"\n                            onClick={toggleSearch}\n                            sx={{ color: 'rgba(255, 255, 255, 0.7)' }}\n                          >\n                            <ClearIcon />\n                          </IconButton>\n                        </InputAdornment>\n                      ),\n                    }}\n                  />\n                  \n                  {showSearchResults && (\n                    <SearchResultsContainer>\n                      <SearchResultTabs\n                        value={searchTab}\n                        onChange={handleSearchTabChange}\n                        variant=\"fullWidth\"\n                      >\n                        <SearchResultTab label=\"Все\" />\n                        <SearchResultTab label=\"Каналы\" />\n                      </SearchResultTabs>\n                      \n                      <Box sx={{ \n                        p: 1,\n                        [theme.breakpoints.down('sm')]: {\n                          height: 'calc(100% - 40px)',\n                          overflowY: 'auto'\n                        }\n                      }}>\n                        {searchLoading ? (\n                          <Box sx={{ display: 'flex', justifyContent: 'center', p: 2 }}>\n                            <CircularProgress size={24} />\n                          </Box>\n                        ) : searchTab === 0 ? (\n                          \n                          <>\n                            {searchResults.users.length > 0 ? (\n                              <List sx={{ p: 0 }}>\n                                {searchResults.users.map(user => (\n                                  <ListItem \n                                    key={user.id} \n                                    button \n                                    onClick={() => handleSearchItemClick(`/profile/${user.username}`)}\n                                    sx={{ borderRadius: 1 }}\n                                  >\n                                    <ListItemAvatar>\n                                      <Avatar \n                                        src={user.photo ? `/static/uploads/avatar/${user.id}/${user.photo}` : '/static/uploads/avatar/system/avatar.png'} \n                                        alt={user.name || user.username}\n                                      />\n                                    </ListItemAvatar>\n                                    <ListItemText \n                                      primary={\n                                        <Box sx={{ display: 'flex', alignItems: 'center' }}>\n                                          {user.name}\n                                          {user.verification_status === 'verified' && (\n                                            <VerifiedIcon sx={{ fontSize: 14, ml: 0.5, color: '#D0BCFF' }} />\n                                          )}\n                                        </Box>\n                                      } \n                                      secondary={`@${user.username}`} \n                                    />\n                                  </ListItem>\n                                ))}\n                              </List>\n                            ) : (\n                              <Box sx={{ p: 2, textAlign: 'center' }}>\n                                <Typography variant=\"body2\" color=\"text.secondary\">\n                                  Пользователи не найдены\n                                </Typography>\n                              </Box>\n                            )}\n                          </>\n                        ) : (\n                          \n                          <>\n                            {searchResults.channels.length > 0 ? (\n                              <List sx={{ p: 0 }}>\n                                {searchResults.channels.map(channel => (\n                                  <ListItem \n                                    key={channel.id} \n                                    button \n                                    onClick={() => handleSearchItemClick(`/profile/${channel.username}`)}\n                                    sx={{ borderRadius: 1 }}\n                                  >\n                                    <ListItemAvatar>\n                                      <Avatar \n                                        src={channel.photo} \n                                        alt={channel.name}\n                                        onError={(e) => {\n                                          e.target.onerror = null;\n                                          e.target.src = '/static/uploads/avatar/system/avatar.png';\n                                        }}\n                                      />\n                                    </ListItemAvatar>\n                                    <ListItemText \n                                      primary={\n                                        <Box sx={{ display: 'flex', alignItems: 'center' }}>\n                                          {channel.name}\n                                          {channel.is_verified && (\n                                            <VerifiedIcon sx={{ fontSize: 14, ml: 0.5, color: '#D0BCFF' }} />\n                                          )}\n                                        </Box>\n                                      } \n                                      secondary={`@${channel.username}`} \n                                    />\n                                  </ListItem>\n                                ))}\n                              </List>\n                            ) : (\n                              <Box sx={{ p: 2, textAlign: 'center' }}>\n                                <Typography variant=\"body2\" color=\"text.secondary\">\n                                  Каналы не найдены\n                                </Typography>\n                              </Box>\n                            )}\n                          </>\n                        )}\n                        \n                        {(searchTab === 0 && searchResults.users.length > 0) || \n                         (searchTab === 1 && searchResults.channels.length > 0) ? (\n                          <Box sx={{ p: 1, display: 'flex', justifyContent: 'center' }}>\n                            <Button \n                              size=\"small\" \n                              onClick={handleViewAll}\n                              sx={{ \n                                textTransform: 'none',\n                                color: '#D0BCFF',\n                                '&:hover': { backgroundColor: alpha('#D0BCFF', 0.1) }\n                              }}\n                            >\n                              Показать все\n                            </Button>\n                          </Box>\n                        ) : null}\n                      </Box>\n                    </SearchResultsContainer>\n                  )}\n                </Box>\n              </ClickAwayListener>\n            </SearchInputWrapper>\n          ) : (\n            <PlayerSection>\n              {currentTrack && (\n                <Box sx={{ display: 'flex', alignItems: 'center', width: '100%', justifyContent: 'space-between' }}>\n                  {/* Compact Track Info */}\n                  <Box \n                    component={Link} \n                    to=\"/music\" \n                    sx={{ \n                      display: 'flex', \n                      alignItems: 'center',\n                      textDecoration: 'none',\n                      color: 'inherit',\n                      flex: '1',\n                      minWidth: 0, \n                    }}\n                  >\n                    <Avatar \n                      variant=\"rounded\" \n                      src={currentTrack.cover_path || '/static/uploads/system/album_placeholder.jpg'} \n                      alt={currentTrack.title}\n                      sx={{ width: 32, height: 32, mr: 1, borderRadius: '4px' }}\n                    />\n                    <Box sx={{ minWidth: 0 }}> {/* Container for proper text truncation */}\n                      <Typography variant=\"body2\" fontWeight=\"medium\" noWrap>\n                        {truncateTitle(currentTrack.title, 20)}\n                      </Typography>\n                      <Typography variant=\"caption\" color=\"text.secondary\" noWrap>\n                        {truncateTitle(currentTrack.artist, 20)}\n                      </Typography>\n                    </Box>\n                  </Box>\n                  \n                  {/* Simplified Controls */}\n                  <PlayerControls>\n                    <IconButton size=\"small\" onClick={prevTrack} sx={{ p: 0.5 }}>\n                      <SkipPreviousIcon sx={{ fontSize: '1.1rem' }} />\n                    </IconButton>\n                    \n                    <IconButton \n                      onClick={togglePlay}\n                      size=\"small\"\n                      sx={{ \n                        color: 'primary.main',\n                        bgcolor: alpha(theme.palette.primary.main, 0.05),\n                        '&:hover': { bgcolor: alpha(theme.palette.primary.main, 0.15) },\n                        p: 0.7,\n                        mx: 0.5,\n                      }}\n                    >\n                      {isPlaying ? <PauseIcon sx={{ fontSize: '1.1rem' }} /> : <PlayArrowIcon sx={{ fontSize: '1.1rem' }} />}\n                    </IconButton>\n                    \n                    <IconButton size=\"small\" onClick={nextTrack} sx={{ p: 0.5 }}>\n                      <SkipNextIcon sx={{ fontSize: '1.1rem' }} />\n                    </IconButton>\n                    \n                    <VolumeControl>\n                      <IconButton \n                        size=\"small\" \n                        onClick={toggleMute}\n                        sx={{ p: 0.5, ml: 0.5 }}\n                      >\n                        {isMuted || volume === 0 ? \n                          <VolumeOffIcon sx={{ fontSize: '1.1rem' }} /> : \n                          <VolumeUpIcon sx={{ fontSize: '1.1rem' }} />\n                        }\n                      </IconButton>\n                      <VolumeSlider \n                        className=\"volume-slider\"\n                        type=\"range\" \n                        min={0} \n                        max={1} \n                        step={0.01} \n                        value={isMuted ? 0 : volume}\n                        onChange={(e) => setVolume(parseFloat(e.target.value))}\n                      />\n                    </VolumeControl>\n                  </PlayerControls>\n                </Box>\n              )}\n            </PlayerSection>\n          )}\n        </Box>\n\n        <ActionsSection>\n          {user && !isMobile && (\n            <Tooltip title=\"Кошелек\">\n              <Chip\n                icon={\n                  <PointsIcon>\n                    <BallsSVG />\n                  </PointsIcon>\n                }\n                label=\"Кошелек\"\n                onClick={() => navigate('/balance')}\n                clickable\n                sx={{\n                  borderRadius: 20,\n                  fontWeight: 'bold',\n                  background: `linear-gradient(45deg, #d0bcff 30%, ${alpha('#d0bcff', 0.8)} 90%)`,\n                  color: '#1a1a1a',\n                  border: 'none',\n                  boxShadow: '0 2px 5px rgba(0,0,0,0.1)',\n                  height: 32,\n                  '& .MuiChip-icon': {\n                    color: 'inherit',\n                  },\n                  [theme.breakpoints.down('md')]: {\n                    display: 'none',\n                  },\n                }}\n              />\n            </Tooltip>\n          )}\n          \n          <IconButton \n            color=\"inherit\" \n            onClick={toggleSearch}\n            sx={{ \n              bgcolor: showSearch \n                ? alpha(theme.palette.primary.main, 0.1) \n                : 'transparent',\n              color: showSearch\n                ? 'primary.main' \n                : 'inherit',\n              transition: 'all 0.2s ease',\n              '&:hover': {\n                bgcolor: alpha(theme.palette.primary.main, 0.08),\n                transform: 'scale(1.05)'\n              }\n            }}\n          >\n            <SearchIcon />\n          </IconButton>\n          \n          {user && <NotificationList onNewNotification={handleNewNotification} />}\n          \n          <IconButton\n            edge=\"end\"\n            aria-label=\"account\"\n            aria-haspopup=\"true\"\n            onClick={handleProfileMenuOpen}\n            color=\"inherit\"\n            sx={{ \n              ml: 0.5,\n              transition: 'all 0.2s ease',\n              '&:hover': {\n                transform: 'scale(1.05)'\n              }\n            }}\n          >\n            {user ? (\n              <Avatar \n                src={user.photo ? `/static/uploads/avatar/${user.id}/${user.photo}` : '/static/uploads/avatar/system/avatar.png'} \n                alt={user.name || user.username} \n                sx={{ \n                  width: 30, \n                  height: 30,\n                  border: `1px solid ${alpha(theme.palette.primary.main, 0.3)}`,\n                }}\n              />\n            ) : (\n              <AccountCircleIcon />\n            )}\n          </IconButton>\n        </ActionsSection>\n      </StyledToolbar>\n      \n      {/* Dynamic Island Notification */}\n      {showNewNotification && newNotification && (\n        <DynamicIslandNotification\n          open={true}\n          message={newNotification.message}\n          shortMessage={newNotification.sender_user?.name || 'Новое уведомление'}\n          notificationType=\"notification\"\n          animationType=\"pill\"\n          autoHideDuration={5000}\n          onClose={() => setShowNewNotification(false)}\n          notificationData={newNotification}\n        />\n      )}\n      \n      {profileMenu}\n    </StyledAppBar>\n  );\n};\n\nexport default React.memo(Header); ","import React, { createContext, useState, useCallback, useMemo } from 'react';\n\nexport const SidebarContext = createContext();\n\nexport const SidebarProvider = ({ children }) => {\n  const [expandedMore, setExpandedMore] = useState(false);\n  const [expandedAdminMod, setExpandedAdminMod] = useState(false);\n  const [expandedShops, setExpandedShops] = useState(false);\n  \n  const toggleExpandMore = useCallback(() => {\n    setExpandedMore(prev => !prev);\n  }, []);\n\n  const toggleExpandAdminMod = useCallback(() => {\n    setExpandedAdminMod(prev => !prev);\n  }, []);\n  \n  const toggleExpandShops = useCallback(() => {\n    setExpandedShops(prev => !prev);\n  }, []);\n  \n  const value = useMemo(() => ({\n    expandedMore,\n    expandedAdminMod,\n    expandedShops,\n    toggleExpandMore,\n    toggleExpandAdminMod,\n    toggleExpandShops\n  }), [expandedMore, expandedAdminMod, expandedShops, toggleExpandMore, toggleExpandAdminMod, toggleExpandShops]);\n  \n  return (\n    <SidebarContext.Provider value={value}>\n      {children}\n    </SidebarContext.Provider>\n  );\n}; ","const data = {\n\t\"width\": 24,\n\t\"height\": 24,\n\t\"body\": \"<defs><path id=\\\"solarHomeBold0\\\" fill-rule=\\\"evenodd\\\" d=\\\"M10.75 9.5a1.25 1.25 0 1 1 2.5 0a1.25 1.25 0 0 1-2.5 0Z\\\" clip-rule=\\\"evenodd\\\"/></defs><g fill=\\\"currentColor\\\"><path d=\\\"M18.5 3H16a.5.5 0 0 0-.5.5v.059l3.5 2.8V3.5a.5.5 0 0 0-.5-.5Z\\\"/><use href=\\\"#solarHomeBold0\\\" fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\"/><path fill-rule=\\\"evenodd\\\" d=\\\"m20.75 10.96l.782.626a.75.75 0 0 0 .936-1.172l-8.125-6.5a3.75 3.75 0 0 0-4.686 0l-8.125 6.5a.75.75 0 0 0 .937 1.172l.781-.626v10.29H2a.75.75 0 0 0 0 1.5h20a.75.75 0 0 0 0-1.5h-1.25V10.96ZM9.25 9.5a2.75 2.75 0 1 1 5.5 0a2.75 2.75 0 0 1-5.5 0Zm2.8 3.75c.664 0 1.237 0 1.696.062c.492.066.963.215 1.345.597s.531.853.597 1.345c.058.43.062.96.062 1.573v4.423h-1.5V17c0-.728-.002-1.2-.048-1.546c-.044-.325-.114-.427-.172-.484c-.057-.057-.159-.128-.484-.172c-.347-.046-.818-.048-1.546-.048c-.728 0-1.2.002-1.546.048c-.325.044-.427.115-.484.172c-.057.057-.128.159-.172.484c-.046.347-.048.818-.048 1.546v4.25h-1.5v-4.3c0-.664 0-1.237.062-1.696c.066-.492.215-.963.597-1.345s.854-.531 1.345-.597c.459-.062 1.032-.062 1.697-.062h.098Z\\\" clip-rule=\\\"evenodd\\\"/><use href=\\\"#solarHomeBold0\\\" fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\"/></g>\"\n};\nexport default data;\n","const data = {\n\t\"width\": 24,\n\t\"height\": 24,\n\t\"body\": \"<g fill=\\\"currentColor\\\"><circle cx=\\\"12\\\" cy=\\\"6\\\" r=\\\"4\\\"/><path d=\\\"M20 17.5c0 2.485 0 4.5-8 4.5s-8-2.015-8-4.5S7.582 13 12 13s8 2.015 8 4.5Z\\\"/></g>\"\n};\nexport default data;\n","const data = {\n\t\"width\": 24,\n\t\"height\": 24,\n\t\"body\": \"<path fill=\\\"currentColor\\\" d=\\\"m12.75 12.508l8.5-3.4v5.653a3.25 3.25 0 1 0 1.5 2.74V7.945c0-1.143 0-2.101-.08-2.865a7.747 7.747 0 0 0-.04-.315c-.078-.522-.214-1.008-.479-1.415a2.18 2.18 0 0 0-.62-.63l-.007-.005c-.708-.47-1.503-.437-2.322-.228c-.792.202-1.774.613-2.978 1.117l-2.094.876c-.565.236-1.043.437-1.418.644c-.4.22-.743.48-1.001.868c-.258.388-.366.805-.415 1.259c-.046.426-.046.945-.046 1.557v7.952a3.25 3.25 0 1 0 1.5 2.74v-6.993ZM7.75 2a.75.75 0 0 0-1.5 0v5.76a3.25 3.25 0 1 0 1.5 2.74V5.005c.699.504 1.53.745 2.25.745a.75.75 0 0 0 0-1.5a2.443 2.443 0 0 1-1.488-.552c-.434-.357-.762-.9-.762-1.698Z\\\"/>\"\n};\nexport default data;\n","const data = {\n\t\"width\": 24,\n\t\"height\": 24,\n\t\"body\": \"<path fill=\\\"currentColor\\\" fill-rule=\\\"evenodd\\\" d=\\\"M21.788 21.788a.723.723 0 0 0 0-1.022L18.122 17.1a9.157 9.157 0 1 0-1.022 1.022l3.666 3.666a.723.723 0 0 0 1.022 0Z\\\" clip-rule=\\\"evenodd\\\"/>\"\n};\nexport default data;\n","const data = {\n\t\"width\": 24,\n\t\"height\": 24,\n\t\"body\": \"<path fill=\\\"currentColor\\\" d=\\\"m12.37 15.835l6.43-6.63C19.201 8.79 18.958 8 18.43 8H5.57c-.528 0-.771.79-.37 1.205l6.43 6.63c.213.22.527.22.74 0Z\\\"/>\"\n};\nexport default data;\n","const data = {\n\t\"width\": 24,\n\t\"height\": 24,\n\t\"body\": \"<path fill=\\\"currentColor\\\" d=\\\"m12.37 8.165l6.43 6.63c.401.414.158 1.205-.37 1.205H5.57c-.528 0-.771-.79-.37-1.205l6.43-6.63a.499.499 0 0 1 .74 0Z\\\"/>\"\n};\nexport default data;\n","const data = {\n\t\"width\": 24,\n\t\"height\": 24,\n\t\"body\": \"<path fill=\\\"currentColor\\\" fill-rule=\\\"evenodd\\\" d=\\\"m10.667 6.134l-.502-.355A4.241 4.241 0 0 0 7.715 5h-.612c-.405 0-.813.025-1.194.16c-2.383.846-4.022 3.935-3.903 10.943c.024 1.412.354 2.972 1.628 3.581A3.2 3.2 0 0 0 5.027 20a2.74 2.74 0 0 0 1.53-.437c.41-.268.77-.616 1.13-.964c.444-.43.888-.86 1.424-1.138a4.106 4.106 0 0 1 1.89-.461H13c.658 0 1.306.158 1.89.46c.536.279.98.709 1.425 1.139c.36.348.72.696 1.128.964c.39.256.895.437 1.531.437a3.2 3.2 0 0 0 1.393-.316c1.274-.609 1.604-2.17 1.628-3.581c.119-7.008-1.52-10.097-3.903-10.942C17.71 5.025 17.3 5 16.897 5h-.612a4.24 4.24 0 0 0-2.45.78l-.502.354a2.308 2.308 0 0 1-2.666 0ZM16.75 9a.75.75 0 1 1 0 1.5a.75.75 0 0 1 0-1.5Zm-9.25.25a.75.75 0 0 1 .75.75v.75H9a.75.75 0 0 1 0 1.5h-.75V13a.75.75 0 0 1-1.5 0v-.75H6a.75.75 0 0 1 0-1.5h.75V10a.75.75 0 0 1 .75-.75Zm11.5 2a.75.75 0 1 1-1.5 0a.75.75 0 0 1 1.5 0Zm-3.75.75a.75.75 0 1 0 0-1.5a.75.75 0 0 0 0 1.5Zm2.25.75a.75.75 0 1 0-1.5 0a.75.75 0 0 0 1.5 0Z\\\" clip-rule=\\\"evenodd\\\"/>\"\n};\nexport default data;\n","const data = {\n\t\"width\": 24,\n\t\"height\": 24,\n\t\"body\": \"<path fill=\\\"currentColor\\\" d=\\\"M15.5 7.5a3.5 3.5 0 1 1-7 0a3.5 3.5 0 0 1 7 0Zm2.5 9c0 1.933-2.686 3.5-6 3.5s-6-1.567-6-3.5S8.686 13 12 13s6 1.567 6 3.5ZM7.122 5c.178 0 .35.017.518.05A4.977 4.977 0 0 0 7 7.5c0 .868.221 1.685.61 2.396c-.158.03-.32.045-.488.045c-1.414 0-2.561-1.106-2.561-2.47C4.561 6.106 5.708 5 7.122 5ZM5.447 18.986C4.88 18.307 4.5 17.474 4.5 16.5c0-.944.357-1.756.896-2.423C3.49 14.225 2 15.267 2 16.529c0 1.275 1.517 2.325 3.447 2.457ZM17 7.5c0 .868-.221 1.685-.61 2.396c.157.03.32.045.488.045c1.414 0 2.56-1.106 2.56-2.47c0-1.365-1.146-2.471-2.56-2.471c-.178 0-.35.017-.518.05c.407.724.64 1.56.64 2.45Zm1.553 11.486c1.93-.132 3.447-1.182 3.447-2.457c0-1.263-1.491-2.304-3.396-2.452c.54.667.896 1.479.896 2.423c0 .974-.38 1.807-.947 2.486Z\\\"/>\"\n};\nexport default data;\n","const data = {\n\t\"width\": 24,\n\t\"height\": 24,\n\t\"body\": \"<path fill=\\\"currentColor\\\" d=\\\"M17.416 2.624a.75.75 0 1 0-.832-1.248L13.669 3.32A4.488 4.488 0 0 0 12 3c-.59 0-1.153.113-1.669.32L7.416 1.376a.75.75 0 0 0-.832 1.248l2.36 1.573a4.493 4.493 0 0 0-1.368 2.475A5.447 5.447 0 0 1 8.938 6.5h6.125c.47 0 .926.06 1.361.172a4.493 4.493 0 0 0-1.368-2.475l2.36-1.573ZM1.25 14a.75.75 0 0 1 .75-.75h3v-1.312c0-.836.26-1.611.704-2.248l-2.483-.994a.75.75 0 0 1 .558-1.392l3.136 1.254A3.92 3.92 0 0 1 8.937 8h6.126c.739 0 1.43.204 2.022.558l3.136-1.254a.75.75 0 1 1 .558 1.392l-2.483.994A3.92 3.92 0 0 1 19 11.938v1.312h3a.75.75 0 0 1 0 1.5h-3V15a6.97 6.97 0 0 1-.808 3.269l2.587 1.035a.75.75 0 0 1-.558 1.393l-2.892-1.158a6.987 6.987 0 0 1-4.579 2.421V15a.75.75 0 1 0-1.5 0v6.96a6.988 6.988 0 0 1-4.579-2.42L3.78 20.696a.75.75 0 1 1-.558-1.393l2.588-1.035A6.97 6.97 0 0 1 5 15v-.25H2a.75.75 0 0 1-.75-.75Z\\\"/>\"\n};\nexport default data;\n","const data = {\n\t\"width\": 24,\n\t\"height\": 24,\n\t\"body\": \"<path fill=\\\"currentColor\\\" fill-rule=\\\"evenodd\\\" d=\\\"M3 10.417c0-3.198 0-4.797.378-5.335c.377-.537 1.88-1.052 4.887-2.081l.573-.196C10.405 2.268 11.188 2 12 2c.811 0 1.595.268 3.162.805l.573.196c3.007 1.029 4.51 1.544 4.887 2.081C21 5.62 21 7.22 21 10.417v1.574c0 5.638-4.239 8.375-6.899 9.536C13.38 21.842 13.02 22 12 22s-1.38-.158-2.101-.473C7.239 20.365 3 17.63 3 11.991v-1.574ZM14 9a2 2 0 1 1-4 0a2 2 0 0 1 4 0Zm-2 8c4 0 4-.895 4-2s-1.79-2-4-2s-4 .895-4 2s0 2 4 2Z\\\" clip-rule=\\\"evenodd\\\"/>\"\n};\nexport default data;\n","const data = {\n\t\"width\": 24,\n\t\"height\": 24,\n\t\"body\": \"<path fill=\\\"currentColor\\\" d=\\\"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2S2 6.477 2 12c0 1.6.376 3.112 1.043 4.453c.178.356.237.763.134 1.148l-.595 2.226a1.3 1.3 0 0 0 1.591 1.591l2.226-.595a1.634 1.634 0 0 1 1.149.133A9.958 9.958 0 0 0 12 22Z\\\"/>\"\n};\nexport default data;\n","const data = {\n\t\"width\": 24,\n\t\"height\": 24,\n\t\"body\": \"<path fill=\\\"currentColor\\\" d=\\\"M20 13.75a.75.75 0 0 0-.75-.75h-3a.75.75 0 0 0-.75.75v6.75H14V4.25c0-.728-.002-1.2-.048-1.546c-.044-.325-.115-.427-.172-.484c-.057-.057-.159-.128-.484-.172C12.949 2.002 12.478 2 11.75 2c-.728 0-1.2.002-1.546.048c-.325.044-.427.115-.484.172c-.057.057-.128.159-.172.484c-.046.347-.048.818-.048 1.546V20.5H8V8.75A.75.75 0 0 0 7.25 8h-3a.75.75 0 0 0-.75.75V20.5H1.75a.75.75 0 0 0 0 1.5h20a.75.75 0 0 0 0-1.5H20v-6.75Z\\\"/>\"\n};\nexport default data;\n","const data = {\n\t\"width\": 24,\n\t\"height\": 24,\n\t\"body\": \"<path fill=\\\"currentColor\\\" fill-rule=\\\"evenodd\\\" d=\\\"M3.378 5.082C3 5.62 3 7.22 3 10.417v1.574c0 5.638 4.239 8.375 6.899 9.536c.721.315 1.082.473 2.101.473c1.02 0 1.38-.158 2.101-.473C16.761 20.365 21 17.63 21 11.991v-1.574c0-3.198 0-4.797-.378-5.335c-.377-.537-1.88-1.052-4.887-2.081l-.573-.196C13.595 2.268 12.812 2 12 2c-.811 0-1.595.268-3.162.805L8.265 3c-3.007 1.03-4.51 1.545-4.887 2.082Zm7.483 3.281l-.13.235c-.145.259-.217.388-.329.473c-.112.085-.252.117-.532.18l-.254.058c-.984.222-1.476.334-1.593.71c-.117.377.218.769.889 1.553l.174.203c.19.223.285.334.328.472c.043.138.029.287 0 .584l-.026.27c-.102 1.047-.152 1.57.154 1.803c.306.233.767.02 1.688-.403l.239-.11c.261-.12.392-.181.531-.181s.27.06.531.18l.239.11c.92.425 1.382.637 1.688.404c.306-.232.256-.756.154-1.802l-.026-.271c-.029-.297-.043-.446 0-.584c.043-.138.138-.25.328-.472l.174-.203c.67-.784 1.006-1.176.889-1.553c-.117-.376-.609-.488-1.593-.71l-.254-.058c-.28-.063-.42-.095-.532-.18c-.112-.085-.184-.214-.328-.473l-.131-.235C12.632 7.454 12.379 7 12 7s-.632.454-1.139 1.363Z\\\" clip-rule=\\\"evenodd\\\"/>\"\n};\nexport default data;\n","const data = {\n\t\"width\": 24,\n\t\"height\": 24,\n\t\"body\": \"<path fill=\\\"currentColor\\\" fill-rule=\\\"evenodd\\\" d=\\\"M4.172 3.172C3 4.343 3 6.229 3 10v4c0 3.771 0 5.657 1.172 6.828C5.343 22 7.229 22 11 22h2c3.771 0 5.657 0 6.828-1.172C21 19.657 21 17.771 21 14v-4c0-3.771 0-5.657-1.172-6.828C18.657 2 16.771 2 13 2h-2C7.229 2 5.343 2 4.172 3.172ZM7.25 8A.75.75 0 0 1 8 7.25h8a.75.75 0 0 1 0 1.5H8A.75.75 0 0 1 7.25 8Zm0 4a.75.75 0 0 1 .75-.75h8a.75.75 0 0 1 0 1.5H8a.75.75 0 0 1-.75-.75ZM8 15.25a.75.75 0 0 0 0 1.5h5a.75.75 0 0 0 0-1.5H8Z\\\" clip-rule=\\\"evenodd\\\"/>\"\n};\nexport default data;\n","const data = {\n\t\"width\": 24,\n\t\"height\": 24,\n\t\"body\": \"<path fill=\\\"currentColor\\\" d=\\\"M7 12a2 2 0 1 1-4 0a2 2 0 0 1 4 0Zm7 0a2 2 0 1 1-4 0a2 2 0 0 1 4 0Zm7 0a2 2 0 1 1-4 0a2 2 0 0 1 4 0Z\\\"/>\"\n};\nexport default data;\n","const data = {\n\t\"width\": 24,\n\t\"height\": 24,\n\t\"body\": \"<path fill=\\\"currentColor\\\" d=\\\"M3.778 3.655c-.181.36-.27.806-.448 1.696l-.598 2.99a3.06 3.06 0 1 0 6.043.904l.07-.69a3.167 3.167 0 1 0 6.306-.038l.074.728a3.06 3.06 0 1 0 6.043-.904l-.598-2.99c-.178-.89-.267-1.335-.448-1.696a3 3 0 0 0-1.888-1.548C17.944 2 17.49 2 16.582 2H7.418c-.908 0-1.362 0-1.752.107a3 3 0 0 0-1.888 1.548Zm14.49 9.845a4.53 4.53 0 0 0 2.232-.581V14c0 3.771 0 5.657-1.172 6.828c-.943.944-2.348 1.127-4.828 1.163V18.5c0-.935 0-1.402-.201-1.75a1.5 1.5 0 0 0-.549-.549C13.402 16 12.935 16 12 16s-1.402 0-1.75.201a1.5 1.5 0 0 0-.549.549c-.201.348-.201.815-.201 1.75v3.491c-2.48-.036-3.885-.22-4.828-1.163C3.5 19.657 3.5 17.771 3.5 14v-1.081a4.53 4.53 0 0 0 2.232.581a4.549 4.549 0 0 0 3.112-1.228A4.643 4.643 0 0 0 12 13.5a4.644 4.644 0 0 0 3.155-1.228A4.549 4.549 0 0 0 18.27 13.5Z\\\"/>\"\n};\nexport default data;\n","const data = {\n\t\"width\": 24,\n\t\"height\": 24,\n\t\"body\": \"<path fill=\\\"currentColor\\\" d=\\\"M14.18 4.276a.75.75 0 0 1 .531.918l-3.973 14.83a.75.75 0 0 1-1.45-.389l3.974-14.83a.75.75 0 0 1 .919-.53Zm2.262 3.052a.75.75 0 0 1 1.06-.056l1.737 1.564c.737.662 1.347 1.212 1.767 1.71c.44.525.754 1.088.754 1.784c0 .695-.313 1.258-.754 1.782c-.42.499-1.03 1.049-1.767 1.711l-1.737 1.564a.75.75 0 0 1-1.004-1.115l1.697-1.527c.788-.709 1.319-1.19 1.663-1.598c.33-.393.402-.622.402-.818c0-.195-.072-.424-.402-.817c-.344-.409-.875-.89-1.663-1.598l-1.697-1.527a.75.75 0 0 1-.056-1.06Zm-8.94 1.059a.75.75 0 1 0-1.004-1.115L4.761 8.836c-.737.662-1.347 1.212-1.767 1.71c-.44.525-.754 1.088-.754 1.784c0 .695.313 1.258.754 1.782c.42.499 1.03 1.049 1.767 1.711l1.737 1.564a.75.75 0 0 0 1.004-1.115l-1.697-1.527c-.788-.709-1.319-1.19-1.663-1.598c-.33-.393-.402-.622-.402-.818c0-.195.072-.424.402-.817c.344-.409.875-.89 1.663-1.598l1.697-1.527Z\\\"/>\"\n};\nexport default data;\n","const data = {\n\t\"width\": 24,\n\t\"height\": 24,\n\t\"body\": \"<path fill=\\\"currentColor\\\" d=\\\"m19.687 14.093l.184-1.705c.097-.91.162-1.51.111-1.888H20a1.5 1.5 0 1 0-1.136-.52c-.326.201-.752.626-1.393 1.265c-.495.493-.742.739-1.018.777a.833.833 0 0 1-.45-.063c-.254-.112-.424-.416-.763-1.025l-1.79-3.209c-.209-.375-.384-.69-.542-.942a2 2 0 1 0-1.816 0c-.158.253-.333.567-.543.942L8.76 10.934c-.34.609-.51.913-.764 1.025a.833.833 0 0 1-.45.063c-.275-.038-.522-.284-1.017-.777c-.641-.639-1.067-1.064-1.393-1.265A1.5 1.5 0 1 0 4 10.5h.018c-.051.378.014.979.111 1.888l.184 1.705c.102.946.186 1.847.29 2.657h14.794c.104-.81.188-1.71.29-2.657ZM10.912 21h2.176c2.836 0 4.254 0 5.2-.847c.413-.37.674-1.036.863-1.903H4.849c.189.867.45 1.534.863 1.903c.946.847 2.364.847 5.2.847Z\\\"/>\"\n};\nexport default data;\n","import React, { memo, useMemo, useCallback, useContext } from 'react';\nimport { List, Collapse } from '@mui/material';\nimport { Icon } from '@iconify/react';\nimport { useLocation } from 'react-router-dom';\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\nimport ExpandLessIcon from '@mui/icons-material/ExpandLess';\nimport { NavButton, MoreButton } from '../../UIKIT';\nimport { SidebarContext } from '../../context/SidebarContext';\nimport GavelIcon from '@mui/icons-material/Gavel';\n\n\nimport homeIcon from '@iconify-icons/solar/home-bold';\nimport personIcon from '@iconify-icons/solar/user-bold';\nimport groupIcon from '@iconify-icons/solar/users-group-rounded-bold';\nimport musicIcon from '@iconify-icons/solar/music-notes-bold';\nimport messageIcon from '@iconify-icons/solar/chat-round-dots-bold';\nimport settingsIcon from '@iconify-icons/solar/settings-bold';\nimport searchIcon from '@iconify-icons/solar/magnifer-bold';\nimport arrowDownIcon from '@iconify-icons/solar/alt-arrow-down-bold';\nimport arrowUpIcon from '@iconify-icons/solar/alt-arrow-up-bold';\nimport bookmarkIcon from '@iconify-icons/solar/bookmark-bold';\nimport eventIcon from '@iconify-icons/solar/calendar-bold';\nimport gameIcon from '@iconify-icons/solar/gamepad-bold';\nimport peopleIcon from '@iconify-icons/solar/users-group-two-rounded-bold';\nimport bugIcon from '@iconify-icons/solar/bug-bold';\nimport adminIcon from '@iconify-icons/solar/shield-user-bold';\nimport chatIcon from '@iconify-icons/solar/chat-round-bold';\nimport leaderboardIcon from '@iconify-icons/solar/chart-bold';\nimport moderatorIcon from '@iconify-icons/solar/shield-star-bold';\nimport rulesIcon from '@iconify-icons/solar/document-text-bold';\nimport moreIcon from '@iconify-icons/solar/menu-dots-bold';\nimport shopIcon from '@iconify-icons/solar/shop-bold';\nimport apiIcon from '@iconify-icons/solar/code-bold';\nimport starIcon from '@iconify-icons/solar/star-bold';\nimport subscriptionIcon from '@iconify-icons/solar/crown-bold';\n\nconst SidebarNavigation = memo(({ \n  isAdmin, \n  isModeratorUser, \n  isChannel, \n  primaryColor,\n  user\n}) => {\n  const location = useLocation();\n  const { expandedMore, expandedAdminMod, expandedShops, toggleExpandMore, toggleExpandAdminMod, toggleExpandShops } = useContext(SidebarContext);\n  \n  \n  const isActive = useCallback((path) => {\n    if (path === '/' && location.pathname === '/') {\n      return true;\n    }\n    return location.pathname === path;\n  }, [location.pathname]);\n  \n  \n  const icons = useMemo(() => ({\n    person: <Icon icon={personIcon} width=\"20\" height=\"20\" />,\n    home: <Icon icon={homeIcon} width=\"20\" height=\"20\" />,\n    music: <Icon icon={musicIcon} width=\"20\" height=\"20\" />,\n    people: <Icon icon={peopleIcon} width=\"20\" height=\"20\" />,\n    channels: <Icon icon=\"solar:users-group-rounded-bold\" width=\"20\" height=\"20\" />,\n    search: <Icon icon={searchIcon} width=\"20\" height=\"20\" />,\n    shop: <Icon icon={shopIcon} width=\"20\" height=\"20\" />,\n    admin: <Icon icon={adminIcon} width=\"20\" height=\"20\" />,\n    moderator: <Icon icon={moderatorIcon} width=\"20\" height=\"20\" />,\n    games: <Icon icon={gameIcon} width=\"20\" height=\"20\" />,\n    subscription: <Icon icon={subscriptionIcon} width=\"20\" height=\"20\" />,\n    more: <Icon icon={moreIcon} width=\"20\" height=\"20\" />,\n    arrowUp: <Icon icon={arrowUpIcon} width=\"20\" height=\"20\" />,\n    arrowDown: <Icon icon={arrowDownIcon} width=\"20\" height=\"20\" />,\n    leaderboard: <Icon icon={leaderboardIcon} width=\"20\" height=\"20\" />,\n    bug: <Icon icon={bugIcon} width=\"20\" height=\"20\" />,\n    rules: <Icon icon={rulesIcon} width=\"20\" height=\"20\" />,\n    api: <Icon icon={apiIcon} width=\"20\" height=\"20\" />,\n    auction: <GavelIcon sx={{ fontSize: 20 }} />\n  }), []);\n  \n  \n  const mainMenu = useMemo(() => (\n    <>\n      <NavButton\n        text=\"Мой профиль\"\n        icon={icons.person}\n        path={`/profile/${user?.username || user?.id}`}\n        active={isActive(`/profile/${user?.username || user?.id}`)}\n        themeColor={primaryColor}\n      />\n      \n      <NavButton\n        text=\"Лента\"\n        icon={icons.home}\n        path=\"/\"\n        active={isActive('/')}\n        themeColor={primaryColor}\n      />\n      \n      <NavButton\n        text=\"Мессенджер\"\n        icon={<Icon icon={chatIcon} width=\"20\" height=\"20\" />}\n        path=\"/messenger\"\n        active={isActive('/messenger')}\n        themeColor={primaryColor}\n      />\n      \n      <NavButton\n        text=\"Музыка\"\n        icon={icons.music}\n        path=\"/music\"\n        active={isActive('/music')}\n        themeColor={primaryColor}\n      />\n      \n      <NavButton\n        text=\"Подписки\"\n        icon={icons.people}\n        path=\"/subscriptions\"\n        active={isActive('/subscriptions')}\n        themeColor={primaryColor}\n      />\n      \n      <NavButton\n        text=\"Каналы\"\n        icon={icons.channels}\n        path=\"/channels\"\n        active={isActive('/channels')}\n        themeColor={primaryColor}\n      />\n      \n      <NavButton\n        text=\"Поиск\"\n        icon={icons.search}\n        path=\"/search\"\n        active={isActive('/search')}\n        themeColor={primaryColor}\n      />\n    </>\n  ), [icons, isActive, primaryColor, user]);\n  \n  const adminModMenu = useMemo(() => (\n    (isAdmin || isModeratorUser) && (\n      <>\n        <NavButton\n          text=\"Управление\"\n          icon={icons.admin}\n          active={expandedAdminMod}\n          isSpecial={true}\n          onClick={toggleExpandAdminMod}\n          endIcon={expandedAdminMod ? <ExpandLessIcon /> : <ExpandMoreIcon />}\n        />\n        \n        <Collapse in={expandedAdminMod} timeout=\"auto\" unmountOnExit>\n          <List component=\"div\" disablePadding sx={{ pl: 1.5, pt: 0.5 }}>\n            \n            {isAdmin && (\n              <NavButton\n                text=\"Админ Панель\"\n                icon={icons.admin}\n                path=\"/admin\"\n                active={isActive('/admin')}\n                isSpecial={true}\n                nested={true}\n              />\n            )}\n            \n            {isModeratorUser && (\n              <NavButton\n                text=\"Модерировать\"\n                icon={icons.moderator}\n                path=\"/moderator\"\n                active={isActive('/moderator')}\n                isSpecial={true}\n                nested={true}\n              />\n            )}\n          </List>\n        </Collapse>\n      </>\n    )\n  ), [icons, isActive, isAdmin, isModeratorUser, expandedAdminMod, toggleExpandAdminMod]);\n\n  const shopsMenu = useMemo(() => (\n    <>\n      <NavButton\n        text=\"Магазины\"\n        icon={icons.shop}\n        active={expandedShops}\n        onClick={toggleExpandShops}\n        endIcon={expandedShops ? <ExpandLessIcon /> : <ExpandMoreIcon />}\n        themeColor={primaryColor}\n      />\n      \n      <Collapse in={expandedShops} timeout=\"auto\" unmountOnExit>\n        <List component=\"div\" disablePadding sx={{ pl: 1.5, pt: 0.5 }}>\n          <NavButton\n            text=\"Магазин бейджиков\"\n            icon={icons.shop}\n            path=\"/badge-shop\"\n            active={isActive('/badge-shop')}\n            themeColor={primaryColor}\n            nested={true}\n          />\n          \n          <NavButton\n            text=\"Аукцион юзернеймов\"\n            icon={icons.auction}\n            path=\"/username-auction\"\n            active={isActive('/username-auction')}\n            themeColor={primaryColor}\n            nested={true}\n          />\n        </List>\n      </Collapse>\n    </>\n  ), [icons, isActive, primaryColor, expandedShops, toggleExpandShops]);\n  \n  const extraMenu = useMemo(() => (\n    !isChannel && (\n      <>\n        <NavButton\n          text=\"Мини-игры\"\n          icon={icons.games}\n          path=\"/minigames\"\n          active={isActive('/minigames')}\n          themeColor={primaryColor}\n        />\n        \n        <NavButton\n          text=\"Планы подписок\"\n          icon={icons.subscription}\n          path=\"/sub-planes\"\n          active={isActive('/sub-planes')}\n          themeColor={primaryColor}\n        />\n      </>\n    )\n  ), [icons, isActive, isChannel, primaryColor]);\n  \n  const moreSection = useMemo(() => (\n    <>\n      <MoreButton \n        text=\"Еще\"\n        icon={icons.more}\n        active={expandedMore}\n        themeColor={primaryColor}\n        onClick={toggleExpandMore}\n        arrowUpIcon={icons.arrowUp}\n        arrowDownIcon={icons.arrowDown}\n      />\n\n      <Collapse in={expandedMore} timeout=\"auto\" unmountOnExit>\n        <List component=\"div\" disablePadding sx={{ pl: 1.5, pt: 0.5 }}>\n          \n          {!isChannel && (\n            <>\n              <NavButton\n                text=\"Лидерборд\"\n                icon={icons.leaderboard}\n                path=\"/leaderboard\"\n                active={isActive('/leaderboard')}\n                themeColor={primaryColor}\n                nested={true}\n              />\n              \n              <NavButton\n                text=\"Баг-репорты\"\n                icon={icons.bug}\n                path=\"/bugs\"\n                active={isActive('/bugs')}\n                themeColor={primaryColor}\n                nested={true}\n              />\n            </>\n          )}\n          \n          <NavButton\n            text=\"Правила\"\n            icon={icons.rules}\n            path=\"/rules\"\n            active={isActive('/rules')}\n            themeColor={primaryColor}\n            nested={true}\n          />\n          \n          <NavButton\n            text=\"API Документация\"\n            icon={icons.api}\n            path=\"/api-docs\"\n            active={isActive('/api-docs')}\n            themeColor={primaryColor}\n            nested={true}\n          />\n          \n          <NavButton\n            text=\"О платформе\"\n            icon={icons.rules}\n            path=\"/about\"\n            active={isActive('/about')}\n            themeColor={primaryColor}\n            nested={true}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          />\n        </List>\n      </Collapse>\n    </>\n  ), [icons, isActive, isChannel, primaryColor, expandedMore, toggleExpandMore]);\n  \n  return (\n    <List component=\"nav\" sx={{ p: 1, mt: 1 }}>\n      {mainMenu}\n      {adminModMenu}\n      {shopsMenu}\n      {extraMenu}\n      {moreSection}\n    </List>\n  );\n});\n\nexport default SidebarNavigation; ","import React, { memo } from 'react';\nimport { \n  Box, \n  Typography,\n  Avatar,\n  Button,\n  styled\n} from '@mui/material';\nimport { Link as RouterLink } from 'react-router-dom';\n\nconst UserProfileWrapper = styled(Box)(({ theme }) => ({\n  display: 'flex',\n  alignItems: 'center',\n  padding: theme.spacing(1.5),\n  position: 'relative',\n  gap: theme.spacing(1.5),\n  '&::after': {\n    content: '\"\"',\n    position: 'absolute',\n    bottom: 0,\n    left: '10%',\n    right: '10%',\n    height: '1px',\n    background: theme.palette.mode === 'dark' \n      ? `linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent)`\n      : `linear-gradient(90deg, transparent, rgba(0, 0, 0, 0.1), transparent)`,\n  }\n}));\n\nconst StyledAvatar = styled(Avatar)(({ theme }) => ({\n  width: 48,\n  height: 48,\n  border: theme.palette.mode === 'dark' ? '1px solid rgba(255, 255, 255, 0.1)' : '1px solid rgba(0, 0, 0, 0.1)',\n  boxShadow: '0 2px 8px rgba(0, 0, 0, 0.1)',\n  transition: 'transform 0.2s ease',\n  flexShrink: 0,\n  '&:hover': {\n    transform: 'scale(1.05)'\n  }\n}));\n\nconst UserInfoContainer = styled(Box)({\n  display: 'flex',\n  flexDirection: 'column',\n  justifyContent: 'center',\n  flex: 1,\n  minWidth: 0\n});\n\nconst UserName = styled(Typography)(({ theme }) => ({\n  fontWeight: '600',\n  fontSize: '0.95rem',\n  color: theme.palette.mode === 'dark' ? '#FFFFFF' : theme.palette.text.primary,\n  whiteSpace: 'nowrap',\n  overflow: 'hidden',\n  textOverflow: 'ellipsis'\n}));\n\nconst UserNameTag = styled(Typography)(({ theme }) => ({\n  color: theme.palette.mode === 'dark' ? 'rgba(255, 255, 255, 0.5)' : 'rgba(0, 0, 0, 0.5)',\n  fontSize: '0.75rem',\n  whiteSpace: 'nowrap',\n  overflow: 'hidden',\n  textOverflow: 'ellipsis'\n}));\n\nconst EditButton = styled(Button)(({ theme }) => ({\n  padding: theme.spacing(0.25, 1.5),\n  borderRadius: '6px',\n  textTransform: 'none',\n  fontSize: '0.7rem',\n  marginTop: theme.spacing(0.5),\n  color: theme.palette.mode === 'dark' ? 'rgba(255, 255, 255, 0.7)' : 'rgba(0, 0, 0, 0.7)',\n  background: theme.palette.mode === 'dark' ? 'rgba(255, 255, 255, 0.05)' : 'rgba(0, 0, 0, 0.05)',\n  border: theme.palette.mode === 'dark' ? '1px solid rgba(255, 255, 255, 0.1)' : '1px solid rgba(0, 0, 0, 0.1)',\n  '&:hover': {\n    background: theme.palette.mode === 'dark' ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)'\n  }\n}));\n\nconst areEqual = (prevProps, nextProps) => {\n  return (\n    prevProps.user?.id === nextProps.user?.id &&\n    prevProps.user?.name === nextProps.user?.name &&\n    prevProps.user?.username === nextProps.user?.username &&\n    prevProps.user?.photo === nextProps.user?.photo &&\n    prevProps.primaryColor === nextProps.primaryColor\n  );\n};\n\nconst UserProfileBlock = ({ user }) => {\n  if (!user) return null;\n  \n  return (\n    <UserProfileWrapper>\n      <StyledAvatar \n        src={user?.photo ? (user.photo.startsWith('/') ? user.photo : `/static/uploads/avatar/${user.id}/${user.photo}`) : undefined}\n        alt={user?.name || 'User'}\n        onError={(e) => {\n          console.error(`Failed to load avatar for ${user?.username}`);\n          e.target.onerror = null; \n          e.target.src = `/static/uploads/avatar/system/avatar.png`;\n        }}\n      />\n      <UserInfoContainer>\n        <UserName variant=\"h6\">\n          {user?.name || 'Пользователь'}\n        </UserName>\n        <UserNameTag variant=\"body2\">\n          @{user?.username || 'username'}\n        </UserNameTag>\n\n      </UserInfoContainer>\n    </UserProfileWrapper>\n  );\n};\n\nexport default memo(UserProfileBlock, areEqual); ","import React, { memo } from 'react';\nimport { Box, Typography, styled, useTheme } from '@mui/material';\n\n\nconst FooterContainer = styled(Box)(({ theme, themecolor }) => ({\n  marginTop: 'auto',\n  padding: theme.spacing(1.5, 1, 0.8),\n  textAlign: 'center',\n  position: 'relative',\n  '&::before': {\n    content: '\"\"',\n    position: 'absolute',\n    top: 0,\n    left: '15%',\n    right: '15%',\n    height: '1px',\n    background: theme.palette.mode === 'dark' \n      ? `linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent)`\n      : `linear-gradient(90deg, transparent, rgba(0, 0, 0, 0.1), transparent)`,\n  },\n  [theme.breakpoints.down('lg')]: {\n    padding: theme.spacing(1.2, 1, 0.6),\n  }\n}));\n\n\nconst FooterTypography = styled(Typography)(({ theme }) => ({\n  color: theme.palette.mode === 'dark' ? 'rgba(255, 255, 255, 0.6)' : 'rgba(0, 0, 0, 0.6)',\n  fontSize: {\n    xs: '0.6rem',\n    sm: '0.65rem',\n    md: '0.7rem'\n  }\n}));\n\n\nconst areEqual = (prevProps, nextProps) => {\n  return prevProps.primaryColor === nextProps.primaryColor;\n};\n\nconst SidebarFooter = ({ primaryColor }) => {\n  const theme = useTheme();\n  \n  return (\n    <FooterContainer themecolor={primaryColor}>\n      <Typography \n        variant=\"subtitle2\" \n        sx={{ \n          fontWeight: 500, \n          color: theme.palette.mode === 'dark' ? 'rgba(255, 255, 255, 0.9)' : 'rgba(0, 0, 0, 0.9)',\n          mb: 0.8,\n          letterSpacing: '0.4px',\n          fontSize: {\n            xs: '0.7rem',\n            sm: '0.75rem',\n            md: '0.8rem',\n          }\n        }}\n      >\n        К-Коннект v2.8\n      </Typography>\n      <FooterTypography variant=\"caption\" display=\"block\">\n        Правообладателям\n      </FooterTypography>\n      <FooterTypography variant=\"caption\" display=\"block\" sx={{ pt: 0.2 }}>\n        verif@k-connect.ru\n      </FooterTypography>\n    </FooterContainer>\n  );\n};\n\nexport default memo(SidebarFooter, areEqual); ","import React, { useContext, useState, useEffect, memo, useMemo } from 'react';\nimport { \n  Box, \n  Paper,\n  alpha,\n  useTheme\n} from '@mui/material';\nimport { styled } from '@mui/material/styles';\nimport { AuthContext } from '../../context/AuthContext';\nimport { ThemeSettingsContext } from '../../App';\nimport { SidebarProvider } from '../../context/SidebarContext';\nimport axios from 'axios';\nimport SidebarNavigation from './SidebarNavigation';\nimport UserProfileBlock from './UserProfileBlock';\nimport SidebarFooter from './SidebarFooter';\n\n\nconst SidebarContainer = styled(Paper)(({ theme }) => ({\n  padding: theme.spacing(2, 1.5),\n  borderRadius: theme.spacing(2),\n  height: 'calc(100vh - 65px)',\n  position: 'sticky',\n  top: '55px',\n  overflowY: 'auto',\n  overflowX: 'hidden',\n  boxShadow: '0 4px 15px rgba(0, 0, 0, 0.07)',\n  background: theme.palette.mode === 'dark' ? 'rgba(255, 255, 255, 0.03)' : 'rgba(0, 0, 0, 0.03)',\n  backdropFilter: 'blur(20px)',\n  WebkitBackdropFilter: 'blur(20px)',\n  border: theme.palette.mode === 'dark' ? '1px solid rgba(255, 255, 255, 0.08)' : '1px solid rgba(0, 0, 0, 0.08)',\n  display: 'flex',\n  flexDirection: 'column',\n  justifyContent: 'space-between',\n  transition: 'all 0.3s ease',\n  scrollbarWidth: 'none',\n  '&::-webkit-scrollbar': {\n    width: '0px',\n    background: 'transparent',\n  },\n  '&::-webkit-scrollbar-track': {\n    backgroundColor: 'transparent',\n  },\n  '&::-webkit-scrollbar-thumb': {\n    backgroundColor: 'transparent',\n  },\n  '&:hover': {\n    boxShadow: '0 6px 20px rgba(0, 0, 0, 0.1)',\n  },\n  [theme.breakpoints.up('md')]: {\n    width: '230px',\n    marginRight: 0,\n    marginLeft: 'auto',\n  },\n  [theme.breakpoints.down('lg')]: {\n    padding: theme.spacing(1.5, 1.2),\n    width: '220px',\n  },\n  [theme.breakpoints.down('md')]: {\n    width: '210px',\n    padding: theme.spacing(1.2, 1),\n  }\n}));\n\n\nconst areEqual = (prevProps, nextProps) => {\n  return true; \n};\n\n\nconst Sidebar = memo(() => {\n  const { user } = useContext(AuthContext);\n  const { themeSettings } = useContext(ThemeSettingsContext);\n  const [isModeratorUser, setIsModeratorUser] = useState(false);\n  const theme = useTheme();\n\n  \n  const themeValues = useMemo(() => {\n    const sidebarBackgroundColor = themeSettings.paperColor || theme.palette.background.paper;\n    const sidebarTextColor = themeSettings.textColor || theme.palette.text.primary;\n    const primaryColor = themeSettings.primaryColor || theme.palette.primary.main;\n\n    const sidebarStyle = {\n      color: sidebarTextColor,\n      boxShadow: `0 4px 15px ${alpha('#000000', 0.07)}`,\n      borderColor: alpha(sidebarTextColor, 0.08)\n    };\n\n    return {\n      primaryColor,\n      sidebarStyle\n    };\n  }, [themeSettings, theme]);\n\n  \n  const isAdmin = user?.id === 3;\n  \n  \n  const isChannel = user?.account_type === 'channel';\n  \n  \n  useEffect(() => {\n    if (user) {\n      checkModeratorStatus();\n    }\n  }, [user]);\n\n  \n  const [lastModeratorCheck, setLastModeratorCheck] = useState(0);\n\n  const checkModeratorStatus = async () => {\n    try {\n      \n      if (window._moderatorCheckInProgress) {\n        console.log('Moderator check already in progress, skipping...');\n        return;\n      }\n      \n      \n      const now = Date.now();\n      if (now - lastModeratorCheck < 15 * 60 * 1000) {\n        console.log('Using cached moderator status');\n        return;\n      }\n      \n      \n      window._moderatorCheckInProgress = true;\n      \n      const response = await axios.get('/api/moderator/quick-status');\n      if (response.data && response.data.is_moderator) {\n        setIsModeratorUser(true);\n      } else {\n        setIsModeratorUser(false);\n      }\n      \n      setLastModeratorCheck(now);\n    } catch (error) {\n      console.error('Error checking moderator status:', error);\n      setIsModeratorUser(false);\n    } finally {\n      window._moderatorCheckInProgress = false;\n    }\n  };\n  \n  \n  const userNavData = useMemo(() => ({\n    isAdmin,\n    isModeratorUser,\n    isChannel,\n    user\n  }), [isAdmin, isModeratorUser, isChannel, user]);\n\n  return (\n    <SidebarContainer elevation={2} style={themeValues.sidebarStyle}>\n      <SidebarProvider>\n      <Box>\n          <UserProfileBlock \n            user={user} \n            primaryColor={themeValues.primaryColor} \n          />\n          <SidebarNavigation \n            {...userNavData}\n            primaryColor={themeValues.primaryColor}\n                  />\n                </Box>\n      </SidebarProvider>\n      \n      <SidebarFooter primaryColor={themeValues.primaryColor} />\n    </SidebarContainer>\n  );\n}, areEqual);\n\nexport default Sidebar;","import React, { useState, useEffect, useContext, memo } from 'react';\nimport { Box, styled, useMediaQuery, useTheme, CssBaseline } from '@mui/material';\nimport Header from './Header';\nimport Sidebar from './Sidebar';\nimport { Navigate, useLocation } from 'react-router-dom';\nimport { AuthContext } from '../../context/AuthContext';\nimport { ThemeSettingsContext } from '../../App';\nimport { MobilePlayer, DesktopPlayer } from '../Music';\nimport { useMusic } from '../../context/MusicContext';\n\n\nconst MainContainer = styled(Box)(({ theme }) => ({\n  display: 'flex',\n  flexDirection: 'column',\n  minHeight: '100vh',\n  backgroundColor: theme.palette.background.default,\n  backgroundSize: 'cover',\n  backgroundPosition: 'center',\n  backgroundAttachment: 'fixed',\n  color: theme.palette.text.primary\n}));\n\n\nconst ContentWrapper = styled(Box)(({ theme }) => ({\n  display: 'flex',\n  flexGrow: 1,\n  paddingTop: 40, \n}));\n\n\nconst SidebarContainer = styled(Box)(({ theme, open }) => ({\n  flexShrink: 0,\n  marginLeft: 'auto', \n  [theme.breakpoints.down('md')]: {\n    position: 'fixed',\n    zIndex: theme.zIndex.drawer,\n    right: open ? 0 : -280, \n    left: 'auto', \n    transition: theme.transitions.create('right', { \n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n}));\n\nconst ContentContainer = styled(Box)(({ theme }) => ({\n  flexGrow: 1,\n  paddingBottom: theme.spacing(2),\n  transition: theme.transitions.create('margin', {\n    easing: theme.transitions.easing.sharp,\n    duration: theme.transitions.duration.leavingScreen,\n  }),\n  marginRight: { xs: 0, md: 0 },\n  maxWidth: '100%',\n  color: theme.palette.text.primary,\n  [theme.breakpoints.up('md')]: {\n    maxWidth: '1050px', \n    paddingRight: '10px',\n    paddingLeft: '10px',\n    marginRight: 'auto',\n  },\n  [theme.breakpoints.down('sm')]: {\n    padding: 0,\n  },\n}));\n\n\nconst Overlay = styled(Box)(({ theme }) => ({\n  position: 'fixed',\n  width: '100%',\n  height: '100%',\n  backgroundColor: 'rgba(0, 0, 0, 0.5)',\n  zIndex: theme.zIndex.drawer - 1,\n  opacity: 0,\n  visibility: 'hidden',\n  transition: 'opacity 0.3s ease, visibility 0.3s ease',\n  '&.active': {\n    opacity: 1,\n    visibility: 'visible',\n  },\n}));\n\n\nconst MemoizedHeader = memo(({ toggleSidebar, isMobile }) => (\n  <Header toggleSidebar={toggleSidebar} isMobile={isMobile} />\n));\n\n\nconst MemoizedSidebar = memo(({ open, onClose }) => (\n  <Sidebar open={open} onClose={onClose} />\n));\n\nconst MainLayout = ({ children }) => {\n  const theme = useTheme();\n  const { themeSettings, profileBackground } = useContext(ThemeSettingsContext);\n  const { user, isLoading } = useContext(AuthContext);\n  const [sidebarOpen, setSidebarOpen] = useState(false);\n  const isMobile = useMediaQuery(theme.breakpoints.down('md'));\n  const location = useLocation();\n  const { currentTrack } = useMusic();\n  \n  const sidebarWidth = 280;\n  \n  useEffect(() => {\n    if (isMobile) {\n      setSidebarOpen(false);\n    }\n  }, [location, isMobile]);\n\n  const toggleSidebar = () => {\n    setSidebarOpen(!sidebarOpen);\n  };\n\n  const closeSidebar = () => {\n    setSidebarOpen(false);\n  };\n  \n  const authPages = ['/login', '/register', '/register/profile', '/confirm-email'];\n  const isAuthPage = authPages.some(path => location.pathname.startsWith(path));\n  \n  const isMusicPage = location.pathname.startsWith('/music');\n  const hasBottomPlayer = isMobile && currentTrack && isMusicPage;\n  const hasDesktopPlayer = !isMobile && currentTrack && isMusicPage;\n  \n  const isBanned = user && user.ban === 0;\n  const isOnBanPage = location.pathname === '/ban';\n  \n  const shouldShowFullLayout = !isBanned || !isOnBanPage;\n\n  if (isAuthPage) {\n    return (\n      <Box sx={{ \n        backgroundColor: themeSettings?.backgroundColor || theme.palette.background.default,\n        color: themeSettings?.textColor || theme.palette.text.primary,\n        minHeight: '100vh',\n        display: 'flex',\n        flexDirection: 'column'\n      }}>\n        {children}\n      </Box>\n    );\n  }\n\n  return (\n    <MainContainer \n      sx={{\n        backgroundColor: themeSettings?.backgroundColor || theme.palette.background.default,\n        backgroundImage: themeSettings?.backgroundImage \n          ? `url(${themeSettings.backgroundImage})` \n          : 'none',\n        color: themeSettings?.textColor || theme.palette.text.primary\n      }}\n    >\n      {profileBackground && (\n        <div\n          className=\"profile-bg-image\"\n          style={{\n            position: 'fixed',\n            top: 0, left: 0, width: '100vw', height: '100vh',\n            backgroundImage: `url(${profileBackground})`,\n            backgroundSize: 'cover',\n            backgroundPosition: 'center center',\n            backgroundRepeat: 'no-repeat',\n            backgroundAttachment: 'scroll',\n            pointerEvents: 'none',\n          }}\n        >\n          <div style={{\n            position: 'absolute',\n            top: 0, left: 0, width: '100%', height: '100%',\n            background: 'rgba(0,0,0,0.45)'\n          }} />\n        </div>\n      )}\n      <CssBaseline />\n      {shouldShowFullLayout && <MemoizedHeader toggleSidebar={toggleSidebar} isMobile={isMobile} />}\n      \n      <ContentWrapper>\n        <Overlay \n          className={sidebarOpen ? 'active' : ''} \n          onClick={closeSidebar}\n        />\n        \n        <SidebarContainer \n          open={sidebarOpen} \n          sx={{ width: sidebarWidth }}\n        >\n          <MemoizedSidebar open={sidebarOpen} onClose={closeSidebar} />\n        </SidebarContainer>\n        \n        <ContentContainer \n          sx={{ \n            color: themeSettings?.textColor || theme.palette.text.primary,\n            width: { md: `calc(100% - ${sidebarWidth}px)` },\n            paddingBottom: {\n              xs: hasBottomPlayer ? theme.spacing(12) : 0,\n              sm: hasBottomPlayer ? theme.spacing(12) : 0,\n              md: hasBottomPlayer ? theme.spacing(12) : theme.spacing(2)\n            }\n          }}\n        >\n          {children}\n        </ContentContainer>\n      </ContentWrapper>\n      \n      {hasBottomPlayer && <MobilePlayer />}\n      {hasDesktopPlayer && <DesktopPlayer />}\n    </MainContainer>\n  );\n};\n\nexport default memo(MainLayout); "],"names":["_interopRequireDefault","require$$0","Object","defineProperty","ExitToApp","value","default","_createSvgIcon","_jsxRuntime","require$$2","jsx","d","SkipPrevious","SkipNext","ForwardRef","forwardRef","title","titleId","props","ref","React.createElement","width","height","viewBox","fill","xmlns","id","fillRule","clipRule","createElement","x1","y1","x2","y2","gradientUnits","stopColor","offset","ClearAll","StyledMenu","styled","Menu","theme","borderRadius","minWidth","maxWidth","maxHeight","boxShadow","padding","spacing","backgroundColor","backdropFilter","border","alpha","palette","divider","overflow","backgroundImage","breakpoints","down","margin","position","top","left","right","bottom","transition","primary","main","NotificationHeader","Box","display","justifyContent","alignItems","marginBottom","StyledNotificationItem","ListItem","unread","action","hover","transform","fontSize","opacity","color","pointerEvents","filter","type","getColor","error","success","marginRight","EmptyNotifications","flexDirection","textAlign","text","secondary","StyledChip","Chip","marginLeft","paddingLeft","PointsIcon","getNotificationIcon","FavoriteIcon","sx","ChatBubbleIcon","PersonAddIcon","RepeatIcon","PostAddIcon","Icon","icon","walletMoneyIcon","MonetizationOnIcon","GavelIcon","MessageIcon","EmojiEventsIcon","NotificationsIcon","formatRelativeTime","dateString","date","Date","isNaN","getTime","now","diffMs","seconds","Math","floor","minutes","getMinutesString","hours","getHoursString","days","getDaysString","formatDateTimeShort","includes","NotificationItemComponent","React","memo","notification","onClick","useTheme","senderName","sender_user","name","avatar","user","photo","notificationColor","renderNotificationContent","useCallback","message","pointsMatch","match","points","badgeMatch","badgeName","usernameMatch","username","showMessage","parts","split","trim","jsxs","mt","Typography","variant","gap","flexWrap","size","src","alt","label","num","parseInt","toFixed","replace","toString","button","is_read","borderLeft","mb","children","ListItemAvatar","Avatar","onError","e","currentTarget","setAttribute","ListItemText","fontWeight","textOverflow","whiteSpace","ml","flexShrink","created_at","className","NotificationList$1","NotificationList","onNewNotification","notifications","setNotifications","useState","loading","setLoading","anchorEl","setAnchorEl","unreadCount","setUnreadCount","setError","navigate","useNavigate","fetchUnreadCount","async","response","axios","get","data","unread_count","useEffect","intervalId","setInterval","clearInterval","fetchNotifications","newNotifications","length","latestNotification","markAllAsRead","post","prev","map","n","handleNotificationClick","max","link","handleMenuClose","handleMenuOpen","event","clearAllNotifications","delete","sortedNotifications","useMemo","sort","a","b","Fragment","Tooltip","arrow","TransitionComponent","Zoom","IconButton","Boolean","Badge","badgeContent","overlap","open","onClose","transformOrigin","horizontal","vertical","anchorOrigin","disabled","mr","ClearAllIcon","DoneAllIcon","CloseIcon","overflowY","px","py","CircularProgress","List","p","StyledAppBar","AppBar","borderBottom","WebkitBackdropFilter","zIndex","appBar","up","StyledToolbar","Toolbar","LogoSection","LogoText","mode","PlayerSection","flexGrow","PlayerControls","VolumeControl","VolumeSlider","appearance","outline","cursor","ActionsSection","background","SearchInputWrapper","fullWidth","StyledSearchInput","TextField","common","white","borderColor","SearchResultsContainer","Paper","marginTop","SearchResultTabs","Tabs","minHeight","SearchResultTab","Tab","textTransform","Header$1","Header","toggleSidebar","logout","setUser","useContext","AuthContext","themeSettings","ThemeSettingsContext","location","useLocation","isMobile","useMediaQuery","userChannels","setUserChannels","accounts","setAccounts","current_account","main_account","channels","unreadNotificationsCount","setUnreadNotificationsCount","showSearch","setShowSearch","searchQuery","setSearchQuery","searchResults","setSearchResults","users","searchTab","setSearchTab","searchLoading","setSearchLoading","showSearchResults","setShowSearchResults","searchInputRef","useRef","themeValues","headerTextColor","textColor","primaryColor","headerStyle","isMusicPage","pathname","currentTrack","isPlaying","isMuted","volume","togglePlay","nextTrack","prevTrack","toggleMute","setVolume","useMusic","isMenuOpen","showNewNotification","setShowNewNotification","newNotification","setNewNotification","lastNotificationId","handleNavigate","path","handleSwitchAccount","accountId","account_id","account","window","reload","truncateTitle","maxLength","substring","fetchUserChannels","newCount","current","handleNewNotification","setTimeout","performSearch","query","usersResponse","params","q","per_page","channelsResponse","toggleSearch","focus","handleSearchItemClick","handler","clearTimeout","profileMenu","PaperProps","elevation","ClearIcon","mx","account_type","Divider","Button","component","Link","to","startIcon","flex","my","MenuItem","ListItemIcon","AccountCircleIcon","SettingsIcon","handleCreateChannel","AddIcon","channel","ExitToAppIcon","style","GlobalStyles","styles","paddingTop","paddingBottom","textDecoration","LogoSVG","ClickAwayListener","onClickAway","handleClickAway","placeholder","onChange","target","onFocus","handleSearchFocus","inputRef","InputProps","startAdornment","InputAdornment","SearchIcon","endAdornment","edge","handleSearchTabChange","newValue","verification_status","VerifiedIcon","onerror","is_verified","handleViewAll","cover_path","noWrap","artist","SkipPreviousIcon","bgcolor","PauseIcon","PlayArrowIcon","SkipNextIcon","VolumeOffIcon","VolumeUpIcon","min","step","parseFloat","BallsSVG","clickable","DynamicIslandNotification","shortMessage","notificationType","animationType","autoHideDuration","notificationData","SidebarContext","createContext","SidebarProvider","expandedMore","setExpandedMore","expandedAdminMod","setExpandedAdminMod","expandedShops","setExpandedShops","toggleExpandMore","toggleExpandAdminMod","toggleExpandShops","Provider","body","SidebarNavigation","isAdmin","isModeratorUser","isChannel","isActive","icons","person","personIcon","home","homeIcon","music","musicIcon","people","peopleIcon","search","searchIcon","shop","shopIcon","admin","adminIcon","moderator","moderatorIcon","games","gameIcon","subscription","subscriptionIcon","more","moreIcon","arrowUp","arrowUpIcon","arrowDown","arrowDownIcon","leaderboard","leaderboardIcon","bug","bugIcon","rules","rulesIcon","api","apiIcon","auction","mainMenu","NavButton","active","themeColor","chatIcon","adminModMenu","isSpecial","endIcon","ExpandLessIcon","ExpandMoreIcon","Collapse","in","timeout","unmountOnExit","disablePadding","pl","pt","nested","shopsMenu","extraMenu","moreSection","MoreButton","rel","UserProfileWrapper","content","StyledAvatar","UserInfoContainer","UserName","UserNameTag","UserProfileBlock$1","UserProfileBlock","startsWith","undefined","areEqual","prevProps","nextProps","FooterContainer","themecolor","FooterTypography","xs","sm","md","SidebarFooter$1","SidebarFooter","letterSpacing","SidebarContainer","overflowX","scrollbarWidth","Sidebar","setIsModeratorUser","paperColor","paper","sidebarTextColor","sidebarStyle","checkModeratorStatus","lastModeratorCheck","setLastModeratorCheck","_moderatorCheckInProgress","is_moderator","userNavData","MainContainer","backgroundSize","backgroundPosition","backgroundAttachment","ContentWrapper","drawer","transitions","create","easing","sharp","duration","enteringScreen","ContentContainer","leavingScreen","paddingRight","Overlay","visibility","MemoizedHeader","MemoizedSidebar","MainLayout","profileBackground","isLoading","sidebarOpen","setSidebarOpen","closeSidebar","isAuthPage","some","hasBottomPlayer","hasDesktopPlayer","isBanned","ban","isOnBanPage","shouldShowFullLayout","backgroundRepeat","CssBaseline","MobilePlayer","DesktopPlayer"],"mappings":"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","x_google_ignoreList":[0,1,2,4,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25]}