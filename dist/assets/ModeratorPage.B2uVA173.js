import{r as se,a as te,j as e,D as Xt,E as He,H as O,i as a,o as k,T as i,G as x,J as D,l as p,s as xs,a3 as X,w as y,P as A,h as Gs,v as li,t as je,k as P,m as C,V as Us,au as hs,av as us,aw as ps,a8 as Y,I as E,aE as Yt,a0 as Qt,ax as or,ay as nr,az as lr,aA as J,aB as u,aC as dr,n as Kt,C as Le,bh as Zt,p as Ve,af as di,A as G,q as ae,be as bs,O as Js,a4 as ci,a5 as ea,bi as xi}from"./vendor-mui.08p3AH88.js";import{r as o,u as hi,N as ui,a as ra}from"./vendor-router.BRqU_Zs2.js";import{r as ie,b as gs,A as pi,f as qs,c as sa,P as Xs,h as he,W as ta}from"./index.CdVNWeFt.js";import{S as Ys}from"./Security.Cr7xxssj.js";import{M as Qs}from"./MusicNote.D4Jp3FIY.js";import{D as S}from"./Delete.C47j6PO2.js";import{P as Ks}from"./Photo.tXKr-C4h.js";import{C as Zs,A as bi,V as gi}from"./VpnKey.CiWBcDiF.js";import{B as Ne}from"./BugReport.CJI6Qv1X.js";import{P as ms}from"./Person.B_G_dVGx.js";import{E as Ge}from"./Edit.6-hI7nty.js";import{C as Me}from"./Clear.ONWxSfjH.js";import{C as mi}from"./CreditCard.CQyECVCQ.js";import{g as oe}from"./vendor-react.DF-_cTkv.js";import{V as ji}from"./VisibilityOff.qSdmZWpe.js";import{S as js}from"./Save.D4JlNQm5.js";import{V as et}from"./VerifiedUser.CnoA7dRM.js";import{a as j}from"./vendor.CL98q8z6.js";import{C as rt}from"./ContentCopy.BChjYHZa.js";import{P as fi}from"./PlayArrow.GqmCGL4o.js";import{B as st}from"./Block.CDlxe_qq.js";import{H as aa}from"./History.BL_2VNvs.js";import{W as vi}from"./WarningAmber.ahx4NMS2.js";import{Q as yi}from"./QueueMusic.Dom8AGTx.js";import{A as tt}from"./Add.BKfOzMjp.js";import{C as ki}from"./Close.BG2YHWMj.js";var ia,cr={};function Ci(){if(ia)return cr;ia=1;var f=se();Object.defineProperty(cr,"__esModule",{value:!0}),cr.default=void 0;var b=f(ie()),v=te();return cr.default=(0,b.default)((0,v.jsx)("path",{d:"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-2 5h-3v5.5c0 1.38-1.12 2.5-2.5 2.5S10 13.88 10 12.5s1.12-2.5 2.5-2.5c.57 0 1.08.19 1.5.51V5h4zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4z"}),"LibraryMusic"),cr}const _i=oe(Ci());var oa,xr={};function wi(){if(oa)return xr;oa=1;var f=se();Object.defineProperty(xr,"__esModule",{value:!0}),xr.default=void 0;var b=f(ie()),v=te();return xr.default=(0,b.default)([(0,v.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,v.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime"),xr}const at=oe(wi());var na,hr={};function Si(){if(na)return hr;na=1;var f=se();Object.defineProperty(hr,"__esModule",{value:!0}),hr.default=void 0;var b=f(ie()),v=te();return hr.default=(0,b.default)((0,v.jsx)("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"}),"OpenInNew"),hr}const Ii=oe(Si());var la,ur={};function zi(){if(la)return ur;la=1;var f=se();Object.defineProperty(ur,"__esModule",{value:!0}),ur.default=void 0;var b=f(ie()),v=te();return ur.default=(0,b.default)((0,v.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m.88 15.76V19h-1.75v-1.29c-.74-.18-2.39-.77-3.02-2.96l1.65-.67c.06.22.58 2.09 2.4 2.09.93 0 1.98-.48 1.98-1.61 0-.96-.7-1.46-2.28-2.03-1.1-.39-3.35-1.03-3.35-3.31 0-.1.01-2.4 2.62-2.96V5h1.75v1.24c1.84.32 2.51 1.79 2.66 2.23l-1.58.67c-.11-.35-.59-1.34-1.9-1.34-.7 0-1.81.37-1.81 1.39 0 .95.86 1.31 2.64 1.9 2.4.83 3.01 2.05 3.01 3.45 0 2.63-2.5 3.13-3.02 3.22"}),"Paid"),ur}const da=oe(zi());var ca,pr={};function Ri(){if(ca)return pr;ca=1;var f=se();Object.defineProperty(pr,"__esModule",{value:!0}),pr.default=void 0;var b=f(ie()),v=te();return pr.default=(0,b.default)((0,v.jsx)("path",{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"}),"FileUpload"),pr}const xa=oe(Ri());var ha,br={};function Wi(){if(ha)return br;ha=1;var f=se();Object.defineProperty(br,"__esModule",{value:!0}),br.default=void 0;var b=f(ie()),v=te();return br.default=(0,b.default)((0,v.jsx)("path",{d:"M3 13h8V3H3zm0 8h8v-6H3zm10 0h8V11h-8zm0-18v6h8V3z"}),"Dashboard"),br}const $i=oe(Wi());var ua,gr={};function Mi(){if(ua)return gr;ua=1;var f=se();Object.defineProperty(gr,"__esModule",{value:!0}),gr.default=void 0;var b=f(ie()),v=te();return gr.default=(0,b.default)((0,v.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8 0-1.85.63-3.55 1.69-4.9L16.9 18.31C15.55 19.37 13.85 20 12 20m6.31-3.1L7.1 5.69C8.45 4.63 10.15 4 12 4c4.42 0 8 3.58 8 8 0 1.85-.63 3.55-1.69 4.9"}),"DoNotDisturb"),gr}const Oi=oe(Mi());var pa,mr={};function Di(){if(pa)return mr;pa=1;var f=se();Object.defineProperty(mr,"__esModule",{value:!0}),mr.default=void 0;var b=f(ie()),v=te();return mr.default=(0,b.default)((0,v.jsx)("path",{d:"M12 3v9.28c-.47-.17-.97-.28-1.5-.28C8.01 12 6 14.01 6 16.5S8.01 21 10.5 21c2.31 0 4.2-1.75 4.45-4H15V6h4V3z"}),"Audiotrack"),mr}const it=oe(Di());var ba,jr={};function Pi(){if(ba)return jr;ba=1;var f=se();Object.defineProperty(jr,"__esModule",{value:!0}),jr.default=void 0;var b=f(ie()),v=te();return jr.default=(0,b.default)((0,v.jsx)("path",{d:"M19 5h-2V3H7v2H5c-1.1 0-2 .9-2 2v1c0 2.55 1.92 4.63 4.39 4.94.63 1.5 1.98 2.63 3.61 2.96V19H7v2h10v-2h-4v-3.1c1.63-.33 2.98-1.46 3.61-2.96C19.08 12.63 21 10.55 21 8V7c0-1.1-.9-2-2-2M5 8V7h2v3.82C5.84 10.4 5 9.3 5 8m7 6c-1.65 0-3-1.35-3-3V5h6v6c0 1.65-1.35 3-3 3m7-6c0 1.3-.84 2.4-2 2.82V7h2z"}),"EmojiEventsOutlined"),jr}const fs=oe(Pi());var ga,fr={};function Bi(){if(ga)return fr;ga=1;var f=se();Object.defineProperty(fr,"__esModule",{value:!0}),fr.default=void 0;var b=f(ie()),v=te();return fr.default=(0,b.default)((0,v.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2m4.24 16L12 15.45 7.77 18l1.12-4.81-3.73-3.23 4.92-.42L12 5l1.92 4.53 4.92.42-3.73 3.23z"}),"Stars"),fr}const Fi=oe(Bi()),Ai=xs(A)(({theme:f})=>({padding:f.spacing(2),marginBottom:f.spacing(2),backgroundColor:f.palette.background.paper,borderRadius:f.shape.borderRadius,backgroundImage:"unset",border:"2px solid rgb(17, 17, 17)"})),Ei=xs(a)(({theme:f,decoration:b})=>{b?.background?.includes("linear-gradient");const v=b?.background?.includes("/");return{position:"relative",width:"100%",height:"80px",borderRadius:f.shape.borderRadius,overflow:"hidden",background:b?.background?v?`url(${b.background})`:b.background:f.palette.background.paper,backgroundSize:v?"cover":"auto",backgroundPosition:"center",marginBottom:f.spacing(1),display:"flex",alignItems:"center",justifyContent:"center"}}),Ti=xs("img")({position:"absolute",right:0,height:"max-content",maxHeight:"60px",opacity:1,pointerEvents:"none"}),Hi=({open:f,onClose:b,userId:v,username:vs})=>{const[m,g]=o.useState(!1),[w,F]=o.useState([]),[z,ys]=o.useState([]),[h,Ue]=o.useState(null),vr=async()=>{g(!0);try{const[W,Oe]=await Promise.all([fetch("/api/moderator/decorations"),fetch(`/api/moderator/users/${v}/decorations`)]);if(!W.ok||!Oe.ok)throw new Error("Failed to fetch decorations");const ne=await W.json(),T=await Oe.json();F(ne.decorations||[]),ys(T.decorations.map(H=>({...H.decoration,is_active:H.is_active,user_decoration_id:H.id}))||[])}catch(W){Ue(W.message)}finally{g(!1)}};o.useEffect(()=>{f&&v&&vr()},[f,v]);const ks=(W,Oe=!1)=>{const ne=z.some(T=>T.id===W.id);return z.find(T=>T.id===W.id),e.jsxs(Ai,{children:[e.jsx(Ei,{decoration:W,children:W.item_path&&(()=>{const[T,...H]=W.item_path.split(";"),fe=H.reduce((Je,ve)=>{const[De,le]=ve.split(":").map(Pe=>Pe.trim());return{...Je,[De]:le}},{});return e.jsx(Ti,{src:T,style:fe,alt:""})})()}),e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(i,{variant:"subtitle1",children:W.name}),Oe?e.jsx(X,{title:"\u041E\u0442\u043E\u0437\u0432\u0430\u0442\u044C \u0434\u0435\u043A\u043E\u0440\u0430\u0446\u0438\u044E",children:e.jsx(y,{onClick:()=>(async T=>{try{if(!(await fetch(`/api/moderator/users/${v}/decorations/${T}`,{method:"DELETE"})).ok)throw new Error("Failed to revoke decoration");vr()}catch(H){Ue(H.message)}})(W.id),color:"error",size:"small",children:e.jsx(S,{})})}):e.jsx(X,{title:ne?"\u0423\u0436\u0435 \u0432\u044B\u0434\u0430\u043D\u043E":"\u0412\u044B\u0434\u0430\u0442\u044C \u0434\u0435\u043A\u043E\u0440\u0430\u0446\u0438\u044E",children:e.jsx("span",{children:e.jsx(y,{onClick:()=>(async T=>{try{if(!(await fetch(`/api/moderator/users/${v}/decorations`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({decoration_id:T})})).ok)throw new Error("Failed to grant decoration");vr()}catch(H){Ue(H.message)}})(W.id),color:"primary",size:"small",disabled:ne,children:ne?e.jsx(gs,{}):e.jsx(tt,{})})})})]})]},W.id)};return e.jsxs(Xt,{open:f,onClose:b,maxWidth:"md",fullWidth:!0,PaperProps:{style:{backgroundImage:"unset"}},children:[e.jsxs(He,{children:["\u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0434\u0435\u043A\u043E\u0440\u0430\u0446\u0438\u044F\u043C\u0438 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F ",vs]}),e.jsx(O,{children:m?e.jsx(a,{sx:{display:"flex",justifyContent:"center",p:3},children:e.jsx(k,{})}):h?e.jsx(i,{color:"error",children:h}):e.jsxs(x,{container:!0,spacing:2,children:[e.jsxs(x,{item:!0,xs:12,md:6,children:[e.jsx(i,{variant:"h6",gutterBottom:!0,children:"\u0414\u0435\u043A\u043E\u0440\u0430\u0446\u0438\u0438 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F"}),z.map(W=>ks(W,!0)),z.length===0&&e.jsx(i,{color:"textSecondary",children:"\u0423 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F \u043D\u0435\u0442 \u0434\u0435\u043A\u043E\u0440\u0430\u0446\u0438\u0439"})]}),e.jsxs(x,{item:!0,xs:12,md:6,children:[e.jsx(i,{variant:"h6",gutterBottom:!0,children:"\u0414\u043E\u0441\u0442\u0443\u043F\u043D\u044B\u0435 \u0434\u0435\u043A\u043E\u0440\u0430\u0446\u0438\u0438"}),w.map(W=>ks(W))]})]})}),e.jsx(D,{children:e.jsx(p,{onClick:b,color:"primary",children:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C"})})]})},B=xs(Xt)(({theme:f})=>({"& .MuiDialog-container":{zIndex:999999999999},"& .MuiDialog-paper":{borderRadius:12,background:"rgba(18, 18, 18, 0.8)",backdropFilter:"blur(10px)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.1)",[f.breakpoints.down("sm")]:{width:"100%",maxWidth:"100%",margin:0,borderRadius:0}},"& .MuiDialogTitle-root":{fontSize:"1.2rem",fontWeight:500},"& .MuiDialogContentText-root":{fontSize:"0.95rem",lineHeight:1.5,overflowWrap:"break-word",wordBreak:"break-word"},"& .MuiDialogContent-root":{padding:"16px 24px","@media (max-width: 600px)":{padding:"12px 16px",fontSize:"0.9rem"}}})),Li={zIndex:9999999},Vi=()=>{const{user:f}=o.useContext(pi),b=hi(),[v,vs]=o.useState(0),[m,g]=o.useState(!0),[w,F]=o.useState(!1),[z,ys]=o.useState(null),[h,Ue]=o.useState({}),[vr,ks]=o.useState(null),[W,Oe]=o.useState(0),[ne,T]=o.useState({open:!1,message:"",severity:"success"}),[H,fe]=o.useState([]),[Je,ve]=o.useState([]),[De,le]=o.useState([]),[Pe,Be]=o.useState([]),[Cs,qe]=o.useState([]),[Xe,ye]=o.useState([]),[yr,Q]=o.useState([]),[ma,kr]=o.useState(!1),[ja,Cr]=o.useState(!1),[fa,_r]=o.useState(!1),[va,wr]=o.useState(!1),[ya,Sr]=o.useState(!1),[ka,Ir]=o.useState(!1),[Ca,zr]=o.useState(!1),[_a,Rr]=o.useState(!1),[wa,Wr]=o.useState(!1),[Sa,Ye]=o.useState(!1),[Ni,Ia]=o.useState(!1),[za,_s]=o.useState(!1),[$r,Qe]=o.useState([]),[L,Mr]=o.useState([]),[ue,ot]=o.useState(""),[Ke,Z]=o.useState(!1),[nt,lt]=o.useState("artist"),[V,Fe]=o.useState([]),[ee,Ra]=o.useState(null),[ke,Wa]=o.useState(null),[Ce,$a]=o.useState(null),[M,dt]=o.useState(null),[_e,Ma]=o.useState(null),[pe,ct]=o.useState(null),[_,we]=o.useState(null),[ws,xt]=o.useState(""),[Ss,ht]=o.useState(""),[Or,ut]=o.useState(""),[Ze,pt]=o.useState(""),[Dr,bt]=o.useState(""),[gt,mt]=o.useState(""),[Pr,jt]=o.useState(!0),[ft,Is]=o.useState(null),[vt,zs]=o.useState(""),[Ae,Rs]=o.useState(""),[Ee,Ws]=o.useState(""),[Br,Fr]=o.useState(null),[yt,Ar]=o.useState(""),[Se,$s]=o.useState(!1),[Gi,Ui]=o.useState(""),[Ji,kt]=o.useState(1),[Ie,U]=o.useState({posts:1,tracks:1,comments:1,users:1,bugReports:1,badges:1,artists:1}),[I,de]=o.useState({posts:!0,tracks:!0,comments:!0,users:!0,bugReports:!0,badges:!0,artists:!0}),[N,qi]=o.useState(10),Er=o.useRef(),Tr=o.useRef(),Hr=o.useRef(),Lr=o.useRef(),Vr=o.useRef(),Nr=o.useRef(),Gr=o.useRef(),[R,Ct]=o.useState({posts:"",tracks:"",comments:"",users:"",bugReports:"",badges:"",artists:""}),Ms=o.useRef(null),[Ur,Oa]=o.useState(null),[Da,Jr]=o.useState(!1),[be,Os]=o.useState({reason:"",details:""}),[qr,Pa]=o.useState(null),[Ba,Xr]=o.useState(!1),[q,Yr]=o.useState({reason:"",details:"",duration_days:30}),[Fa,Qr]=o.useState(!1),[Aa,Kr]=o.useState(!1),[Te,_t]=o.useState(null),[Ds,wt]=o.useState([]),[Ps,St]=o.useState([]),[It,Zr]=o.useState(!1),[ce,Bs]=o.useState({deleted_posts:0,deleted_tracks:0,deleted_comments:0,deleted_avatars:0,updated_users:0,warnings_issued:0,bans_issued:0,total_actions:0,loading:!0}),[Ea,es]=o.useState(!1),[re,Ta]=o.useState(null),[zt,Ha]=o.useState([]),[La,Rt]=o.useState(!1),[ze,Wt]=o.useState(""),[$t,Fs]=o.useState(""),[rs,Va]=o.useState([]),[As,Mt]=o.useState(!1),[ss,Ot]=o.useState(!1),[Dt,Es]=o.useState(null),[Ts,Na]=o.useState(1),[Xi,Ga]=o.useState(0),[ts,Ua]=o.useState(!1),[Ja,Hs]=o.useState(!1),[er,Pt]=o.useState(!1),[Bt,rr]=o.useState(null),[Ft,Ls]=o.useState(null),[$,At]=o.useState({type:"points",points:1e3,subscription_type:"basic",subscription_duration_days:30,max_uses:1,count:1,expires_days:30,description:""}),[Et,Tt]=o.useState({}),sr=o.useRef(null),[tr,ar]=o.useState([]),[qa,Ht]=o.useState(!1),[Lt,Vt]=o.useState(null),Re=o.useCallback(async(r=1,s=!1)=>{r===1?Mt(!0):Ot(!0),Es(null);try{const t=await j.get(`/api/moderator/keys?page=${r}&per_page=20`);t.data&&t.data.success?(Ga(t.data.total),Na(t.data.page),Ua(t.data.has_next),Va(n=>{const c=t.data.keys||[];let l;if(s){const ir=new Set(n.map(me=>me.id));l=[...n,...c.filter(me=>!ir.has(me.id))]}else l=c;return l.sort((ir,me)=>new Date(me.created_at)-new Date(ir.created_at))})):Es("\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u043A\u043B\u044E\u0447\u0435\u0439")}catch{Es("\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u043A\u043B\u044E\u0447\u0435\u0439")}finally{Mt(!1),Ot(!1)}},[]);o.useEffect(()=>{Re(1,!1)},[Re]),o.useEffect(()=>{if(!ts||As||ss)return;const r=new window.IntersectionObserver(s=>{s[0].isIntersecting&&Re(Ts+1,!0)},{threshold:1});return sr.current&&r.observe(sr.current),()=>{sr.current&&r.unobserve(sr.current)}},[ts,As,ss,Ts,Re]);const Xa=()=>{At({type:"points",points:1e3,subscription_type:"basic",subscription_duration_days:30,max_uses:1,count:1,expires_days:30,description:""}),ar([]),rr(null),Ls(null),Hs(!0)},Vs=()=>{Hs(!1)},ge=r=>{const{name:s,value:t}=r.target;At(n=>({...n,[s]:t}))},Ya=async()=>{Pt(!0),rr(null),Ls(null);try{const r={key_type:$.type,points_value:$.type==="points"?Number($.points):void 0,subscription_type:$.type==="subscription"?$.subscription_type:void 0,subscription_duration_days:$.type==="subscription"?Number($.subscription_duration_days):void 0,max_uses:Number($.max_uses),count:Number($.count),expires_days:Number($.expires_days),description:$.description};Object.keys(r).forEach(t=>r[t]===void 0&&delete r[t]);const s=await j.post("/api/moderator/keys/generate",r);s.data&&s.data.success?(Array.isArray(s.data.keys)?ar(s.data.keys.map(t=>t.key||t)):s.data.key&&s.data.key.key&&ar([s.data.key.key]),Ls("\u041A\u043B\u044E\u0447(\u0438) \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0437\u0434\u0430\u043D\u044B!"),rr(null),Re()):rr(s.data?.error||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F \u043A\u043B\u044E\u0447\u0430")}catch(r){rr(r.response?.data?.error||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F \u043A\u043B\u044E\u0447\u0430")}finally{Pt(!1)}};o.useEffect(()=>{Ka(),Za()},[]),o.useEffect(()=>{z&&(Qa(),ei(v))},[v]);const Qa=()=>{kt(1),U({posts:1,tracks:1,comments:1,users:1,bugReports:1,badges:1,artists:1}),de({posts:!0,tracks:!0,comments:!0,users:!0,bugReports:!0,badges:!0,artists:!0})},Ka=async()=>{try{if(window._moderatorCheckInProgress)return void await new Promise(t=>{const n=setInterval(()=>{window._moderatorCheckInProgress||(clearInterval(n),t())},100)});const r=Date.now();if(r-W<9e5&&z)return;if(window._moderatorCheckInProgress=!0,!(await j.get("/api/moderator/quick-status")).data.is_moderator)return g(!1),d("error","\u0423 \u0432\u0430\u0441 \u043D\u0435\u0442 \u043F\u0440\u0430\u0432 \u043C\u043E\u0434\u0435\u0440\u0430\u0442\u043E\u0440\u0430"),b("/"),void(window._moderatorCheckInProgress=!1);g(!0);const s=await j.get("/api/moderator/status");s.data.is_moderator?(ys(s.data),Ue(s.data.permissions),Oe(r)):(d("error","\u0423 \u0432\u0430\u0441 \u043D\u0435\u0442 \u043F\u0440\u0430\u0432 \u043C\u043E\u0434\u0435\u0440\u0430\u0442\u043E\u0440\u0430"),b("/"))}catch{d("error","\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043F\u0440\u043E\u0432\u0435\u0440\u0438\u0442\u044C \u043F\u0440\u0430\u0432\u0430 \u043C\u043E\u0434\u0435\u0440\u0430\u0442\u043E\u0440\u0430"),b("/")}finally{g(!1),window._moderatorCheckInProgress=!1}},Za=async()=>{try{Bs(s=>({...s,loading:!0}));const r=await j.get("/api/moderator/actions");if(r.data&&r.data.success){const s=r.data.stats||{};Bs({deleted_posts:s.deleted_posts||0,deleted_tracks:s.deleted_tracks||0,deleted_comments:s.deleted_comments||0,deleted_avatars:s.deleted_avatars||0,updated_users:s.updated_users||0,warnings_issued:s.warnings_issued||0,bans_issued:s.bans_issued||0,total_actions:s.total_actions||0,loading:!1})}}catch{}finally{Bs(r=>({...r,loading:!1}))}},d=(r,s)=>{T({open:!0,severity:r,message:s})},ei=r=>{switch(kt(1),de(s=>({...s})),r){case 0:break;case 1:h.delete_posts&&(fe([]),as());break;case 2:h.delete_music&&(ve([]),is());break;case 3:h.delete_comments&&(qe([]),os());break;case 4:(h.change_user_name||h.change_username||h.delete_avatar)&&(Be([]),ns());break;case 5:(h.manage_bug_reports||h.delete_bug_reports)&&(le([]),ls());break;case 6:(h.edit_badges||h.delete_badges)&&(ye([]),ds());break;case 7:(h.manage_artists||h.delete_artists)&&(Q([]),cs())}},We=(r,s)=>{Ct(t=>({...t,[r]:s})),Ms.current&&clearTimeout(Ms.current),Ms.current=setTimeout(()=>{switch(U(t=>({...t,[r]:1})),r){case"posts":fe([]),as(!1,s);break;case"tracks":ve([]),is(!1,s);break;case"comments":qe([]),os(!1,s);break;case"users":Be([]),ns(!1,s);break;case"bugReports":le([]),ls(!1,s);break;case"badges":ye([]),ds(!1,s);break;case"artists":Q([]),cs(!1,s)}},500)},$e=r=>{switch(Ct(s=>({...s,[r]:""})),U(s=>({...s,[r]:1})),r){case"posts":fe([]),as(!1,"");break;case"tracks":ve([]),is(!1,"");break;case"comments":qe([]),os(!1,"");break;case"users":Be([]),ns(!1,"");break;case"bugReports":le([]),ls(!1,"");break;case"badges":ye([]),ds(!1,"");break;case"artists":Q([]),cs(!1,"")}},as=async(r=!1,s=R.posts)=>{try{if(!I.posts&&r)return;r?F(!0):g(!0);const t=r?Ie.posts:1,n=await j.get(`/api/moderator/posts?page=${t}&per_page=${N}${s?`&search=${encodeURIComponent(s)}`:""}`);if(n.data&&n.data.posts){const c=n.data.posts;fe(r?l=>[...l,...c]:c),de(l=>({...l,posts:c.length===N})),r&&U(l=>({...l,posts:l.posts+1}))}}catch{d("error","\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u043F\u043E\u0441\u0442\u044B")}finally{r?F(!1):g(!1)}},is=async(r=!1,s=R.tracks)=>{try{if(!I.tracks&&r)return;r?F(!0):g(!0);const t=r?Ie.tracks:1,n=await j.get(`/api/moderator/tracks?page=${t}&per_page=${N}${s?`&search=${encodeURIComponent(s)}`:""}`);if(n.data&&n.data.tracks){const c=n.data.tracks;ve(r?l=>[...l,...c]:c),de(l=>({...l,tracks:c.length===N})),r&&U(l=>({...l,tracks:l.tracks+1}))}}catch{d("error","\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0442\u0440\u0435\u043A\u0438")}finally{r?F(!1):g(!1)}},os=async(r=!1,s=R.comments)=>{try{if(!I.comments&&r)return;r?F(!0):g(!0);const t=r?Ie.comments:1,n=await j.get(`/api/moderator/comments?page=${t}&per_page=${N}${s?`&search=${encodeURIComponent(s)}`:""}`);if(n.data&&n.data.comments){const c=n.data.comments;qe(r?l=>[...l,...c]:c),de(l=>({...l,comments:c.length===N})),r&&U(l=>({...l,comments:l.comments+1}))}}catch{d("error","\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0438")}finally{r?F(!1):g(!1)}},ns=async(r=!1,s=R.users)=>{try{if(!I.users&&r)return;r?F(!0):g(!0);const t=r?Ie.users:1,n=await j.get(`/api/moderator/users?page=${t}&per_page=${N}${s?`&search=${encodeURIComponent(s)}`:""}`);if(n.data&&n.data.users){const c=n.data.users;Be(r?l=>[...l,...c]:c),de(l=>({...l,users:c.length===N})),r&&U(l=>({...l,users:l.users+1}))}}catch{d("error","\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439")}finally{r?F(!1):g(!1)}},ls=async(r=!1,s=R.bugReports)=>{try{if(!h.manage_bug_reports&&!h.delete_bug_reports)return void d("error","\u0423 \u0432\u0430\u0441 \u043D\u0435\u0442 \u043F\u0440\u0430\u0432 \u043D\u0430 \u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440 \u0431\u0430\u0433-\u0440\u0435\u043F\u043E\u0440\u0442\u043E\u0432");if(!I.bugReports&&r||w)return;r?F(!0):g(!0);const t=r?Ie.bugReports+1:1,n=await j.get(`/api/moderator/bug-reports?page=${t}&per_page=${N}${s?`&search=${encodeURIComponent(s)}`:""}`);if(n.data&&n.data.bug_reports){const c=n.data.bug_reports;r?(le(l=>[...l,...c]),U(l=>({...l,bugReports:t}))):(le(c),U(l=>({...l,bugReports:1}))),de(l=>({...l,bugReports:c.length===N}))}else d("error","\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0444\u043E\u0440\u043C\u0430\u0442 \u043E\u0442\u0432\u0435\u0442\u0430 \u043E\u0442 \u0441\u0435\u0440\u0432\u0435\u0440\u0430")}catch(t){d("error",t.response?.data?.error||"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0431\u0430\u0433-\u0440\u0435\u043F\u043E\u0440\u0442\u044B")}finally{r?F(!1):g(!1)}},ds=async(r=!1,s=R.badges)=>{try{if(!h.edit_badges&&!h.delete_badges)return void d("error","\u0423 \u0432\u0430\u0441 \u043D\u0435\u0442 \u043F\u0440\u0430\u0432 \u043D\u0430 \u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440 \u0431\u0435\u0439\u0434\u0436\u0438\u043A\u043E\u0432");if(!I.badges&&r||w)return;r?F(!0):g(!0);const t=r?Ie.badges+1:1,n=await j.get(`/api/moderator/badges?page=${t}&per_page=${N}${s?`&search=${encodeURIComponent(s)}`:""}`);if(n.data&&n.data.badges){const c=n.data.badges;r?(ye(l=>[...l,...c]),U(l=>({...l,badges:t}))):(ye(c),U(l=>({...l,badges:1}))),de(l=>({...l,badges:c.length===N}))}else d("error","\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0444\u043E\u0440\u043C\u0430\u0442 \u043E\u0442\u0432\u0435\u0442\u0430 \u043E\u0442 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u0431\u0435\u0439\u0434\u0436\u0438\u043A\u043E\u0432")}catch(t){d("error",t.response?.data?.error||"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0431\u0435\u0439\u0434\u0436\u0438\u043A\u0438")}finally{r?F(!1):g(!1)}},cs=async(r=!1,s=R.artists)=>{try{if(!I.artists&&r||w)return;r?F(!0):g(!0);const t=r?Ie.artists+1:1,n=await j.get(`/api/moderator/artists?page=${t}&per_page=${N}${s?`&search=${encodeURIComponent(s)}`:""}`);if(n.data&&n.data.artists){const c=n.data.artists;r?(Q(l=>[...l,...c]),U(l=>({...l,artists:t}))):(Q(c),U(l=>({...l,artists:1}))),de(l=>({...l,artists:c.length===N}))}}catch{d("error","\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0430\u0440\u0442\u0438\u0441\u0442\u043E\u0432")}finally{r?F(!1):g(!1)}},ri=o.useCallback(r=>{m||w||(Er.current&&Er.current.disconnect(),Er.current=new IntersectionObserver(s=>{s[0].isIntersecting&&I.posts&&as(!0)}),r&&Er.current.observe(r))},[m,w,I.posts]),si=o.useCallback(r=>{m||w||(Tr.current&&Tr.current.disconnect(),Tr.current=new IntersectionObserver(s=>{s[0].isIntersecting&&I.tracks&&is(!0)}),r&&Tr.current.observe(r))},[m,w,I.tracks]),ti=o.useCallback(r=>{m||w||(Hr.current&&Hr.current.disconnect(),Hr.current=new IntersectionObserver(s=>{s[0].isIntersecting&&I.comments&&os(!0)}),r&&Hr.current.observe(r))},[m,w,I.comments]),ai=o.useCallback(r=>{m||w||(Lr.current&&Lr.current.disconnect(),Lr.current=new IntersectionObserver(s=>{s[0].isIntersecting&&I.users&&ns(!0)}),r&&Lr.current.observe(r))},[m,w,I.users]),ii=o.useCallback(r=>{m||w||(Vr.current&&Vr.current.disconnect(),Vr.current=new IntersectionObserver(s=>{s[0].isIntersecting&&I.bugReports&&ls(!0)}),r&&Vr.current.observe(r))},[m,w,I.bugReports]),Nt=o.useCallback(r=>{m||w||(Nr.current&&Nr.current.disconnect(),Nr.current=new IntersectionObserver(s=>{s[0].isIntersecting&&I.badges&&ds(!0)}),r&&Nr.current.observe(r))},[m,w,I.badges]),oi=o.useCallback(r=>{m||w||(Gr.current&&Gr.current.disconnect(),Gr.current=new IntersectionObserver(s=>{s[0].isIntersecting&&I.artists&&cs(!0)}),r&&Gr.current.observe(r))},[m,w,I.artists]);if(!f)return e.jsx(ui,{to:"/login"});if(m&&!z)return e.jsx(Gs,{maxWidth:"lg",sx:{mt:4,mb:4},children:e.jsxs(a,{sx:{display:"flex",flexDirection:"column",alignItems:"center",my:4},children:[e.jsx(k,{size:60}),e.jsx(i,{variant:"h6",sx:{mt:2},children:"\u041F\u0440\u043E\u0432\u0435\u0440\u043A\u0430 \u043F\u0440\u0430\u0432 \u0434\u043E\u0441\u0442\u0443\u043F\u0430..."})]})});if(!m&&!z)return e.jsx(Gs,{maxWidth:"lg",sx:{mt:4,mb:4},children:e.jsxs(A,{sx:{p:4,textAlign:"center"},children:[e.jsx(Ys,{color:"error",sx:{fontSize:60,mb:2}}),e.jsx(i,{variant:"h5",sx:{mb:2},children:"\u0414\u043E\u0441\u0442\u0443\u043F \u0437\u0430\u043F\u0440\u0435\u0449\u0435\u043D"}),e.jsx(i,{variant:"body1",sx:{mb:3},children:"\u0423 \u0432\u0430\u0441 \u043D\u0435\u0442 \u043F\u0440\u0430\u0432 \u043C\u043E\u0434\u0435\u0440\u0430\u0442\u043E\u0440\u0430. \u041E\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044C \u043A \u0430\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440\u0443 \u0434\u043B\u044F \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u044F \u0434\u043E\u0441\u0442\u0443\u043F\u0430."}),e.jsx(p,{variant:"contained",onClick:()=>b("/"),children:"\u0412\u0435\u0440\u043D\u0443\u0442\u044C\u0441\u044F \u043D\u0430 \u0433\u043B\u0430\u0432\u043D\u0443\u044E"})]})});const Ns=r=>{b(`/music/track/${r.id}`)},K=({title:r,enabled:s,icon:t})=>e.jsxs(A,{elevation:0,sx:{p:2,borderRadius:2,backgroundColor:s?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.3)",border:"1px solid "+(s?"rgba(76,175,80,0.3)":"rgba(255,255,255,0.1)"),display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(P,{sx:{width:32,height:32,bgcolor:s?"rgba(76,175,80,0.2)":"rgba(255,255,255,0.05)",mr:1.5},children:ra.cloneElement(t,{fontSize:"small",color:s?"success":"disabled"})}),e.jsx(i,{variant:"body1",color:s?"rgba(255,255,255,0.9)":"rgba(255,255,255,0.5)",children:r})]}),s?e.jsx(gs,{color:"success"}):e.jsx(Oi,{color:"disabled",sx:{opacity:.5}})]}),Gt=r=>{Oa(r),Os({reason:"",details:""}),Jr(!0)},Ut=r=>{Pa(r),Yr({reason:"",details:"",duration_days:30}),Xr(!0)},Jt=async()=>{if(ue&&!(ue.trim().length<2)){Z(!0);try{let r;if(r=nt==="artist"?await j.post("/api/moderator/artists/search-tracks",{artist_name:ue.trim(),exact_match:!1,limit:50}):await j.get(`/api/moderator/tracks?search=${encodeURIComponent(ue.trim())}&per_page=50`),r.data.success){let s=[];s=r.data.tracks||[];const t=new Set($r.map(c=>c.id)),n=s.filter(c=>!t.has(c.id));Mr(n)}else d("error",r.data.error||"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043D\u0430\u0439\u0442\u0438 \u0442\u0440\u0435\u043A\u0438")}catch(r){d("error",r.response?.data?.error||"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0432\u044B\u043F\u043E\u043B\u043D\u0438\u0442\u044C \u043F\u043E\u0438\u0441\u043A \u0442\u0440\u0435\u043A\u043E\u0432")}finally{Z(!1)}}},qt=()=>{L.length!==0&&(V.length===L.length?Fe([]):Fe(L.map(r=>r.id)))};return e.jsxs(Gs,{maxWidth:"xl",sx:{mt:4,mb:4},children:[e.jsxs(A,{sx:{p:2,mb:3,display:"flex",alignItems:"center"},children:[e.jsx(Ys,{sx:{fontSize:40,mr:2,color:"primary.main"}}),e.jsxs(a,{children:[e.jsx(i,{variant:"h5",component:"h1",gutterBottom:!0,children:"\u041F\u0430\u043D\u0435\u043B\u044C \u043C\u043E\u0434\u0435\u0440\u0430\u0442\u043E\u0440\u0430"}),z&&e.jsxs(i,{variant:"body2",color:"text.secondary",children:[z.moderator_level>=3?"\u0410\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440":"\u041C\u043E\u0434\u0435\u0440\u0430\u0442\u043E\u0440"," \u2022 ",new Date().toLocaleDateString()]})]})]}),e.jsxs(A,{sx:{p:2},children:[e.jsxs(li,{value:v,onChange:(r,s)=>vs(s),variant:"scrollable",scrollButtons:"auto",sx:{borderBottom:1,borderColor:"divider",mb:2},children:[e.jsx(je,{icon:e.jsx($i,{}),label:"\u041F\u0440\u043E\u0444\u0438\u043B\u044C"}),e.jsx(je,{icon:e.jsx(qs,{}),label:"\u041F\u043E\u0441\u0442\u044B",disabled:!h.delete_posts}),e.jsx(je,{icon:e.jsx(Qs,{}),label:"\u0422\u0440\u0435\u043A\u0438",disabled:!h.delete_music}),e.jsx(je,{icon:e.jsx(Zs,{}),label:"\u041A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0438",disabled:!h.delete_comments}),e.jsx(je,{icon:e.jsx(ms,{}),label:"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0438",disabled:!h.change_user_name&&!h.change_username&&!h.delete_avatar}),e.jsx(je,{icon:e.jsx(Ne,{}),label:"\u0411\u0430\u0433-\u0440\u0435\u043F\u043E\u0440\u0442\u044B",disabled:!h.manage_bug_reports&&!h.delete_bug_reports}),e.jsx(je,{icon:e.jsx(sa,{}),label:"\u0411\u0435\u0439\u0434\u0436\u0438\u043A\u0438",disabled:!h.edit_badges&&!h.delete_badges}),e.jsx(je,{icon:e.jsx(Xs,{}),label:"\u0410\u0440\u0442\u0438\u0441\u0442\u044B",disabled:!h.manage_artists&&!h.delete_artists})]}),e.jsxs(a,{sx:{mt:2},children:[v===0&&(()=>{if(m&&!z)return e.jsx(a,{sx:{display:"flex",justifyContent:"center",mt:4},children:e.jsx(k,{})});if(!z)return e.jsx(G,{severity:"error",sx:{mt:2},children:"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0434\u0430\u043D\u043D\u044B\u0435 \u043C\u043E\u0434\u0435\u0440\u0430\u0442\u043E\u0440\u0430"});const r=z.assigned_info?.assigned_at?new Date(z.assigned_info.assigned_at):null,s=r?Math.floor((new Date-r)/864e5):null;return e.jsxs(x,{container:!0,spacing:3,children:[e.jsx(x,{item:!0,xs:12,md:4,children:e.jsxs(Le,{elevation:3,sx:{height:"100%",background:"linear-gradient(to bottom right, rgb(35 35 35 / 95%), rgb(0 0 0 / 90%))",color:"white",borderRadius:2,position:"relative",overflow:"hidden"},children:[e.jsx(a,{sx:{position:"absolute",top:-50,right:-50,width:150,height:150,borderRadius:"50%",background:"radial-gradient(circle, rgba(63,81,181,0.2) 0%, rgba(63,81,181,0) 70%)",zIndex:0}}),e.jsxs(Ve,{sx:{position:"relative",zIndex:1,p:3},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(P,{src:f?.photo?`/avatar/${f.id}/${f.photo}`:null,sx:{width:80,height:80,bgcolor:"primary.main",boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},children:f?.name?.charAt(0)||"M"}),e.jsxs(a,{sx:{ml:2},children:[e.jsx(i,{variant:"h5",fontWeight:"bold",gutterBottom:!0,children:f?.name||"\u041C\u043E\u0434\u0435\u0440\u0430\u0442\u043E\u0440"}),e.jsxs(i,{variant:"body2",color:"rgba(255,255,255,0.7)",children:["@",f?.username||"username"]})]})]}),e.jsx(Us,{sx:{borderColor:"rgba(255,255,255,0.1)",mb:2}}),e.jsxs(i,{variant:"subtitle1",color:"primary.light",gutterBottom:!0,sx:{display:"flex",alignItems:"center"},children:[e.jsx(bi,{sx:{mr:1}}),"\u0421\u0442\u0430\u0442\u0443\u0441 \u043C\u043E\u0434\u0435\u0440\u0430\u0442\u043E\u0440\u0430"]}),e.jsx(a,{sx:{display:"flex",alignItems:"center",mb:2},children:e.jsx(ae,{icon:z.moderator_level>=3?e.jsx(et,{}):e.jsx(Ys,{}),label:z.moderator_level>=3?"\u0410\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440":"\u041C\u043E\u0434\u0435\u0440\u0430\u0442\u043E\u0440",color:z.moderator_level>=3?"secondary":"primary",variant:"filled",sx:{borderRadius:2,background:z.moderator_level>=3?"linear-gradient(45deg, #9c27b0 30%, #d500f9 90%)":"linear-gradient(45deg, #3f51b5 30%, #5c6bc0 90%)",boxShadow:"0 2px 8px rgba(0,0,0,0.3)",fontWeight:"bold"}})}),r&&e.jsxs(a,{sx:{mb:2},children:[e.jsxs(i,{variant:"subtitle2",color:"rgba(255,255,255,0.7)",gutterBottom:!0,sx:{display:"flex",alignItems:"center"},children:[e.jsx(at,{sx:{mr:1,fontSize:"0.9rem"}}),"\u041D\u0430\u0437\u043D\u0430\u0447\u0435\u043D \u043C\u043E\u0434\u0435\u0440\u0430\u0442\u043E\u0440\u043E\u043C"]}),e.jsxs(i,{variant:"body1",color:"rgba(255,255,255,0.9)",children:[r.toLocaleDateString(),e.jsxs(i,{component:"span",variant:"body2",color:"rgba(255,255,255,0.6)",sx:{ml:1},children:["(",s," ",s===1?"\u0434\u0435\u043D\u044C":s<5?"\u0434\u043D\u044F":"\u0434\u043D\u0435\u0439",")"]})]})]}),z.assigned_info?.assigned_by?.name&&e.jsxs(a,{children:[e.jsx(i,{variant:"subtitle2",color:"rgba(255,255,255,0.7)",gutterBottom:!0,children:"\u041D\u0430\u0437\u043D\u0430\u0447\u0435\u043D \u0430\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440\u043E\u043C"}),e.jsx(i,{variant:"body1",color:"rgba(255,255,255,0.9)",children:z.assigned_info.assigned_by.name})]})]})]})}),e.jsx(x,{item:!0,xs:12,md:8,children:e.jsxs(Le,{elevation:3,sx:{height:"100%",background:"linear-gradient(to bottom right, rgb(35 35 35 / 95%), rgb(0 0 0 / 90%))",color:"white",borderRadius:2},children:[e.jsx(bs,{title:e.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(et,{sx:{mr:1}}),e.jsx(i,{variant:"h6",color:"primary.light",children:"\u041F\u0440\u0430\u0432\u0430 \u043C\u043E\u0434\u0435\u0440\u0430\u0442\u043E\u0440\u0430"})]}),sx:{borderBottom:"1px solid rgba(255,255,255,0.1)",pb:1}}),e.jsx(Ve,{sx:{p:3},children:e.jsxs(x,{container:!0,spacing:2,children:[e.jsx(x,{item:!0,xs:12,sm:6,children:e.jsx(K,{title:"\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u043F\u043E\u0441\u0442\u043E\u0432",enabled:h.delete_posts,icon:e.jsx(qs,{})})}),e.jsx(x,{item:!0,xs:12,sm:6,children:e.jsx(K,{title:"\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u043C\u0443\u0437\u044B\u043A\u0438",enabled:h.delete_music,icon:e.jsx(Qs,{})})}),e.jsx(x,{item:!0,xs:12,sm:6,children:e.jsx(K,{title:"\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0435\u0432",enabled:h.delete_comments,icon:e.jsx(Zs,{})})}),e.jsx(x,{item:!0,xs:12,sm:6,children:e.jsx(K,{title:"\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u0430\u0432\u0430\u0442\u0430\u0440\u043E\u0432",enabled:h.delete_avatar,icon:e.jsx(Ks,{})})}),e.jsx(x,{item:!0,xs:12,sm:6,children:e.jsx(K,{title:"\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435 \u0438\u043C\u0451\u043D",enabled:h.change_user_name,icon:e.jsx(ms,{})})}),e.jsx(x,{item:!0,xs:12,sm:6,children:e.jsx(K,{title:"\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435 username",enabled:h.change_username,icon:e.jsx(Ge,{})})}),e.jsx(x,{item:!0,xs:12,sm:6,children:e.jsx(K,{title:"\u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0431\u0430\u0433-\u0440\u0435\u043F\u043E\u0440\u0442\u0430\u043C\u0438",enabled:h.manage_bug_reports,icon:e.jsx(Ne,{})})}),e.jsx(x,{item:!0,xs:12,sm:6,children:e.jsx(K,{title:"\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u0431\u0430\u0433-\u0440\u0435\u043F\u043E\u0440\u0442\u043E\u0432",enabled:h.delete_bug_reports,icon:e.jsx(S,{})})}),e.jsx(x,{item:!0,xs:12,sm:6,children:e.jsx(K,{title:"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u0431\u0435\u0439\u0434\u0436\u0438\u043A\u043E\u0432",enabled:h.edit_badges,icon:e.jsx(sa,{})})}),e.jsx(x,{item:!0,xs:12,sm:6,children:e.jsx(K,{title:"\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u0431\u0435\u0439\u0434\u0436\u0438\u043A\u043E\u0432",enabled:h.delete_badges,icon:e.jsx(S,{})})}),e.jsx(x,{item:!0,xs:12,sm:6,children:e.jsx(K,{title:"\u0413\u0435\u043D\u0435\u0440\u0430\u0446\u0438\u044F \u043A\u043B\u044E\u0447\u0435\u0439",enabled:h.can_generate_keys,icon:e.jsx(gi,{sx:{color:h.can_generate_keys?"gold":"grey.600"}})})})]})})]})}),e.jsx(x,{item:!0,xs:12,children:e.jsxs(Le,{elevation:3,sx:{background:"linear-gradient(to bottom right, rgb(35 35 35 / 95%), rgb(0 0 0 / 90%))",color:"white",borderRadius:2},children:[e.jsx(bs,{title:e.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(at,{sx:{mr:1}}),e.jsx(i,{variant:"h6",color:"primary.light",children:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0430 \u0440\u0430\u0431\u043E\u0442\u044B \u043C\u043E\u0434\u0435\u0440\u0430\u0442\u043E\u0440\u0430"})]}),sx:{borderBottom:"1px solid rgba(255,255,255,0.1)",pb:1}}),e.jsx(Ve,{sx:{p:3},children:ce.loading?e.jsx(a,{sx:{display:"flex",justifyContent:"center",py:2},children:e.jsx(k,{size:32})}):e.jsxs(x,{container:!0,spacing:2,children:[e.jsx(x,{item:!0,xs:12,sm:6,children:e.jsxs(a,{sx:{p:2,bgcolor:"rgba(63,81,181,0.05)",borderRadius:2,border:"1px solid rgba(63,81,181,0.1)",mb:2},children:[e.jsx(i,{variant:"subtitle2",color:"primary.light",gutterBottom:!0,children:"\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u043A\u043E\u043D\u0442\u0435\u043D\u0442\u0430"}),e.jsxs(x,{container:!0,spacing:1,children:[e.jsx(x,{item:!0,xs:6,children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(qs,{sx:{mr:1,fontSize:"1rem",color:"rgba(255,255,255,0.6)"}}),e.jsxs(i,{variant:"body2",color:"rgba(255,255,255,0.7)",children:["\u041F\u043E\u0441\u0442\u044B: ",e.jsx("strong",{children:ce.deleted_posts})]})]})}),e.jsx(x,{item:!0,xs:6,children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(Qs,{sx:{mr:1,fontSize:"1rem",color:"rgba(255,255,255,0.6)"}}),e.jsxs(i,{variant:"body2",color:"rgba(255,255,255,0.7)",children:["\u0422\u0440\u0435\u043A\u0438: ",e.jsx("strong",{children:ce.deleted_tracks})]})]})}),e.jsx(x,{item:!0,xs:6,children:e.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Zs,{sx:{mr:1,fontSize:"1rem",color:"rgba(255,255,255,0.6)"}}),e.jsxs(i,{variant:"body2",color:"rgba(255,255,255,0.7)",children:["\u041A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0438: ",e.jsx("strong",{children:ce.deleted_comments})]})]})}),e.jsx(x,{item:!0,xs:6,children:e.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Ks,{sx:{mr:1,fontSize:"1rem",color:"rgba(255,255,255,0.6)"}}),e.jsxs(i,{variant:"body2",color:"rgba(255,255,255,0.7)",children:["\u0410\u0432\u0430\u0442\u0430\u0440\u044B: ",e.jsx("strong",{children:ce.deleted_avatars})]})]})})]})]})}),e.jsx(x,{item:!0,xs:12,sm:6,children:e.jsxs(a,{sx:{p:2,bgcolor:"rgba(255,152,0,0.05)",borderRadius:2,border:"1px solid rgba(255,152,0,0.1)",mb:2},children:[e.jsx(i,{variant:"subtitle2",color:"warning.light",gutterBottom:!0,children:"\u041D\u0430\u043A\u0430\u0437\u0430\u043D\u0438\u044F"}),e.jsxs(x,{container:!0,spacing:1,children:[e.jsx(x,{item:!0,xs:6,children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(vi,{sx:{mr:1,fontSize:"1rem",color:"rgba(255,255,255,0.6)"}}),e.jsxs(i,{variant:"body2",color:"rgba(255,255,255,0.7)",children:["\u041F\u0440\u0435\u0434\u0443\u043F\u0440\u0435\u0436\u0434\u0435\u043D\u0438\u044F: ",e.jsx("strong",{children:ce.warnings_issued})]})]})}),e.jsx(x,{item:!0,xs:6,children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(st,{sx:{mr:1,fontSize:"1rem",color:"rgba(255,255,255,0.6)"}}),e.jsxs(i,{variant:"body2",color:"rgba(255,255,255,0.7)",children:["\u0411\u0430\u043D\u044B: ",e.jsx("strong",{children:ce.bans_issued})]})]})}),e.jsx(x,{item:!0,xs:12,children:e.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ms,{sx:{mr:1,fontSize:"1rem",color:"rgba(255,255,255,0.6)"}}),e.jsxs(i,{variant:"body2",color:"rgba(255,255,255,0.7)",children:["\u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u0434\u0430\u043D\u043D\u044B\u0445: ",e.jsx("strong",{children:ce.updated_users})]})]})})]})]})}),e.jsx(x,{item:!0,xs:12,children:e.jsx(a,{sx:{p:2,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:2,background:"linear-gradient(135deg, rgba(208, 188, 255, 0.1) 0%, rgba(208, 188, 255, 0.05) 100%)",border:"1px solid rgba(208, 188, 255, 0.2)"},children:e.jsxs(i,{variant:"subtitle1",color:"primary.light",sx:{fontWeight:"bold"},children:["\u0412\u0441\u0435\u0433\u043E \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439: ",e.jsx("strong",{children:ce.total_actions})]})})})]})})]})}),e.jsx(x,{item:!0,xs:12,children:e.jsxs(a,{sx:{mt:4,mb:2},children:[e.jsx(i,{variant:"h6",sx:{mb:2,fontWeight:700,color:"primary.light"},children:"\u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u043A\u043B\u044E\u0447\u0430\u043C\u0438"}),e.jsx(p,{variant:"contained",color:"primary",onClick:Xa,sx:{mb:2,fontWeight:600,borderRadius:2},fullWidth:!0,children:"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043A\u043B\u044E\u0447"}),As&&rs.length===0?e.jsx(a,{sx:{display:"flex",justifyContent:"center",py:3},children:e.jsx(k,{size:28})}):Dt?e.jsx(G,{severity:"error",children:Dt}):e.jsxs(x,{container:!0,spacing:2,children:[rs.length===0?e.jsx(x,{item:!0,xs:12,children:e.jsx(G,{severity:"info",children:"\u041D\u0435\u0442 \u0441\u043E\u0437\u0434\u0430\u043D\u043D\u044B\u0445 \u043A\u043B\u044E\u0447\u0435\u0439"})}):rs.map((t,n)=>e.jsxs(x,{item:!0,xs:12,sm:6,md:4,children:[e.jsxs(A,{sx:{p:2,borderRadius:2,bgcolor:"rgba(18,18,18,0.95)",display:"flex",flexDirection:"column",gap:1},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:1},children:[e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:"primary.main",wordBreak:"break-all"},children:t.key}),e.jsx(y,{size:"small",onClick:()=>(c=>{navigator.clipboard.writeText(c.key).then(()=>{d("success","\u041A\u043B\u044E\u0447 \u0441\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u043D")})})(t),children:e.jsx(rt,{fontSize:"small"})})]}),e.jsxs(i,{variant:"body2",color:"text.secondary",children:["\u0422\u0438\u043F: ",t.key_type==="points"?"\u0411\u0430\u043B\u043B\u044B":"\u041F\u043E\u0434\u043F\u0438\u0441\u043A\u0430"]}),t.key_type==="points"&&e.jsxs(i,{variant:"body2",color:"text.secondary",children:["\u0411\u0430\u043B\u043B\u044B: ",e.jsx("b",{children:t.points_value})]}),t.key_type==="subscription"&&e.jsxs(i,{variant:"body2",color:"text.secondary",children:["\u041F\u043E\u0434\u043F\u0438\u0441\u043A\u0430: ",e.jsx("b",{children:t.subscription_type})]}),e.jsxs(i,{variant:"body2",color:"text.secondary",children:["\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u043E: ",e.jsxs("b",{children:[t.current_uses,"/",t.max_uses]})]}),e.jsxs(i,{variant:"body2",color:"text.secondary",children:["\u0421\u043E\u0437\u0434\u0430\u043D: ",t.created_at?new Date(t.created_at).toLocaleDateString():"-"]}),e.jsxs(i,{variant:"body2",color:"text.secondary",children:["\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u0435\u043D \u0434\u043E: ",t.expires_at?new Date(t.expires_at).toLocaleDateString():"-"]}),e.jsx(a,{sx:{display:"flex",gap:1,mt:1},children:e.jsx(p,{variant:"outlined",color:"error",size:"small",onClick:()=>(async c=>{Tt(l=>({...l,[c]:!0}));try{await j.delete(`/api/moderator/keys/${c}`),Re(),d("success","\u041A\u043B\u044E\u0447 \u0443\u0434\u0430\u043B\u0451\u043D")}catch(l){d("error",l.response?.data?.error||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u044F \u043A\u043B\u044E\u0447\u0430")}finally{Tt(l=>({...l,[c]:!1}))}})(t.id),disabled:Et[t.id],fullWidth:!0,children:Et[t.id]?e.jsx(k,{size:18}):"\u0423\u0434\u0430\u043B\u0438\u0442\u044C"})})]}),n===rs.length-1&&ts&&e.jsx("div",{ref:sr,style:{height:1}})]},t.id)),ss&&e.jsx(x,{item:!0,xs:12,sx:{display:"flex",justifyContent:"center",py:2},children:e.jsx(k,{size:24})})]}),e.jsxs(B,{open:Ja,onClose:Vs,fullWidth:!0,maxWidth:"sm",children:[e.jsxs(He,{sx:{bgcolor:"rgba(18,18,18,0.95)",color:"#fff"},children:["\u0413\u0435\u043D\u0435\u0440\u0430\u0446\u0438\u044F \u043A\u043B\u044E\u0447\u0430",!er&&e.jsx(y,{"aria-label":"close",onClick:Vs,sx:{position:"absolute",right:8,top:8,color:"#fff"},children:e.jsx(ki,{})})]}),e.jsx(O,{sx:{bgcolor:"rgba(18,18,18,0.95)"},children:e.jsx(a,{sx:{mt:1},children:tr.length>0?e.jsxs(a,{sx:{mb:2},children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsx(i,{variant:"subtitle1",fontWeight:"bold",color:"#fff",children:"\u0421\u0433\u0435\u043D\u0435\u0440\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u044B\u0439 \u043A\u043B\u044E\u0447:"}),e.jsx(p,{size:"small",startIcon:e.jsx(rt,{}),onClick:()=>navigator.clipboard.writeText(tr.join(`
`)),sx:{color:"#fff",borderColor:"#fff"},variant:"outlined",children:"\u041A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C"})]}),e.jsx(A,{variant:"outlined",sx:{p:2,maxHeight:200,overflow:"auto",bgcolor:"rgba(30,30,30,0.8)"},children:tr.map((t,n)=>e.jsx(i,{variant:"body2",fontFamily:"monospace",sx:{mb:.5,color:"#fff"},children:t},n))}),e.jsx(a,{sx:{mt:2,display:"flex",justifyContent:"center"},children:e.jsx(p,{variant:"outlined",onClick:()=>ar([]),sx:{color:"#fff",borderColor:"#fff"},children:"\u0421\u0433\u0435\u043D\u0435\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0435\u0449\u0435"})})]}):e.jsxs(x,{container:!0,spacing:2,children:[e.jsx(x,{item:!0,xs:12,children:e.jsxs(hs,{fullWidth:!0,children:[e.jsx(us,{sx:{color:"#fff"},children:"\u0422\u0438\u043F \u043A\u043B\u044E\u0447\u0430"}),e.jsxs(ps,{value:$.type,label:"\u0422\u0438\u043F \u043A\u043B\u044E\u0447\u0430",name:"type",onChange:ge,sx:{color:"#fff",".MuiOutlinedInput-notchedOutline":{borderColor:"#444"},".MuiSvgIcon-root":{color:"#fff"}},children:[e.jsx(Y,{value:"points",children:"\u0411\u0430\u043B\u043B\u044B"}),e.jsx(Y,{value:"subscription",children:"\u041F\u043E\u0434\u043F\u0438\u0441\u043A\u0430"})]})]})}),$.type==="points"?e.jsx(x,{item:!0,xs:12,sm:6,children:e.jsx(C,{label:"\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0431\u0430\u043B\u043B\u043E\u0432",name:"points",type:"number",fullWidth:!0,value:$.points,onChange:ge,InputProps:{inputProps:{min:1}},sx:{input:{color:"#fff"},label:{color:"#fff"}}})}):e.jsxs(e.Fragment,{children:[e.jsx(x,{item:!0,xs:12,sm:6,children:e.jsxs(hs,{fullWidth:!0,children:[e.jsx(us,{sx:{color:"#fff"},children:"\u0422\u0438\u043F \u043F\u043E\u0434\u043F\u0438\u0441\u043A\u0438"}),e.jsxs(ps,{value:$.subscription_type,label:"\u0422\u0438\u043F \u043F\u043E\u0434\u043F\u0438\u0441\u043A\u0438",name:"subscription_type",onChange:ge,sx:{color:"#fff",".MuiOutlinedInput-notchedOutline":{borderColor:"#444"},".MuiSvgIcon-root":{color:"#fff"}},children:[e.jsx(Y,{value:"basic",children:"\u0411\u0430\u0437\u043E\u0432\u0430\u044F"}),e.jsx(Y,{value:"premium",children:"\u041F\u0440\u0435\u043C\u0438\u0443\u043C"}),e.jsx(Y,{value:"ultimate",children:"\u0423\u043B\u044C\u0442\u0438\u043C\u0435\u0439\u0442"})]})]})}),e.jsx(x,{item:!0,xs:12,sm:6,children:e.jsx(C,{label:"\u0421\u0440\u043E\u043A \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044F \u043F\u043E\u0434\u043F\u0438\u0441\u043A\u0438 (\u0434\u043D\u0435\u0439)",name:"subscription_duration_days",type:"number",fullWidth:!0,value:$.subscription_duration_days,onChange:ge,InputProps:{inputProps:{min:1}},sx:{input:{color:"#fff"},label:{color:"#fff"}}})})]}),e.jsx(x,{item:!0,xs:12,sm:6,children:e.jsx(C,{label:"\u041C\u0430\u043A\u0441. \u0447\u0438\u0441\u043B\u043E \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u0439",name:"max_uses",type:"number",fullWidth:!0,value:$.max_uses,onChange:ge,InputProps:{inputProps:{min:1}},helperText:"\u0421\u043A\u043E\u043B\u044C\u043A\u043E \u0440\u0430\u0437 \u043C\u043E\u0436\u043D\u043E \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C \u043A\u043B\u044E\u0447",sx:{input:{color:"#fff"},label:{color:"#fff"}}})}),e.jsx(x,{item:!0,xs:12,sm:6,children:e.jsx(C,{label:"\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u043A\u043B\u044E\u0447\u0435\u0439",name:"count",type:"number",fullWidth:!0,value:$.count,onChange:ge,InputProps:{inputProps:{min:1,max:100}},helperText:"\u041E\u0442 1 \u0434\u043E 100 \u043A\u043B\u044E\u0447\u0435\u0439",sx:{input:{color:"#fff"},label:{color:"#fff"}}})}),e.jsx(x,{item:!0,xs:12,sm:6,children:e.jsx(C,{label:"\u0421\u0440\u043E\u043A \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044F (\u0434\u043D\u0435\u0439)",name:"expires_days",type:"number",fullWidth:!0,value:$.expires_days,onChange:ge,InputProps:{inputProps:{min:0}},helperText:"0 = \u0431\u0435\u0441\u0441\u0440\u043E\u0447\u043D\u043E",sx:{input:{color:"#fff"},label:{color:"#fff"}}})}),e.jsx(x,{item:!0,xs:12,children:e.jsx(C,{label:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435",name:"description",fullWidth:!0,multiline:!0,rows:2,value:$.description,onChange:ge,helperText:"\u041D\u0435\u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0434\u043B\u044F \u043C\u043E\u0434\u0435\u0440\u0430\u0442\u043E\u0440\u043E\u0432",sx:{input:{color:"#fff"},label:{color:"#fff"}}})}),Bt&&e.jsx(x,{item:!0,xs:12,children:e.jsx(G,{severity:"error",children:Bt})}),Ft&&e.jsx(x,{item:!0,xs:12,children:e.jsx(G,{severity:"success",children:Ft})})]})})}),e.jsxs(D,{sx:{bgcolor:"rgba(18,18,18,0.95)"},children:[tr.length===0&&e.jsxs(e.Fragment,{children:[e.jsx(p,{onClick:Vs,disabled:er,sx:{color:"#fff"},children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),e.jsx(p,{variant:"contained",color:"primary",onClick:Ya,disabled:er,startIcon:er?e.jsx(k,{size:20}):null,children:er?"\u0413\u0435\u043D\u0435\u0440\u0430\u0446\u0438\u044F...":"\u0421\u0433\u0435\u043D\u0435\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C"})]}),tr.length>0&&e.jsx(p,{onClick:()=>{Hs(!1),ar([])},sx:{color:"#fff"},children:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C"})]})]}),ts&&!ss&&e.jsx(p,{variant:"contained",color:"secondary",onClick:()=>Re(Ts+1,!0),sx:{mt:2,mb:2,width:"100%"},children:"\u041E\u0442\u043E\u0431\u0440\u0430\u0437\u0438\u0442\u044C \u0435\u0449\u0451"})]})})]})})(),v===1&&e.jsxs(e.Fragment,{children:[e.jsx(a,{sx:{mb:3},children:e.jsx(C,{fullWidth:!0,placeholder:"\u041F\u043E\u0438\u0441\u043A \u043F\u043E \u043F\u043E\u0441\u0442\u0430\u043C...",value:R.posts,onChange:r=>We("posts",r.target.value),InputProps:{startAdornment:e.jsx(E,{position:"start",children:e.jsx(he,{})}),endAdornment:R.posts?e.jsx(E,{position:"end",children:e.jsx(y,{size:"small",onClick:()=>$e("posts"),children:e.jsx(Me,{})})}):null},variant:"outlined",size:"small"})}),e.jsx(a,{sx:{width:"100%"},children:H.map((r,s)=>e.jsxs(A,{ref:s===H.length-1?ri:null,sx:{p:{xs:1.5,sm:2},mb:2,position:"relative"},children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",mb:1},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",mb:{xs:1,sm:0},width:{xs:"calc(100% - 48px)",sm:"auto"}},children:[e.jsx(P,{src:r.author_avatar?r.author_avatar.startsWith("/")?r.author_avatar:`/static/uploads/avatar/${r.author_id}/${r.author_avatar}`:void 0,sx:{mr:1,width:40,height:40},onClick:()=>b(`/profile/${r.author_username}`),style:{cursor:"pointer"}}),e.jsxs(a,{children:[e.jsx(i,{variant:"subtitle1",onClick:()=>b(`/profile/${r.author_username}`),sx:{cursor:"pointer","&:hover":{textDecoration:"underline"}},children:r.author_name}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:["@",r.author_username]})]})]}),e.jsxs(a,{display:"flex",alignItems:"center",children:[e.jsx(p,{variant:"outlined",size:"small",sx:{mr:1,height:36},onClick:()=>b(`/post/${r.id}`),children:"\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u043F\u043E\u0441\u0442"}),e.jsx(y,{color:"error",onClick:()=>(t=>{Ra(t),kr(!0)})(r),children:e.jsx(S,{})})]})]}),e.jsx(i,{variant:"body1",sx:{mb:2,whiteSpace:"pre-wrap",wordBreak:"break-word",cursor:"pointer"},onClick:()=>b(`/post/${r.id}`),children:r.content}),r.image&&e.jsx(a,{sx:{mb:2,maxWidth:"100%",maxHeight:300,overflow:"hidden",cursor:"pointer"},onClick:()=>b(`/post/${r.id}`),children:e.jsx("img",{src:r.image.startsWith("/")?r.image:`/static/uploads/post/${r.id}/${r.image}`,alt:"Post attachment",style:{width:"100%",height:"auto",borderRadius:"8px"}})}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:[new Date(r.created_at).toLocaleString()," \u2022 ",r.comments_count||0," \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0435\u0432 \u2022 ",r.likes_count||0," \u043B\u0430\u0439\u043A\u043E\u0432"]})]},r.id))}),w&&e.jsx(a,{sx:{display:"flex",justifyContent:"center",p:2},children:e.jsx(k,{size:30})}),!I.posts&&H.length>0&&e.jsx(i,{variant:"body2",color:"text.secondary",align:"center",sx:{py:2},children:"\u0411\u043E\u043B\u044C\u0448\u0435 \u043F\u043E\u0441\u0442\u043E\u0432 \u043D\u0435\u0442"})]}),v===2&&e.jsxs(e.Fragment,{children:[e.jsx(a,{sx:{mb:3},children:e.jsx(C,{fullWidth:!0,placeholder:"\u041F\u043E\u0438\u0441\u043A \u043F\u043E \u0442\u0440\u0435\u043A\u0430\u043C...",value:R.tracks,onChange:r=>We("tracks",r.target.value),InputProps:{startAdornment:e.jsx(E,{position:"start",children:e.jsx(he,{})}),endAdornment:R.tracks?e.jsx(E,{position:"end",children:e.jsx(y,{size:"small",onClick:()=>$e("tracks"),children:e.jsx(Me,{})})}):null},variant:"outlined",size:"small"})}),e.jsx(or,{sx:{overflowX:"auto"},children:e.jsxs(nr,{size:"small",children:[e.jsx(lr,{children:e.jsxs(J,{children:[e.jsx(u,{children:"\u041E\u0431\u043B\u043E\u0436\u043A\u0430"}),e.jsx(u,{children:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435"}),e.jsx(u,{sx:{display:{xs:"none",sm:"table-cell"}},children:"\u0410\u0440\u0442\u0438\u0441\u0442"}),e.jsx(u,{sx:{display:{xs:"none",md:"table-cell"}},children:"\u0410\u043B\u044C\u0431\u043E\u043C"}),e.jsx(u,{sx:{display:{xs:"none",md:"table-cell"}},children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u043E"}),e.jsx(u,{children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044F"})]})}),e.jsx(dr,{children:Je.map((r,s)=>e.jsxs(J,{ref:s===Je.length-1?si:null,children:[e.jsx(u,{children:e.jsx(P,{src:r.cover?`/static/music/${r.user_id}/${r.id}/${r.cover}`:"/static/uploads/system/album_placeholder.jpg",variant:"rounded",sx:{width:50,height:50,cursor:"pointer"},onClick:()=>Ns(r)})}),e.jsxs(u,{children:[e.jsx(i,{noWrap:!0,sx:{maxWidth:{xs:100,sm:150,md:"none"},cursor:"pointer","&:hover":{textDecoration:"underline"}},onClick:()=>Ns(r),children:r.title}),e.jsx(i,{variant:"caption",color:"text.secondary",sx:{display:{xs:"block",sm:"none"}},children:r.artist})]}),e.jsx(u,{sx:{display:{xs:"none",sm:"table-cell"}},children:r.artist}),e.jsx(u,{sx:{display:{xs:"none",md:"table-cell"}},children:r.album||"\u041D\u0435\u0442 \u0434\u0430\u043D\u043D\u044B\u0445"}),e.jsx(u,{sx:{display:{xs:"none",md:"table-cell"}},children:new Date(r.created_at).toLocaleDateString()}),e.jsx(u,{children:e.jsxs(a,{display:"flex",children:[e.jsx(y,{color:"primary",onClick:()=>(t=>{const n=`${window.location.origin}/music/track/${t.id}`;navigator.clipboard.writeText(n).then(()=>{d("success","\u0421\u0441\u044B\u043B\u043A\u0430 \u043D\u0430 \u0442\u0440\u0435\u043A \u0441\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u043D\u0430 \u0432 \u0431\u0443\u0444\u0435\u0440 \u043E\u0431\u043C\u0435\u043D\u0430")}).catch(c=>{d("error","\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0441\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u0441\u044B\u043B\u043A\u0443")})})(r),title:"\u041A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u0441\u044B\u043B\u043A\u0443 \u043D\u0430 \u0442\u0440\u0435\u043A",size:"small",children:e.jsx(rt,{fontSize:"small"})}),e.jsx(y,{color:"primary",onClick:()=>Ns(r),title:"\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u0442\u0440\u0435\u043A",size:"small",children:e.jsx(fi,{fontSize:"small"})}),e.jsx(y,{color:"error",onClick:()=>(t=>{Wa(t),Cr(!0)})(r),title:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0442\u0440\u0435\u043A",size:"small",children:e.jsx(S,{fontSize:"small"})})]})})]},r.id))})]})})]}),v===3&&e.jsxs(e.Fragment,{children:[e.jsx(a,{sx:{mb:3},children:e.jsx(C,{fullWidth:!0,placeholder:"\u041F\u043E\u0438\u0441\u043A \u043F\u043E \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u044F\u043C...",value:R.comments,onChange:r=>We("comments",r.target.value),InputProps:{startAdornment:e.jsx(E,{position:"start",children:e.jsx(he,{})}),endAdornment:R.comments?e.jsx(E,{position:"end",children:e.jsx(y,{size:"small",onClick:()=>$e("comments"),children:e.jsx(Me,{})})}):null},variant:"outlined",size:"small"})}),e.jsx(Js,{sx:{width:"100%"},children:Cs.map((r,s)=>e.jsx(ra.Fragment,{children:e.jsxs(A,{sx:{p:{xs:1.5,sm:2},mb:2,bgcolor:"background.default"},ref:s===Cs.length-1?ti:null,children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap"},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",mb:{xs:1,sm:0},width:{xs:"calc(100% - 48px)",sm:"auto"}},children:[e.jsx(P,{src:r.author_avatar?r.author_avatar.startsWith("/")?r.author_avatar:`/static/uploads/avatar/${r.author_id}/${r.author_avatar}`:void 0,sx:{mr:1,width:32,height:32,cursor:"pointer"},onClick:()=>b(`/profile/${r.author_username}`)}),e.jsxs(a,{children:[e.jsx(i,{variant:"subtitle2",noWrap:!0,sx:{maxWidth:{xs:150,sm:"none"},cursor:"pointer","&:hover":{textDecoration:"underline"}},onClick:()=>b(`/profile/${r.author_username}`),children:r.author_name}),e.jsx(i,{variant:"caption",color:"text.secondary",children:new Date(r.created_at).toLocaleString()})]})]}),e.jsxs(a,{display:"flex",children:[e.jsx(p,{variant:"outlined",size:"small",sx:{mr:1,height:30},onClick:()=>b(`/post/${r.post_id}`),children:"\u041A \u043F\u043E\u0441\u0442\u0443"}),e.jsx(y,{color:"error",onClick:()=>(t=>{$a(t),_r(!0)})(r),children:e.jsx(S,{})})]})]}),e.jsx(i,{variant:"body1",sx:{mt:1,mb:1,wordBreak:"break-word",cursor:"pointer"},onClick:()=>b(`/post/${r.post_id}`),children:r.content}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:["\u041A \u043F\u043E\u0441\u0442\u0443: ",e.jsxs("span",{style:{cursor:"pointer",textDecoration:"underline"},onClick:()=>b(`/post/${r.post_id}`),children:["#",r.post_id]})]})]})},r.id))})]}),v===4&&e.jsxs(e.Fragment,{children:[e.jsx(a,{sx:{mb:3},children:e.jsx(C,{fullWidth:!0,placeholder:"\u041F\u043E\u0438\u0441\u043A \u043F\u043E \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F\u043C...",value:R.users,onChange:r=>We("users",r.target.value),InputProps:{startAdornment:e.jsx(E,{position:"start",children:e.jsx(he,{})}),endAdornment:R.users?e.jsx(E,{position:"end",children:e.jsx(y,{size:"small",onClick:()=>$e("users"),children:e.jsx(Me,{})})}):null},variant:"outlined",size:"small"})}),e.jsx(or,{sx:{overflowX:"auto"},children:e.jsxs(nr,{size:"small",children:[e.jsx(lr,{children:e.jsxs(J,{children:[e.jsx(u,{children:"\u0410\u0432\u0430\u0442\u0430\u0440"}),e.jsx(u,{children:"\u0418\u043C\u044F"}),e.jsx(u,{sx:{display:{xs:"none",sm:"table-cell"}},children:"Username"}),e.jsx(u,{sx:{display:{xs:"none",md:"table-cell"}},children:"\u0414\u0430\u0442\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"}),e.jsx(u,{children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044F"})]})}),e.jsx(dr,{children:Pe.map((r,s)=>e.jsxs(J,{ref:s===Pe.length-1?ai:null,children:[e.jsx(u,{children:e.jsx(P,{src:r.photo?r.photo.startsWith("/")?r.photo:`/static/uploads/avatar/${r.id}/${r.photo}`:void 0,sx:{width:40,height:40,cursor:"pointer"},onClick:()=>b(`/profile/${r.username}`)})}),e.jsxs(u,{children:[e.jsx(i,{noWrap:!0,sx:{maxWidth:{xs:120,sm:"none"},cursor:"pointer","&:hover":{textDecoration:"underline"}},onClick:()=>b(`/profile/${r.username}`),children:r.name}),e.jsxs(i,{variant:"caption",color:"text.secondary",sx:{display:{xs:"block",sm:"none"}},children:["@",r.username]})]}),e.jsx(u,{sx:{display:{xs:"none",sm:"table-cell"}},children:e.jsxs(i,{sx:{cursor:"pointer","&:hover":{textDecoration:"underline"}},onClick:()=>b(`/profile/${r.username}`),children:["@",r.username]})}),e.jsx(u,{sx:{display:{xs:"none",md:"table-cell"}},children:new Date(r.created_at).toLocaleDateString()}),e.jsx(u,{children:e.jsxs(a,{sx:{display:"flex"},children:[e.jsx(y,{color:"primary",size:"small",onClick:()=>b(`/profile/${r.username}`),title:"\u041F\u0440\u043E\u0444\u0438\u043B\u044C \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F",children:e.jsx(ms,{fontSize:"small"})}),(h.change_user_name||h.change_username)&&e.jsx(y,{color:"primary",onClick:()=>(t=>{dt(t),xt(t.name||""),ht(t.username||""),Sr(!0)})(r),title:"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u0434\u0430\u043D\u043D\u044B\u0435",size:"small",children:e.jsx(Ge,{fontSize:"small"})}),h.delete_avatar&&r.photo&&e.jsx(y,{color:"warning",onClick:()=>(t=>{dt(t),wr(!0)})(r),title:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0430\u0432\u0430\u0442\u0430\u0440",size:"small",children:e.jsx(Ks,{fontSize:"small"})}),e.jsx(X,{title:"\u041F\u0440\u0435\u0434\u0443\u043F\u0440\u0435\u0436\u0434\u0435\u043D\u0438\u044F",children:e.jsx(y,{color:"warning",onClick:()=>(async t=>{_t(t),Zr(!0),Qr(!0);try{const n=await j.get(`/api/user/${t.id}/warnings`);n.data.success?wt(n.data.warnings):d("error","\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0438\u0441\u0442\u043E\u0440\u0438\u044E \u043F\u0440\u0435\u0434\u0443\u043F\u0440\u0435\u0436\u0434\u0435\u043D\u0438\u0439")}catch{d("error","\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u043F\u0440\u0435\u0434\u0443\u043F\u0440\u0435\u0436\u0434\u0435\u043D\u0438\u0439")}finally{Zr(!1)}})(r),size:"small",children:e.jsx(aa,{fontSize:"small"})})}),e.jsx(X,{title:"\u0412\u044B\u0434\u0430\u0442\u044C \u043F\u0440\u0435\u0434\u0443\u043F\u0440\u0435\u0436\u0434\u0435\u043D\u0438\u0435",children:e.jsx(y,{color:"warning",onClick:()=>Gt(r),size:"small",children:e.jsx(ta,{fontSize:"small"})})}),e.jsx(X,{title:"\u0411\u0430\u043D\u044B",children:e.jsx(y,{color:"error",onClick:()=>(async t=>{_t(t),Zr(!0),Kr(!0);try{const n=await j.get(`/api/user/${t.id}/bans`);n.data.success?St(n.data.bans):d("error","\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0438\u0441\u0442\u043E\u0440\u0438\u044E \u0431\u0430\u043D\u043E\u0432")}catch{d("error","\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u0431\u0430\u043D\u043E\u0432")}finally{Zr(!1)}})(r),size:"small",children:e.jsx(aa,{fontSize:"small"})})}),e.jsx(X,{title:"\u0417\u0430\u0431\u0430\u043D\u0438\u0442\u044C \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F",children:e.jsx(y,{color:"error",onClick:()=>Ut(r),size:"small",children:e.jsx(st,{fontSize:"small"})})}),h.manage_bug_reports&&e.jsx(X,{title:"\u0412\u044B\u0434\u0430\u0442\u044C \u043C\u0435\u0434\u0430\u043B\u044C",children:e.jsx(y,{color:"primary",onClick:()=>(t=>{Ta(t),Wt(""),Fs(""),es(!0),(async()=>{try{Rt(!0);const n=await j.get("/api/moderator/medals/available");if(!n.data.success)throw new Error(n.data.error||"Failed to fetch available medals");Ha(n.data.medals)}catch{d("error","\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0441\u043F\u0438\u0441\u043E\u043A \u0434\u043E\u0441\u0442\u0443\u043F\u043D\u044B\u0445 \u043C\u0435\u0434\u0430\u043B\u0435\u0439")}finally{Rt(!1)}})()})(r),size:"small",children:e.jsx(fs,{fontSize:"small"})})}),e.jsx(X,{title:"\u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0434\u0435\u043A\u043E\u0440\u0430\u0446\u0438\u044F\u043C\u0438",children:e.jsx(y,{size:"small",onClick:()=>(t=>{Vt(t),Ht(!0)})(r),children:e.jsx(Fi,{})})})]})})]},r.id))})]})}),e.jsxs(B,{open:Da,onClose:()=>Jr(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsxs(He,{children:["\u0412\u044B\u0434\u0430\u0442\u044C \u043F\u0440\u0435\u0434\u0443\u043F\u0440\u0435\u0436\u0434\u0435\u043D\u0438\u0435 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044E ",Ur?.name," (@",Ur?.username,")"]}),e.jsxs(O,{children:[e.jsx(C,{fullWidth:!0,label:"\u041F\u0440\u0438\u0447\u0438\u043D\u0430 \u043F\u0440\u0435\u0434\u0443\u043F\u0440\u0435\u0436\u0434\u0435\u043D\u0438\u044F",value:be.reason,onChange:r=>Os({...be,reason:r.target.value}),margin:"normal",variant:"outlined",required:!0,helperText:"\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u043F\u0440\u0438\u0447\u0438\u043D\u0443, \u043F\u043E \u043A\u043E\u0442\u043E\u0440\u043E\u0439 \u0432\u044B\u0434\u0430\u0435\u0442\u0441\u044F \u043F\u0440\u0435\u0434\u0443\u043F\u0440\u0435\u0436\u0434\u0435\u043D\u0438\u0435"}),e.jsx(C,{fullWidth:!0,label:"\u0414\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u0430\u044F \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F",value:be.details,onChange:r=>Os({...be,details:r.target.value}),margin:"normal",variant:"outlined",multiline:!0,rows:3,helperText:"\u041F\u0440\u0438 \u043D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E\u0441\u0442\u0438 \u0443\u043A\u0430\u0436\u0438\u0442\u0435 \u0434\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u0443\u044E \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044E"}),e.jsx(G,{severity:"warning",sx:{mt:2},children:"\u041F\u0440\u0438 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u0438 3 \u043F\u0440\u0435\u0434\u0443\u043F\u0440\u0435\u0436\u0434\u0435\u043D\u0438\u0439 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u0431\u0443\u0434\u0435\u0442 \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0438 \u0437\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u043D \u043D\u0430 30 \u0434\u043D\u0435\u0439!"})]}),e.jsxs(D,{children:[e.jsx(p,{onClick:()=>Jr(!1),children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),e.jsx(p,{onClick:async()=>{if(Ur)if(be.reason.trim())try{const r=await j.post("/api/moderator/warnings",{user_id:Ur.id,reason:be.reason,details:be.details});r.data.success?(d("success","\u041F\u0440\u0435\u0434\u0443\u043F\u0440\u0435\u0436\u0434\u0435\u043D\u0438\u0435 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0432\u044B\u0434\u0430\u043D\u043E"),r.data.auto_ban&&d("info",`\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0438 \u0437\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u043D \u0437\u0430 3 \u043F\u0440\u0435\u0434\u0443\u043F\u0440\u0435\u0436\u0434\u0435\u043D\u0438\u044F \u0434\u043E ${r.data.ban_info.formatted_end_date}`),Jr(!1)):d("error",r.data.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0432\u044B\u0434\u0430\u0447\u0435 \u043F\u0440\u0435\u0434\u0443\u043F\u0440\u0435\u0436\u0434\u0435\u043D\u0438\u044F")}catch{d("error","\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0432\u044B\u0434\u0430\u0447\u0435 \u043F\u0440\u0435\u0434\u0443\u043F\u0440\u0435\u0436\u0434\u0435\u043D\u0438\u044F")}else d("error","\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u043F\u0440\u0438\u0447\u0438\u043D\u0443 \u043F\u0440\u0435\u0434\u0443\u043F\u0440\u0435\u0436\u0434\u0435\u043D\u0438\u044F")},color:"warning",variant:"contained",disabled:!be.reason.trim(),children:"\u0412\u044B\u0434\u0430\u0442\u044C \u043F\u0440\u0435\u0434\u0443\u043F\u0440\u0435\u0436\u0434\u0435\u043D\u0438\u0435"})]})]}),e.jsxs(B,{open:Ba,onClose:()=>Xr(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsxs(He,{children:["\u0417\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F ",qr?.name," (@",qr?.username,")"]}),e.jsxs(O,{children:[e.jsx(C,{fullWidth:!0,label:"\u041F\u0440\u0438\u0447\u0438\u043D\u0430 \u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u043A\u0438",value:q.reason,onChange:r=>Yr({...q,reason:r.target.value}),margin:"normal",variant:"outlined",required:!0,helperText:"\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u043F\u0440\u0438\u0447\u0438\u043D\u0443, \u043F\u043E \u043A\u043E\u0442\u043E\u0440\u043E\u0439 \u0431\u043B\u043E\u043A\u0438\u0440\u0443\u0435\u0442\u0441\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C"}),e.jsx(C,{fullWidth:!0,label:"\u0414\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u0430\u044F \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F",value:q.details,onChange:r=>Yr({...q,details:r.target.value}),margin:"normal",variant:"outlined",multiline:!0,rows:3,helperText:"\u041F\u0440\u0438 \u043D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E\u0441\u0442\u0438 \u0443\u043A\u0430\u0436\u0438\u0442\u0435 \u0434\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u0443\u044E \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044E"}),e.jsx(C,{fullWidth:!0,label:"\u0421\u0440\u043E\u043A \u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u043A\u0438 (\u0434\u043D\u0435\u0439)",type:"number",value:q.duration_days,onChange:r=>Yr({...q,duration_days:parseInt(r.target.value)||1}),margin:"normal",variant:"outlined",required:!0,inputProps:{min:1,max:365},helperText:"\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u0441\u0440\u043E\u043A \u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u043A\u0438 \u0432 \u0434\u043D\u044F\u0445 (\u043E\u0442 1 \u0434\u043E 365)"}),e.jsx(G,{severity:"error",sx:{mt:2},children:"\u0412\u043E \u0432\u0440\u0435\u043C\u044F \u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u043A\u0438 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u043D\u0435 \u0441\u043C\u043E\u0436\u0435\u0442 \u0430\u0432\u0442\u043E\u0440\u0438\u0437\u043E\u0432\u0430\u0442\u044C\u0441\u044F \u0432 \u0430\u043A\u043A\u0430\u0443\u043D\u0442\u0435!"})]}),e.jsxs(D,{children:[e.jsx(p,{onClick:()=>Xr(!1),children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),e.jsx(p,{onClick:async()=>{if(qr)if(q.reason.trim())try{const r=await j.post("/api/moderator/bans",{user_id:qr.id,reason:q.reason,details:q.details,duration_days:q.duration_days});r.data.success?(d("success",`\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u0437\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u043D \u0434\u043E ${r.data.formatted_end_date}`),Xr(!1)):d("error",r.data.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0431\u0430\u043D\u0435 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F")}catch{d("error","\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0431\u0430\u043D\u0435 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F")}else d("error","\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u043F\u0440\u0438\u0447\u0438\u043D\u0443 \u0431\u0430\u043D\u0430")},color:"error",variant:"contained",disabled:!q.reason.trim()||q.duration_days<1,children:"\u0417\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u0442\u044C"})]})]}),e.jsxs(B,{open:Fa,onClose:()=>Qr(!1),maxWidth:"md",fullWidth:!0,children:[e.jsxs(He,{children:["\u041F\u0440\u0435\u0434\u0443\u043F\u0440\u0435\u0436\u0434\u0435\u043D\u0438\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F ",Te?.name," (@",Te?.username,")"]}),e.jsx(O,{children:It?e.jsx(a,{sx:{display:"flex",justifyContent:"center",my:3},children:e.jsx(k,{})}):Ds.length>0?e.jsx(Js,{children:Ds.map(r=>e.jsx(A,{sx:{mb:2,p:2},children:e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs(a,{children:[e.jsxs(i,{variant:"subtitle1",sx:{display:"flex",alignItems:"center"},children:[e.jsx(ta,{color:"warning",sx:{mr:1}}),r.reason,r.is_active?e.jsx(ae,{label:"\u0410\u043A\u0442\u0438\u0432\u043D\u043E",color:"warning",size:"small",sx:{ml:1}}):e.jsx(ae,{label:"\u0421\u043D\u044F\u0442\u043E",color:"default",size:"small",sx:{ml:1}})]}),e.jsxs(i,{variant:"body2",color:"text.secondary",children:["\u0412\u044B\u0434\u0430\u043D\u043E: ",new Date(r.created_at).toLocaleString()]}),e.jsxs(i,{variant:"body2",color:"text.secondary",children:["\u041C\u043E\u0434\u0435\u0440\u0430\u0442\u043E\u0440: ",r.admin_name," ",r.admin_username?`(@${r.admin_username})`:""]}),r.details&&e.jsx(i,{variant:"body2",sx:{mt:1},children:r.details})]}),r.is_active&&e.jsx(p,{variant:"outlined",color:"primary",size:"small",onClick:()=>(async s=>{try{const t=await j.delete(`/api/moderator/warnings/${s}`);t.data.success?(d("success","\u041F\u0440\u0435\u0434\u0443\u043F\u0440\u0435\u0436\u0434\u0435\u043D\u0438\u0435 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043D\u044F\u0442\u043E"),wt(Ds.map(n=>n.id===s?{...n,is_active:!1}:n))):d("error",t.data.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0441\u043D\u044F\u0442\u0438\u0438 \u043F\u0440\u0435\u0434\u0443\u043F\u0440\u0435\u0436\u0434\u0435\u043D\u0438\u044F")}catch{d("error","\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0441\u043D\u044F\u0442\u0438\u0438 \u043F\u0440\u0435\u0434\u0443\u043F\u0440\u0435\u0436\u0434\u0435\u043D\u0438\u044F")}})(r.id),children:"\u0421\u043D\u044F\u0442\u044C \u043F\u0440\u0435\u0434\u0443\u043F\u0440\u0435\u0436\u0434\u0435\u043D\u0438\u0435"})]})},r.id))}):e.jsx(G,{severity:"info",children:"\u0423 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F \u043D\u0435\u0442 \u043F\u0440\u0435\u0434\u0443\u043F\u0440\u0435\u0436\u0434\u0435\u043D\u0438\u0439"})}),e.jsxs(D,{children:[e.jsx(p,{onClick:()=>Qr(!1),children:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C"}),e.jsx(p,{color:"warning",variant:"contained",onClick:()=>{Qr(!1),Gt(Te)},children:"\u0412\u044B\u0434\u0430\u0442\u044C \u043F\u0440\u0435\u0434\u0443\u043F\u0440\u0435\u0436\u0434\u0435\u043D\u0438\u0435"})]})]}),e.jsxs(B,{open:Aa,onClose:()=>Kr(!1),maxWidth:"md",fullWidth:!0,children:[e.jsxs(He,{children:["\u0411\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u043A\u0438 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F ",Te?.name," (@",Te?.username,")"]}),e.jsx(O,{children:It?e.jsx(a,{sx:{display:"flex",justifyContent:"center",my:3},children:e.jsx(k,{})}):Ps.length>0?e.jsx(Js,{children:Ps.map(r=>e.jsx(A,{sx:{mb:2,p:2},children:e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs(a,{children:[e.jsxs(i,{variant:"subtitle1",sx:{display:"flex",alignItems:"center"},children:[e.jsx(st,{color:"error",sx:{mr:1}}),r.reason,r.is_active&&!r.is_expired?e.jsx(ae,{label:"\u0410\u043A\u0442\u0438\u0432\u043D\u043E",color:"error",size:"small",sx:{ml:1}}):e.jsx(ae,{label:r.is_active?"\u0418\u0441\u0442\u0435\u043A\u043B\u043E":"\u0421\u043D\u044F\u0442\u043E",color:"default",size:"small",sx:{ml:1}}),r.is_auto_ban&&e.jsx(ae,{label:"\u0410\u0432\u0442\u043E",color:"primary",size:"small",sx:{ml:1}})]}),e.jsxs(i,{variant:"body2",color:"text.secondary",children:["\u041D\u0430\u0447\u0430\u043B\u043E: ",new Date(r.start_date).toLocaleString()]}),e.jsxs(i,{variant:"body2",color:"text.secondary",children:["\u041E\u043A\u043E\u043D\u0447\u0430\u043D\u0438\u0435: ",r.formatted_end_date]}),e.jsxs(i,{variant:"body2",color:"text.secondary",children:["\u041C\u043E\u0434\u0435\u0440\u0430\u0442\u043E\u0440: ",r.admin_name," ",r.admin_username?`(@${r.admin_username})`:""]}),r.is_active&&!r.is_expired&&e.jsxs(i,{variant:"body2",color:"error",children:["\u041E\u0441\u0442\u0430\u043B\u043E\u0441\u044C \u0434\u043D\u0435\u0439: ",r.remaining_days]}),r.details&&e.jsx(i,{variant:"body2",sx:{mt:1},children:r.details})]}),r.is_active&&!r.is_expired&&e.jsx(p,{variant:"outlined",color:"primary",size:"small",onClick:()=>(async s=>{try{const t=await j.delete(`/api/moderator/bans/${s}`);t.data.success?(d("success","\u0411\u0430\u043D \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043D\u044F\u0442"),St(Ps.map(n=>n.id===s?{...n,is_active:!1}:n))):d("error",t.data.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0441\u043D\u044F\u0442\u0438\u0438 \u0431\u0430\u043D\u0430")}catch{d("error","\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0441\u043D\u044F\u0442\u0438\u0438 \u0431\u0430\u043D\u0430")}})(r.id),children:"\u0421\u043D\u044F\u0442\u044C \u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u043A\u0443"})]})},r.id))}):e.jsx(G,{severity:"info",children:"\u0423 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F \u043D\u0435\u0442 \u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u043E\u043A"})}),e.jsxs(D,{children:[e.jsx(p,{onClick:()=>Kr(!1),children:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C"}),e.jsx(p,{color:"error",variant:"contained",onClick:()=>{Kr(!1),Ut(Te)},children:"\u0417\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u0442\u044C"})]})]})]}),v===5&&(h.manage_bug_reports||h.delete_bug_reports?e.jsxs(e.Fragment,{children:[e.jsxs(a,{sx:{display:"flex",mb:2,flexWrap:"wrap",gap:2},children:[e.jsx(i,{variant:"h6",children:"\u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0431\u0430\u0433-\u0440\u0435\u043F\u043E\u0440\u0442\u0430\u043C\u0438"}),e.jsx(a,{sx:{flexGrow:1}}),e.jsx(C,{placeholder:"\u041F\u043E\u0438\u0441\u043A \u0431\u0430\u0433-\u0440\u0435\u043F\u043E\u0440\u0442\u043E\u0432",size:"small",value:R.bugReports,onChange:r=>We("bugReports",r.target.value),InputProps:{startAdornment:e.jsx(E,{position:"start",children:e.jsx(he,{})}),endAdornment:R.bugReports?e.jsx(E,{position:"end",children:e.jsx(y,{size:"small",onClick:()=>$e("bugReports"),children:e.jsx(Me,{})})}):null},variant:"outlined"})]}),e.jsx(or,{component:A,children:e.jsxs(nr,{children:[e.jsx(lr,{children:e.jsxs(J,{children:[e.jsx(u,{children:"ID"}),e.jsx(u,{children:"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C"}),e.jsx(u,{children:"\u0417\u0430\u0433\u043E\u043B\u043E\u0432\u043E\u043A"}),e.jsx(u,{children:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435"}),e.jsx(u,{children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),e.jsx(u,{sx:{display:{xs:"none",md:"table-cell"}},children:"\u0414\u0430\u0442\u0430"}),e.jsx(u,{children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044F"})]})}),e.jsxs(dr,{children:[De.length===0&&!m&&e.jsx(J,{children:e.jsx(u,{colSpan:7,align:"center",children:e.jsxs(a,{sx:{py:3,display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[e.jsx(i,{variant:"body2",children:"\u041D\u0435\u0442 \u0431\u0430\u0433-\u0440\u0435\u043F\u043E\u0440\u0442\u043E\u0432 \u0434\u043B\u044F \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F"}),e.jsxs(a,{sx:{display:"flex",gap:2},children:[e.jsx(p,{variant:"outlined",size:"small",color:"primary",onClick:async()=>{try{g(!0);const r=await j.get("/api/moderator/debug/bug-reports"),{total_bug_reports:s,sample_reports:t,user_permissions:n}=r.data;let c=`\u0412\u0441\u0435\u0433\u043E \u0431\u0430\u0433-\u0440\u0435\u043F\u043E\u0440\u0442\u043E\u0432 \u0432 \u0431\u0430\u0437\u0435: ${s}
`;c+=`\u041F\u0440\u0430\u0432\u0430: manage=${n.manage_bug_reports}, delete=${n.delete_bug_reports}

`,t.length>0?(c+=`\u041F\u0440\u0438\u043C\u0435\u0440\u044B \u0431\u0430\u0433-\u0440\u0435\u043F\u043E\u0440\u0442\u043E\u0432:
`,t.forEach(l=>{c+=`- ID ${l.id}: ${l.subject} (${l.status||"\u041D\u0435\u0442 \u0441\u0442\u0430\u0442\u0443\u0441\u0430"})
`})):c+="\u0412 \u0431\u0430\u0437\u0435 \u0434\u0430\u043D\u043D\u044B\u0445 \u043D\u0435\u0442 \u0431\u0430\u0433-\u0440\u0435\u043F\u043E\u0440\u0442\u043E\u0432.",alert(c)}catch(r){alert(`\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0442\u043B\u0430\u0434\u043A\u0435: ${r.response?.data?.error||r.message}`)}finally{g(!1)}},startIcon:e.jsx(Ne,{}),children:"\u041F\u0440\u043E\u0432\u0435\u0440\u0438\u0442\u044C \u0434\u0430\u043D\u043D\u044B\u0435"}),e.jsx(p,{variant:"outlined",size:"small",color:"warning",onClick:async()=>{g(!0);try{const r=await j.get("/api/admin/debug/bug-report-table"),s=r.data.table_info||{},t=r.data.sample_data||[],n=r.data.permissions_info||{};let c=`\u{1F50D} Database Direct Check:
`;c+=`Table columns: ${Object.keys(s).join(", ")}

`,c+=`Found ${t.length} bug reports in DB directly.
`,c+=`Moderator permissions: ${JSON.stringify(n)}

`,t.length>0&&(c+=`Sample data (first report):
`,c+=JSON.stringify(t[0],null,2)),alert(c);try{const l=await j.get("/api/moderator/bug-reports"),ir=await j.get("/api/moderator/bug-reports?page=1&per_page=10"),me=l.data.bug_reports||[],ni=ir.data.bug_reports||[];let xe=`\u{1F4CA} API Comparison:
`;xe+=`Regular API found: ${me.length} reports
`,xe+=`Pagination API found: ${ni.length} reports
`,xe+=`Database direct found: ${t.length} reports

`,me.length===0&&t.length>0&&(xe+=`\u26A0\uFE0F ISSUE DETECTED: Data exists in DB but not in API response!
`,xe+=`Possible causes:
`,xe+=`- Permission filtering might be incorrect
`,xe+=`- API response format mismatch
`,xe+=`- Field name differences
`),alert(xe)}catch(l){alert(`Failed to fetch regular bug reports: ${l.message}`)}}catch(r){alert(`Admin debug check failed: ${r.message}. Trying regular debug...`);try{const s=await j.get("/api/moderator/debug/bug-reports"),t=s.data.total_reports||0,n=s.data.sample_reports||[],c=s.data.permissions||{};let l=`\u{1F50D} Debug Check Results:
`;l+=`Total bug reports: ${t}
`,l+=`User permissions: ${JSON.stringify(c)}

`,n.length>0?(l+=`Sample reports:
`,l+=JSON.stringify(n[0],null,2)):l+="No sample reports found.",alert(l)}catch{alert("All debug attempts failed. Please check server logs.")}}finally{g(!1)}},startIcon:e.jsx(Ne,{}),children:"\u0413\u043B\u0443\u0431\u043E\u043A\u0430\u044F \u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0430 \u0411\u0414"})]})]})})}),m&&!w&&e.jsx(J,{children:e.jsx(u,{colSpan:7,align:"center",children:e.jsx(k,{size:32,sx:{my:2}})})}),De.map((r,s)=>e.jsxs(J,{ref:s===De.length-1?ii:null,children:[e.jsx(u,{children:r.id}),e.jsx(u,{children:e.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(P,{src:r.user_photo?r.user_photo.startsWith("/")?r.user_photo:`/static/uploads/avatar/${r.user_id}/${r.user_photo}`:void 0,sx:{mr:1,width:24,height:24}}),e.jsx(i,{variant:"body2",children:r.user_name})]})}),e.jsx(u,{children:e.jsx(i,{variant:"body2",children:r.title})}),e.jsx(u,{children:e.jsx(i,{variant:"body2",sx:{maxWidth:200,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:r.description})}),e.jsx(u,{children:e.jsx(ae,{label:r.status||"\u041E\u0442\u043A\u0440\u044B\u0442",color:r.status==="\u041E\u0442\u043A\u0440\u044B\u0442"?"error":r.status==="\u0412 \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0435"?"warning":r.status==="\u0420\u0435\u0448\u0435\u043D\u043E"?"success":"default",size:"small",sx:{fontSize:{xs:"0.65rem",sm:"0.75rem"}}})}),e.jsx(u,{sx:{display:{xs:"none",md:"table-cell"}},children:new Date(r.created_at).toLocaleDateString()}),e.jsx(u,{children:e.jsxs(a,{sx:{display:"flex"},children:[h.manage_bug_reports&&e.jsx(y,{size:"small",onClick:()=>(t=>{Ma(t),ut(t.status||"\u041E\u0442\u043A\u0440\u044B\u0442"),Ir(!0)})(r),children:e.jsx(Ge,{fontSize:"small"})}),h.delete_bug_reports&&e.jsx(y,{color:"error",size:"small",onClick:()=>(async t=>{try{if(!h.delete_bug_reports)return void d("error","\u0423 \u0432\u0430\u0441 \u043D\u0435\u0442 \u043F\u0440\u0430\u0432 \u043D\u0430 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u0431\u0430\u0433-\u0440\u0435\u043F\u043E\u0440\u0442\u043E\u0432");if(!window.confirm("\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u044D\u0442\u043E\u0442 \u0431\u0430\u0433-\u0440\u0435\u043F\u043E\u0440\u0442?"))return;g(!0);const n=await j.delete(`/api/moderator/bug-reports/${t}`);n.data&&n.data.success&&(le(c=>c.filter(l=>l.id!==t)),d("success","\u0411\u0430\u0433-\u0440\u0435\u043F\u043E\u0440\u0442 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0443\u0434\u0430\u043B\u0435\u043D"))}catch(n){d("error",n.response?.data?.error||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u0438 \u0431\u0430\u0433-\u0440\u0435\u043F\u043E\u0440\u0442\u0430")}finally{g(!1)}})(r.id),children:e.jsx(S,{fontSize:"small"})})]})})]},r.id)),w&&e.jsx(J,{children:e.jsx(u,{colSpan:7,align:"center",children:e.jsx(k,{size:24,sx:{my:1}})})})]})]})})]}):e.jsxs(a,{sx:{textAlign:"center",py:4},children:[e.jsx(Ne,{sx:{fontSize:60,color:"text.secondary",mb:2}}),e.jsx(i,{variant:"h6",color:"text.secondary",children:"\u0423 \u0432\u0430\u0441 \u043D\u0435\u0442 \u043F\u0440\u0430\u0432 \u043D\u0430 \u0443\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0431\u0430\u0433-\u0440\u0435\u043F\u043E\u0440\u0442\u0430\u043C\u0438"})]})),v===6&&(()=>{if(!h.edit_badges&&!h.delete_badges)return e.jsx(G,{severity:"warning",sx:{mt:2},children:"\u0423 \u0432\u0430\u0441 \u043D\u0435\u0442 \u043F\u0440\u0430\u0432 \u043D\u0430 \u0443\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0431\u0435\u0439\u0434\u0436\u0438\u043A\u0430\u043C\u0438"});if(m&&Xe.length===0)return e.jsx(a,{sx:{display:"flex",justifyContent:"center",mt:4},children:e.jsx(k,{})});if(!m&&Xe.length===0)return e.jsx(G,{severity:"info",sx:{mt:2},children:"\u0411\u0435\u0439\u0434\u0436\u0438\u043A\u0438 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u044B"});try{return e.jsxs(e.Fragment,{children:[e.jsx(a,{sx:{mb:3,mt:2,display:"flex",alignItems:"center"},children:e.jsx(C,{placeholder:"\u041F\u043E\u0438\u0441\u043A \u0431\u0435\u0439\u0434\u0436\u0438\u043A\u043E\u0432...",variant:"outlined",size:"small",fullWidth:!0,value:R.badges,onChange:r=>We("badges",r.target.value),InputProps:{startAdornment:e.jsx(E,{position:"start",children:e.jsx(he,{})}),endAdornment:R.badges&&e.jsx(E,{position:"end",children:e.jsx(y,{size:"small",onClick:()=>$e("badges"),children:e.jsx(Me,{})})})}})}),e.jsx(x,{container:!0,spacing:3,children:Xe.map((r,s)=>{if(!r||typeof r!="object")return null;const t=s===Xe.length-1;return e.jsx(ci,{in:!0,style:{transitionDelay:50*s+"ms"},children:e.jsx(x,{item:!0,xs:12,sm:6,md:4,lg:3,ref:t?Nt:null,children:e.jsxs(Le,{elevation:3,sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.2s, box-shadow 0.2s","&:hover":{transform:"translateY(-5px)",boxShadow:6},bgcolor:r.is_active?"background.paper":"rgba(0,0,0,0.05)"},children:[e.jsx(bs,{avatar:e.jsx(ea,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:e.jsx(X,{title:r.is_active?"\u0410\u043A\u0442\u0438\u0432\u0435\u043D":"\u041D\u0435\u0430\u043A\u0442\u0438\u0432\u0435\u043D",children:e.jsx(P,{sx:{width:15,height:15,bgcolor:r.is_active?"success.main":"text.disabled"},children:r.is_active?e.jsx(gs,{sx:{width:10,height:10}}):e.jsx(ji,{sx:{width:10,height:10}})})}),children:e.jsx(P,{src:r.creator_avatar?`/avatar/${r.creator_id}/${r.creator_avatar}`:void 0,alt:r.creator_name||"Creator",sx:{bgcolor:"primary.main"},children:r.creator_name?.charAt(0)||"U"})}),title:e.jsx(X,{title:`\u0421\u043E\u0437\u0434\u0430\u0442\u0435\u043B\u044C: ${r.creator_name||"\u041D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u043E"}`,children:e.jsx(i,{variant:"subtitle1",noWrap:!0,children:r.name?r.name.length>7?r.name.slice(0,7)+"...":r.name:"\u0411\u0435\u0439\u0434\u0436\u0438\u043A"})}),subheader:e.jsx(i,{variant:"body2",color:"text.secondary",noWrap:!0,children:r.description?r.description.length>7?r.description.slice(0,7)+"...":r.description:"\u041D\u0435\u0442"}),action:e.jsxs(a,{sx:{display:"flex",flexDirection:"row"},children:[h.edit_badges&&e.jsx(y,{onClick:()=>(n=>{ct(n),pt(n.name),bt(n.description||""),mt(n.price.toString()),jt(n.is_active),Is(null),zs(`/static/images/bages/shop/${n.image_path}`),zr(!0)})(r),"aria-label":"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0431\u0435\u0439\u0434\u0436\u0438\u043A",color:"primary",children:e.jsx(Ge,{})}),h.delete_badges&&e.jsx(y,{onClick:()=>(n=>{ct(n),Rr(!0)})(r),"aria-label":"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0431\u0435\u0439\u0434\u0436\u0438\u043A",color:"error",children:e.jsx(S,{})})]})}),e.jsx(Zt,{component:"img",sx:{objectFit:"contain",p:2,height:140,filter:r.is_active?"none":"grayscale(100%)"},image:r.image_path?`/static/images/bages/shop/${r.image_path}`:"/static/images/bages/default.svg",alt:r.name||"\u0411\u0435\u0439\u0434\u0436\u0438\u043A",onError:n=>{n.target.src="/static/images/bages/default.svg"}}),e.jsx(Ve,{sx:{flexGrow:1},children:e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsx(ae,{icon:e.jsx(da,{}),label:`${r.price||0} \u0431\u0430\u043B\u043B\u043E\u0432`,color:"primary",variant:"outlined",size:"small",sx:{borderRadius:1}}),e.jsx(ae,{icon:e.jsx(mi,{}),label:`${r.copies_sold||0} \u043F\u0440\u043E\u0434\u0430\u043D\u043E`,color:"secondary",variant:"outlined",size:"small",sx:{borderRadius:1}})]})})]})})},r.id)})}),w&&e.jsx(a,{sx:{display:"flex",justifyContent:"center",my:3},children:e.jsx(k,{size:30})}),I.badges&&Xe.length>0&&e.jsx("div",{ref:Nt,style:{height:"20px"}})]})}catch(r){return e.jsxs(G,{severity:"error",sx:{mt:2},children:["\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0438 \u0431\u0435\u0439\u0434\u0436\u0438\u043A\u043E\u0432: ",r.message]})}})(),v===7&&(h.manage_artists||h.delete_artists?e.jsxs(e.Fragment,{children:[e.jsxs(a,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(C,{sx:{flexGrow:1,mr:2},placeholder:"\u041F\u043E\u0438\u0441\u043A \u043F\u043E \u0430\u0440\u0442\u0438\u0441\u0442\u0430\u043C...",value:R.artists,onChange:r=>We("artists",r.target.value),InputProps:{startAdornment:e.jsx(E,{position:"start",children:e.jsx(he,{})}),endAdornment:R.artists?e.jsx(E,{position:"end",children:e.jsx(y,{size:"small",onClick:()=>$e("artists"),children:e.jsx(Me,{})})}):null},variant:"outlined",size:"small"}),h.manage_artists&&e.jsx(p,{variant:"contained",color:"primary",startIcon:e.jsx(Xs,{}),onClick:()=>{we(null),Rs(""),Ws(""),Fr(null),Ar(""),$s(!1),Ia(!0)},children:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0430\u0440\u0442\u0438\u0441\u0442\u0430"})]}),e.jsx(x,{container:!0,spacing:3,children:yr.map((r,s)=>e.jsx(x,{item:!0,xs:12,sm:6,md:4,lg:3,ref:s===yr.length-1?oi:null,children:e.jsxs(Le,{elevation:3,sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.2s, box-shadow 0.2s","&:hover":{transform:"translateY(-5px)",boxShadow:6},bgcolor:"background.paper"},children:[e.jsx(bs,{avatar:e.jsx(ea,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:r.verified?e.jsx(X,{title:"\u0412\u0435\u0440\u0438\u0444\u0438\u0446\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u044B\u0439 \u0430\u0440\u0442\u0438\u0441\u0442",children:e.jsx(P,{sx:{width:15,height:15,bgcolor:"primary.main"},children:e.jsx(gs,{sx:{width:10,height:10}})})}):null,children:e.jsx(P,{src:r.avatar_url,alt:r.name,sx:{bgcolor:"primary.main",width:56,height:56},children:r.name?.charAt(0)||"A"})}),title:e.jsx(X,{title:r.name,children:e.jsx(i,{variant:"subtitle1",sx:{fontWeight:"medium",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:1.4},children:r.name})}),subheader:e.jsxs(i,{variant:"caption",color:"text.secondary",children:[r.tracks_count||"0"," \u0442\u0440\u0435\u043A\u043E\u0432"]}),sx:{pb:0,"& .MuiCardHeader-content":{overflow:"hidden"}}}),e.jsx(Ve,{sx:{flexGrow:1,pt:1,pb:1},children:e.jsx(i,{variant:"body2",color:"text.secondary",sx:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",height:"4.5rem",mb:1},children:r.bio||"\u041D\u0435\u0442 \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u0438 \u043E\u0431 \u0430\u0440\u0442\u0438\u0441\u0442\u0435"})}),e.jsxs(xi,{sx:{justifyContent:"space-between",flexWrap:"wrap",px:2,pb:2,pt:0},children:[e.jsxs(a,{sx:{display:"flex",gap:.5},children:[e.jsx(y,{size:"small",color:"primary",onClick:()=>window.open(`/artist/${r.id}`,"_blank"),title:"\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0443 \u0430\u0440\u0442\u0438\u0441\u0442\u0430",children:e.jsx(Ii,{fontSize:"small"})}),h.manage_artists&&e.jsx(y,{onClick:()=>(t=>{we(t),Rs(t.name),Ws(t.bio||""),Fr(null),Ar(t.avatar_url||""),$s(t.verified||!1),Ye(!0)})(r),"aria-label":"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0430\u0440\u0442\u0438\u0441\u0442\u0430",color:"primary",size:"small",children:e.jsx(Ge,{fontSize:"small"})}),h.manage_artists&&e.jsx(y,{onClick:()=>(async t=>{we(t),_s(!0),Z(!0),Qe([]),Mr([]),ot(""),lt("artist"),Fe([]);try{const n=await j.get(`/api/moderator/artists/${t.id}/tracks`);n.data.success?Qe(n.data.tracks||[]):d("error",n.data.error||"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0442\u0440\u0435\u043A\u0438 \u0430\u0440\u0442\u0438\u0441\u0442\u0430")}catch(n){d("error",n.response?.data?.error||"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0442\u0440\u0435\u043A\u0438 \u0430\u0440\u0442\u0438\u0441\u0442\u0430")}finally{Z(!1)}})(r),"aria-label":"\u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0442\u0440\u0435\u043A\u0430\u043C\u0438 \u0430\u0440\u0442\u0438\u0441\u0442\u0430",color:"primary",size:"small",children:e.jsx(yi,{fontSize:"small"})}),h.delete_artists&&e.jsx(y,{onClick:()=>(t=>{we(t),Wr(!0)})(r),"aria-label":"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0430\u0440\u0442\u0438\u0441\u0442\u0430",color:"error",size:"small",children:e.jsx(S,{fontSize:"small"})})]}),e.jsx(ae,{icon:e.jsx(at,{fontSize:"small"}),label:new Date(r.created_at).toLocaleDateString(),variant:"outlined",size:"small",sx:{height:24,"& .MuiChip-label":{px:1,fontSize:"0.7rem"}}})]})]})},r.id))}),yr.length===0&&!m&&e.jsxs(a,{sx:{textAlign:"center",py:4},children:[e.jsx(Xs,{sx:{fontSize:60,color:"text.secondary",mb:2}}),e.jsx(i,{variant:"h6",color:"text.secondary",children:"\u0410\u0440\u0442\u0438\u0441\u0442\u044B \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u044B"})]}),w&&e.jsx(a,{sx:{display:"flex",justifyContent:"center",my:3},children:e.jsx(k,{size:30})})]}):e.jsx(G,{severity:"warning",sx:{mt:2},children:"\u0423 \u0432\u0430\u0441 \u043D\u0435\u0442 \u043F\u0440\u0430\u0432 \u043D\u0430 \u0443\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0430\u0440\u0442\u0438\u0441\u0442\u0430\u043C\u0438"}))]})]}),e.jsxs(B,{open:ma,onClose:()=>kr(!1),fullWidth:!0,maxWidth:"sm",children:[e.jsxs(a,{sx:{position:"relative",overflow:"hidden",p:2,borderBottom:"1px solid rgba(255, 255, 255, 0.1)",backgroundColor:"rgba(244, 67, 54, 0.15)"},children:[e.jsx(a,{sx:{position:"absolute",top:-30,right:-30,width:120,height:120,borderRadius:"50%",background:"radial-gradient(circle, rgba(244,67,54,0.2) 0%, rgba(244,67,54,0) 70%)",zIndex:0}}),e.jsxs(a,{sx:{position:"relative",zIndex:1,display:"flex",alignItems:"center"},children:[e.jsx(S,{color:"error",sx:{mr:1.5,fontSize:24}}),e.jsx(i,{variant:"h6",fontWeight:"bold",color:"error.light",children:"\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u043F\u043E\u0441\u0442\u0430"})]})]}),e.jsx(O,{sx:{p:3,pt:2.5,bgcolor:"transparent"},children:e.jsxs(a,{sx:{position:"relative",p:2.5,borderRadius:2,backgroundColor:"rgba(244, 67, 54, 0.05)",border:"1px solid rgba(244, 67, 54, 0.2)",mb:1},children:[e.jsx(i,{variant:"subtitle1",color:"rgba(255,255,255,0.87)",gutterBottom:!0,children:"\u0412\u044B \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u044D\u0442\u043E\u0442 \u043F\u043E\u0441\u0442?"}),ee&&e.jsxs(a,{sx:{mt:2,borderRadius:1,bgcolor:"rgba(0,0,0,0.3)",p:2},children:[e.jsx(i,{variant:"body2",color:"rgba(255,255,255,0.7)",children:ee.content}),ee.image&&e.jsx(a,{sx:{mt:1,maxWidth:"100%",maxHeight:200,overflow:"hidden",borderRadius:1},children:e.jsx("img",{src:ee.image.startsWith("/")?ee.image:`/static/uploads/post/${ee.id}/${ee.image}`,alt:"Post attachment",style:{width:"100%",height:"auto",borderRadius:"4px"}})})]})]})}),e.jsxs(D,{sx:{p:2,px:3,justifyContent:"space-between",backgroundColor:"rgba(0,0,0,0.4)"},children:[e.jsx(p,{onClick:()=>kr(!1),variant:"outlined",color:"inherit",sx:{borderRadius:8,px:3,borderColor:"rgba(255,255,255,0.2)",color:"rgba(255,255,255,0.7)","&:hover":{borderColor:"rgba(255,255,255,0.4)",background:"rgba(255,255,255,0.05)"}},children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),e.jsx(p,{onClick:async()=>{if(ee)try{g(!0);const r=await j.delete(`/api/moderator/posts/${ee.id}`);if(!r.data.success)throw new Error(r.data.error||"Failed to delete post");d("success","\u041F\u043E\u0441\u0442 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0443\u0434\u0430\u043B\u0435\u043D"),fe(H.filter(s=>s.id!==ee.id))}catch{d("error","\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u043F\u043E\u0441\u0442")}finally{g(!1),kr(!1)}},color:"error",variant:"contained",disabled:m,startIcon:m?e.jsx(k,{size:20}):e.jsx(S,{}),sx:{borderRadius:8,px:4,py:.75,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.4)",background:"linear-gradient(45deg, #f44336 30%, #ff7961 90%)","&:hover":{boxShadow:"0 6px 16px rgba(0, 0, 0, 0.5)"}},children:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C"})]})]}),e.jsxs(B,{open:ja,onClose:()=>Cr(!1),fullWidth:!0,maxWidth:"sm",children:[e.jsxs(a,{sx:{position:"relative",overflow:"hidden",p:2,borderBottom:"1px solid rgba(255, 255, 255, 0.1)",backgroundColor:"rgba(244, 67, 54, 0.15)"},children:[e.jsx(a,{sx:{position:"absolute",top:-30,right:-30,width:120,height:120,borderRadius:"50%",background:"radial-gradient(circle, rgba(244,67,54,0.2) 0%, rgba(244,67,54,0) 70%)",zIndex:0}}),e.jsxs(a,{sx:{position:"relative",zIndex:1,display:"flex",alignItems:"center"},children:[e.jsx(S,{color:"error",sx:{mr:1.5,fontSize:24}}),e.jsx(i,{variant:"h6",fontWeight:"bold",color:"error.light",children:"\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u0442\u0440\u0435\u043A\u0430"})]})]}),e.jsx(O,{sx:{p:3,pt:2.5,bgcolor:"transparent"},children:e.jsxs(a,{sx:{position:"relative",p:2.5,borderRadius:2,backgroundColor:"rgba(244, 67, 54, 0.05)",border:"1px solid rgba(244, 67, 54, 0.2)",mb:1},children:[e.jsx(i,{variant:"subtitle1",color:"rgba(255,255,255,0.87)",gutterBottom:!0,children:"\u0412\u044B \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u044D\u0442\u043E\u0442 \u0442\u0440\u0435\u043A?"}),ke&&e.jsxs(a,{sx:{mt:2,borderRadius:1,bgcolor:"rgba(0,0,0,0.3)",p:2},children:[e.jsx(i,{variant:"body1",fontWeight:"bold",color:"rgba(255,255,255,0.9)",children:ke.title}),e.jsxs(i,{variant:"body2",color:"rgba(255,255,255,0.7)",children:["\u0410\u0440\u0442\u0438\u0441\u0442: ",ke.artist]}),e.jsxs(i,{variant:"body2",color:"rgba(255,255,255,0.7)",children:["\u0410\u043B\u044C\u0431\u043E\u043C: ",ke.album||"\u041D\u0435\u0442 \u0434\u0430\u043D\u043D\u044B\u0445"]})]})]})}),e.jsxs(D,{sx:{p:2,px:3,justifyContent:"space-between",backgroundColor:"rgba(0,0,0,0.4)"},children:[e.jsx(p,{onClick:()=>Cr(!1),variant:"outlined",color:"inherit",sx:{borderRadius:8,px:3,borderColor:"rgba(255,255,255,0.2)",color:"rgba(255,255,255,0.7)","&:hover":{borderColor:"rgba(255,255,255,0.4)",background:"rgba(255,255,255,0.05)"}},children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),e.jsx(p,{onClick:async()=>{if(ke)try{g(!0);const r=await j.delete(`/api/moderator/tracks/${ke.id}`);if(!r.data.success)throw new Error(r.data.error||"Failed to delete track");d("success","\u0422\u0440\u0435\u043A \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0443\u0434\u0430\u043B\u0435\u043D"),ve(Je.filter(s=>s.id!==ke.id))}catch{d("error","\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u0442\u0440\u0435\u043A")}finally{g(!1),Cr(!1)}},color:"error",variant:"contained",disabled:m,startIcon:m?e.jsx(k,{size:20}):e.jsx(S,{}),sx:{borderRadius:8,px:4,py:.75,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.4)",background:"linear-gradient(45deg, #f44336 30%, #ff7961 90%)","&:hover":{boxShadow:"0 6px 16px rgba(0, 0, 0, 0.5)"}},children:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C"})]})]}),e.jsxs(B,{open:fa,onClose:()=>_r(!1),fullWidth:!0,maxWidth:"sm",children:[e.jsxs(a,{sx:{position:"relative",overflow:"hidden",p:2,borderBottom:"1px solid rgba(255, 255, 255, 0.1)",backgroundColor:"rgba(244, 67, 54, 0.15)"},children:[e.jsx(a,{sx:{position:"absolute",top:-30,right:-30,width:120,height:120,borderRadius:"50%",background:"radial-gradient(circle, rgba(244,67,54,0.2) 0%, rgba(244,67,54,0) 70%)",zIndex:0}}),e.jsxs(a,{sx:{position:"relative",zIndex:1,display:"flex",alignItems:"center"},children:[e.jsx(S,{color:"error",sx:{mr:1.5,fontSize:24}}),e.jsx(i,{variant:"h6",fontWeight:"bold",color:"error.light",children:"\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u044F"})]})]}),e.jsx(O,{sx:{p:3,pt:2.5,bgcolor:"transparent"},children:e.jsxs(a,{sx:{position:"relative",p:2.5,borderRadius:2,backgroundColor:"rgba(244, 67, 54, 0.05)",border:"1px solid rgba(244, 67, 54, 0.2)",mb:1},children:[e.jsx(i,{variant:"subtitle1",color:"rgba(255,255,255,0.87)",gutterBottom:!0,children:"\u0412\u044B \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u044D\u0442\u043E\u0442 \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439?"}),Ce&&e.jsxs(a,{sx:{mt:2,borderRadius:1,bgcolor:"rgba(0,0,0,0.3)",p:2},children:[e.jsx(i,{variant:"body2",color:"rgba(255,255,255,0.7)",children:Ce.content}),Ce.image&&e.jsx(a,{sx:{mt:1,maxWidth:"100%",maxHeight:200,overflow:"hidden",borderRadius:1},children:e.jsx("img",{src:Ce.image,alt:"Comment attachment",style:{width:"100%",height:"auto",borderRadius:"4px"}})})]})]})}),e.jsxs(D,{sx:{p:2,px:3,justifyContent:"space-between",backgroundColor:"rgba(0,0,0,0.4)"},children:[e.jsx(p,{onClick:()=>_r(!1),variant:"outlined",color:"inherit",sx:{borderRadius:8,px:3,borderColor:"rgba(255,255,255,0.2)",color:"rgba(255,255,255,0.7)","&:hover":{borderColor:"rgba(255,255,255,0.4)",background:"rgba(255,255,255,0.05)"}},children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),e.jsx(p,{onClick:async()=>{if(Ce)try{g(!0);const r=await j.delete(`/api/moderator/comments/${Ce.id}`);if(!r.data.success)throw new Error(r.data.error||"Failed to delete comment");d("success","\u041A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0443\u0434\u0430\u043B\u0435\u043D"),qe(Cs.filter(s=>s.id!==Ce.id))}catch{d("error","\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439")}finally{g(!1),_r(!1)}},color:"error",variant:"contained",disabled:m,startIcon:m?e.jsx(k,{size:20}):e.jsx(S,{}),sx:{borderRadius:8,px:4,py:.75,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.4)",background:"linear-gradient(45deg, #f44336 30%, #ff7961 90%)","&:hover":{boxShadow:"0 6px 16px rgba(0, 0, 0, 0.5)"}},children:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C"})]})]}),e.jsxs(B,{open:va,onClose:()=>wr(!1),fullWidth:!0,maxWidth:"sm",children:[e.jsxs(a,{sx:{position:"relative",overflow:"hidden",p:2,borderBottom:"1px solid rgba(255, 255, 255, 0.1)",backgroundColor:"rgba(244, 67, 54, 0.15)"},children:[e.jsx(a,{sx:{position:"absolute",top:-30,right:-30,width:120,height:120,borderRadius:"50%",background:"radial-gradient(circle, rgba(244,67,54,0.2) 0%, rgba(244,67,54,0) 70%)",zIndex:0}}),e.jsxs(a,{sx:{position:"relative",zIndex:1,display:"flex",alignItems:"center"},children:[e.jsx(S,{color:"error",sx:{mr:1.5,fontSize:24}}),e.jsx(i,{variant:"h6",fontWeight:"bold",color:"error.light",children:"\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u0430\u0432\u0430\u0442\u0430\u0440\u0430 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F"})]})]}),e.jsx(O,{sx:{p:3,pt:2.5,bgcolor:"transparent"},children:e.jsxs(a,{sx:{position:"relative",p:2.5,borderRadius:2,backgroundColor:"rgba(244, 67, 54, 0.05)",border:"1px solid rgba(244, 67, 54, 0.2)",mb:1},children:[e.jsxs(i,{variant:"subtitle1",color:"rgba(255,255,255,0.87)",gutterBottom:!0,children:["\u0412\u044B \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u0430\u0432\u0430\u0442\u0430\u0440 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F ",e.jsx(a,{component:"span",fontWeight:"bold",color:"error.light",children:M?.name}),"?"]}),M&&M.photo&&e.jsx(a,{sx:{mt:2,display:"flex",justifyContent:"center"},children:e.jsx(P,{src:`/static/uploads/avatar/${M.id}/${M.photo}`,alt:M.name,sx:{width:150,height:150,border:"3px solid rgba(244, 67, 54, 0.3)"}})})]})}),e.jsxs(D,{sx:{p:2,px:3,justifyContent:"space-between",backgroundColor:"rgba(0,0,0,0.4)"},children:[e.jsx(p,{onClick:()=>wr(!1),variant:"outlined",color:"inherit",sx:{borderRadius:8,px:3,borderColor:"rgba(255,255,255,0.2)",color:"rgba(255,255,255,0.7)","&:hover":{borderColor:"rgba(255,255,255,0.4)",background:"rgba(255,255,255,0.05)"}},children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),e.jsx(p,{onClick:async()=>{if(M)try{g(!0);const r=await j.delete(`/api/moderator/users/${M.id}/avatar`);if(!r.data.success)throw new Error(r.data.error||"Failed to delete avatar");d("success","\u0410\u0432\u0430\u0442\u0430\u0440 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0443\u0434\u0430\u043B\u0435\u043D"),Be(Pe.map(s=>s.id===M.id?{...s,photo:null}:s))}catch{d("error","\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u0430\u0432\u0430\u0442\u0430\u0440")}finally{g(!1),wr(!1)}},color:"error",variant:"contained",disabled:m,startIcon:m?e.jsx(k,{size:20}):e.jsx(S,{}),sx:{borderRadius:8,px:4,py:.75,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.4)",background:"linear-gradient(45deg, #f44336 30%, #ff7961 90%)","&:hover":{boxShadow:"0 6px 16px rgba(0, 0, 0, 0.5)"}},children:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C"})]})]}),e.jsxs(B,{open:ya,onClose:()=>Sr(!1),fullWidth:!0,maxWidth:"sm",children:[e.jsxs(a,{sx:{position:"relative",overflow:"hidden",p:2,borderBottom:"1px solid rgba(255, 255, 255, 0.1)",background:"linear-gradient(90deg, rgba(25,118,210,0.2) 0%, rgba(0,0,0,0) 100%)"},children:[e.jsx(a,{sx:{position:"absolute",top:-50,right:-50,width:150,height:150,borderRadius:"50%",background:"radial-gradient(circle, rgba(25,118,210,0.2) 0%, rgba(25,118,210,0) 70%)",zIndex:0}}),e.jsxs(a,{sx:{position:"relative",zIndex:1,display:"flex",alignItems:"center"},children:[e.jsx(Ge,{color:"primary",sx:{mr:1.5,fontSize:24}}),e.jsx(i,{variant:"h6",fontWeight:"bold",color:"primary.light",children:"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F"})]})]}),e.jsx(O,{sx:{p:3,pt:2.5,bgcolor:"transparent"},children:e.jsx(a,{sx:{position:"relative",p:2.5,borderRadius:2,backgroundColor:"rgba(25,118,210,0.05)",border:"1px solid rgba(25,118,210,0.2)",mb:2},children:M&&e.jsxs(x,{container:!0,spacing:2,children:[e.jsxs(x,{item:!0,xs:12,display:"flex",alignItems:"center",gap:2,mb:2,children:[e.jsx(P,{src:M.photo?`/static/uploads/avatar/${M.id}/${M.photo}`:void 0,alt:M.name,sx:{width:60,height:60,border:"2px solid rgba(25,118,210,0.3)"}}),e.jsxs(a,{children:[e.jsx(i,{variant:"subtitle1",color:"rgba(255,255,255,0.87)",fontWeight:"bold",children:M.name}),e.jsxs(i,{variant:"body2",color:"rgba(255,255,255,0.6)",children:["ID: ",M.id]})]})]}),e.jsx(x,{item:!0,xs:12,children:e.jsx(C,{autoFocus:!0,label:"\u0418\u043C\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F",type:"text",fullWidth:!0,value:ws,onChange:r=>xt(r.target.value),variant:"outlined",size:"small",InputProps:{sx:{borderRadius:2,backgroundColor:"rgba(255,255,255,0.05)",color:"rgba(255,255,255,0.87)","&:hover":{backgroundColor:"rgba(255,255,255,0.1)"},"&.Mui-focused":{backgroundColor:"rgba(25,118,210,0.15)",boxShadow:"0 0 0 2px rgba(25,118,210,0.3)"}}},InputLabelProps:{sx:{color:"rgba(255,255,255,0.7)"}},sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,255,255,0.2)"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,255,255,0.3)"},"& .Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"primary.main"}}})}),e.jsx(x,{item:!0,xs:12,children:e.jsx(C,{label:"\u042E\u0437\u0435\u0440\u043D\u0435\u0439\u043C",type:"text",fullWidth:!0,value:Ss,onChange:r=>ht(r.target.value),variant:"outlined",size:"small",helperText:"\u0414\u043E\u043F\u0443\u0441\u043A\u0430\u044E\u0442\u0441\u044F \u0442\u043E\u043B\u044C\u043A\u043E \u043B\u0430\u0442\u0438\u043D\u0441\u043A\u0438\u0435 \u0431\u0443\u043A\u0432\u044B, \u0446\u0438\u0444\u0440\u044B \u0438 \u0441\u0438\u043C\u0432\u043E\u043B\u044B: . _ -",FormHelperTextProps:{sx:{color:"rgba(255,255,255,0.5)"}},InputProps:{sx:{borderRadius:2,backgroundColor:"rgba(255,255,255,0.05)",color:"rgba(255,255,255,0.87)","&:hover":{backgroundColor:"rgba(255,255,255,0.1)"},"&.Mui-focused":{backgroundColor:"rgba(25,118,210,0.15)",boxShadow:"0 0 0 2px rgba(25,118,210,0.3)"}}},InputLabelProps:{sx:{color:"rgba(255,255,255,0.7)"}},sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,255,255,0.2)"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,255,255,0.3)"},"& .Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"primary.main"}}})})]})})}),e.jsxs(D,{sx:{p:2,px:3,justifyContent:"space-between",backgroundColor:"rgba(0,0,0,0.4)"},children:[e.jsx(p,{onClick:()=>Sr(!1),variant:"outlined",color:"inherit",sx:{borderRadius:8,px:3,borderColor:"rgba(255,255,255,0.2)",color:"rgba(255,255,255,0.7)","&:hover":{borderColor:"rgba(255,255,255,0.4)",background:"rgba(255,255,255,0.05)"}},children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),e.jsx(p,{onClick:async()=>{if(M)try{g(!0);const r={};h.change_user_name&&ws&&(r.name=ws),h.change_username&&Ss&&(r.username=Ss);const s=await j.put(`/api/moderator/users/${M.id}`,r);if(!s.data.success)throw new Error(s.data.error||"Failed to update user info");d("success","\u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u043E \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0430"),Be(Pe.map(t=>t.id===M.id?{...t,name:r.name||t.name,username:r.username||t.username}:t))}catch{d("error","\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044E \u043E \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435")}finally{g(!1),Sr(!1)}},color:"primary",variant:"contained",disabled:m,startIcon:m?e.jsx(k,{size:20}):e.jsx(js,{}),sx:{borderRadius:8,px:4,py:.75,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.4)",background:"linear-gradient(45deg, #1976d2 30%, #42a5f5 90%)","&:hover":{boxShadow:"0 6px 16px rgba(0, 0, 0, 0.5)"}},children:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"})]})]}),e.jsxs(B,{open:ka,onClose:()=>Ir(!1),fullWidth:!0,maxWidth:"sm",children:[e.jsxs(a,{sx:{position:"relative",overflow:"hidden",p:2,borderBottom:"1px solid rgba(255, 255, 255, 0.1)",background:"linear-gradient(90deg, rgba(156,39,176,0.2) 0%, rgba(0,0,0,0) 100%)"},children:[e.jsx(a,{sx:{position:"absolute",top:-50,right:-50,width:150,height:150,borderRadius:"50%",background:"radial-gradient(circle, rgba(156,39,176,0.2) 0%, rgba(156,39,176,0) 70%)",zIndex:0}}),e.jsxs(a,{sx:{position:"relative",zIndex:1,display:"flex",alignItems:"center"},children:[e.jsx(Ne,{sx:{mr:1.5,fontSize:24,color:"#9c27b0"}}),e.jsx(i,{variant:"h6",fontWeight:"bold",sx:{color:"#ba68c8"},children:"\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u0431\u0430\u0433-\u0440\u0435\u043F\u043E\u0440\u0442\u0430"})]})]}),e.jsx(O,{sx:{p:3,pt:2.5,bgcolor:"transparent"},children:e.jsx(a,{sx:{position:"relative",p:2.5,borderRadius:2,backgroundColor:"rgba(156,39,176,0.05)",border:"1px solid rgba(156,39,176,0.2)",mb:2},children:_e&&e.jsx(x,{container:!0,spacing:2,children:e.jsxs(x,{item:!0,xs:12,children:[e.jsx(i,{variant:"subtitle1",color:"rgba(255,255,255,0.87)",gutterBottom:!0,fontWeight:"bold",children:_e.subject}),e.jsxs(i,{variant:"body2",color:"rgba(255,255,255,0.6)",sx:{mb:2},children:["ID: ",_e.id," | \u0414\u0430\u0442\u0430: ",new Date(_e.date).toLocaleString()]}),e.jsx(Us,{sx:{my:2,bgcolor:"rgba(156,39,176,0.2)"}}),e.jsxs(hs,{fullWidth:!0,sx:{mt:1},children:[e.jsx(us,{id:"bug-status-label",sx:{color:"rgba(255,255,255,0.7)"},children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),e.jsxs(ps,{labelId:"bug-status-label",value:Or,onChange:r=>ut(r.target.value),sx:{borderRadius:2,backgroundColor:"rgba(255,255,255,0.05)",color:"rgba(255,255,255,0.87)",".MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,255,255,0.2)"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,255,255,0.3)"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#9c27b0"}},children:[e.jsx(Y,{value:"\u041E\u0442\u043A\u0440\u044B\u0442",children:"\u041E\u0442\u043A\u0440\u044B\u0442"}),e.jsx(Y,{value:"\u0412 \u0440\u0430\u0431\u043E\u0442\u0435",children:"\u0412 \u0440\u0430\u0431\u043E\u0442\u0435"}),e.jsx(Y,{value:"\u0418\u0441\u043F\u0440\u0430\u0432\u043B\u0435\u043D",children:"\u0418\u0441\u043F\u0440\u0430\u0432\u043B\u0435\u043D"}),e.jsx(Y,{value:"\u0417\u0430\u043A\u0440\u044B\u0442",children:"\u0417\u0430\u043A\u0440\u044B\u0442"}),e.jsx(Y,{value:"\u041E\u0442\u043A\u043B\u043E\u043D\u0451\u043D",children:"\u041E\u0442\u043A\u043B\u043E\u043D\u0451\u043D"})]})]})]})})})}),e.jsxs(D,{sx:{p:2,px:3,justifyContent:"space-between",backgroundColor:"rgba(0,0,0,0.4)"},children:[e.jsx(p,{onClick:()=>Ir(!1),variant:"outlined",color:"inherit",sx:{borderRadius:8,px:3,borderColor:"rgba(255,255,255,0.2)",color:"rgba(255,255,255,0.7)","&:hover":{borderColor:"rgba(255,255,255,0.4)",background:"rgba(255,255,255,0.05)"}},children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),e.jsx(p,{onClick:async()=>{if(_e&&Or)try{g(!0);const r=await j.put(`/api/moderator/bug-reports/${_e.id}`,{status:Or});if(!r.data.success)throw new Error(r.data.error||"Failed to update bug report status");d("success","\u0421\u0442\u0430\u0442\u0443\u0441 \u0431\u0430\u0433-\u0440\u0435\u043F\u043E\u0440\u0442\u0430 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D"),le(De.map(s=>s.id===_e.id?{...s,status:Or}:s))}catch{d("error","\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u0441\u0442\u0430\u0442\u0443\u0441 \u0431\u0430\u0433-\u0440\u0435\u043F\u043E\u0440\u0442\u0430")}finally{g(!1),Ir(!1)}},variant:"contained",disabled:m,startIcon:m?e.jsx(k,{size:20}):e.jsx(js,{}),sx:{borderRadius:8,px:4,py:.75,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.4)",background:"linear-gradient(45deg, #9c27b0 30%, #ba68c8 90%)","&:hover":{boxShadow:"0 6px 16px rgba(0, 0, 0, 0.5)"}},children:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"})]})]}),e.jsxs(B,{open:Ca,onClose:()=>zr(!1),fullWidth:!0,maxWidth:"sm",children:[e.jsxs(a,{sx:{position:"relative",overflow:"hidden",p:2,borderBottom:"1px solid rgba(255, 255, 255, 0.1)",background:"linear-gradient(90deg, rgba(63,81,181,0.2) 0%, rgba(0,0,0,0) 100%)"},children:[e.jsx(a,{sx:{position:"absolute",top:-50,right:-50,width:150,height:150,borderRadius:"50%",background:"radial-gradient(circle, rgba(63,81,181,0.2) 0%, rgba(63,81,181,0) 70%)",zIndex:0}}),e.jsxs(a,{sx:{position:"relative",zIndex:1},children:[e.jsx(i,{variant:"h5",fontWeight:"bold",color:"primary.light",children:"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u0431\u0435\u0439\u0434\u0436\u0438\u043A\u0430"}),e.jsx(i,{variant:"caption",color:"rgba(255,255,255,0.6)",children:"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u0435 \u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B \u0431\u0435\u0439\u0434\u0436\u0438\u043A\u0430 \u0438 \u0441\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u0435 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F"})]})]}),e.jsx(O,{sx:{p:3,pt:3,bgcolor:"transparent"},children:e.jsxs(x,{container:!0,spacing:2.5,children:[e.jsx(x,{item:!0,xs:12,children:e.jsx(C,{autoFocus:!0,label:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0431\u0435\u0439\u0434\u0436\u0438\u043A\u0430",type:"text",fullWidth:!0,value:Ze,onChange:r=>pt(r.target.value),variant:"outlined",size:"small",InputProps:{sx:{borderRadius:2,backgroundColor:"rgba(255,255,255,0.05)",color:"rgba(255,255,255,0.87)","&:hover":{backgroundColor:"rgba(255,255,255,0.1)"},"&.Mui-focused":{backgroundColor:"rgba(63,81,181,0.15)",boxShadow:"0 0 0 2px rgba(63, 81, 181, 0.3)"}}},InputLabelProps:{sx:{color:"rgba(255,255,255,0.7)"}},sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,255,255,0.2)"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,255,255,0.3)"},"& .Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"primary.main"}}})}),e.jsx(x,{item:!0,xs:12,children:e.jsx(C,{label:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435",type:"text",fullWidth:!0,multiline:!0,rows:2,value:Dr,onChange:r=>bt(r.target.value),variant:"outlined",size:"small",helperText:"\u041A\u0440\u0430\u0442\u043A\u043E \u043E\u043F\u0438\u0448\u0438\u0442\u0435 \u0431\u0435\u0439\u0434\u0436\u0438\u043A",FormHelperTextProps:{sx:{color:"rgba(255,255,255,0.5)"}},InputProps:{sx:{borderRadius:2,backgroundColor:"rgba(255,255,255,0.05)",color:"rgba(255,255,255,0.87)","&:hover":{backgroundColor:"rgba(255,255,255,0.1)"},"&.Mui-focused":{backgroundColor:"rgba(63,81,181,0.15)",boxShadow:"0 0 0 2px rgba(63, 81, 181, 0.3)"}}},InputLabelProps:{sx:{color:"rgba(255,255,255,0.7)"}},sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,255,255,0.2)"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,255,255,0.3)"},"& .Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"primary.main"}}})}),e.jsx(x,{item:!0,xs:12,md:6,children:e.jsx(C,{label:"\u0426\u0435\u043D\u0430 (\u0431\u0430\u043B\u043B\u044B)",type:"number",fullWidth:!0,value:gt,onChange:r=>mt(r.target.value),variant:"outlined",size:"small",InputProps:{startAdornment:e.jsx(E,{position:"start",children:e.jsx(da,{color:"primary"})}),sx:{borderRadius:2,backgroundColor:"rgba(255,255,255,0.05)",color:"rgba(255,255,255,0.87)","&:hover":{backgroundColor:"rgba(255,255,255,0.1)"},"&.Mui-focused":{backgroundColor:"rgba(63,81,181,0.15)",boxShadow:"0 0 0 2px rgba(63, 81, 181, 0.3)"}}},InputLabelProps:{sx:{color:"rgba(255,255,255,0.7)"}},sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,255,255,0.2)"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,255,255,0.3)"},"& .Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"primary.main"}}})}),e.jsx(x,{item:!0,xs:12,md:6,children:e.jsxs(A,{elevation:0,sx:{p:1.5,display:"flex",alignItems:"center",justifyContent:"space-between",borderRadius:2,border:"1px solid rgba(255, 255, 255, 0.15)",backgroundColor:"rgba(255, 255, 255, 0.05)",height:"100%"},children:[e.jsx(i,{variant:"subtitle1",color:"rgba(255, 255, 255, 0.87)",children:"\u0410\u043A\u0442\u0438\u0432\u0435\u043D"}),e.jsx(Yt,{checked:Pr,onChange:r=>jt(r.target.checked),color:"primary",sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"#4caf50","&:hover":{backgroundColor:"rgba(76, 175, 80, 0.08)"}},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#4caf50"}}})]})}),e.jsx(x,{item:!0,xs:12,children:e.jsx(a,{sx:{display:"flex",flexDirection:"column",alignItems:"center",p:3,borderRadius:2,border:"1px dashed rgba(255, 255, 255, 0.2)",backgroundColor:"rgba(255, 255, 255, 0.05)",position:"relative",overflow:"hidden"},children:e.jsxs(a,{sx:{position:"relative",zIndex:1,width:"100%",textAlign:"center"},children:[vt?e.jsx(e.Fragment,{children:e.jsxs(a,{sx:{mb:2,position:"relative",display:"inline-block"},children:[e.jsx("img",{src:vt,alt:"\u041F\u0440\u0435\u0434\u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440",style:{maxWidth:"100%",maxHeight:150,borderRadius:8,boxShadow:"0 4px 12px rgba(0,0,0,0.3)"}}),e.jsx(Qt,{in:!0,timeout:500,children:e.jsx(a,{sx:{position:"absolute",top:-8,right:-8,background:"rgba(0,0,0,0.5)",borderRadius:"50%",boxShadow:"0 2px 8px rgba(0,0,0,0.3)"},children:e.jsx(y,{size:"small",color:"error",onClick:()=>{Is(null),zs("")},children:e.jsx(S,{fontSize:"small"})})})})]})}):e.jsx(i,{variant:"body2",color:"rgba(255,255,255,0.6)",align:"center",sx:{mb:2},children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u043D\u043E\u0432\u043E\u0435 SVG \u0438\u043B\u0438 GIF \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 \u0431\u0435\u0439\u0434\u0436\u0438\u043A\u0430"}),e.jsxs(p,{component:"label",variant:"outlined",startIcon:e.jsx(xa,{}),sx:{borderRadius:8,py:.5,px:2,background:"rgba(63,81,181,0.1)",borderColor:"rgba(63, 81, 181, 0.5)",color:"rgba(255,255,255,0.87)","&:hover":{background:"rgba(63,81,181,0.2)",borderColor:"primary.main"}},children:["\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C SVG/GIF",e.jsx("input",{type:"file",accept:".svg,.gif",hidden:!0,onChange:r=>{const s=r.target.files[0];if(s){if(s.type!=="image/svg+xml"&&s.type!=="image/gif")return void d("error","\u0420\u0430\u0437\u0440\u0435\u0448\u0435\u043D\u044B \u0442\u043E\u043B\u044C\u043A\u043E SVG \u0438 GIF \u0444\u0430\u0439\u043B\u044B");Is(s);const t=new FileReader;t.onload=n=>{zs(n.target.result)},t.readAsDataURL(s)}}})]})]})})})]})}),e.jsxs(D,{sx:{p:2,px:3,justifyContent:"space-between",backgroundColor:"rgba(0,0,0,0.4)"},children:[e.jsx(p,{onClick:()=>zr(!1),variant:"outlined",color:"inherit",sx:{borderRadius:8,px:3,borderColor:"rgba(255,255,255,0.2)",color:"rgba(255,255,255,0.7)","&:hover":{borderColor:"rgba(255,255,255,0.4)",background:"rgba(255,255,255,0.05)"}},children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),e.jsx(p,{onClick:async()=>{try{if(!pe)return;if(!Ze)return void d("error","\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0431\u0435\u0439\u0434\u0436\u0438\u043A\u0430 \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C");const r=parseInt(gt);if(isNaN(r)||r<=0)return void d("error","\u0426\u0435\u043D\u0430 \u0434\u043E\u043B\u0436\u043D\u0430 \u0431\u044B\u0442\u044C \u043F\u043E\u043B\u043E\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u043C \u0447\u0438\u0441\u043B\u043E\u043C");let s;if(g(!0),ft){const t=new FormData;t.append("name",Ze),t.append("description",Dr||""),t.append("price",r),t.append("is_active",Pr),t.append("image",ft),s=await j.put(`/api/moderator/badges/${pe.id}`,t,{headers:{"Content-Type":"multipart/form-data"}})}else{const t={name:Ze,description:Dr||"",price:r,is_active:Pr};s=await j.put(`/api/moderator/badges/${pe.id}`,t)}s.data.success?(d("success","\u0411\u0435\u0439\u0434\u0436\u0438\u043A \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D"),ye(t=>t.map(n=>n.id===pe.id?{...n,name:Ze,description:Dr||"",price:r,is_active:Pr,image_path:s.data.badge.image_path||n.image_path}:n)),zr(!1)):d("error",s.data.error||"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u0431\u0435\u0439\u0434\u0436\u0438\u043A")}catch(r){d("error",r.response?.data?.error||"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u0431\u0435\u0439\u0434\u0436\u0438\u043A")}finally{g(!1)}},color:"primary",variant:"contained",disabled:m,startIcon:m?e.jsx(k,{size:20}):e.jsx(js,{}),sx:{borderRadius:8,px:4,py:.75,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.4)",background:"linear-gradient(45deg, #3f51b5 30%, #5c6bc0 90%)","&:hover":{boxShadow:"0 6px 16px rgba(0, 0, 0, 0.5)"}},children:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"})]})]}),e.jsxs(B,{open:_a,onClose:()=>Rr(!1),fullWidth:!0,maxWidth:"sm",children:[e.jsxs(a,{sx:{position:"relative",overflow:"hidden",p:2,borderBottom:"1px solid rgba(255, 255, 255, 0.1)",backgroundColor:"rgba(244, 67, 54, 0.15)"},children:[e.jsx(a,{sx:{position:"absolute",top:-30,right:-30,width:120,height:120,borderRadius:"50%",background:"radial-gradient(circle, rgba(244,67,54,0.2) 0%, rgba(244,67,54,0) 70%)",zIndex:0}}),e.jsxs(a,{sx:{position:"relative",zIndex:1,display:"flex",alignItems:"center"},children:[e.jsx(S,{color:"error",sx:{mr:1.5,fontSize:24}}),e.jsx(i,{variant:"h6",fontWeight:"bold",color:"error.light",children:"\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u0431\u0435\u0439\u0434\u0436\u0438\u043A\u0430"})]})]}),e.jsx(O,{sx:{p:3,pt:2.5,bgcolor:"transparent"},children:e.jsxs(a,{sx:{position:"relative",p:2.5,borderRadius:2,backgroundColor:"rgba(244, 67, 54, 0.05)",border:"1px solid rgba(244, 67, 54, 0.2)",mb:1},children:[e.jsxs(i,{variant:"subtitle1",color:"rgba(255,255,255,0.87)",gutterBottom:!0,children:["\u0412\u044B \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u0431\u0435\u0439\u0434\u0436\u0438\u043A ",e.jsxs(a,{component:"span",fontWeight:"bold",color:"error.light",children:['"',pe?.name,'"']}),"?"]}),e.jsxs(i,{variant:"body2",color:"rgba(255,255,255,0.7)",children:["\u042D\u0442\u043E \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 ",e.jsx(a,{component:"span",fontWeight:"bold",color:"error.light",children:"\u043D\u0435\u043B\u044C\u0437\u044F \u043E\u0442\u043C\u0435\u043D\u0438\u0442\u044C"}),". \u041F\u0440\u0438 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u0438 \u0431\u0435\u0439\u0434\u0436\u0438\u043A\u0430 \u0431\u0443\u0434\u0443\u0442 \u0442\u0430\u043A\u0436\u0435 \u0443\u0434\u0430\u043B\u0435\u043D\u044B:"]}),e.jsxs(a,{component:"ul",sx:{mt:1,pl:2,mb:0},children:[e.jsx(i,{component:"li",variant:"body2",color:"rgba(255,255,255,0.6)",children:"\u0412\u0441\u0435 \u0434\u043E\u0441\u0442\u0438\u0436\u0435\u043D\u0438\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439, \u0441\u0432\u044F\u0437\u0430\u043D\u043D\u044B\u0435 \u0441 \u044D\u0442\u0438\u043C \u0431\u0435\u0439\u0434\u0436\u0438\u043A\u043E\u043C"}),e.jsx(i,{component:"li",variant:"body2",color:"rgba(255,255,255,0.6)",children:"\u0412\u0441\u0435 \u0437\u0430\u043F\u0438\u0441\u0438 \u043E \u043F\u043E\u043A\u0443\u043F\u043A\u0430\u0445 \u044D\u0442\u043E\u0433\u043E \u0431\u0435\u0439\u0434\u0436\u0438\u043A\u0430"}),e.jsx(i,{component:"li",variant:"body2",color:"rgba(255,255,255,0.6)",children:"SVG-\u0444\u0430\u0439\u043B \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F \u0431\u0435\u0439\u0434\u0436\u0438\u043A\u0430"})]})]})}),e.jsxs(D,{sx:{p:2,px:3,justifyContent:"space-between",backgroundColor:"rgba(0,0,0,0.4)"},children:[e.jsx(p,{onClick:()=>Rr(!1),variant:"outlined",color:"inherit",sx:{borderRadius:8,px:3,borderColor:"rgba(255,255,255,0.2)",color:"rgba(255,255,255,0.7)","&:hover":{borderColor:"rgba(255,255,255,0.4)",background:"rgba(255,255,255,0.05)"}},children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),e.jsx(p,{onClick:async()=>{try{if(!pe)return;g(!0);const r=await j.delete(`/api/moderator/badges/${pe.id}`);r.data.success?(d("success","\u0411\u0435\u0439\u0434\u0436\u0438\u043A \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0443\u0434\u0430\u043B\u0435\u043D"),ye(s=>s.filter(t=>t.id!==pe.id)),Rr(!1)):d("error",r.data.error||"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u0431\u0435\u0439\u0434\u0436\u0438\u043A")}catch(r){d("error",r.response?.data?.error||"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u0431\u0435\u0439\u0434\u0436\u0438\u043A")}finally{g(!1)}},color:"error",variant:"contained",disabled:m,startIcon:m?e.jsx(k,{size:20}):e.jsx(S,{}),sx:{borderRadius:8,px:4,py:.75,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.4)",background:"linear-gradient(45deg, #f44336 30%, #ff7961 90%)","&:hover":{boxShadow:"0 6px 16px rgba(0, 0, 0, 0.5)"}},children:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C"})]})]}),e.jsxs(B,{open:wa,onClose:()=>Wr(!1),fullWidth:!0,maxWidth:"sm",children:[e.jsxs(a,{sx:{position:"relative",overflow:"hidden",p:2,borderBottom:"1px solid rgba(255, 255, 255, 0.1)",backgroundColor:"rgba(244, 67, 54, 0.15)"},children:[e.jsx(a,{sx:{position:"absolute",top:-30,right:-30,width:120,height:120,borderRadius:"50%",background:"radial-gradient(circle, rgba(244,67,54,0.2) 0%, rgba(244,67,54,0) 70%)",zIndex:0}}),e.jsxs(a,{sx:{position:"relative",zIndex:1,display:"flex",alignItems:"center"},children:[e.jsx(S,{color:"error",sx:{mr:1.5,fontSize:24}}),e.jsx(i,{variant:"h6",fontWeight:"bold",color:"error.light",children:"\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u0430\u0440\u0442\u0438\u0441\u0442\u0430"})]})]}),e.jsx(O,{sx:{p:3,pt:2.5,bgcolor:"transparent"},children:e.jsxs(a,{sx:{position:"relative",p:2.5,borderRadius:2,backgroundColor:"rgba(244, 67, 54, 0.05)",border:"1px solid rgba(244, 67, 54, 0.2)",mb:1},children:[e.jsxs(i,{variant:"subtitle1",color:"rgba(255,255,255,0.87)",gutterBottom:!0,children:["\u0412\u044B \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u0430\u0440\u0442\u0438\u0441\u0442\u0430 ",e.jsxs(a,{component:"span",fontWeight:"bold",color:"error.light",children:['"',_?.name,'"']}),"?"]}),e.jsx(i,{variant:"body2",color:"rgba(255,255,255,0.7)",sx:{mb:2},children:"\u042D\u0442\u043E \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u0443\u0434\u0430\u043B\u0438\u0442 \u0432\u0441\u044E \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044E \u043E\u0431 \u0430\u0440\u0442\u0438\u0441\u0442\u0435 \u0438\u0437 \u0441\u0438\u0441\u0442\u0435\u043C\u044B. \u0422\u0440\u0435\u043A\u0438, \u0441\u0432\u044F\u0437\u0430\u043D\u043D\u044B\u0435 \u0441 \u044D\u0442\u0438\u043C \u0430\u0440\u0442\u0438\u0441\u0442\u043E\u043C, \u0441\u0442\u0430\u043D\u0443\u0442 \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u043D\u044B \u0434\u043B\u044F \u043F\u0440\u043E\u0441\u043B\u0443\u0448\u0438\u0432\u0430\u043D\u0438\u044F."}),_&&e.jsxs(a,{sx:{display:"flex",alignItems:"center",mt:2},children:[e.jsx(P,{src:_.avatar?`/static/uploads/artists/${_.id}/${_.avatar}`:void 0,sx:{width:60,height:60,mr:2}}),e.jsxs(a,{children:[e.jsx(i,{variant:"subtitle1",color:"rgba(255,255,255,0.9)",children:_.name}),e.jsxs(i,{variant:"body2",color:"rgba(255,255,255,0.6)",children:[_.tracks_count||0," \u0442\u0440\u0435\u043A\u043E\u0432 \u2022 ",_.is_verified?"\u0412\u0435\u0440\u0438\u0444\u0438\u0446\u0438\u0440\u043E\u0432\u0430\u043D":"\u041D\u0435 \u0432\u0435\u0440\u0438\u0444\u0438\u0446\u0438\u0440\u043E\u0432\u0430\u043D"]})]})]})]})}),e.jsxs(D,{sx:{p:2,px:3,justifyContent:"space-between",backgroundColor:"rgba(0,0,0,0.4)"},children:[e.jsx(p,{onClick:()=>Wr(!1),variant:"outlined",color:"inherit",sx:{borderRadius:8,px:3,borderColor:"rgba(255,255,255,0.2)",color:"rgba(255,255,255,0.7)","&:hover":{borderColor:"rgba(255,255,255,0.4)",background:"rgba(255,255,255,0.05)"}},children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),e.jsx(p,{onClick:async()=>{if(_)try{g(!0);const r=await j.delete(`/api/moderator/artists/${_.id}`);if(!r.data.success)throw new Error(r.data.error||"Failed to delete artist");d("success","\u0410\u0440\u0442\u0438\u0441\u0442 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0443\u0434\u0430\u043B\u0435\u043D"),Q(yr.filter(s=>s.id!==_.id))}catch{d("error","\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u0430\u0440\u0442\u0438\u0441\u0442\u0430")}finally{g(!1),Wr(!1)}},color:"error",variant:"contained",disabled:m,startIcon:m?e.jsx(k,{size:20}):e.jsx(S,{}),sx:{borderRadius:8,px:4,py:.75,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.4)",background:"linear-gradient(45deg, #f44336 30%, #ff7961 90%)","&:hover":{boxShadow:"0 6px 16px rgba(0, 0, 0, 0.5)"}},children:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C"})]})]}),e.jsxs(B,{open:Sa,onClose:()=>Ye(!1),fullWidth:!0,maxWidth:"sm",children:[e.jsxs(a,{sx:{position:"relative",overflow:"hidden",p:2,borderBottom:"1px solid rgba(255, 255, 255, 0.1)",background:"linear-gradient(90deg, rgba(63,81,181,0.2) 0%, rgba(0,0,0,0) 100%)"},children:[e.jsx(a,{sx:{position:"absolute",top:-50,right:-50,width:150,height:150,borderRadius:"50%",background:"radial-gradient(circle, rgba(63,81,181,0.2) 0%, rgba(63,81,181,0) 70%)",zIndex:0}}),e.jsxs(a,{sx:{position:"relative",zIndex:1},children:[e.jsx(i,{variant:"h5",fontWeight:"bold",color:"primary.light",children:"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u0430\u0440\u0442\u0438\u0441\u0442\u0430"}),e.jsx(i,{variant:"caption",color:"rgba(255,255,255,0.6)",children:"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u0435 \u0434\u0430\u043D\u043D\u044B\u0435 \u0430\u0440\u0442\u0438\u0441\u0442\u0430 \u0438 \u0441\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u0435 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F"})]})]}),e.jsx(O,{sx:{p:3,pt:3,bgcolor:"transparent"},children:e.jsxs(x,{container:!0,spacing:2.5,children:[e.jsx(x,{item:!0,xs:12,children:e.jsx(C,{autoFocus:!0,label:"\u0418\u043C\u044F \u0430\u0440\u0442\u0438\u0441\u0442\u0430",type:"text",fullWidth:!0,value:Ae,onChange:r=>Rs(r.target.value),variant:"outlined",size:"small",InputProps:{sx:{borderRadius:2,backgroundColor:"rgba(255,255,255,0.05)",color:"rgba(255,255,255,0.87)","&:hover":{backgroundColor:"rgba(255,255,255,0.1)"},"&.Mui-focused":{backgroundColor:"rgba(63,81,181,0.15)",boxShadow:"0 0 0 2px rgba(63, 81, 181, 0.3)"}}},InputLabelProps:{sx:{color:"rgba(255,255,255,0.7)"}},sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,255,255,0.2)"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,255,255,0.3)"},"& .Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"primary.main"}}})}),e.jsx(x,{item:!0,xs:12,children:e.jsx(C,{label:"\u0411\u0438\u043E\u0433\u0440\u0430\u0444\u0438\u044F",type:"text",fullWidth:!0,multiline:!0,rows:4,value:Ee,onChange:r=>Ws(r.target.value),variant:"outlined",size:"small",helperText:"\u041A\u0440\u0430\u0442\u043A\u0430\u044F \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u043E\u0431 \u0430\u0440\u0442\u0438\u0441\u0442\u0435",FormHelperTextProps:{sx:{color:"rgba(255,255,255,0.5)"}},InputProps:{sx:{borderRadius:2,backgroundColor:"rgba(255,255,255,0.05)",color:"rgba(255,255,255,0.87)","&:hover":{backgroundColor:"rgba(255,255,255,0.1)"},"&.Mui-focused":{backgroundColor:"rgba(63,81,181,0.15)",boxShadow:"0 0 0 2px rgba(63, 81, 181, 0.3)"}}},InputLabelProps:{sx:{color:"rgba(255,255,255,0.7)"}},sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,255,255,0.2)"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,255,255,0.3)"},"& .Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"primary.main"}}})}),e.jsx(x,{item:!0,xs:12,children:e.jsxs(A,{elevation:0,sx:{p:1.5,display:"flex",alignItems:"center",justifyContent:"space-between",borderRadius:2,border:"1px solid rgba(255, 255, 255, 0.15)",backgroundColor:"rgba(255, 255, 255, 0.05)"},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(et,{color:Se?"primary":"disabled",sx:{mr:1.5}}),e.jsx(i,{variant:"subtitle1",color:"rgba(255, 255, 255, 0.87)",children:"\u0412\u0435\u0440\u0438\u0444\u0438\u0446\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u044B\u0439 \u0430\u0440\u0442\u0438\u0441\u0442"})]}),e.jsx(Yt,{checked:Se,onChange:r=>$s(r.target.checked),color:"primary",sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"#3f51b5","&:hover":{backgroundColor:"rgba(63, 81, 181, 0.08)"}},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#3f51b5"}}})]})}),e.jsx(x,{item:!0,xs:12,children:e.jsx(a,{sx:{display:"flex",flexDirection:"column",alignItems:"center",p:3,borderRadius:2,border:"1px dashed rgba(255, 255, 255, 0.2)",backgroundColor:"rgba(255, 255, 255, 0.05)",position:"relative",overflow:"hidden"},children:e.jsxs(a,{sx:{position:"relative",zIndex:1,width:"100%",textAlign:"center"},children:[yt?e.jsx(e.Fragment,{children:e.jsxs(a,{sx:{mb:2,position:"relative",display:"inline-block"},children:[e.jsx(P,{src:yt,alt:"\u041F\u0440\u0435\u0434\u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440",sx:{width:150,height:150,borderRadius:"50%",boxShadow:"0 4px 12px rgba(0,0,0,0.3)"}}),e.jsx(Qt,{in:!0,timeout:500,children:e.jsx(a,{sx:{position:"absolute",top:-8,right:-8,background:"rgba(0,0,0,0.5)",borderRadius:"50%",boxShadow:"0 2px 8px rgba(0,0,0,0.3)"},children:e.jsx(y,{size:"small",color:"error",onClick:()=>{Fr(null),Ar("")},children:e.jsx(S,{fontSize:"small"})})})})]})}):e.jsx(i,{variant:"body2",color:"rgba(255,255,255,0.6)",align:"center",sx:{mb:2},children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u043D\u043E\u0432\u043E\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 \u0430\u0440\u0442\u0438\u0441\u0442\u0430"}),e.jsxs(p,{component:"label",variant:"outlined",startIcon:e.jsx(xa,{}),sx:{borderRadius:8,py:.5,px:2,background:"rgba(63,81,181,0.1)",borderColor:"rgba(63, 81, 181, 0.5)",color:"rgba(255,255,255,0.87)","&:hover":{background:"rgba(63,81,181,0.2)",borderColor:"primary.main"}},children:["\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435",e.jsx("input",{type:"file",accept:"image/*",hidden:!0,onChange:r=>{const s=r.target.files[0];if(s){if(!s.type.startsWith("image/"))return void d("error","\u0420\u0430\u0437\u0440\u0435\u0448\u0435\u043D\u044B \u0442\u043E\u043B\u044C\u043A\u043E \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F");Fr(s);const t=new FileReader;t.onload=n=>{Ar(n.target.result)},t.readAsDataURL(s)}}})]})]})})})]})}),e.jsxs(D,{sx:{p:2,px:3,justifyContent:"space-between",backgroundColor:"rgba(0,0,0,0.4)"},children:[e.jsx(p,{onClick:()=>Ye(!1),variant:"outlined",color:"inherit",sx:{borderRadius:8,px:3,borderColor:"rgba(255,255,255,0.2)",color:"rgba(255,255,255,0.7)","&:hover":{borderColor:"rgba(255,255,255,0.4)",background:"rgba(255,255,255,0.05)"}},children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),e.jsx(p,{onClick:async()=>{try{let r;if(g(!0),_){if(Br){const s=new FormData;s.append("name",Ae),s.append("bio",Ee||""),s.append("verified",Se),s.append("avatar_file",Br),r=await j.put(`/api/moderator/artists/${_.id}`,s,{headers:{"Content-Type":"multipart/form-data"}})}else{const s={name:Ae,bio:Ee||"",verified:Se};r=await j.put(`/api/moderator/artists/${_.id}`,s)}r.data.success?(d("success","\u0414\u0430\u043D\u043D\u044B\u0435 \u0430\u0440\u0442\u0438\u0441\u0442\u0430 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u044B"),Q(s=>s.map(t=>t.id===_.id?{...t,name:Ae,bio:Ee||"",is_verified:Se,avatar:r.data.artist.avatar_url?r.data.artist.avatar_url.split("/").pop():t.avatar}:t)),Ye(!1)):d("error",r.data.error||"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u0434\u0430\u043D\u043D\u044B\u0435 \u0430\u0440\u0442\u0438\u0441\u0442\u0430")}else{const s=new FormData;s.append("name",Ae),s.append("bio",Ee||""),s.append("verified",Se),Br&&s.append("avatar_file",Br),r=await j.post("/api/moderator/artists",s,{headers:{"Content-Type":"multipart/form-data"}}),r.data.success?(d("success","\u0410\u0440\u0442\u0438\u0441\u0442 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0437\u0434\u0430\u043D"),Q(t=>[{id:r.data.artist_id,name:Ae,bio:Ee||"",is_verified:Se,avatar:r.data.artist.avatar_url?r.data.artist.avatar_url.split("/").pop():"",created_at:new Date().toISOString(),tracks_count:0},...t]),Ye(!1)):d("error",r.data.error||"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0441\u043E\u0437\u0434\u0430\u0442\u044C \u0430\u0440\u0442\u0438\u0441\u0442\u0430")}}catch(r){d("error",r.response?.data?.error||"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0432\u044B\u043F\u043E\u043B\u043D\u0438\u0442\u044C \u043E\u043F\u0435\u0440\u0430\u0446\u0438\u044E")}finally{g(!1)}},color:"primary",variant:"contained",disabled:m,startIcon:m?e.jsx(k,{size:20}):e.jsx(js,{}),sx:{borderRadius:8,px:4,py:.75,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.4)",background:"linear-gradient(45deg, #3f51b5 30%, #5c6bc0 90%)","&:hover":{boxShadow:"0 6px 16px rgba(0, 0, 0, 0.5)"}},children:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"})]})]}),e.jsxs(B,{open:za,onClose:()=>_s(!1),fullWidth:!0,maxWidth:"md",children:[e.jsxs(a,{sx:{position:"relative",overflow:"hidden",p:2,borderBottom:"1px solid rgba(255, 255, 255, 0.1)",background:"linear-gradient(90deg, rgba(63,81,181,0.2) 0%, rgba(0,0,0,0) 100%)"},children:[e.jsx(a,{sx:{position:"absolute",top:-50,right:-50,width:150,height:150,borderRadius:"50%",background:"radial-gradient(circle, rgba(63,81,181,0.2) 0%, rgba(63,81,181,0) 70%)",zIndex:0}}),e.jsxs(a,{sx:{position:"relative",zIndex:1,display:"flex",alignItems:"center"},children:[e.jsx(_i,{sx:{mr:1.5,fontSize:28,color:"primary.light"}}),e.jsxs(a,{children:[e.jsx(i,{variant:"h6",fontWeight:"bold",color:"primary.light",children:"\u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0442\u0440\u0435\u043A\u0430\u043C\u0438 \u0430\u0440\u0442\u0438\u0441\u0442\u0430"}),_&&e.jsxs(i,{variant:"body2",color:"rgba(255,255,255,0.7)",children:[_.name," (",$r.length," \u0442\u0440\u0435\u043A\u043E\u0432)"]})]})]})]}),e.jsxs(O,{sx:{p:0,display:"flex",flexDirection:"column",height:"60vh"},children:[e.jsxs(a,{sx:{p:2,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx(i,{variant:"subtitle1",gutterBottom:!0,children:"\u0422\u0440\u0435\u043A\u0438 \u0430\u0440\u0442\u0438\u0441\u0442\u0430"}),$r.length>0?e.jsx(or,{component:A,elevation:0,sx:{bgcolor:"rgba(0,0,0,0.2)",maxHeight:250,overflow:"auto"},children:e.jsxs(nr,{size:"small",stickyHeader:!0,children:[e.jsx(lr,{children:e.jsxs(J,{children:[e.jsx(u,{children:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435"}),e.jsx(u,{sx:{display:{xs:"none",sm:"table-cell"}},children:"\u0410\u043B\u044C\u0431\u043E\u043C"}),e.jsx(u,{sx:{display:{xs:"none",md:"table-cell"}},children:"\u0414\u043B\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C"}),e.jsx(u,{align:"right",children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044F"})]})}),e.jsx(dr,{children:$r.map(r=>e.jsxs(J,{children:[e.jsx(u,{children:e.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(P,{variant:"rounded",src:r.cover_path,sx:{width:32,height:32,mr:1},children:e.jsx(it,{})}),e.jsxs(a,{children:[e.jsx(i,{variant:"body2",sx:{fontWeight:"medium"},children:r.title}),e.jsx(i,{variant:"caption",color:"text.secondary",children:r.artist})]})]})}),e.jsx(u,{sx:{display:{xs:"none",sm:"table-cell"}},children:r.album||"\u2014"}),e.jsxs(u,{sx:{display:{xs:"none",md:"table-cell"}},children:[Math.floor(r.duration/60),":",(r.duration%60).toString().padStart(2,"0")]}),e.jsx(u,{align:"right",children:e.jsx(y,{color:"error",size:"small",onClick:()=>(async s=>{if(_){Z(!0);try{const t=await j.post(`/api/moderator/artists/${_.id}/remove-track`,{track_id:s});t.data.success?(d("success","\u0422\u0440\u0435\u043A \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0442\u0432\u044F\u0437\u0430\u043D \u043E\u0442 \u0430\u0440\u0442\u0438\u0441\u0442\u0430"),Qe(n=>n.filter(c=>c.id!==s)),we(n=>({...n,tracks_count:Math.max(0,parseInt(n.tracks_count||0)-1).toString()})),Q(n=>n.map(c=>c.id===_.id?{...c,tracks_count:Math.max(0,parseInt(c.tracks_count||0)-1).toString()}:c))):d("error",t.data.error||"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0442\u0432\u044F\u0437\u0430\u0442\u044C \u0442\u0440\u0435\u043A \u043E\u0442 \u0430\u0440\u0442\u0438\u0441\u0442\u0430")}catch(t){d("error",t.response?.data?.error||"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0442\u0432\u044F\u0437\u0430\u0442\u044C \u0442\u0440\u0435\u043A \u043E\u0442 \u0430\u0440\u0442\u0438\u0441\u0442\u0430")}finally{Z(!1)}}})(r.id),disabled:Ke,children:e.jsx(S,{fontSize:"small"})})})]},r.id))})]})}):e.jsxs(a,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",py:3,bgcolor:"rgba(0,0,0,0.2)",borderRadius:1},children:[e.jsx(it,{sx:{fontSize:40,color:"text.secondary",mb:1}}),e.jsx(i,{color:"text.secondary",children:"\u0423 \u0430\u0440\u0442\u0438\u0441\u0442\u0430 \u0435\u0449\u0435 \u043D\u0435\u0442 \u043F\u0440\u0438\u0432\u044F\u0437\u0430\u043D\u043D\u044B\u0445 \u0442\u0440\u0435\u043A\u043E\u0432"})]})]}),e.jsx(Us,{sx:{my:2}}),e.jsxs(a,{sx:{p:2,flexGrow:1},children:[e.jsx(i,{variant:"subtitle1",gutterBottom:!0,children:"\u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0442\u0440\u0435\u043A\u043E\u0432"}),e.jsxs(a,{sx:{display:"flex",mb:2,flexWrap:"wrap",gap:1},children:[e.jsxs(hs,{sx:{minWidth:120},children:[e.jsx(us,{id:"search-mode-label",children:"\u0418\u0441\u043A\u0430\u0442\u044C \u043F\u043E"}),e.jsxs(ps,{labelId:"search-mode-label",value:nt,onChange:r=>lt(r.target.value),size:"small",sx:{minWidth:130},children:[e.jsx(Y,{value:"artist",children:"\u0418\u043C\u0435\u043D\u0438 \u0430\u0440\u0442\u0438\u0441\u0442\u0430"}),e.jsx(Y,{value:"title",children:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u044E \u0442\u0440\u0435\u043A\u0430"})]})]}),e.jsx(C,{size:"small",placeholder:"\u041F\u043E\u0438\u0441\u043A \u0442\u0440\u0435\u043A\u043E\u0432...",value:ue,onChange:r=>ot(r.target.value),InputProps:{startAdornment:e.jsx(E,{position:"start",children:e.jsx(he,{})})},sx:{flexGrow:1},onKeyPress:r=>{r.key==="Enter"&&Jt()}}),e.jsx(p,{variant:"contained",onClick:Jt,disabled:Ke||!ue||ue.trim().length<2,size:"small",children:Ke?e.jsx(k,{size:24}):"\u041F\u043E\u0438\u0441\u043A"})]}),L.length>0?e.jsxs(e.Fragment,{children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsxs(i,{variant:"body2",color:"text.secondary",children:["\u041D\u0430\u0439\u0434\u0435\u043D\u043E \u0442\u0440\u0435\u043A\u043E\u0432: ",L.length]}),e.jsxs(a,{children:[e.jsx(p,{size:"small",variant:"outlined",onClick:qt,disabled:L.length===0,children:V.length===L.length?"\u0421\u043D\u044F\u0442\u044C \u0432\u044B\u0434\u0435\u043B\u0435\u043D\u0438\u0435":"\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0432\u0441\u0435"}),e.jsxs(p,{size:"small",variant:"contained",startIcon:e.jsx(tt,{}),onClick:async()=>{if(_&&V.length!==0){Z(!0);try{const r=await j.post("/api/moderator/tracks/verify-batch",{track_ids:V,artist_id:_.id});if(r.data.success){d("success",`${V.length} \u0442\u0440\u0435\u043A\u043E\u0432 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043F\u0440\u0438\u0432\u044F\u0437\u0430\u043D\u043E \u043A \u0430\u0440\u0442\u0438\u0441\u0442\u0443`);const s=L.filter(t=>V.includes(t.id));s.length>0&&(Qe(t=>[...t,...s]),Mr(t=>t.filter(n=>!V.includes(n.id))),we(t=>({...t,tracks_count:(parseInt(t.tracks_count||0)+s.length).toString()})),Q(t=>t.map(n=>n.id===_.id?{...n,tracks_count:(parseInt(n.tracks_count||0)+s.length).toString()}:n))),Fe([])}else d("error",r.data.error||"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043F\u0440\u0438\u0432\u044F\u0437\u0430\u0442\u044C \u0442\u0440\u0435\u043A\u0438 \u043A \u0430\u0440\u0442\u0438\u0441\u0442\u0443")}catch(r){d("error",r.response?.data?.error||"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043F\u0440\u0438\u0432\u044F\u0437\u0430\u0442\u044C \u0442\u0440\u0435\u043A\u0438 \u043A \u0430\u0440\u0442\u0438\u0441\u0442\u0443")}finally{Z(!1)}}},disabled:V.length===0,color:"success",sx:{ml:1},children:["\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u044B\u0435 (",V.length,")"]})]})]}),e.jsx(or,{component:A,elevation:0,sx:{bgcolor:"rgba(0,0,0,0.2)",maxHeight:300,overflow:"auto"},children:e.jsxs(nr,{size:"small",stickyHeader:!0,children:[e.jsx(lr,{children:e.jsxs(J,{children:[e.jsx(u,{padding:"checkbox",children:e.jsx(Kt,{checked:V.length===L.length&&L.length>0,indeterminate:V.length>0&&V.length<L.length,onChange:qt})}),e.jsx(u,{children:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435"}),e.jsx(u,{sx:{display:{xs:"none",sm:"table-cell"}},children:"\u0410\u043B\u044C\u0431\u043E\u043C"}),e.jsx(u,{sx:{display:{xs:"none",md:"table-cell"}},children:"\u0414\u043B\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C"}),e.jsx(u,{align:"right",children:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"})]})}),e.jsx(dr,{children:L.map(r=>e.jsxs(J,{children:[e.jsx(u,{padding:"checkbox",children:e.jsx(Kt,{checked:V.includes(r.id),onChange:()=>{return s=r.id,void Fe(t=>t.includes(s)?t.filter(n=>n!==s):[...t,s]);var s}})}),e.jsx(u,{children:e.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(P,{variant:"rounded",src:r.cover_path,sx:{width:32,height:32,mr:1},children:e.jsx(it,{})}),e.jsxs(a,{children:[e.jsx(i,{variant:"body2",sx:{fontWeight:"medium"},children:r.title}),e.jsx(i,{variant:"caption",color:"text.secondary",children:r.artist})]})]})}),e.jsx(u,{sx:{display:{xs:"none",sm:"table-cell"}},children:r.album||"\u2014"}),e.jsx(u,{sx:{display:{xs:"none",md:"table-cell"}},children:r.duration?`${Math.floor(r.duration/60)}:${(r.duration%60).toString().padStart(2,"0")}`:"\u2014"}),e.jsx(u,{align:"right",children:e.jsx(p,{size:"small",variant:"outlined",onClick:()=>(async s=>{if(_){Z(!0);try{const t=await j.post(`/api/moderator/artists/${_.id}/assign-track`,{track_id:s});if(t.data.success){d("success","\u0422\u0440\u0435\u043A \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043F\u0440\u0438\u0432\u044F\u0437\u0430\u043D \u043A \u0430\u0440\u0442\u0438\u0441\u0442\u0443");const n=L.find(c=>c.id===s);n&&(Qe(c=>[...c,n]),Mr(c=>c.filter(l=>l.id!==s)),we(c=>({...c,tracks_count:(parseInt(c.tracks_count||0)+1).toString()})),Q(c=>c.map(l=>l.id===_.id?{...l,tracks_count:(parseInt(l.tracks_count||0)+1).toString()}:l))),V.includes(s)&&Fe(c=>c.filter(l=>l!==s))}else d("error",t.data.error||"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043F\u0440\u0438\u0432\u044F\u0437\u0430\u0442\u044C \u0442\u0440\u0435\u043A \u043A \u0430\u0440\u0442\u0438\u0441\u0442\u0443")}catch(t){d("error",t.response?.data?.error||"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043F\u0440\u0438\u0432\u044F\u0437\u0430\u0442\u044C \u0442\u0440\u0435\u043A \u043A \u0430\u0440\u0442\u0438\u0441\u0442\u0443")}finally{Z(!1)}}})(r.id),disabled:Ke,startIcon:e.jsx(tt,{}),children:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"})})]},r.id))})]})})]}):L.length===0&&ue&&!Ke?e.jsxs(a,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",py:3,bgcolor:"rgba(0,0,0,0.2)",borderRadius:1},children:[e.jsx(he,{sx:{fontSize:40,color:"text.secondary",mb:1}}),e.jsx(i,{color:"text.secondary",children:"\u041D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E \u0442\u0440\u0435\u043A\u043E\u0432 \u0434\u043B\u044F \u043F\u0440\u0438\u0432\u044F\u0437\u043A\u0438"})]}):null]})]}),e.jsx(D,{sx:{p:2,px:3,backgroundColor:"rgba(0,0,0,0.4)"},children:e.jsx(p,{onClick:()=>_s(!1),variant:"contained",children:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C"})})]}),e.jsxs(B,{open:Ea,onClose:()=>es(!1),maxWidth:"md",fullWidth:!0,children:[e.jsxs(a,{sx:{position:"relative",overflow:"hidden",p:2,borderBottom:"1px solid rgba(255, 255, 255, 0.1)",backgroundColor:"rgba(25, 118, 210, 0.15)"},children:[e.jsx(a,{sx:{position:"absolute",top:-30,right:-30,width:120,height:120,borderRadius:"50%",background:"radial-gradient(circle, rgba(25, 118, 210, 0.2) 0%, rgba(25, 118, 210, 0) 70%)",zIndex:0}}),e.jsxs(a,{sx:{position:"relative",zIndex:1,display:"flex",alignItems:"center"},children:[e.jsx(fs,{color:"primary",sx:{mr:1.5,fontSize:24}}),e.jsx(i,{variant:"h6",fontWeight:"bold",color:"primary.light",children:"\u0412\u044B\u0434\u0430\u0447\u0430 \u043C\u0435\u0434\u0430\u043B\u0438"})]})]}),e.jsxs(O,{sx:{p:3,pt:2.5,bgcolor:"transparent"},children:[e.jsx(a,{sx:{position:"relative",p:2.5,borderRadius:2,backgroundColor:"rgba(25,118,210,0.05)",border:"1px solid rgba(25,118,210,0.2)",mb:2},children:re&&e.jsx(x,{container:!0,spacing:2,children:e.jsxs(x,{item:!0,xs:12,display:"flex",alignItems:"center",gap:2,mb:2,children:[e.jsx(P,{src:re.photo?`/static/uploads/avatar/${re.id}/${re.photo}`:void 0,alt:re.name,sx:{width:60,height:60,border:"2px solid rgba(25,118,210,0.3)"}}),e.jsxs(a,{children:[e.jsx(i,{variant:"subtitle1",color:"rgba(255,255,255,0.87)",fontWeight:"bold",children:re.name}),e.jsxs(i,{variant:"body2",color:"rgba(255,255,255,0.6)",children:["@",re.username]})]})]})})}),e.jsxs(a,{sx:{mt:3},children:[e.jsx(i,{variant:"subtitle1",sx:{mb:2},children:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043C\u0435\u0434\u0430\u043B\u044C"}),La?e.jsx(a,{sx:{display:"flex",justifyContent:"center",my:3},children:e.jsx(k,{})}):zt.length>0?e.jsx(x,{container:!0,spacing:2,children:zt.map(r=>e.jsx(x,{item:!0,xs:6,sm:4,md:3,children:e.jsxs(Le,{sx:{cursor:"pointer",transition:"all 0.2s",transform:ze===r.name?"scale(1.05)":"scale(1)",border:ze===r.name?"2px solid #1976d2":"none","&:hover":{transform:"scale(1.05)",boxShadow:"0 4px 20px rgba(0,0,0,0.2)"}},onClick:()=>{Wt(r.name),Fs(r.description||"")},children:[e.jsx(Zt,{component:"img",height:"120",image:r.image_path,alt:r.name,sx:{objectFit:"contain",p:1}}),e.jsxs(Ve,{sx:{textAlign:"center",p:1},children:[e.jsx(i,{variant:"body2",noWrap:!0,children:r.name}),e.jsx(i,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5},children:r.achievement})]})]})},r.name))}):e.jsxs(a,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",py:3,bgcolor:"rgba(0,0,0,0.2)",borderRadius:1},children:[e.jsx(fs,{sx:{fontSize:40,color:"text.secondary",mb:1}}),e.jsx(i,{color:"text.secondary",children:"\u041D\u0435\u0442 \u0434\u043E\u0441\u0442\u0443\u043F\u043D\u044B\u0445 \u043C\u0435\u0434\u0430\u043B\u0435\u0439"})]}),e.jsx(C,{fullWidth:!0,label:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043C\u0435\u0434\u0430\u043B\u0438",value:$t,onChange:r=>Fs(r.target.value),margin:"normal",variant:"outlined",multiline:!0,rows:2,disabled:!ze})]})]}),e.jsxs(D,{sx:{p:2,px:3,justifyContent:"space-between",backgroundColor:"rgba(0,0,0,0.4)"},children:[e.jsx(p,{onClick:()=>es(!1),variant:"outlined",color:"inherit",sx:{borderRadius:8,px:3,borderColor:"rgba(255,255,255,0.2)",color:"rgba(255,255,255,0.7)","&:hover":{borderColor:"rgba(255,255,255,0.4)",background:"rgba(255,255,255,0.05)"}},children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),e.jsx(p,{onClick:async()=>{if(re&&ze)try{g(!0);const r=await j.post("/api/moderator/medals/issue",{user_id:re.id,medal_name:ze,description:$t});if(!r.data.success)throw new Error(r.data.error||"Failed to issue medal");d("success",`\u041C\u0435\u0434\u0430\u043B\u044C "${ze}" \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0432\u044B\u0434\u0430\u043D\u0430 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044E ${re.username}`),es(!1)}catch(r){d("error",r.response?.data?.error||"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0432\u044B\u0434\u0430\u0442\u044C \u043C\u0435\u0434\u0430\u043B\u044C")}finally{g(!1)}},color:"primary",variant:"contained",disabled:m||!ze,startIcon:m?e.jsx(k,{size:20}):e.jsx(fs,{}),sx:{borderRadius:8,px:4,py:.75,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.4)",background:"linear-gradient(45deg, #1976d2 30%, #42a5f5 90%)","&:hover":{boxShadow:"0 6px 16px rgba(0, 0, 0, 0.5)"}},children:"\u0412\u044B\u0434\u0430\u0442\u044C \u043C\u0435\u0434\u0430\u043B\u044C"})]})]}),e.jsx(Hi,{open:qa,onClose:()=>{Ht(!1),Vt(null)},userId:Lt?.id,username:Lt?.username}),e.jsx(di,{open:ne.open,autoHideDuration:6e3,onClose:()=>T(r=>({...r,open:!1})),sx:Li,children:e.jsx(G,{onClose:()=>T(r=>({...r,open:!1})),severity:ne.severity,variant:"filled",sx:{width:"100%"},children:ne.message})})]})};export{Vi as default};
