{"version":3,"file":"ArtistPage.BmCMwOEq.js","sources":["../../src/pages/Main/ArtistPage.js"],"sourcesContent":["import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { \n  Box, \n  Typography, \n  Container, \n  Grid,\n  Avatar,\n  IconButton,\n  Button,\n  Divider,\n  useTheme,\n  CircularProgress,\n  Paper,\n  List,\n  styled,\n  Chip,\n  Fade,\n  useMediaQuery,\n  Skeleton,\n  Tooltip,\n  Card,\n  CardContent,\n  CardMedia,\n  ListItem,\n  ListItemText,\n  ListItemSecondaryAction,\n  ListItemAvatar\n} from '@mui/material';\nimport { \n  PlayArrow, \n  Pause, \n  VerifiedUser,\n  Twitter,\n  Facebook,\n  Instagram,\n  Language,\n  ArrowBack,\n  FavoriteBorder,\n  Favorite,\n  Share,\n  MoreHoriz,\n  Error as ErrorIcon,\n  HelpOutline,\n  MusicOff,\n  Album\n} from '@mui/icons-material';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { useMusic } from '../../context/MusicContext';\nimport { formatDuration } from '../../utils/formatters';\nimport SEO from '../../components/SEO';\nimport { useSnackbar } from 'notistack';\nimport FullScreenPlayer from '../../components/Music/FullScreenPlayer/index.js';\nimport MobilePlayer from '../../components/Music/MobilePlayer';\nimport DesktopPlayer from '../../components/Music/DesktopPlayer';\n\n\nconst ArtistContainer = styled(Container)(({ theme }) => ({\n  marginTop: theme.spacing(2),\n  marginBottom: theme.spacing(14),\n  padding: theme.spacing(0, 1),\n  [theme.breakpoints.up('md')]: {\n    marginBottom: theme.spacing(16),\n    padding: theme.spacing(0, 3),\n  }\n}));\n\nconst ArtistHeaderCard = styled(Paper)(({ theme }) => ({\n  borderRadius: '16px',\n  overflow: 'hidden',\n  background: 'linear-gradient(135deg, rgba(30,30,30,0.7) 0%, rgba(10,10,10,0.7) 100%)',\n  backdropFilter: 'blur(10px)',\n  boxShadow: '0 8px 32px rgba(0,0,0,0.3)',\n  border: '1px solid rgba(255,255,255,0.05)',\n  marginBottom: theme.spacing(3),\n  position: 'relative',\n}));\n\nconst ArtistHeaderBackground = styled(Box)(({ theme, image }) => ({\n  position: 'absolute',\n  top: 0,\n  left: 0,\n  right: 0,\n  height: '150px',\n  backgroundImage: image ? `linear-gradient(rgba(0,0,0,0.3), rgba(10,10,10,0.8)), url(${image})` : 'linear-gradient(45deg, #1a1a1a 0%, #0a0a0a 100%)',\n  backgroundSize: 'cover',\n  backgroundPosition: 'center',\n  opacity: 0.7,\n  zIndex: 0,\n  filter: 'blur(2px)',\n}));\n\nconst ArtistContent = styled(Box)(({ theme }) => ({\n  position: 'relative',\n  zIndex: 1,\n  padding: theme.spacing(3),\n  display: 'flex',\n  flexDirection: 'column',\n  width: '100%',\n  [theme.breakpoints.up('sm')]: {\n    flexDirection: 'row',\n  },\n}));\n\nconst ArtistAvatar = styled(Avatar)(({ theme }) => ({\n  width: 120,\n  height: 120,\n  border: '3px solid rgba(255,255,255,0.1)',\n  boxShadow: '0 8px 16px rgba(0,0,0,0.4)',\n  marginRight: theme.spacing(3),\n  marginBottom: theme.spacing(2),\n  flexShrink: 0,\n  [theme.breakpoints.up('sm')]: {\n    marginBottom: 0,\n  },\n  transition: 'transform 0.3s ease',\n  '&:hover': {\n    transform: 'scale(1.05)'\n  }\n}));\n\nconst TrackItem = styled(Box)(({ theme, active }) => ({\n  display: 'flex',\n  alignItems: 'center',\n  borderRadius: 8,\n  padding: theme.spacing(1),\n  marginBottom: theme.spacing(1),\n  backgroundColor: active ? 'rgba(208, 188, 255, 0.1)' : 'transparent',\n  transition: 'all 0.2s ease',\n  cursor: 'pointer',\n  '&:hover': {\n    backgroundColor: 'rgba(255,255,255,0.05)',\n    transform: 'translateY(-2px)',\n    boxShadow: '0 4px 10px rgba(0,0,0,0.1)'\n  }\n}));\n\nconst TrackCover = styled(Box)(({ theme }) => ({\n  width: 50,\n  height: 50,\n  borderRadius: 4,\n  overflow: 'hidden',\n  marginRight: theme.spacing(2),\n  flexShrink: 0,\n  boxShadow: '0 4px 8px rgba(0,0,0,0.2)',\n  position: 'relative',\n  transition: 'transform 0.3s ease',\n  '&:hover': {\n    transform: 'scale(1.05)'\n  }\n}));\n\nconst SocialButton = styled(IconButton)(({ theme }) => ({\n  margin: theme.spacing(0, 0.5),\n  backgroundColor: 'rgba(255,255,255,0.05)',\n  '&:hover': {\n    backgroundColor: 'rgba(255,255,255,0.1)',\n    transform: 'scale(1.1)',\n  },\n  transition: 'transform 0.2s ease'\n}));\n\nconst VerifiedBadge = styled(Chip)(({ theme }) => ({\n  backgroundColor: theme.palette.primary.main,\n  color: '#000',\n  fontWeight: 'bold',\n  height: 24,\n  marginLeft: theme.spacing(1),\n  '& .MuiChip-icon': {\n    color: '#000',\n  }\n}));\n\nconst TruncatedTypography = styled(Typography)(({ theme, lines = 1 }) => ({\n  overflow: 'hidden',\n  textOverflow: 'ellipsis',\n  display: '-webkit-box',\n  WebkitLineClamp: lines,\n  WebkitBoxOrient: 'vertical',\n  wordBreak: 'break-word',\n  maxWidth: '100%'\n}));\n\nconst BiographyContainer = styled(Box)(({ theme }) => ({\n  position: 'relative',\n  maxHeight: theme.spacing(30),\n  overflow: 'hidden',\n  '&::after': {\n    content: '\"\"',\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    width: '100%',\n    height: '50px',\n    pointerEvents: 'none'\n  }\n}));\n\nconst ActionButton = styled(Button)(({ theme }) => ({\n  borderRadius: theme.spacing(3),\n  padding: theme.spacing(0.5, 2),\n  transition: 'transform 0.2s ease, background-color 0.2s ease',\n  '&:hover': {\n    transform: 'scale(1.05)'\n  }\n}));\n\nconst GenreChip = styled(Chip)(({ theme }) => ({\n  backgroundColor: 'rgba(255,255,255,0.05)',\n  color: theme.palette.text.secondary,\n  transition: 'all 0.2s ease',\n  '&:hover': {\n    backgroundColor: 'rgba(255,255,255,0.1)',\n    transform: 'translateY(-2px)'\n  },\n  maxWidth: 150\n}));\n\nconst TrackInfoContainer = styled(Box)(({ theme }) => ({\n  flexGrow: 1,\n  overflow: 'hidden',\n  paddingRight: theme.spacing(1),\n  width: 0,\n}));\n\nconst TrackNumber = styled(Typography)(({ theme }) => ({\n  width: 30,\n  textAlign: 'right',\n  marginRight: theme.spacing(2),\n  flexShrink: 0\n}));\n\nconst TrackActions = styled(Box)(({ theme }) => ({\n  display: 'flex',\n  alignItems: 'center',\n  marginLeft: 'auto',\n  flexShrink: 0\n}));\n\n\nconst NotFoundCard = styled(Card)(({ theme }) => ({\n  marginBottom: theme.spacing(4),\n  borderRadius: '16px',\n  overflow: 'hidden',\n  backgroundColor: 'rgba(30,30,30,0.5)',\n  backdropFilter: 'blur(10px)',\n  boxShadow: '0 4px 20px rgba(0,0,0,0.3)',\n  border: '1px solid rgba(255,255,255,0.05)',\n  textAlign: 'center'\n}));\n\nconst NotFoundIconContainer = styled(Box)(({ theme }) => ({\n  width: '100%',\n  display: 'flex',\n  justifyContent: 'center',\n  marginBottom: theme.spacing(2),\n  marginTop: theme.spacing(2)\n}));\n\nconst NotFoundIcon = styled(Box)(({ theme }) => ({\n  width: 120,\n  height: 120,\n  borderRadius: '50%',\n  backgroundColor: 'rgba(255,255,255,0.05)',\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'center'\n}));\n\nconst ArtistPage = () => {\n  const { artistParam } = useParams();\n  const [artistData, setArtistData] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [tracks, setTracks] = useState([]);\n  const [mostListenedTracks, setMostListenedTracks] = useState([]);\n  const [newestTracks, setNewestTracks] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [hasMoreTracks, setHasMoreTracks] = useState(true);\n  const [loadingMoreTracks, setLoadingMoreTracks] = useState(false);\n  const [fullScreenPlayerOpen, setFullScreenPlayerOpen] = useState(false);\n  const theme = useTheme();\n  const navigate = useNavigate();\n  const { playTrack, currentTrack, isPlaying, togglePlay, likeTrack } = useMusic();\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\n  const { enqueueSnackbar } = useSnackbar();\n  const tracksContainerRef = useRef(null);\n  const lastTrackElementRef = useRef(null);\n\n\n  const observer = useRef();\n  const lastTrackRef = useCallback((node) => {\n    if (loadingMoreTracks) return;\n    if (observer.current) observer.current.disconnect();\n    observer.current = new IntersectionObserver(entries => {\n      if (entries[0].isIntersecting && hasMoreTracks) {\n        loadMoreTracks();\n      }\n    });\n    if (node) observer.current.observe(node);\n  }, [loadingMoreTracks, hasMoreTracks]);\n\n  useEffect(() => {\n    fetchArtistData();\n  }, [artistParam]);\n\n  useEffect(() => {\n    if (artistData) {\n\n      prepareMostListenedTracks();\n      prepareNewestTracks();\n    }\n  }, [tracks]);\n\n  const fetchArtistData = async (page = 1, append = false) => {\n    try {\n      if (page === 1) {\n        setIsLoading(true);\n      } else {\n        setLoadingMoreTracks(true);\n      }\n      \n\n      const response = await axios.get(`/api/music/artist?id=${artistParam}&page=${page}&per_page=40`);\n      \n      if (response.data.success) {\n        const { artist } = response.data;\n        setArtistData(artist);\n        \n        if (append) {\n          setTracks(prev => [...prev, ...artist.tracks]);\n        } else {\n          setTracks(artist.tracks);\n        }\n        \n\n        setHasMoreTracks(page < artist.tracks_pages);\n        setCurrentPage(page);\n      } else {\n        setError('Не удалось загрузить данные об исполнителе');\n      }\n    } catch (err) {\n      setError('Произошла ошибка при загрузке данных');\n      console.error('Error fetching artist data:', err);\n    } finally {\n      setIsLoading(false);\n      setLoadingMoreTracks(false);\n    }\n  };\n\n  const loadMoreTracks = () => {\n    if (!loadingMoreTracks && hasMoreTracks) {\n      const nextPage = currentPage + 1;\n      fetchArtistData(nextPage, true);\n    }\n  };\n\n  const prepareMostListenedTracks = () => {\n\n    const sorted = [...tracks].sort((a, b) => b.plays_count - a.plays_count).slice(0, 5);\n    setMostListenedTracks(sorted);\n  };\n\n  const prepareNewestTracks = () => {\n\n    const sorted = [...tracks].sort((a, b) => \n      new Date(b.created_at) - new Date(a.created_at)).slice(0, 5);\n    setNewestTracks(sorted);\n  };\n\n  const handleOpenFullScreenPlayer = useCallback(() => {\n    setFullScreenPlayerOpen(true);\n  }, []);\n\n  const handleCloseFullScreenPlayer = useCallback(() => {\n    setFullScreenPlayerOpen(false);\n    \n    document.body.style.overflow = '';\n    document.body.style.touchAction = '';\n  }, []);\n\n  const handleTrackClick = (track) => {\n    handlePlayTrack(track);\n  };\n\n  const handlePlayTrack = (track) => {\n    playTrack(track);\n    if (isMobile) {\n\n      handleOpenFullScreenPlayer();\n    }\n  };\n\n  const handleLikeTrack = async (trackId) => {\n    await likeTrack(trackId);\n  };\n\n  const handleTogglePlay = (track) => {\n    togglePlay(track);\n  };\n\n  const handleBackClick = () => {\n    navigate(-1);\n  };\n\n  const shareArtist = () => {\n    if (navigator.share) {\n      navigator.share({\n        title: `${artistData.name} - Музыкальная платформа`,\n        text: `Послушайте треки исполнителя ${artistData.name}`,\n        url: window.location.href,\n      });\n    } else {\n      navigator.clipboard.writeText(window.location.href);\n      alert('Ссылка скопирована в буфер обмена');\n    }\n  };\n\n  const renderTrackItem = (track, index, isLast = false) => {\n    const isCurrentTrack = currentTrack && currentTrack.id === track.id;\n    const isCurrentlyPlaying = isCurrentTrack && isPlaying;\n\n    return (\n      <ListItem \n        key={track.id}\n        ref={isLast ? lastTrackRef : null}\n        onClick={() => isCurrentTrack ? handleTogglePlay(track) : handleTrackClick(track)}\n        sx={{ \n          borderBottom: '1px solid rgba(255, 255, 255, 0.1)',\n          transition: 'all 0.2s ease',\n          '&:hover': {\n            backgroundColor: 'rgba(255, 255, 255, 0.05)',\n            transform: 'translateY(-2px)'\n          },\n          backgroundColor: isCurrentTrack ? 'rgba(255, 255, 255, 0.1)' : 'transparent',\n          borderRadius: '8px',\n          mb: 0.5,\n          py: 1,\n          cursor: 'pointer'\n        }}\n        button\n      >\n        <ListItemAvatar sx={{ minWidth: 70 }}>\n          <Box position=\"relative\">\n            <Avatar \n              variant=\"rounded\" \n              src={track.cover_path} \n              sx={{ \n                width: 56, \n                height: 56,\n                boxShadow: '0 4px 8px rgba(0,0,0,0.2)'\n              }}\n            >\n              <Album />\n            </Avatar>\n            {isCurrentlyPlaying && (\n              <Box \n                sx={{\n                  position: 'absolute',\n                  top: 0,\n                  left: 0,\n                  width: '100%',\n                  height: '100%',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  backgroundColor: 'rgba(0,0,0,0.4)',\n                  borderRadius: 1\n                }}\n              >\n                <Pause fontSize=\"small\" />\n              </Box>\n            )}\n          </Box>\n        </ListItemAvatar>\n        \n        <ListItemText \n          primary={\n            <Typography \n              variant=\"subtitle1\" \n              sx={{ \n                fontWeight: isCurrentTrack ? 600 : 400,\n                color: isCurrentTrack ? theme.palette.primary.main : 'inherit',\n                ml: 1\n              }}\n            >\n              {track.title}\n            </Typography>\n          }\n          secondary={\n            <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, ml: 1 }}>\n              {track.album && (\n                <Typography variant=\"body2\" color=\"text.secondary\" sx={{ opacity: 0.8 }}>\n                  {track.album} •\n                </Typography>\n              )}\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                {formatDuration(track.duration)}\n              </Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                • {track.plays_count.toLocaleString()} прослушиваний\n              </Typography>\n            </Box>\n          }\n        />\n        <ListItemSecondaryAction onClick={(e) => e.stopPropagation()}>\n          <IconButton edge=\"end\" onClick={(e) => {\n            e.stopPropagation();\n            handleLikeTrack(track.id);\n          }}>\n            {track.is_liked ? <Favorite color=\"primary\" /> : <FavoriteBorder />}\n          </IconButton>\n        </ListItemSecondaryAction>\n      </ListItem>\n    );\n  };\n\n  const renderFeaturedTrackItem = (track, index) => {\n    const isCurrentTrack = currentTrack && currentTrack.id === track.id;\n    const isCurrentlyPlaying = isCurrentTrack && isPlaying;\n\n    return (\n      <Grid item xs={6} sm={4} md={3} lg={2} key={track.id}>\n        <Box\n          sx={{\n            position: 'relative',\n            transition: 'all 0.2s ease',\n            '&:hover': {\n              transform: 'translateY(-4px)',\n            },\n            cursor: 'pointer',\n          }}\n          onClick={() => isCurrentTrack ? handleTogglePlay(track) : handleTrackClick(track)}\n        >\n          <Box \n            position=\"relative\" \n            sx={{ \n              aspectRatio: '1/1',\n              borderRadius: 2,\n              overflow: 'hidden',\n              boxShadow: '0 4px 12px rgba(0,0,0,0.2)',\n              mb: 1,\n              backgroundColor: '#121212',\n            }}\n          >\n            <img\n              src={track.cover_path || '/static/uploads/system/album_placeholder.jpg'}\n              alt={track.title}\n              style={{ \n                width: '100%', \n                height: '100%', \n                objectFit: 'cover',\n                display: 'block'\n              }}\n            />\n            {isCurrentlyPlaying && (\n              <Box \n                sx={{\n                  position: 'absolute',\n                  top: 0,\n                  left: 0,\n                  width: '100%',\n                  height: '100%',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  backgroundColor: 'rgba(0,0,0,0.6)',\n                }}\n              >\n                <Pause sx={{ fontSize: 40, color: '#fff' }} />\n              </Box>\n            )}\n            {!isCurrentlyPlaying && (\n              <Box \n                sx={{\n                  position: 'absolute',\n                  top: 0,\n                  left: 0,\n                  width: '100%',\n                  height: '100%',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  backgroundColor: 'rgba(0,0,0,0)',\n                  opacity: 0,\n                  transition: 'all 0.2s ease',\n                  '&:hover': {\n                    backgroundColor: 'rgba(0,0,0,0.5)',\n                    opacity: 1,\n                  },\n                }}\n              >\n                <PlayArrow sx={{ fontSize: 40, color: '#fff' }} />\n              </Box>\n            )}\n            <Box\n              sx={{\n                position: 'absolute',\n                bottom: 0,\n                right: 0,\n                m: 1,\n                p: 0.5,\n                backgroundColor: isCurrentTrack ? theme.palette.primary.main : 'rgba(0,0,0,0.7)',\n                borderRadius: 4,\n                display: 'flex',\n                alignItems: 'center',\n              }}\n            >\n              <Typography variant=\"caption\" sx={{ color: isCurrentTrack ? '#000' : '#fff', px: 0.5 }}>\n                {formatDuration(track.duration)}\n              </Typography>\n            </Box>\n          </Box>\n          \n          <Box sx={{ px: 0.5 }}>\n            <Typography \n              variant=\"subtitle2\" \n              sx={{ \n                fontWeight: isCurrentTrack ? 600 : 500,\n                color: isCurrentTrack ? theme.palette.primary.main : 'inherit',\n                overflow: 'hidden',\n                textOverflow: 'ellipsis',\n                whiteSpace: 'nowrap',\n                lineHeight: 1.2,\n              }}\n            >\n              {track.title}\n            </Typography>\n            \n            <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', mt: 0.5 }}>\n              <Typography \n                variant=\"caption\" \n                color=\"text.secondary\"\n                sx={{ \n                  fontSize: '0.75rem',\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: 0.5\n                }}\n              >\n                {track.plays_count.toLocaleString()}\n              </Typography>\n              \n              <IconButton \n                size=\"small\" \n                sx={{ p: 0.5 }}\n                onClick={(e) => {\n                  e.stopPropagation();\n                  handleLikeTrack(track.id);\n                }}\n              >\n                {track.is_liked ? \n                  <Favorite color=\"primary\" sx={{ fontSize: 16 }} /> : \n                  <FavoriteBorder sx={{ fontSize: 16, color: 'text.secondary' }} />\n                }\n              </IconButton>\n            </Box>\n          </Box>\n        </Box>\n      </Grid>\n    );\n  };\n\n  const renderTrackSection = (title, tracksArray, featured = false) => (\n    <Box sx={{ mt: 4 }}>\n      <Typography variant=\"h6\" gutterBottom sx={{ mb: 2, borderBottom: '1px solid rgba(255,255,255,0.1)', pb: 1 }}>\n        {title}\n      </Typography>\n\n      {featured ? (\n        <Grid container spacing={2}>\n          {tracksArray.map((track, index) => renderFeaturedTrackItem(track, index))}\n        </Grid>\n      ) : (\n        <Paper sx={{ \n          bgcolor: 'background.paper', \n          borderRadius: 2,\n          boxShadow: '0 4px 12px rgba(0,0,0,0.15)',\n          overflow: 'hidden'\n        }}>\n          <List>\n            {tracksArray.map((track, index) => renderTrackItem(track, index))}\n          </List>\n        </Paper>\n      )}\n    </Box>\n  );\n\n  if (isLoading && !artistData) {\n    return (\n      <ArtistContainer maxWidth=\"lg\">\n        <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" minHeight=\"60vh\">\n          <CircularProgress size={40} thickness={4} />\n        </Box>\n      </ArtistContainer>\n    );\n  }\n\n  if (error || !artistData) {\n    return (\n      <ArtistContainer maxWidth=\"lg\">\n        <Box textAlign=\"center\" p={3}>\n          <Typography variant=\"h5\" gutterBottom>\n            {error || 'Исполнитель не найден'}\n          </Typography>\n          <ActionButton \n            variant=\"contained\" \n            color=\"primary\" \n            onClick={handleBackClick} \n            startIcon={<ArrowBack />}\n          >\n            Назад\n          </ActionButton>\n        </Box>\n      </ArtistContainer>\n    );\n  }\n\n\n  const noTracksAndNotVerified = \n    (!tracks || tracks.length === 0) && \n    !artistData.verified;\n\n  return (\n    <ArtistContainer maxWidth=\"lg\">\n      <SEO \n        title={`${artistData.name} - K-Connect Music`}\n        description={`Слушайте треки ${artistData.name} на K-Connect Music`}\n        image={artistData.avatar_url || '/static/uploads/system/album_placeholder.jpg'}\n      />\n      \n      {/* Back button */}\n      <Box mb={2}>\n        <ActionButton \n          startIcon={<ArrowBack />} \n          onClick={handleBackClick}\n          sx={{ \n            color: theme.palette.text.secondary,\n            '&:hover': { color: theme.palette.text.primary }\n          }}\n        >\n          Назад\n        </ActionButton>\n      </Box>\n      \n      {noTracksAndNotVerified ? (\n\n        <NotFoundCard>\n          <CardContent>\n            <NotFoundIconContainer>\n              <NotFoundIcon>\n                <MusicOff sx={{ fontSize: 60, opacity: 0.6 }} />\n              </NotFoundIcon>\n            </NotFoundIconContainer>\n            \n            <Typography variant=\"h5\" gutterBottom>\n              Исполнитель не подтвержден\n            </Typography>\n            \n            <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n              У нас нет информации о треках исполнителя «{artistData.name}». \n              Возможно, это связано с проблемами в написании имени или исполнитель еще не добавлен в нашу базу данных.\n            </Typography>\n            \n            <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n              Попробуйте проверить написание имени исполнителя или вернитесь позже.\n            </Typography>\n            \n            <ActionButton\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={() => navigate('/music')}\n              sx={{ mt: 2, mb: 1 }}\n            >\n              Перейти к музыкe\n            </ActionButton>\n          </CardContent>\n        </NotFoundCard>\n      ) : (\n\n        <>\n          {/* Artist header */}\n          <ArtistHeaderCard elevation={3}>\n            <ArtistHeaderBackground image={artistData.avatar_url} />\n            <ArtistContent>\n              <ArtistAvatar \n                src={artistData.avatar_url || '/static/uploads/system/album_placeholder.jpg'} \n                alt={artistData.name}\n              />\n              \n              <Box flex={1} overflow=\"hidden\">\n                <Box display=\"flex\" alignItems=\"center\" mb={1} overflow=\"hidden\">\n                  <Tooltip title={artistData.name}>\n                    <TruncatedTypography variant=\"h4\" component=\"h1\" sx={{ maxWidth: '70%' }}>\n                      {artistData.name}\n                    </TruncatedTypography>\n                  </Tooltip>\n                  \n                  {artistData.verified && (\n                    <Fade in={true}>\n                      <VerifiedBadge \n                        size=\"small\" \n                        icon={<VerifiedUser fontSize=\"small\" />} \n                        label=\"Проверено\" \n                      />\n                    </Fade>\n                  )}\n                </Box>\n                \n                <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\n                  {tracks.length} {tracks.length === 1 ? 'трек' : \n                    tracks.length > 1 && tracks.length < 5 ? 'трека' : 'треков'}\n                </Typography>\n                \n                {artistData.genres && artistData.genres.length > 0 && (\n                  <Box display=\"flex\" flexWrap=\"wrap\" gap={1} mb={1} sx={{ maxWidth: '100%', overflow: 'hidden' }}>\n                    {artistData.genres.slice(0, 3).map((genre, index) => (\n                      <Tooltip key={index} title={genre}>\n                        <GenreChip \n                          label={genre.length > 20 ? `${genre.slice(0, 17)}...` : genre} \n                          size=\"small\"\n                        />\n                      </Tooltip>\n                    ))}\n                    {artistData.genres.length > 3 && (\n                      <Tooltip title={`Ещё ${artistData.genres.length - 3} жанров`}>\n                        <GenreChip \n                          label={`+${artistData.genres.length - 3}`}\n                          size=\"small\"\n                        />\n                      </Tooltip>\n                    )}\n                  </Box>\n                )}\n                \n                <Box mt={2} display=\"flex\" alignItems=\"center\" flexWrap=\"wrap\" gap={1}>\n                  {artistData.instagram && (\n                    <SocialButton \n                      size=\"small\" \n                      aria-label=\"Instagram\" \n                      onClick={() => window.open(artistData.instagram, '_blank')}\n                    >\n                      <Instagram fontSize=\"small\" />\n                    </SocialButton>\n                  )}\n                  \n                  {artistData.twitter && (\n                    <SocialButton \n                      size=\"small\" \n                      aria-label=\"Twitter\" \n                      onClick={() => window.open(artistData.twitter, '_blank')}\n                    >\n                      <Twitter fontSize=\"small\" />\n                    </SocialButton>\n                  )}\n                  \n                  {artistData.facebook && (\n                    <SocialButton \n                      size=\"small\" \n                      aria-label=\"Facebook\" \n                      onClick={() => window.open(artistData.facebook, '_blank')}\n                    >\n                      <Facebook fontSize=\"small\" />\n                    </SocialButton>\n                  )}\n                  \n                  {artistData.website && (\n                    <SocialButton \n                      size=\"small\" \n                      aria-label=\"Веб-сайт\" \n                      onClick={() => window.open(artistData.website, '_blank')}\n                    >\n                      <Language fontSize=\"small\" />\n                    </SocialButton>\n                  )}\n                  \n                  <Box flexGrow={1} />\n                  \n                  <ActionButton\n                    variant=\"contained\"\n                    color=\"primary\"\n                    size=\"small\"\n                    startIcon={<Share />}\n                    onClick={shareArtist}\n                    sx={{ mr: 1 }}\n                  >\n                    Поделиться\n                  </ActionButton>\n                  \n                  {tracks && tracks.length > 0 && (\n                    <ActionButton\n                      variant=\"contained\"\n                      color=\"secondary\"\n                      size=\"small\"\n                      startIcon={<PlayArrow />}\n                      onClick={() => handleTrackClick(tracks[0])}\n                    >\n                      Слушать\n                    </ActionButton>\n                  )}\n                </Box>\n              </Box>\n            </ArtistContent>\n          </ArtistHeaderCard>\n          \n          {/* Artist biography */}\n          {artistData.bio && (\n            <Paper \n              elevation={2} \n              sx={{ \n                p: 3, \n                mb: 4, \n                borderRadius: '16px',\n                bgcolor: '#121212',\n              }}\n            >\n              <Typography variant=\"h6\" gutterBottom>\n                Биография\n              </Typography>\n              \n              <BiographyContainer>\n                <TruncatedTypography \n                  variant=\"body2\" \n                  lines={isMobile ? 10 : 15} \n                  sx={{ whiteSpace: 'pre-line' }}\n                >\n                  {artistData.bio}\n                </TruncatedTypography>\n              </BiographyContainer>\n              \n              {artistData.bio && artistData.bio.length > 300 && (\n                <Box textAlign=\"center\" mt={2}>\n                  <ActionButton \n                    size=\"small\" \n                    color=\"primary\"\n                    onClick={() => {\n\n                    }}\n                  >\n                    Читать полностью\n                  </ActionButton>\n                </Box>\n              )}\n            </Paper>\n          )}\n          \n          {/* Most listened tracks */}\n          {mostListenedTracks && mostListenedTracks.length > 0 && renderTrackSection('Самые прослушиваемые треки', mostListenedTracks, true)}\n          \n          {/* Newest tracks */}\n          {newestTracks && newestTracks.length > 0 && renderTrackSection('Новые треки', newestTracks, true)}\n          \n          {/* All tracks section */}\n          <Box mb={4}>\n            <Typography variant=\"h5\" gutterBottom>\n              Все треки\n            </Typography>\n            \n            {tracks && tracks.length > 0 ? (\n              <List disablePadding>\n                {tracks.map((track, index) => renderTrackItem(\n                  track, \n                  index, \n                  index === tracks.length - 1 && hasMoreTracks\n                ))}\n                \n                {/* Loading indicator and reference for infinite scrolling */}\n                <div ref={tracksContainerRef}>\n                  {loadingMoreTracks && (\n                    <Box textAlign=\"center\" py={2}>\n                      <CircularProgress size={24} />\n                    </Box>\n                  )}\n                </div>\n              </List>\n            ) : (\n              <Paper\n                elevation={1}\n                sx={{\n                  p: 3,\n                  textAlign: 'center',\n                  borderRadius: '10px',\n                  backgroundColor: 'rgba(18,18,18,0.4)'\n                }}\n              >\n                <Typography color=\"text.secondary\">\n                  Треки не найдены\n                </Typography>\n              </Paper>\n            )}\n          </Box>\n        </>\n      )}\n\n      {/* Music Players */}\n      {isMobile && currentTrack && (\n        <Box\n          sx={{\n            position: 'fixed',\n            bottom: 0,\n            left: 0,\n            right: 0,\n            zIndex: 1100,\n          }}\n        >\n          <MobilePlayer onExpandClick={handleOpenFullScreenPlayer} />\n        </Box>\n      )}\n      \n      {/* Desktop Player */}\n      {!isMobile && currentTrack && (\n        <DesktopPlayer />\n      )}\n      \n      {/* Full Screen Player */}\n      <FullScreenPlayer \n        open={fullScreenPlayerOpen} \n        onClose={handleCloseFullScreenPlayer} \n      />\n    </ArtistContainer>\n  );\n};\n\nexport default ArtistPage; "],"names":["ArtistContainer","styled","Container","theme","marginTop","spacing","marginBottom","padding","breakpoints","up","ArtistHeaderCard","Paper","borderRadius","overflow","background","backdropFilter","boxShadow","border","position","ArtistHeaderBackground","Box","image","top","left","right","height","backgroundImage","backgroundSize","backgroundPosition","opacity","zIndex","filter","ArtistContent","display","flexDirection","width","ArtistAvatar","Avatar","marginRight","flexShrink","transition","transform","active","alignItems","backgroundColor","cursor","SocialButton","IconButton","margin","VerifiedBadge","Chip","palette","primary","main","color","fontWeight","marginLeft","TruncatedTypography","Typography","lines","textOverflow","WebkitLineClamp","WebkitBoxOrient","wordBreak","maxWidth","BiographyContainer","maxHeight","content","bottom","pointerEvents","ActionButton","Button","GenreChip","text","secondary","flexGrow","paddingRight","textAlign","NotFoundCard","Card","NotFoundIconContainer","justifyContent","NotFoundIcon","ArtistPage","artistParam","useParams","artistData","setArtistData","useState","isLoading","setIsLoading","error","setError","tracks","setTracks","mostListenedTracks","setMostListenedTracks","newestTracks","setNewestTracks","currentPage","setCurrentPage","hasMoreTracks","setHasMoreTracks","loadingMoreTracks","setLoadingMoreTracks","fullScreenPlayerOpen","setFullScreenPlayerOpen","useTheme","navigate","useNavigate","playTrack","currentTrack","isPlaying","togglePlay","likeTrack","useMusic","isMobile","useMediaQuery","down","enqueueSnackbar","useSnackbar","tracksContainerRef","useRef","observer","lastTrackRef","useCallback","node","current","disconnect","IntersectionObserver","entries","isIntersecting","loadMoreTracks","observe","useEffect","fetchArtistData","prepareMostListenedTracks","prepareNewestTracks","async","page","append","response","axios","get","data","success","artist","prev","tracks_pages","err","sorted","sort","a","b","plays_count","slice","Date","created_at","handleOpenFullScreenPlayer","handleCloseFullScreenPlayer","body","style","touchAction","handleTrackClick","track","handlePlayTrack","handleLikeTrack","trackId","handleTogglePlay","handleBackClick","renderTrackItem","index","isLast","isCurrentTrack","id","isCurrentlyPlaying","jsxs","ListItem","ref","onClick","sx","borderBottom","mb","py","button","children","jsx","ListItemAvatar","minWidth","variant","src","cover_path","Album","Pause","fontSize","ListItemText","ml","title","gap","album","formatDuration","duration","toLocaleString","ListItemSecondaryAction","e","stopPropagation","edge","is_liked","Favorite","FavoriteBorder","renderTrackSection","tracksArray","featured","mt","gutterBottom","pb","Grid","container","map","renderFeaturedTrackItem","item","xs","sm","md","lg","aspectRatio","alt","objectFit","PlayArrow","m","p","px","whiteSpace","lineHeight","size","bgcolor","List","minHeight","CircularProgress","thickness","startIcon","ArrowBack","noTracksAndNotVerified","length","verified","SEO","name","description","avatar_url","CardContent","MusicOff","Fragment","elevation","flex","Tooltip","component","Fade","in","icon","VerifiedUser","label","genres","flexWrap","genre","instagram","window","open","Instagram","twitter","Twitter","facebook","Facebook","website","Language","Share","shareArtist","navigator","share","url","location","href","clipboard","writeText","alert","mr","bio","disablePadding","MobilePlayer","onExpandClick","DesktopPlayer","FullScreenPlayer","onClose"],"mappings":"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"}