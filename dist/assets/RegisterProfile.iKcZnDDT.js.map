{"version":3,"file":"RegisterProfile.iKcZnDDT.js","sources":["../../src/pages/Auth/RegisterProfile.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { \n  TextField, \n  Button, \n  Alert,\n  CircularProgress,\n  Box,\n  Checkbox,\n  FormControlLabel,\n  Typography,\n  Avatar,\n  useMediaQuery,\n  Container,\n  Paper,\n  Fade\n} from '@mui/material';\nimport { useTheme } from '@mui/material/styles';\nimport CloudUploadIcon from '@mui/icons-material/CloudUpload';\nimport { motion } from 'framer-motion';\nimport AuthService from '../../services/AuthService';\n\nconst RegisterProfile = ({ setUser }) => {\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\n  const navigate = useNavigate();\n  const location = useLocation();\n  \n  const [formData, setFormData] = useState({\n    name: '',\n    interests: '',\n    about: '',\n    agree_terms: false,\n    agree_privacy: false,\n    chat_id: ''\n  });\n  const [avatar, setAvatar] = useState(null);\n  const [avatarPreview, setAvatarPreview] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    const params = new URLSearchParams(location.search);\n    const urlChatId = params.get('chat_id');\n    \n    const storedChatId = localStorage.getItem('k-connect-chat-id');\n    \n    const chatId = urlChatId || storedChatId || '';\n    \n    if (chatId) {\n      console.log('Found chat_id:', chatId);\n      setFormData(prev => ({ ...prev, chat_id: chatId }));\n    }\n  }, [location.search]);\n\n  const handleChange = (e) => {\n    const { name, value, checked } = e.target;\n    const newValue = name === 'agree_terms' || name === 'agree_privacy' ? checked : value;\n    setFormData(prev => ({ ...prev, [name]: newValue }));\n    setError('');\n  };\n\n  const handleAvatarUpload = (event) => {\n    const file = event.target.files[0];\n    if (!file) return;\n\n    \n    if (file.size > 5 * 1024 * 1024) {\n      setError('Размер файла не должен превышать 5MB');\n      return;\n    }\n\n    \n    if (!file.type.startsWith('image/')) {\n      setError('Пожалуйста, выберите изображение');\n      return;\n    }\n\n    \n    setAvatar(file);\n    setAvatarPreview(URL.createObjectURL(file));\n    setError(null);\n  };\n\n  const validateForm = () => {\n    if (!formData.name) {\n      setError('Имя не может быть пустым');\n      return false;\n    }\n\n    if (!formData.agree_terms || !formData.agree_privacy) {\n      setError('Необходимо согласиться с правилами и политикой конфиденциальности');\n      return false;\n    }\n\n    return true;\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    if (!validateForm()) return;\n    \n    setLoading(true);\n    setError('');\n    \n    try {\n      \n      const chatId = localStorage.getItem('k-connect-chat-id');\n      \n      \n      const profileFormData = new FormData();\n      \n      \n      Object.keys(formData).forEach(key => {\n        profileFormData.append(key, formData[key]);\n      });\n      \n      \n      if (chatId && !formData.chat_id) {\n        profileFormData.append('chat_id', chatId);\n        console.log('Добавлен chat_id из localStorage:', chatId);\n      }\n      \n      \n      if (avatar) {\n        profileFormData.append('photo', avatar);\n      }\n      \n      \n      console.log('Отправка профиля:');\n      for (let pair of profileFormData.entries()) {\n        console.log(pair[0] + ': ' + pair[1]);\n      }\n      \n      const profileResponse = await AuthService.registerProfile(profileFormData);\n      \n      if (profileResponse.success && profileResponse.user) {\n        setUser(profileResponse.user);\n        localStorage.removeItem('k-connect-chat-id');\n        navigate('/', { replace: true });\n      } else if (profileResponse.error) {\n        setError(profileResponse.error);\n      }\n    } catch (err) {\n      console.error(\"Error:\", err);\n      if (err.response && err.response.data && err.response.data.error) {\n        \n        const errorMsg = err.response.data.error;\n        if (errorMsg.includes('chat_id is required')) {\n          setError('Ошибка идентификации. Попробуйте перейти по ссылке из письма повторно или обратитесь в поддержку.');\n        } else if (errorMsg.includes('уже существует')) {\n          setError('Профиль с этими данными уже существует. Попробуйте войти в систему.');\n        } else {\n          setError(errorMsg);\n        }\n      } else {\n        setError('Ошибка при создании профиля. Пожалуйста, попробуйте позже.');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Container \n      disableGutters\n      maxWidth={false} \n      sx={{ \n        display: 'flex',\n        minHeight: '100vh',\n        width: '100%',\n        overflow: 'hidden',\n        position: 'relative',\n      }}\n    >\n      \n      {!isMobile && (\n        <Box \n          sx={{ \n            flex: '0 0 45%',\n            background: 'linear-gradient(135deg, rgba(20, 20, 30, 1) 0%, rgba(40, 40, 60, 0.95) 100%)',\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center',\n            justifyContent: 'center',\n            position: 'relative',\n            overflow: 'hidden',\n            p: 6\n          }}\n        >\n          <Box sx={{ \n            position: 'absolute',\n            width: '200%',\n            height: '200%',\n            top: '-50%',\n            left: '-50%',\n            background: 'radial-gradient(circle, rgba(208, 188, 255, 0.05) 0%, rgba(208, 188, 255, 0) 70%)',\n            zIndex: 0\n          }} />\n          \n          <motion.div\n            initial={{ scale: 0.8, opacity: 0 }}\n            animate={{ scale: 1, opacity: 1 }}\n            transition={{ duration: 0.7, delay: 0.2 }}\n            style={{ position: 'relative', zIndex: 1 }}\n          >\n            <img \n              src=\"/static/icons/clear-logonew.svg\" \n              alt=\"К-Коннект Лого\" \n              style={{ width: 180, marginBottom: 40 }} \n            />\n          </motion.div>\n          \n          <motion.div\n            initial={{ y: 20, opacity: 0 }}\n            animate={{ y: 0, opacity: 1 }}\n            transition={{ duration: 0.5, delay: 0.5 }}\n            style={{ position: 'relative', zIndex: 1, textAlign: 'center' }}\n          >\n            <Typography variant=\"h3\" sx={{ fontWeight: 700, mb: 2 }}>\n              <span style={{ color: '#D0BCFF' }}>К</span>-КОННЕКТ\n            </Typography>\n            <Typography variant=\"h6\" color=\"text.secondary\" sx={{ maxWidth: 400 }}>\n              Расскажите о себе и станьте частью нашего сообщества\n            </Typography>\n          </motion.div>\n          \n          \n          <Box sx={{ \n            position: 'absolute', \n            bottom: 40, \n            left: 0, \n            right: 0, \n            display: 'flex',\n            justifyContent: 'center',\n            gap: 2\n          }}>\n            {[...Array(3)].map((_, i) => (\n              <motion.div\n                key={i}\n                initial={{ scale: 0, opacity: 0 }}\n                animate={{ scale: 1, opacity: 1 }}\n                transition={{ duration: 0.4, delay: 0.8 + (i * 0.2) }}\n              >\n                <Box sx={{ \n                  width: 12 + (i * 4), \n                  height: 12 + (i * 4), \n                  borderRadius: '50%', \n                  background: `rgba(208, 188, 255, ${0.6 - (i * 0.15)})` \n                }} />\n              </motion.div>\n            ))}\n          </Box>\n        </Box>\n      )}\n      \n      \n      <Box \n        sx={{ \n          flex: isMobile ? 1 : '0 0 55%',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          p: 0,\n          background: isMobile ? 'linear-gradient(135deg, rgba(20, 20, 30, 1) 0%, rgba(40, 40, 60, 0.95) 100%)' : 'transparent'\n        }}\n      >\n        <motion.div\n          initial={{ opacity: 0, x: 20 }}\n          animate={{ opacity: 1, x: 0 }}\n          transition={{ duration: 0.5 }}\n          style={{ \n            width: '100%', \n            height: '100%',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            padding: isMobile ? '16px' : '40px'\n          }}\n        >\n          \n          {isMobile && (\n            <Box sx={{ \n              position: 'absolute',\n              top: '24px',\n              left: 0,\n              width: '100%',\n              textAlign: 'center'\n            }}>\n              <img \n                src=\"/static/icons/clear-logonew.svg\" \n                alt=\"К-Коннект Лого\" \n                style={{ width: 80, marginBottom: 12 }} \n              />\n              <Typography variant=\"h5\" component=\"h1\" sx={{ fontWeight: 700 }}>\n                <span style={{ color: '#D0BCFF' }}>К</span>-КОННЕКТ\n              </Typography>\n            </Box>\n          )}\n\n          <Paper \n            elevation={isMobile ? 0 : 6}\n            sx={{ \n              p: isMobile ? 3 : 4,\n              width: '100%',\n              maxWidth: '480px',\n              borderRadius: 4,\n              background: isMobile ? 'transparent' : 'rgba(30, 30, 40, 0.85)',\n              backdropFilter: 'blur(10px)',\n              border: isMobile ? 'none' : '1px solid rgba(255, 255, 255, 0.1)',\n              mt: isMobile ? '140px' : 0,\n              overflowY: 'auto',\n              maxHeight: isMobile ? 'calc(100vh - 200px)' : '80vh',\n              display: 'flex',\n              flexDirection: 'column'\n            }}\n          >\n            <Typography variant=\"h5\" component=\"h2\" sx={{ mb: 1, fontWeight: 600 }}>\n              Завершение регистрации\n            </Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n              Расскажите о себе и заполните свой профиль\n            </Typography>\n            \n            {error && (\n              <Alert \n                severity=\"error\" \n                sx={{ \n                  mb: 3,\n                  borderRadius: 2,\n                  '& .MuiAlert-icon': { alignItems: 'center' }\n                }}\n              >\n                {error ? error.toString() : 'Произошла ошибка при обработке запроса'}\n              </Alert>\n            )}\n            \n            <form onSubmit={handleSubmit} style={{ width: '100%' }}>\n              <Box sx={{ \n                display: 'flex', \n                flexDirection: 'column', \n                alignItems: 'center', \n                mb: 3 \n              }}>\n                <Avatar\n                  src={avatarPreview}\n                  sx={{ \n                    width: 100, \n                    height: 100, \n                    mb: 2,\n                    border: '2px solid #D0BCFF'\n                  }}\n                />\n                <Button\n                  variant=\"outlined\"\n                  component=\"label\"\n                  startIcon={<CloudUploadIcon />}\n                  sx={{ \n                    borderColor: '#D0BCFF', \n                    color: '#D0BCFF',\n                    borderRadius: 2,\n                    '&:hover': {\n                      borderColor: '#B69DF8',\n                      backgroundColor: 'rgba(208, 188, 255, 0.04)'\n                    }\n                  }}\n                >\n                  Загрузить аватар\n                  <input\n                    type=\"file\"\n                    hidden\n                    accept=\"image/*\"\n                    onChange={handleAvatarUpload}\n                  />\n                </Button>\n              </Box>\n              \n              <TextField\n                margin=\"normal\"\n                required\n                fullWidth\n                id=\"name\"\n                label=\"Ваше имя\"\n                name=\"name\"\n                autoFocus\n                value={formData.name}\n                onChange={handleChange}\n                variant=\"outlined\"\n                sx={{ \n                  mb: 2.5,\n                  '& .MuiOutlinedInput-root': {\n                    borderRadius: 2,\n                  }\n                }}\n              />\n              \n              <TextField\n                margin=\"normal\"\n                fullWidth\n                id=\"interests\"\n                label=\"Интересы\"\n                name=\"interests\"\n                value={formData.interests}\n                onChange={handleChange}\n                variant=\"outlined\"\n                placeholder=\"Музыка, спорт, программирование...\"\n                sx={{ \n                  mb: 2.5,\n                  '& .MuiOutlinedInput-root': {\n                    borderRadius: 2,\n                  }\n                }}\n              />\n              \n              <TextField\n                margin=\"normal\"\n                fullWidth\n                id=\"about\"\n                label=\"О себе\"\n                name=\"about\"\n                value={formData.about}\n                onChange={handleChange}\n                variant=\"outlined\"\n                multiline\n                rows={4}\n                placeholder=\"Расскажите немного о себе...\"\n                sx={{ \n                  mb: 3,\n                  '& .MuiOutlinedInput-root': {\n                    borderRadius: 2,\n                  }\n                }}\n              />\n              \n              <Typography variant=\"subtitle2\" sx={{ mb: 1, fontWeight: 600 }}>\n                Правовые соглашения\n              </Typography>\n              \n              <FormControlLabel\n                control={\n                  <Checkbox\n                    name=\"agree_terms\"\n                    checked={formData.agree_terms}\n                    onChange={handleChange}\n                    color=\"primary\"\n                    required\n                    sx={{\n                      color: '#D0BCFF',\n                      '&.Mui-checked': {\n                        color: '#D0BCFF',\n                      },\n                    }}\n                  />\n                }\n                label={\n                  <Typography variant=\"body2\">\n                    Я принимаю{' '}\n                    <Button \n                      href=\"/terms-of-service\" \n                      target=\"_blank\" \n                      sx={{ \n                        color: '#D0BCFF',\n                        p: 0,\n                        minWidth: 'auto',\n                        fontWeight: 'normal',\n                        textTransform: 'none',\n                        fontSize: 'inherit',\n                        '&:hover': {\n                          background: 'transparent',\n                          textDecoration: 'underline'\n                        }\n                      }}\n                    >\n                      Правила пользования\n                    </Button>\n                  </Typography>\n                }\n                sx={{ mb: 1 }}\n              />\n              \n              <FormControlLabel\n                control={\n                  <Checkbox\n                    name=\"agree_privacy\"\n                    checked={formData.agree_privacy}\n                    onChange={handleChange}\n                    color=\"primary\"\n                    required\n                    sx={{\n                      color: '#D0BCFF',\n                      '&.Mui-checked': {\n                        color: '#D0BCFF',\n                      },\n                    }}\n                  />\n                }\n                label={\n                  <Typography variant=\"body2\">\n                    Я согласен с{' '}\n                    <Button \n                      href=\"/privacy\" \n                      target=\"_blank\" \n                      sx={{ \n                        color: '#D0BCFF',\n                        p: 0,\n                        minWidth: 'auto',\n                        fontWeight: 'normal',\n                        textTransform: 'none',\n                        fontSize: 'inherit',\n                        '&:hover': {\n                          background: 'transparent',\n                          textDecoration: 'underline'\n                        }\n                      }}\n                    >\n                      Политикой конфиденциальности\n                    </Button>\n                  </Typography>\n                }\n                sx={{ mb: 3 }}\n              />\n              \n              <Button\n                type=\"submit\"\n                fullWidth\n                variant=\"contained\"\n                size=\"large\"\n                sx={{ \n                  py: 1.5,\n                  borderRadius: 2,\n                  fontSize: '1rem',\n                  textTransform: 'none',\n                  background: 'linear-gradient(90deg, #B69DF8 0%, #D0BCFF 100%)',\n                  boxShadow: '0 4px 12px rgba(182, 157, 248, 0.3)',\n                  '&:hover': {\n                    background: 'linear-gradient(90deg, #D0BCFF 0%, #E9DDFF 100%)',\n                    boxShadow: '0 6px 16px rgba(182, 157, 248, 0.4)',\n                  },\n                  mb: 2\n                }}\n                disabled={loading}\n              >\n                {loading ? <CircularProgress size={24} color=\"inherit\" /> : 'Создать профиль'}\n              </Button>\n            </form>\n          </Paper>\n        </motion.div>\n      </Box>\n    </Container>\n  );\n};\n\nexport default RegisterProfile; "],"names":["RegisterProfile","setUser","theme","useTheme","isMobile","useMediaQuery","breakpoints","down","navigate","useNavigate","location","useLocation","formData","setFormData","useState","name","interests","about","agree_terms","agree_privacy","chat_id","avatar","setAvatar","avatarPreview","setAvatarPreview","loading","setLoading","error","setError","useEffect","urlChatId","URLSearchParams","search","get","storedChatId","localStorage","getItem","chatId","prev","handleChange","e","value","checked","target","newValue","Container","disableGutters","maxWidth","sx","display","minHeight","width","overflow","position","children","jsxs","Box","flex","background","flexDirection","alignItems","justifyContent","p","jsx","height","top","left","zIndex","motion","div","initial","scale","opacity","animate","transition","duration","delay","style","src","alt","marginBottom","y","textAlign","Typography","variant","fontWeight","mb","color","bottom","right","gap","Array","map","_","i","borderRadius","x","padding","component","Paper","elevation","backdropFilter","border","mt","overflowY","maxHeight","Alert","severity","toString","onSubmit","async","preventDefault","profileFormData","FormData","Object","keys","forEach","key","append","pair","entries","profileResponse","AuthService","registerProfile","success","user","removeItem","replace","err","response","data","errorMsg","includes","Avatar","Button","startIcon","CloudUploadIcon","borderColor","backgroundColor","type","hidden","accept","onChange","event","file","files","size","startsWith","URL","createObjectURL","TextField","margin","required","fullWidth","id","label","autoFocus","placeholder","multiline","rows","FormControlLabel","control","Checkbox","href","minWidth","textTransform","fontSize","textDecoration","py","boxShadow","disabled","CircularProgress"],"mappings":"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"}