import{j as e,s as p,T as s,i,b as P,l as u,G as w,m as T,o as Y,A as R,af as G,D as K,E as Q,H as q,J as N,P as U}from"./vendor-mui.08p3AH88.js";import{u as V,r as o}from"./vendor-router.BRqU_Zs2.js";import{a as j}from"./vendor.CL98q8z6.js";import{S as X}from"./index.CdVNWeFt.js";import"./vendor-react.DF-_cTkv.js";const Z={hearts:"#ff5252",diamonds:"#ff5252",clubs:"#424242",spades:"#424242"},ee={hearts:"\u2665",diamonds:"\u2666",clubs:"\u2663",spades:"\u2660"},M=p(i)(({theme:t,suits:m,hidden:h})=>({width:"120px",height:"180px",borderRadius:"10px",background:h?"#7986cb":"#fff",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)",position:"relative",display:"flex",flexDirection:"column",justifyContent:"space-between",padding:"10px",border:`1px solid ${t.palette.divider}`,transition:"transform 0.2s ease",cursor:"default","&:hover":{transform:"translateY(-5px)",boxShadow:"0 6px 12px rgba(0, 0, 0, 0.3)"}})),_=p(s)(({color:t})=>({fontSize:"36px",color:t,lineHeight:1})),D=p(s)(({color:t})=>({fontSize:"24px",fontWeight:"bold",color:t,lineHeight:1})),ae=p(i)({width:"100%",height:"100%",background:"repeating-linear-gradient(45deg, #5c6bc0, #5c6bc0 10px, #3f51b5 10px, #3f51b5 20px)",borderRadius:"8px",position:"absolute",top:0,left:0,display:"flex",alignItems:"center",justifyContent:"center"}),C=({rank:t,suit:m,hidden:h=!1})=>{if(h)return e.jsx(M,{hidden:!0,children:e.jsx(ae,{children:e.jsx(s,{variant:"h4",color:"white",sx:{textShadow:"1px 1px 2px rgba(0,0,0,0.6)"},children:"21"})})});const d=Z[m]||"#424242",c=ee[m]||"?";return e.jsxs(M,{children:[e.jsxs(i,{sx:{alignSelf:"flex-start"},children:[e.jsx(D,{color:d,children:t}),e.jsx(_,{color:d,children:c})]}),e.jsx(i,{sx:{alignSelf:"center",transform:"scale(2)"},children:e.jsx(_,{color:d,children:c})}),e.jsxs(i,{sx:{alignSelf:"flex-end",transform:"rotate(180deg)"},children:[e.jsx(D,{color:d,children:t}),e.jsx(_,{color:d,children:c})]})]})},b=p(U)(({theme:t})=>({padding:t.spacing(3),marginBottom:t.spacing(2),background:t.palette.mode==="dark"?"#1a1a1a":"#121212",border:"1px solid "+(t.palette.mode==="dark"?"#333333":"#2a2a2a"),borderRadius:2*t.shape.borderRadius,boxShadow:"0 4px 20px rgba(0, 0, 0, 0.5)",color:"#ffffff"})),y=p(u)(({theme:t})=>({margin:t.spacing(1),padding:t.spacing(1.5,4),borderRadius:3*t.shape.borderRadius,fontWeight:"bold",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.3)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 15px rgba(0, 0, 0, 0.4)"}})),re=()=>{const t=P(),m=V(),[h,d]=o.useState(0),[c,$]=o.useState(10),[r,g]=o.useState(null),[f,x]=o.useState(!1),[A,S]=o.useState(!1),[E,v]=o.useState(!1),[I,l]=o.useState(null),[F,z]=o.useState(!1),[B,J]=o.useState(""),W=o.useCallback(async()=>{try{x(!0);const a=await j.get("/api/user/points");a?.data?.points!==void 0&&d(parseInt(a.data.points))}catch{l("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0431\u0430\u043B\u0430\u043D\u0441. \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u043F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u043F\u043E\u0437\u0436\u0435.")}finally{x(!1)}},[]),k=(a,n)=>{J(a==="win"?"win":a==="lose"?"lose":"tie"),z(!0),setTimeout(()=>{z(!1)},2e3),l(n)};o.useEffect(()=>{W()},[W]);const H=(a,n=!1)=>{if(!a)return e.jsx(C,{hidden:!0});if(n)return e.jsx(C,{hidden:!0});const[L,O]=a;return e.jsx(C,{rank:L,suit:O})};return e.jsxs(i,{sx:{padding:t.spacing(2),position:"relative",minHeight:"calc(100vh - 64px)",background:"linear-gradient(to bottom, #121212, #000000)",color:"#ffffff",marginBottom:"100px"},children:[e.jsx(X,{title:"21 | \u041C\u0438\u043D\u0438-\u0438\u0433\u0440\u044B | \u041A-\u041A\u043E\u043D\u043D\u0435\u043A\u0442",description:"\u0418\u0433\u0440\u0430 21 (\u0431\u043B\u044D\u043A\u0434\u0436\u0435\u043A) - \u043D\u0430\u0431\u0435\u0440\u0438\u0442\u0435 21 \u043E\u0447\u043A\u043E \u0438\u043B\u0438 \u0431\u043E\u043B\u044C\u0448\u0435 \u0447\u0435\u043C \u0443 \u0434\u0438\u043B\u0435\u0440\u0430, \u043D\u0435 \u043F\u0435\u0440\u0435\u0431\u0440\u0430\u0432!"}),(()=>{if(!F)return null;let a="",n="";return B==="win"?(a="\u041F\u041E\u0411\u0415\u0414\u0410!",n=t.palette.success.main):B==="lose"?(a="\u041F\u0420\u041E\u0418\u0413\u0420\u042B\u0428",n=t.palette.error.main):(a="\u041D\u0418\u0427\u042C\u042F",n=t.palette.warning.main),e.jsx(i,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.7)",zIndex:1e3,animation:"fadeIn 0.5s"},children:e.jsx(s,{variant:"h1",sx:{color:n,fontWeight:"bold",textShadow:"0 0 10px rgba(255, 255, 255, 0.5)",animation:"pulse 0.5s infinite alternate"},children:a})})})(),e.jsxs(K,{open:E,onClose:()=>v(!1),maxWidth:"md",children:[e.jsx(Q,{children:'\u041F\u0440\u0430\u0432\u0438\u043B\u0430 \u0438\u0433\u0440\u044B "21"'}),e.jsxs(q,{children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"\u0426\u0435\u043B\u044C \u0438\u0433\u0440\u044B"}),e.jsx(s,{paragraph:!0,children:"\u041D\u0430\u0431\u0440\u0430\u0442\u044C 21 \u043E\u0447\u043A\u043E \u0438\u043B\u0438 \u0431\u043E\u043B\u044C\u0448\u0435 \u043E\u0447\u043A\u043E\u0432, \u0447\u0435\u043C \u0443 \u0434\u0438\u043B\u0435\u0440\u0430, \u043D\u043E \u043D\u0435 \u043F\u0435\u0440\u0435\u0431\u0440\u0430\u0442\u044C 21."}),e.jsx(s,{variant:"h6",gutterBottom:!0,children:"\u0421\u0442\u043E\u0438\u043C\u043E\u0441\u0442\u044C \u043A\u0430\u0440\u0442"}),e.jsxs(s,{paragraph:!0,children:["- \u041A\u0430\u0440\u0442\u044B \u043E\u0442 2 \u0434\u043E 10 \u0441\u0442\u043E\u044F\u0442 \u043F\u043E \u0441\u0432\u043E\u0435\u043C\u0443 \u043D\u043E\u043C\u0438\u043D\u0430\u043B\u0443",e.jsx("br",{}),"- \u0412\u0430\u043B\u0435\u0442\u044B (J), \u0414\u0430\u043C\u044B (Q) \u0438 \u041A\u043E\u0440\u043E\u043B\u0438 (K) \u0441\u0442\u043E\u044F\u0442 \u043F\u043E 10 \u043E\u0447\u043A\u043E\u0432",e.jsx("br",{}),"- \u0422\u0443\u0437\u044B (A) \u043C\u043E\u0433\u0443\u0442 \u0441\u0442\u043E\u0438\u0442\u044C \u043B\u0438\u0431\u043E 1, \u043B\u0438\u0431\u043E 11 \u043E\u0447\u043A\u043E\u0432 \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043C\u043E\u0441\u0442\u0438 \u043E\u0442 \u0442\u043E\u0433\u043E, \u0447\u0442\u043E \u0432\u044B\u0433\u043E\u0434\u043D\u0435\u0435 \u0438\u0433\u0440\u043E\u043A\u0443"]}),e.jsx(s,{variant:"h6",gutterBottom:!0,children:"\u0425\u043E\u0434 \u0438\u0433\u0440\u044B"}),e.jsxs(s,{paragraph:!0,children:["1. \u0418\u0433\u0440\u043E\u043A \u0434\u0435\u043B\u0430\u0435\u0442 \u0441\u0442\u0430\u0432\u043A\u0443",e.jsx("br",{}),"2. \u0418\u0433\u0440\u043E\u043A \u0438 \u0434\u0438\u043B\u0435\u0440 \u043F\u043E\u043B\u0443\u0447\u0430\u044E\u0442 \u043F\u043E \u0434\u0432\u0435 \u043A\u0430\u0440\u0442\u044B. \u041E\u0434\u043D\u0430 \u043A\u0430\u0440\u0442\u0430 \u0434\u0438\u043B\u0435\u0440\u0430 \u0441\u043A\u0440\u044B\u0442\u0430.",e.jsx("br",{}),"3. \u0418\u0433\u0440\u043E\u043A \u0440\u0435\u0448\u0430\u0435\u0442 \u0432\u0437\u044F\u0442\u044C \u0434\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0435 \u043A\u0430\u0440\u0442\u044B (Hit) \u0438\u043B\u0438 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C\u0441\u044F (Stand)",e.jsx("br",{}),"4. \u0415\u0441\u043B\u0438 \u0438\u0433\u0440\u043E\u043A \u043D\u0430\u0431\u0438\u0440\u0430\u0435\u0442 \u0431\u043E\u043B\u044C\u0448\u0435 21 \u043E\u0447\u043A\u0430, \u043E\u043D \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0438 \u043F\u0440\u043E\u0438\u0433\u0440\u044B\u0432\u0430\u0435\u0442",e.jsx("br",{}),"5. \u041A\u043E\u0433\u0434\u0430 \u0438\u0433\u0440\u043E\u043A \u043E\u0441\u0442\u0430\u043D\u0430\u0432\u043B\u0438\u0432\u0430\u0435\u0442\u0441\u044F, \u0434\u0438\u043B\u0435\u0440 \u043E\u0442\u043A\u0440\u044B\u0432\u0430\u0435\u0442 \u0441\u0432\u043E\u044E \u0441\u043A\u0440\u044B\u0442\u0443\u044E \u043A\u0430\u0440\u0442\u0443 \u0438 \u0431\u0435\u0440\u0435\u0442 \u043A\u0430\u0440\u0442\u044B, \u043F\u043E\u043A\u0430 \u043D\u0435 \u043D\u0430\u0431\u0435\u0440\u0435\u0442 \u043C\u0438\u043D\u0438\u043C\u0443\u043C 17 \u043E\u0447\u043A\u043E\u0432",e.jsx("br",{}),"6. \u0421\u0440\u0430\u0432\u043D\u0438\u0432\u0430\u044E\u0442\u0441\u044F \u043E\u0447\u043A\u0438 \u0438\u0433\u0440\u043E\u043A\u0430 \u0438 \u0434\u0438\u043B\u0435\u0440\u0430"]}),e.jsx(s,{variant:"h6",gutterBottom:!0,children:"\u0412\u044B\u0438\u0433\u0440\u044B\u0448\u0438"}),e.jsxs(s,{paragraph:!0,children:["- \u0411\u043B\u044D\u043A\u0434\u0436\u0435\u043A (21 \u043E\u0447\u043A\u043E \u0441 \u043F\u0435\u0440\u0432\u044B\u0445 \u0434\u0432\u0443\u0445 \u043A\u0430\u0440\u0442): \u0432\u044B\u043F\u043B\u0430\u0442\u0430 3 \u043A 2",e.jsx("br",{}),"- \u041E\u0431\u044B\u0447\u043D\u0430\u044F \u043F\u043E\u0431\u0435\u0434\u0430: \u0432\u044B\u043F\u043B\u0430\u0442\u0430 2 \u043A 1",e.jsx("br",{}),"- \u041D\u0438\u0447\u044C\u044F: \u0432\u043E\u0437\u0432\u0440\u0430\u0442 \u0441\u0442\u0430\u0432\u043A\u0438"]})]}),e.jsx(N,{children:e.jsx(u,{onClick:()=>v(!1),color:"primary",children:"\u041F\u043E\u043D\u044F\u0442\u043D\u043E"})})]}),e.jsxs(i,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsx(u,{variant:"outlined",onClick:()=>m("/minigames"),size:"large",children:"\u041D\u0430\u0437\u0430\u0434"}),e.jsx(s,{variant:"h4",color:"primary",fontWeight:"bold",children:"21"}),e.jsx(u,{variant:"outlined",color:"info",onClick:()=>v(!0),size:"large",children:"\u041F\u0440\u0430\u0432\u0438\u043B\u0430"})]}),e.jsx(b,{elevation:3,children:e.jsxs(w,{container:!0,spacing:2,children:[e.jsx(w,{item:!0,xs:12,md:6,children:e.jsxs(s,{variant:"h6",children:["\u0411\u0430\u043B\u0430\u043D\u0441: ",h," \u0431\u0430\u043B\u043B\u043E\u0432"]})}),e.jsx(w,{item:!0,xs:12,md:6,sx:{display:"flex",justifyContent:"flex-end"},children:e.jsx(s,{variant:"h6",children:r&&r.result==="win"&&`\u0412\u044B\u0438\u0433\u0440\u044B\u0448: ${r.winnings} \u0431\u0430\u043B\u043B\u043E\u0432`})})]})}),A?e.jsx(i,{sx:{mt:2},children:r&&e.jsxs(e.Fragment,{children:[e.jsxs(b,{elevation:3,sx:{mb:3},children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,children:["\u0414\u0438\u043B\u0435\u0440: ",r.game_over?r.dealer_score:"?"]}),e.jsx(i,{sx:{display:"flex",flexWrap:"wrap",gap:2,my:2},children:r.dealer_hand.map((a,n)=>e.jsx(i,{sx:{transform:"scale(0.9)"},children:H(a,n===1&&!r.game_over)},`dealer-${n}`))})]}),e.jsxs(b,{elevation:3,sx:{mb:3},children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,children:["\u0418\u0433\u0440\u043E\u043A: ",r.player_score]}),e.jsx(i,{sx:{display:"flex",flexWrap:"wrap",gap:2,my:2},children:r.player_hand.map((a,n)=>e.jsx(i,{sx:{transform:"scale(0.9)"},children:H(a)},`player-${n}`))})]}),e.jsx(i,{sx:{display:"flex",justifyContent:"center",mt:3},children:r.game_over?e.jsx(y,{variant:"contained",color:"primary",onClick:()=>{g(null),S(!1)},size:"large",children:"\u0418\u0433\u0440\u0430\u0442\u044C \u0435\u0449\u0435"}):e.jsxs(e.Fragment,{children:[e.jsx(y,{variant:"contained",color:"primary",onClick:async()=>{if(r&&!r.game_over){x(!0);try{const a=await j.post("/api/minigames/blackjack/hit",{game_id:r.game_id,player_hand:r.player_hand,dealer_hand:r.dealer_hand,deck:r.deck,bet:r.bet});a.data.success?(g(a.data),d(a.data.balance),a.data.game_over&&k(a.data.result,a.data.message)):l(a.data.error||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0432\u0437\u044F\u0442\u0438\u0438 \u043A\u0430\u0440\u0442\u044B")}catch{l("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0432\u0437\u044F\u0442\u044C \u043A\u0430\u0440\u0442\u0443")}finally{x(!1)}}},disabled:f,size:"large",children:"\u0412\u0437\u044F\u0442\u044C \u043A\u0430\u0440\u0442\u0443"}),e.jsx(y,{variant:"contained",color:"secondary",onClick:async()=>{if(r&&!r.game_over){x(!0);try{const a=await j.post("/api/minigames/blackjack/stand",{game_id:r.game_id,player_hand:r.player_hand,dealer_hand:r.dealer_hand,deck:r.deck,bet:r.bet});a.data.success?(g(a.data),d(a.data.balance),k(a.data.result,a.data.message)):l(a.data.error||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0435")}catch{l("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044C \u0438\u0433\u0440\u0443")}finally{x(!1)}}},disabled:f,size:"large",children:"\u0425\u0432\u0430\u0442\u0438\u0442"})]})}),r.message&&!r.game_over&&e.jsx(i,{sx:{mt:2,textAlign:"center"},children:e.jsx(R,{severity:"info",children:r.message})})]})}):e.jsxs(b,{elevation:3,sx:{display:"flex",flexDirection:"column",alignItems:"center",py:4},children:[e.jsx(s,{variant:"h5",gutterBottom:!0,children:"\u0421\u0434\u0435\u043B\u0430\u0439\u0442\u0435 \u0441\u0442\u0430\u0432\u043A\u0443 \u0438 \u043D\u0430\u0447\u043D\u0438\u0442\u0435 \u0438\u0433\u0440\u0443"}),e.jsxs(i,{sx:{display:"flex",alignItems:"center",my:2},children:[e.jsx(T,{label:"\u0421\u0442\u0430\u0432\u043A\u0430",type:"number",value:c,onChange:a=>$(parseInt(a.target.value)||0),inputProps:{min:10,max:1e6},sx:{width:"150px",mr:2,"& .MuiOutlinedInput-root":{backgroundColor:"rgba(0, 0, 0, 0.5)",color:"#ffffff","& fieldset":{borderColor:"#333333"},"&:hover fieldset":{borderColor:"#505050"},"&.Mui-focused fieldset":{borderColor:t.palette.primary.main}},"& .MuiInputLabel-root":{color:"#aaaaaa"},"& .MuiInputLabel-root.Mui-focused":{color:t.palette.primary.main}}}),e.jsx(y,{variant:"contained",color:"primary",onClick:async()=>{if(c<10||c>1e6)l("\u0421\u0442\u0430\u0432\u043A\u0430 \u0434\u043E\u043B\u0436\u043D\u0430 \u0431\u044B\u0442\u044C \u043E\u0442 10 \u0434\u043E 1000000");else if(c>h)l("\u041D\u0435\u0434\u043E\u0441\u0442\u0430\u0442\u043E\u0447\u043D\u043E \u0441\u0440\u0435\u0434\u0441\u0442\u0432 \u0434\u043B\u044F \u0442\u0430\u043A\u043E\u0439 \u0441\u0442\u0430\u0432\u043A\u0438");else{x(!0);try{const a=await j.post("/api/minigames/blackjack/new-game",{bet:c});a.data.success?(g(a.data),S(!0),d(a.data.balance),a.data.game_over&&k(a.data.result,a.data.message)):l(a.data.error||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u043F\u0443\u0441\u043A\u0435 \u0438\u0433\u0440\u044B")}catch{l("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u043F\u0443\u0441\u0442\u0438\u0442\u044C \u0438\u0433\u0440\u0443")}finally{x(!1)}}},disabled:f||h<c,size:"large",children:f?e.jsx(Y,{size:24}):"\u041D\u0430\u0447\u0430\u0442\u044C \u0438\u0433\u0440\u0443"})]}),e.jsx(s,{variant:"caption",color:"text.secondary",children:"\u041C\u0438\u043D\u0438\u043C\u0430\u043B\u044C\u043D\u0430\u044F \u0441\u0442\u0430\u0432\u043A\u0430: 10 | \u041C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u0430\u044F \u0441\u0442\u0430\u0432\u043A\u0430: 1000000"})]}),e.jsx(G,{open:!!I,autoHideDuration:5e3,onClose:()=>l(null),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:e.jsx(R,{onClose:()=>l(null),severity:"error",sx:{width:"100%"},children:I})})]})};export{re as default};
