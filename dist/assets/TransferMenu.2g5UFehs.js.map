{"version":3,"file":"TransferMenu.2g5UFehs.js","sources":["../../node_modules/@mui/icons-material/SwapHoriz.js","../../src/UIKIT/ContextMenu/ContextMenu.js","../../src/UIKIT/NavButton/NavButton.js","../../src/UIKIT/NavButton/MoreButton.js","../../node_modules/@mui/icons-material/AlternateEmail.js","../../src/UIKIT/UsernameCard/index.js","../../node_modules/@mui/icons-material/Devices.js","../../node_modules/@mui/icons-material/Computer.js","../../node_modules/@mui/icons-material/PhoneAndroid.js","../../node_modules/@mui/icons-material/Laptop.js","../../node_modules/@mui/icons-material/ReportProblem.js","../../src/UIKIT/SessionManager/index.js","../../node_modules/@mui/icons-material/AddPhotoAlternateOutlined.js","../../node_modules/@mui/icons-material/MusicNoteOutlined.js","../../node_modules/@mui/icons-material/PlaylistAdd.js","../../node_modules/@mui/icons-material/RemoveCircleOutline.js","../../src/UIKIT/PlaylistModal/PlaylistModal.js","../../node_modules/@mui/icons-material/PlayArrowRounded.js","../../node_modules/@mui/icons-material/Public.js","../../src/UIKIT/PlaylistCard/PlaylistCard.js","../../src/UIKIT/PlaylistGrid/PlaylistGrid.js","../../src/UIKIT/CommentSystem/CommentItem.js","../../src/UIKIT/CommentSystem/ReplyItem.js","../../src/UIKIT/CommentSystem/CommentForm.js","../../src/UIKIT/CommentSystem/ReplyForm.js","../../src/UIKIT/CommentSystem/index.js","../../node_modules/@mui/icons-material/ArrowRightAlt.js","../../src/UIKIT/TransferMenu/TransferMenu.js"],"sourcesContent":["\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M6.99 11 3 15l3.99 4v-3H14v-2H6.99zM21 9l-3.99-4v3H10v2h7.01v3z\"\n}), 'SwapHoriz');","import React, { useEffect, useRef, useState, useContext } from 'react';\nimport { Box, alpha, styled, useTheme } from '@mui/material';\nimport { ThemeSettingsContext } from '../../App';\n\n/**\n * Переиспользуемый компонент контекстного меню\n * @param {Object} props\n * @param {Array} props.items - Массив элементов меню [{id, label, icon, onClick, disabled}]\n * @param {number} props.x - X позиция меню\n * @param {number} props.y - Y позиция меню\n * @param {boolean} props.show - Отображать ли меню\n * @param {Function} props.onClose - Функция, вызываемая при закрытии меню\n */\n\nconst MenuContainer = styled(Box)(({ theme }) => ({\n  position: 'fixed',\n  zIndex: 1000,\n  backgroundColor: theme.palette.mode === 'light' \n    ? alpha(theme.palette.background.paper, 0.95)\n    : theme.palette.mode === 'contrast'\n      ? '#101010'\n      : '#1A1A1A',\n  borderRadius: 8,\n  boxShadow: '0 4px 12px rgba(0, 0, 0, 0.25)',\n  minWidth: 180,\n  padding: '6px 0',\n  overflow: 'hidden',\n  animation: 'fadeIn 0.15s ease-out',\n  border: theme.palette.mode === 'light'\n    ? '1px solid rgba(0, 0, 0, 0.08)'\n    : '1px solid rgba(255, 255, 255, 0.1)',\n  '@keyframes fadeIn': {\n    from: {\n      opacity: 0,\n      transform: 'scale(0.95)',\n    },\n    to: {\n      opacity: 1,\n      transform: 'scale(1)',\n    },\n  },\n}));\n\nconst MenuItem = styled(Box)(({ theme, disabled }) => ({\n  display: 'flex',\n  alignItems: 'center',\n  padding: '8px 16px',\n  cursor: disabled ? 'not-allowed' : 'pointer',\n  transition: 'background-color 0.2s',\n  userSelect: 'none',\n  color: theme.palette.mode === 'light' ? theme.palette.text.primary : '#E6E6E6',\n  opacity: disabled ? 0.5 : 1,\n  '&:hover': {\n    backgroundColor: disabled ? 'transparent' : alpha(theme.palette.primary.main, 0.12),\n  },\n}));\n\nconst MenuIcon = styled(Box)(({ theme }) => ({\n  marginRight: 10,\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'center',\n  width: 22,\n  height: 22,\n  color: theme.palette.primary.main,\n}));\n\nconst MenuLabel = styled(Box)(({ theme }) => ({\n  fontSize: 14,\n  color: theme.palette.mode === 'light' ? theme.palette.text.primary : '#E6E6E6',\n}));\n\nconst ContextMenu = ({ items, x, y, show, onClose }) => {\n  const theme = useTheme();\n  const { themeSettings } = useContext(ThemeSettingsContext);\n  const menuRef = useRef(null);\n  const [position, setPosition] = useState({ x, y });\n\n  useEffect(() => {\n    if (show && menuRef.current) {\n      const menu = menuRef.current;\n      const rect = menu.getBoundingClientRect();\n      const viewportWidth = window.innerWidth;\n      const viewportHeight = window.innerHeight;\n      \n      let adjustedX = x;\n      let adjustedY = y;\n      \n      if (x + rect.width > viewportWidth) {\n        adjustedX = viewportWidth - rect.width;\n      }\n      \n      if (y + rect.height > viewportHeight) {\n        adjustedY = viewportHeight - rect.height;\n      }\n      \n      setPosition({ x: adjustedX, y: adjustedY });\n    }\n  }, [show, x, y]);\n\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (menuRef.current && !menuRef.current.contains(event.target)) {\n        onClose();\n      }\n    };\n\n    if (show) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n    \n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [show, onClose]);\n\n  useEffect(() => {\n    const handleEscape = (e) => {\n      if (e.key === 'Escape') {\n        onClose();\n      }\n    };\n\n    if (show) {\n      document.addEventListener('keydown', handleEscape);\n    }\n    \n    return () => {\n      document.removeEventListener('keydown', handleEscape);\n    };\n  }, [show, onClose]);\n\n  if (!show) return null;\n\n  return (\n    <MenuContainer \n      ref={menuRef}\n      sx={{\n        left: `${position.x}px`,\n        top: `${position.y}px`\n      }}\n    >\n      {items.map((item) => (\n        <MenuItem \n          key={item.id} \n          disabled={item.disabled}\n          onClick={() => {\n            if (!item.disabled) {\n              item.onClick();\n              onClose();\n            }\n          }}\n        >\n          {item.icon && <MenuIcon>{item.icon}</MenuIcon>}\n          <MenuLabel>{item.label}</MenuLabel>\n        </MenuItem>\n      ))}\n    </MenuContainer>\n  );\n};\n\nexport default ContextMenu; ","import React, { memo } from 'react';\nimport { \n  ListItem, \n  ListItemIcon, \n  ListItemText,\n  Box,\n  styled,\n  alpha\n} from '@mui/material';\nimport { Link as RouterLink } from 'react-router-dom';\n\n\nconst NavItemStyled = styled(ListItem)(({ theme, active, isspecial, themecolor }) => ({\n  borderRadius: theme.spacing(1.5),\n  marginBottom: theme.spacing(0.5),\n  padding: theme.spacing(0.7, 1.3),\n  backgroundColor: active ? \n    'rgba(255, 255, 255, 0.08)' : \n    'transparent',\n  position: 'relative',\n  overflow: 'hidden',\n  transition: 'all 0.25s cubic-bezier(0.4, 0, 0.2, 1)',\n  '&:hover': {\n    backgroundColor: active ? \n      'rgba(255, 255, 255, 0.12)' : \n      'rgba(255, 255, 255, 0.05)',\n    transform: 'translateX(2px)',\n  },\n  '&::before': {\n    content: '\"\"',\n    position: 'absolute',\n    left: 0,\n    top: '30%',\n    height: '40%',\n    width: active ? '2px' : '0px',\n    backgroundColor: isspecial ? '#f44336' : (themecolor || theme.palette.primary.main),\n    borderRadius: '0 2px 2px 0',\n    transition: 'width 0.2s ease',\n  },\n  '&:hover::before': {\n    width: active ? '2px' : '1px',\n  },\n  [theme.breakpoints.down('lg')]: {\n    padding: theme.spacing(0.6, 1.1),\n    marginBottom: theme.spacing(0.4),\n  },\n  [theme.breakpoints.down('md')]: {\n    padding: theme.spacing(0.5, 1),\n    marginBottom: theme.spacing(0.3),\n  }\n}));\n\n\nconst NavIconStyled = styled(ListItemIcon)(({ theme, active, isspecial, themecolor }) => ({\n  minWidth: '32px',\n  color: active ? \n    (isspecial ? '#f44336' : themecolor || theme.palette.primary.main) : \n    (theme.palette.mode === 'dark' ? 'rgba(255, 255, 255, 0.7)' : 'rgba(0, 0, 0, 0.7)'),\n  transition: 'all 0.25s ease',\n  '& .MuiSvgIcon-root': {\n    fontSize: '1.15rem',\n    transition: 'transform 0.25s ease',\n    filter: active ? 'drop-shadow(0 1px 2px rgba(0, 0, 0, 0.1))' : 'none',\n  },\n  '.MuiListItem-root:hover &': {\n    color: active ? \n      (isspecial ? '#f44336' : themecolor || theme.palette.primary.main) : \n      (theme.palette.mode === 'dark' ? 'rgba(255, 255, 255, 0.9)' : 'rgba(0, 0, 0, 0.9)'),\n    '& .MuiSvgIcon-root': {\n      transform: 'scale(1.12)',\n    }\n  },\n  [theme.breakpoints.down('lg')]: {\n    minWidth: '30px',\n    '& .MuiSvgIcon-root': {\n      fontSize: '1.1rem',\n    },\n  },\n  [theme.breakpoints.down('md')]: {\n    minWidth: '26px',\n    '& .MuiSvgIcon-root': {\n      fontSize: '1rem',\n    },\n  }\n}));\n\n\nconst NavTextStyled = styled(ListItemText)(({ theme, active, isspecial, themecolor }) => ({\n  '& .MuiListItemText-primary': {\n    fontWeight: active ? 500 : 400,\n    fontSize: '0.85rem',\n    color: active \n      ? (isspecial ? '#f44336' : themecolor || theme.palette.primary.main) \n      : (theme.palette.mode === 'dark' ? 'rgba(255, 255, 255, 0.85)' : 'rgba(0, 0, 0, 0.85)'),\n    letterSpacing: active ? '0.3px' : '0.2px',\n    transition: 'all 0.25s ease',\n    textShadow: active ? '0 1px 2px rgba(0, 0, 0, 0.1)' : 'none',\n  },\n  '.MuiListItem-root:hover & .MuiListItemText-primary': {\n    letterSpacing: '0.3px',\n  },\n  [theme.breakpoints.down('lg')]: {\n    '& .MuiListItemText-primary': {\n      fontSize: '0.8rem',\n      letterSpacing: active ? '0.25px' : '0.15px',\n    }\n  },\n  [theme.breakpoints.down('md')]: {\n    '& .MuiListItemText-primary': {\n      fontSize: '0.75rem',\n    }\n  }\n}));\n\n\nconst areEqual = (prevProps, nextProps) => {\n  return (\n    prevProps.active === nextProps.active &&\n    prevProps.path === nextProps.path &&\n    prevProps.text === nextProps.text &&\n    prevProps.isSpecial === nextProps.isSpecial\n  );\n};\n\n\nconst NavButton = ({ \n  text, \n  icon, \n  path, \n  active = false, \n  isSpecial = false, \n  themeColor, \n  onClick,\n  endIcon,\n  endIconActive,\n  component,\n  nested = false,\n  target,\n  rel,\n  ...rest \n}) => {\n\n  const componentProps = path ? {\n    component: RouterLink,\n    to: path,\n    target,\n    rel\n  } : {\n    onClick\n  };\n\n\n  const nestedStyles = nested ? {\n    pl: 2,\n    borderRadius: (theme) => theme.spacing(1.2),\n    marginBottom: (theme) => theme.spacing(0.4),\n    padding: (theme) => theme.spacing(0.6, 1.2, 0.6, 2),\n  } : {};\n\n  return (\n    <NavItemStyled\n      button\n      active={active ? 1 : 0}\n      isspecial={isSpecial ? 'true' : undefined}\n      themecolor={themeColor}\n      {...componentProps}\n      {...rest}\n      sx={{...nestedStyles, ...rest.sx}}\n    >\n      {/* Если есть endIcon и нужно отображать его не в конце кнопки, используем Box для структуры контента */}\n      {endIcon && !endIconActive ? (\n        <Box sx={{ display: 'flex', alignItems: 'center', width: '100%', justifyContent: 'space-between' }}>\n          <Box sx={{ display: 'flex', alignItems: 'center' }}>\n            {icon && (\n              <NavIconStyled \n                active={active ? 1 : 0}\n                isspecial={isSpecial ? 'true' : undefined}\n                themecolor={themeColor}\n              >\n                {icon}\n              </NavIconStyled>\n            )}\n            <NavTextStyled \n              primary={text} \n              active={active ? 1 : 0}\n              isspecial={isSpecial ? 'true' : undefined}\n              themecolor={themeColor}\n            />\n          </Box>\n          {endIcon}\n        </Box>\n      ) : (\n        <>\n          {icon && (\n            <NavIconStyled \n              active={active ? 1 : 0}\n              isspecial={isSpecial ? 'true' : undefined}\n              themecolor={themeColor}\n            >\n              {icon}\n            </NavIconStyled>\n          )}\n          <NavTextStyled \n            primary={text} \n            active={active ? 1 : 0}\n            isspecial={isSpecial ? 'true' : undefined}\n            themecolor={themeColor}\n          />\n          {endIcon && endIconActive}\n        </>\n      )}\n    </NavItemStyled>\n  );\n};\n\n\nexport { NavItemStyled, NavIconStyled, NavTextStyled };\nexport default memo(NavButton, areEqual); ","import React, { memo } from 'react';\nimport { NavItemStyled, NavIconStyled, NavTextStyled } from './NavButton';\nimport { Box, styled } from '@mui/material';\n\n\nconst MoreButtonStyled = styled(NavItemStyled)(({ theme, active, themecolor }) => ({\n  justifyContent: 'space-between',\n  paddingRight: theme.spacing(1.5),\n  marginTop: theme.spacing(0.5),\n  '& .arrow-icon': {\n    transition: 'transform 0.3s ease',\n    transform: active ? 'rotate(180deg)' : 'rotate(0deg)',\n    color: active ? (themecolor || theme.palette.primary.main) : \n      (theme.palette.mode === 'dark' ? 'rgba(255, 255, 255, 0.7)' : 'rgba(0, 0, 0, 0.7)'),\n  }\n}));\n\n\nconst areEqual = (prevProps, nextProps) => {\n  return (\n    prevProps.active === nextProps.active &&\n    prevProps.text === nextProps.text &&\n    prevProps.onClick === nextProps.onClick\n  );\n};\n\nconst MoreButton = ({ \n  text, \n  icon, \n  active = false, \n  themeColor, \n  onClick,\n  arrowIcon, \n  arrowUpIcon, \n  arrowDownIcon,\n  ...rest \n}) => {\n\n  const ArrowIcon = active ? \n    (arrowUpIcon || arrowIcon) : \n    (arrowDownIcon || arrowIcon);\n\n  return (\n    <MoreButtonStyled\n      button\n      onClick={onClick}\n      active={active ? 1 : 0}\n      themecolor={themeColor}\n      {...rest}\n    >\n      <Box sx={{ display: 'flex', alignItems: 'center' }}>\n        <NavIconStyled \n          active={active ? 1 : 0}\n          themecolor={themeColor}\n        >\n          {icon}\n        </NavIconStyled>\n        <NavTextStyled \n          primary={text} \n          active={active ? 1 : 0}\n          themecolor={themeColor}\n        />\n      </Box>\n      <Box className=\"arrow-icon\">\n        {ArrowIcon}\n      </Box>\n    </MoreButtonStyled>\n  );\n};\n\nexport default memo(MoreButton, areEqual); ","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10h5v-2h-5c-4.34 0-8-3.66-8-8s3.66-8 8-8 8 3.66 8 8v1.43c0 .79-.71 1.57-1.5 1.57s-1.5-.78-1.5-1.57V12c0-2.76-2.24-5-5-5s-5 2.24-5 5 2.24 5 5 5c1.38 0 2.64-.56 3.54-1.47.65.89 1.77 1.47 2.96 1.47 1.97 0 3.5-1.6 3.5-3.57V12c0-5.52-4.48-10-10-10m0 13c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3\"\n}), 'AlternateEmail');","import React, { useState, useEffect } from 'react';\nimport { \n  Box, \n  Dialog,\n  DialogContent,\n  DialogTitle,\n  Typography, \n  IconButton, \n  Avatar,\n  Divider,\n  CircularProgress,\n  Paper,\n  Skeleton,\n  Link,\n  useMediaQuery,\n  useTheme\n} from '@mui/material';\nimport { styled, alpha } from '@mui/material/styles';\nimport CloseIcon from '@mui/icons-material/Close';\nimport HistoryIcon from '@mui/icons-material/History';\nimport SwapHorizIcon from '@mui/icons-material/SwapHoriz';\nimport AlternateEmailIcon from '@mui/icons-material/AlternateEmail';\nimport PersonIcon from '@mui/icons-material/Person';\nimport AccountCircleIcon from '@mui/icons-material/AccountCircle';\nimport VerifiedIcon from '@mui/icons-material/Verified';\nimport axios from 'axios';\nimport { formatDate } from '../../utils/dateUtils';\n\nconst StyledDialogTitle = styled(DialogTitle)(({ theme }) => ({\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'space-between',\n  padding: theme.spacing(2),\n  background: theme.palette.mode === 'dark'\n    ? `linear-gradient(135deg, ${alpha('#121212', 0.9)} 0%, ${alpha('#1A1A1A', 0.85)} 100%)`\n    : `linear-gradient(135deg, ${alpha('#f5f5f5', 0.9)} 0%, ${alpha('#FAFAFA', 0.85)} 100%)`,\n  backdropFilter: 'blur(10px)',\n  borderBottom: `1px solid ${theme.palette.divider}`,\n}));\n\nconst StyledDialogContent = styled(DialogContent)(({ theme }) => ({\n  padding: theme.spacing(2),\n  background: theme.palette.mode === 'dark'\n    ? alpha('#121212', 0.9)\n    : alpha('#FFFFFF', 0.9),\n  backdropFilter: 'blur(8px)',\n  '&::-webkit-scrollbar': {\n    width: '4px',\n  },\n  '&::-webkit-scrollbar-track': {\n    background: 'transparent',\n  },\n  '&::-webkit-scrollbar-thumb': {\n    background: theme.palette.mode === 'dark'\n      ? 'rgba(255, 255, 255, 0.2)'\n      : 'rgba(0, 0, 0, 0.2)',\n    borderRadius: '4px',\n  },\n}));\n\nconst HistoryItem = styled(Paper)(({ theme }) => ({\n  display: 'flex',\n  alignItems: 'center',\n  padding: theme.spacing(1.5),\n  marginBottom: theme.spacing(1),\n  borderRadius: theme.shape.borderRadius,\n  background: theme.palette.mode === 'dark'\n    ? alpha(theme.palette.background.paper, 0.4)\n    : alpha(theme.palette.background.paper, 0.7),\n  transition: 'transform 0.2s ease',\n  backdropFilter: 'blur(4px)',\n  '&:hover': {\n    transform: 'translateY(-2px)',\n    boxShadow: '0 4px 10px rgba(0, 0, 0, 0.1)',\n  }\n}));\n\nconst OwnerBox = styled(Paper)(({ theme }) => ({\n  display: 'flex',\n  alignItems: 'center',\n  padding: theme.spacing(1.5),\n  marginBottom: theme.spacing(2),\n  borderRadius: theme.shape.borderRadius,\n  background: theme.palette.mode === 'dark'\n    ? alpha(theme.palette.primary.dark, 0.1)\n    : alpha(theme.palette.primary.light, 0.1),\n  backdropFilter: 'blur(4px)',\n  border: `1px solid ${theme.palette.mode === 'dark' \n    ? alpha(theme.palette.primary.main, 0.2)\n    : alpha(theme.palette.primary.main, 0.2)}`,\n  transition: 'all 0.2s ease',\n  '&:hover': {\n    boxShadow: `0 4px 12px ${alpha(theme.palette.primary.main, 0.15)}`,\n  }\n}));\n\n\nconst truncateText = (text, maxLength = 15) => {\n  if (!text) return '';\n  return text.length > maxLength ? text.substring(0, maxLength) + '...' : text;\n};\n\n\nconst usernameHistoryCache = {};\n\n\nconst userDataCache = {};\n\n\nconst loadCacheFromSessionStorage = () => {\n  try {\n    const historyCache = sessionStorage.getItem('usernameHistoryCache');\n    if (historyCache) {\n      Object.assign(usernameHistoryCache, JSON.parse(historyCache));\n    }\n    \n    const userCache = sessionStorage.getItem('userDataCache');\n    if (userCache) {\n      Object.assign(userDataCache, JSON.parse(userCache));\n    }\n  } catch (error) {\n    console.warn('Ошибка при загрузке кэша из sessionStorage:', error);\n  }\n};\n\n\nconst saveCacheToSessionStorage = () => {\n  try {\n    sessionStorage.setItem('usernameHistoryCache', JSON.stringify(usernameHistoryCache));\n    sessionStorage.setItem('userDataCache', JSON.stringify(userDataCache));\n  } catch (error) {\n    console.warn('Ошибка при сохранении кэша в sessionStorage:', error);\n  }\n};\n\n\nloadCacheFromSessionStorage();\n\nconst UsernameCard = ({ username, onClose, open }) => {\n  const [loading, setLoading] = useState(true);\n  const [history, setHistory] = useState(null);\n  const [error, setError] = useState(null);\n  const [userData, setUserData] = useState({});\n  \n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\n\n  useEffect(() => {\n    const fetchUsernameHistory = async () => {\n      if (!open || !username) return;\n      \n      try {\n        setLoading(true);\n        setError(null);\n        \n\n        const cacheKey = username.toLowerCase();\n        const currentTime = Date.now();\n        const cacheExpiration = 5 * 60 * 1000;\n        \n        let historyData;\n        \n\n        if (\n          usernameHistoryCache[cacheKey] && \n          currentTime - usernameHistoryCache[cacheKey].timestamp < cacheExpiration\n        ) {\n          console.log('Используем кэшированные данные истории для:', username);\n          historyData = usernameHistoryCache[cacheKey].data;\n          setHistory(historyData);\n          \n\n          const cachedUsers = {};\n          if (historyData.users) {\n            Object.keys(historyData.users).forEach(userId => {\n\n              userDataCache[userId] = historyData.users[userId];\n              cachedUsers[userId] = historyData.users[userId];\n            });\n            setUserData(cachedUsers);\n          }\n          \n          setLoading(false);\n          return;\n        }\n        \n\n        const response = await axios.get(`/api/username/history/${username}`);\n        \n        if (response.data && response.data.success) {\n          console.log('Получены данные истории юзернейма:', response.data);\n          historyData = response.data.data;\n          setHistory(historyData);\n          \n\n          usernameHistoryCache[cacheKey] = {\n            data: historyData,\n            timestamp: currentTime\n          };\n          \n\n          if (historyData.users) {\n            Object.keys(historyData.users).forEach(userId => {\n              userDataCache[userId] = historyData.users[userId];\n            });\n            setUserData(historyData.users);\n          }\n          \n\n          saveCacheToSessionStorage();\n        } else {\n          throw new Error(response.data?.message || 'Не удалось получить данные об юзернейме');\n        }\n      } catch (err) {\n        console.error('Ошибка при загрузке истории юзернейма:', err);\n        setError('Не удалось загрузить информацию о юзернейме');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchUsernameHistory();\n  }, [username, open]);\n  \n\n  const renderUserInfo = (userId, isFirst = false, size = 'small') => {\n    const user = userData[userId];\n    const isSmall = size === 'small';\n    const avatarSize = isSmall ? 24 : 36;\n    \n    if (!user) {\n      return isFirst ? (\n        <Typography variant=\"body2\" fontWeight=\"medium\">\n          Первое приобретение: ID {userId}\n        </Typography>\n      ) : (\n        <Typography variant=\"body2\" fontWeight=\"medium\">\n          ID {userId}\n        </Typography>\n      );\n    }\n    \n    return (\n      <Box sx={{ display: 'flex', alignItems: 'center' }}>\n        {user.photo ? (\n          <Avatar \n            src={user.photo}\n            sx={{ \n              width: avatarSize, \n              height: avatarSize, \n              mr: 0.5\n            }}\n          />\n        ) : (\n          <Avatar \n            sx={{ \n              width: avatarSize, \n              height: avatarSize, \n              mr: 0.5, \n              fontSize: isSmall ? '0.8rem' : '1rem',\n              bgcolor: 'primary.main'\n            }}\n          >\n            {user.name?.charAt(0) || user.username?.charAt(0) || \"?\"}\n          </Avatar>\n        )}\n        <Link\n          href={`/profile/${userId}`}\n          underline=\"hover\"\n          color=\"text.primary\"\n          sx={{ \n            fontWeight: \"medium\",\n            display: 'flex',\n            alignItems: 'center',\n            maxWidth: isSmall ? 70 : 120 \n          }}\n        >\n          <Typography \n            noWrap \n            sx={{ \n              maxWidth: isSmall ? 60 : 100, \n              display: 'block',\n              fontSize: isSmall ? '0.85rem' : '1rem'\n            }}\n          >\n            {truncateText(user.username || user.name, isSmall ? 10 : 15)}\n          </Typography>\n          {user.is_verified && (\n            <VerifiedIcon \n              color=\"primary\" \n              sx={{ \n                ml: 0.5, \n                fontSize: isSmall ? '0.9rem' : '1.1rem'\n              }} \n            />\n          )}\n        </Link>\n      </Box>\n    );\n  };\n\n  return (\n    <Dialog\n      open={open}\n      onClose={onClose}\n      maxWidth=\"xs\"\n      fullWidth\n      fullScreen={isMobile}\n      PaperProps={{\n        elevation: 24,\n        sx: {\n          borderRadius: isMobile ? 0 : 2,\n          overflow: 'hidden',\n          boxShadow: '0 10px 30px rgba(0, 0, 0, 0.4)',\n          background: 'transparent',\n          maxHeight: isMobile ? '100%' : '90vh'\n        }\n      }}\n    >\n      <StyledDialogTitle>\n        <Box sx={{ display: 'flex', alignItems: 'center' }}>\n          <AlternateEmailIcon \n            sx={{ \n              mr: 1, \n              color: 'primary.main',\n              fontSize: '1.5rem'\n            }} \n          />\n          <Typography variant=\"h6\" sx={{ fontWeight: 'bold' }}>\n            @{username}\n          </Typography>\n        </Box>\n        <IconButton size=\"small\" onClick={onClose} edge=\"end\">\n          <CloseIcon fontSize=\"small\" />\n        </IconButton>\n      </StyledDialogTitle>\n\n      <StyledDialogContent>\n        {loading ? (\n          <Box sx={{ display: 'flex', justifyContent: 'center', p: 3 }}>\n            <CircularProgress size={30} />\n          </Box>\n        ) : error ? (\n          <Typography color=\"error\" sx={{ p: 2 }}>\n            {error}\n          </Typography>\n        ) : (\n          <>\n            {history?.current_owner_id && (\n              <OwnerBox>\n                {renderUserInfo(history.current_owner_id, false, 'large')}\n                <Box sx={{ ml: 1 }}>\n                  <Typography variant=\"body2\" color=\"text.secondary\" fontSize=\"0.75rem\">\n                    Текущий владелец\n                  </Typography>\n                </Box>\n              </OwnerBox>\n            )}\n            \n            <Divider sx={{ my: 2 }} />\n            \n            <Typography \n              variant=\"subtitle1\" \n              sx={{ \n                fontWeight: 'medium', \n                mb: 1.5, \n                display: 'flex', \n                alignItems: 'center' \n              }}\n            >\n              <HistoryIcon sx={{ mr: 1, fontSize: '1.2rem', color: 'primary.main' }} />\n              История владения\n            </Typography>\n            \n            {history?.ownership_history?.length > 0 ? (\n              <Box sx={{ mt: 1 }}>\n                {history.ownership_history.slice().reverse().map((item, index) => (\n                  <HistoryItem key={index} elevation={0}>\n                    <SwapHorizIcon sx={{ mr: 1.5, color: 'primary.main' }} />\n                    <Box sx={{ flex: 1 }}>\n                      <Box sx={{ display: 'flex', alignItems: 'center' }}>\n                        {item.seller_id ? (\n                          <>\n                            {renderUserInfo(item.seller_id)}\n                            <Typography sx={{ mx: 0.5 }}>→</Typography>\n                            {renderUserInfo(item.buyer_id)}\n                          </>\n                        ) : (\n                          renderUserInfo(item.buyer_id, true)\n                        )}\n                      </Box>\n                      <Box sx={{ display: 'flex', justifyContent: 'space-between', mt: 0.5 }}>\n                        <Typography variant=\"caption\" color=\"text.secondary\">\n                          {formatDate(item.timestamp)}\n                        </Typography>\n                        <Typography \n                          variant=\"caption\" \n                          sx={{ \n                            fontWeight: 'bold',\n                            color: 'primary.main' \n                          }}\n                        >\n                          {item.price} баллов\n                        </Typography>\n                      </Box>\n                    </Box>\n                  </HistoryItem>\n                ))}\n              </Box>\n            ) : (\n              <Typography variant=\"body2\" color=\"text.secondary\" sx={{ p: 1, textAlign: 'center' }}>\n                История владения недоступна\n              </Typography>\n            )}\n          </>\n        )}\n      </StyledDialogContent>\n    </Dialog>\n  );\n};\n\nexport default UsernameCard; ","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M4 6h18V4H4c-1.1 0-2 .9-2 2v11H0v3h14v-3H4zm19 2h-6c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h6c.55 0 1-.45 1-1V9c0-.55-.45-1-1-1m-1 9h-4v-7h4z\"\n}), 'Devices');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M20 18c1.1 0 1.99-.9 1.99-2L22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2H0v2h24v-2zM4 6h16v10H4z\"\n}), 'Computer');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M16 1H8C6.34 1 5 2.34 5 4v16c0 1.66 1.34 3 3 3h8c1.66 0 3-1.34 3-3V4c0-1.66-1.34-3-3-3m-2 20h-4v-1h4zm3.25-3H6.75V4h10.5z\"\n}), 'PhoneAndroid');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M20 18c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2H0v2h24v-2zM4 6h16v10H4z\"\n}), 'Laptop');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z\"\n}), 'ReportProblem');","import React, { useState, useEffect } from 'react';\nimport { Dialog, DialogTitle, DialogContent, DialogActions, Button, Typography, Box, IconButton, List, ListItem, ListItemText, ListItemIcon, Divider, CircularProgress, Slide, Snackbar, Alert, useMediaQuery, useTheme } from '@mui/material';\nimport CloseIcon from '@mui/icons-material/Close';\nimport DevicesIcon from '@mui/icons-material/Devices';\nimport ComputerIcon from '@mui/icons-material/Computer';\nimport PhoneAndroidIcon from '@mui/icons-material/PhoneAndroid';\nimport TabletIcon from '@mui/icons-material/Tablet';\nimport LaptopIcon from '@mui/icons-material/Laptop';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport CheckCircleIcon from '@mui/icons-material/CheckCircle';\nimport ReportProblemIcon from '@mui/icons-material/ReportProblem';\nimport axios from 'axios';\n\n\naxios.defaults.headers.delete['Content-Type'] = 'application/json';\n\nconst Transition = React.forwardRef(function Transition(props, ref) {\n  return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\nconst getDeviceIcon = (deviceType) => {\n\n  const baseStyle = { \n    color: '#d0bcff',\n    filter: 'drop-shadow(0px 0px 3px rgba(208, 188, 255, 0.3))'\n  };\n  \n  switch (deviceType.toLowerCase()) {\n    case 'android':\n      return <PhoneAndroidIcon style={baseStyle} />;\n    case 'ios':\n      return <PhoneAndroidIcon style={baseStyle} />;\n    case 'mac os':\n      return <LaptopIcon style={baseStyle} />;\n    case 'windows':\n      return <ComputerIcon style={baseStyle} />;\n    case 'linux':\n      return <ComputerIcon style={baseStyle} />;\n    default:\n      return <DevicesIcon style={baseStyle} />;\n  }\n};\n\nconst getBrowserColor = (browser) => {\n\n  return '#d0bcff';\n};\n\nconst formatLastActive = (dateString) => {\n  if (!dateString || dateString === \"Неизвестно\") return \"Неизвестно\";\n  \n  try {\n\n    let date;\n    \n\n    if (dateString.includes('T') || dateString.includes('Z')) {\n\n      date = new Date(dateString);\n    } \n\n    else if (dateString.includes('.')) {\n      const [datePart, timePart] = dateString.split(' ');\n      const [day, month, year] = datePart.split('.');\n      \n\n      date = new Date(`${year}-${month}-${day}T${timePart}Z`);\n    } \n\n    else {\n      date = new Date(dateString);\n    }\n    \n\n    const now = new Date();\n    \n\n    const diffMs = now - date;\n    \n\n    const diffMins = Math.floor(diffMs / 60000);\n    const diffHours = Math.floor(diffMins / 60);\n    const diffDays = Math.floor(diffHours / 24);\n    \n\n    if (diffMins < 1) return 'Только что';\n    if (diffMins < 60) return `${diffMins} мин. назад`;\n    if (diffHours < 24) return `${diffHours} ч. назад`;\n    if (diffDays < 7) return `${diffDays} дн. назад`;\n    \n\n    const options = {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit',\n      hour12: false\n    };\n    \n\n    return date.toLocaleString('ru-RU', options);\n  } catch (e) {\n    console.error('Error formatting date:', e, dateString);\n    return dateString;\n  }\n};\n\nconst SessionManager = ({ open, onClose }) => {\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\n  const [sessions, setSessions] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [alert, setAlert] = useState({ open: false, message: '', severity: 'success' });\n  const [confirmDialog, setConfirmDialog] = useState({ open: false, sessionId: null });\n\n  const fetchSessions = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const response = await axios.get('/api/auth/sessions');\n      if (response.data.success) {\n        setSessions(response.data.sessions || []);\n      } else {\n        setError(response.data.error || 'Не удалось загрузить сессии');\n      }\n    } catch (err) {\n      setError(err.response?.data?.error || 'Ошибка при загрузке сессий');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (open) {\n      fetchSessions();\n    }\n  }, [open]);\n\n  const handleCloseAlert = () => {\n    setAlert({ ...alert, open: false });\n  };\n\n  const handleDeleteSession = async (sessionId) => {\n    try {\n      setLoading(true);\n\n      const response = await fetch(`/api/auth/sessions/${sessionId}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({})\n      });\n      \n      const data = await response.json();\n      \n      if (data.success) {\n        setAlert({ \n          open: true, \n          message: 'Сессия успешно удалена', \n          severity: 'success' \n        });\n        fetchSessions();\n      } else {\n        setAlert({ \n          open: true, \n          message: data.error || 'Не удалось удалить сессию', \n          severity: 'error' \n        });\n      }\n    } catch (err) {\n      console.error('Error deleting session:', err);\n      setAlert({ \n        open: true, \n        message: err.message || 'Ошибка при удалении сессии', \n        severity: 'error' \n      });\n    } finally {\n      setLoading(false);\n      setConfirmDialog({ open: false, sessionId: null });\n    }\n  };\n\n  const handleDeleteAllSessions = async () => {\n    try {\n      setLoading(true);\n\n      const response = await fetch('/api/auth/sessions', {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ delete_all: true })\n      });\n      \n      const data = await response.json();\n      \n      if (data.success) {\n        setAlert({ \n          open: true, \n          message: 'Все другие сессии успешно удалены', \n          severity: 'success' \n        });\n        fetchSessions();\n      } else {\n        setAlert({ \n          open: true, \n          message: data.error || 'Не удалось удалить сессии', \n          severity: 'error' \n        });\n      }\n    } catch (err) {\n      console.error('Error deleting all sessions:', err);\n      setAlert({ \n        open: true, \n        message: err.message || 'Ошибка при удалении сессий', \n        severity: 'error' \n      });\n    } finally {\n      setLoading(false);\n      setConfirmDialog({ open: false, sessionId: null });\n    }\n  };\n\n  const openDeleteConfirm = (sessionId) => {\n    setConfirmDialog({ open: true, sessionId });\n  };\n\n  const currentSession = sessions.find(s => s.is_current);\n\n  return (\n    <>\n      <Dialog\n        open={open}\n        TransitionComponent={Transition}\n        keepMounted\n        onClose={onClose}\n        maxWidth=\"sm\"\n        fullWidth\n        fullScreen={isMobile}\n        PaperProps={{\n          style: {\n            borderRadius: isMobile ? 0 : 16,\n            backgroundColor: '#0A0A0A',\n            color: '#fff',\n            width: '100%',\n            maxWidth: isMobile ? '100%' : '600px'\n          }\n        }}\n      >\n        <DialogTitle sx={{ \n          display: 'flex', \n          justifyContent: 'space-between', \n          alignItems: 'center', \n          borderBottom: '1px solid #222',\n          backgroundColor: '#0F0F0F',\n          py: 2,\n          px: isMobile ? 2 : 3\n        }}>\n          <Typography variant=\"h6\">Мои сессии</Typography>\n          <IconButton edge=\"end\" color=\"inherit\" onClick={onClose} aria-label=\"close\">\n            <CloseIcon />\n          </IconButton>\n        </DialogTitle>\n        \n        <DialogContent sx={{ \n          p: 0, \n          backgroundColor: '#0F0F0F', \n          pb: 0,\n          overflowX: 'hidden'\n        }}>\n          {loading ? (\n            <Box sx={{ display: 'flex', justifyContent: 'center', p: 4 }}>\n              <CircularProgress color=\"secondary\" />\n            </Box>\n          ) : error ? (\n            <Box sx={{ p: 3, textAlign: 'center' }}>\n              <ReportProblemIcon color=\"error\" fontSize=\"large\" />\n              <Typography color=\"error\" sx={{ mt: 1 }}>{error}</Typography>\n              <Button \n                variant=\"outlined\" \n                color=\"secondary\" \n                onClick={fetchSessions}\n                sx={{ mt: 2 }}\n              >\n                Повторить\n              </Button>\n            </Box>\n          ) : (\n            <>\n              {currentSession && (\n                <Box sx={{ mb: 2, px: 1 }}>\n                  <Typography variant=\"subtitle1\" sx={{ p: 2, pb: 1, fontWeight: 'bold' }}>\n                    Текущая сессия\n                  </Typography>\n                  <List disablePadding>\n                    <ListItem \n                      sx={{ \n                        backgroundColor: 'rgba(208, 188, 255, 0.08)', \n                        mb: 1,\n                        mx: 1,\n                        borderRadius: 2,\n                        position: 'relative',\n                        '&::after': {\n                          content: '\"\"',\n                          position: 'absolute',\n                          width: 8,\n                          height: 8,\n                          borderRadius: '50%',\n                          backgroundColor: '#4caf50',\n                          right: 16,\n                          top: 16\n                        }\n                      }}\n                    >\n                      <ListItemIcon sx={{ minWidth: { xs: 36, sm: 56 } }}>\n                        {getDeviceIcon(currentSession.device)}\n                      </ListItemIcon>\n                      <ListItemText \n                        primary={\n                          <Box component=\"span\" sx={{ display: 'flex', alignItems: 'center' }}>\n                            <Typography variant=\"body1\" component=\"span\" sx={{ color: '#d0bcff' }}>\n                              {currentSession.browser}\n                            </Typography>\n                            <CheckCircleIcon \n                              fontSize=\"small\" \n                              sx={{ ml: 1, color: '#4caf50' }} \n                            />\n                          </Box>\n                        }\n                        secondary={\n                          <Typography variant=\"body2\" sx={{ color: '#B0B0B0' }}>\n                            {currentSession.device} • Активно сейчас\n                          </Typography>\n                        }\n                      />\n                    </ListItem>\n                  </List>\n                </Box>\n              )}\n\n              <Typography variant=\"subtitle1\" sx={{ p: 2, pb: 1, fontWeight: 'bold' }}>\n                Все сессии {sessions.length > 0 && `(${sessions.length})`}\n              </Typography>\n\n              {sessions.length === 0 ? (\n                <Box sx={{ p: 3, textAlign: 'center' }}>\n                  <Typography color=\"text.secondary\">Нет активных сессий</Typography>\n                </Box>\n              ) : (\n                <List \n                  disablePadding\n                  sx={{ \n                    maxHeight: isMobile ? 'calc(100vh - 260px)' : '400px', \n                    overflowY: 'auto', \n                    overflowX: 'hidden',\n                    pb: 0,\n                    '&::-webkit-scrollbar': {\n                      width: '8px',\n                    },\n                    '&::-webkit-scrollbar-track': {\n                      backgroundColor: '#111',\n                    },\n                    '&::-webkit-scrollbar-thumb': {\n                      backgroundColor: '#333',\n                      borderRadius: '4px',\n                    }\n                  }}\n                >\n                  {sessions.map((session) => (\n                    <Box \n                      key={session.id}\n                      sx={{ \n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'space-between',\n                        backgroundColor: session.is_current ? 'rgba(208, 188, 255, 0.08)' : 'transparent',\n                        mx: 2,\n                        mb: 1,\n                        borderRadius: 2,\n                        px: 2,\n                        py: 1,\n                        '&:hover': {\n                          backgroundColor: 'rgba(208, 188, 255, 0.05)'\n                        }\n                      }}\n                    >\n                      <Box sx={{ display: 'flex', alignItems: 'center', width: 'calc(100% - 40px)' }}>\n                        <Box sx={{ \n                          display: 'flex', \n                          alignItems: 'center', \n                          justifyContent: 'center',\n                          minWidth: { xs: 36, sm: 48 } \n                        }}>\n                          {getDeviceIcon(session.device)}\n                        </Box>\n                        \n                        <Box sx={{ ml: 1, width: 'calc(100% - 48px)' }}>\n                          <Box sx={{ display: 'flex', alignItems: 'center', flexWrap: 'wrap' }}>\n                            <Typography \n                              variant=\"body1\" \n                              sx={{ \n                                color: getBrowserColor(session.browser)\n                              }}\n                            >\n                              {session.browser}\n                            </Typography>\n                            {session.is_current && (\n                              <Typography \n                                variant=\"caption\" \n                                sx={{ \n                                  ml: 1, \n                                  px: 1, \n                                  py: 0.5, \n                                  borderRadius: 1, \n                                  backgroundColor: 'rgba(208, 188, 255, 0.15)',\n                                  color: '#d0bcff'\n                                }}\n                              >\n                                Текущая\n                              </Typography>\n                            )}\n                          </Box>\n                          \n                          <Typography \n                            variant=\"body2\" \n                            sx={{ \n                              color: '#B0B0B0', \n                              whiteSpace: 'normal', \n                              wordBreak: 'break-word',\n                              fontSize: { xs: '0.75rem', sm: '0.875rem' }\n                            }}\n                          >\n                            {session.device} • {session.ip_address} • {formatLastActive(session.last_activity)}\n                          </Typography>\n                        </Box>\n                      </Box>\n                      \n                      {!session.is_current && (\n                        <IconButton \n                          size=\"small\"\n                          aria-label=\"delete\"\n                          onClick={() => openDeleteConfirm(session.id)}\n                          sx={{ \n                            color: '#ff5252',\n                            width: 32,\n                            height: 32,\n                            '&:hover': {\n                              backgroundColor: 'rgba(208, 188, 255, 0.08)'\n                            }\n                          }}\n                        >\n                          <DeleteIcon fontSize={isMobile ? 'small' : 'medium'} />\n                        </IconButton>\n                      )}\n                    </Box>\n                  ))}\n                </List>\n              )}\n            </>\n          )}\n        </DialogContent>\n        \n        <DialogActions sx={{ \n          justifyContent: 'space-between', \n          p: 2, \n          pt: 3,\n          backgroundColor: '#0F0F0F',\n          borderTop: '1px solid #222',\n          position: isMobile ? 'sticky' : 'relative',\n          bottom: 0,\n          width: '100%'\n        }}>\n          <Button \n            onClick={onClose} \n            variant=\"outlined\"\n            sx={{ \n              borderColor: 'rgba(208, 188, 255, 0.3)',\n              color: '#fff',\n              '&:hover': {\n                borderColor: '#d0bcff'\n              }\n            }}\n            disabled={loading}\n          >\n            Закрыть\n          </Button>\n          \n          <Button \n            onClick={handleDeleteAllSessions}\n            variant=\"contained\"\n            startIcon={<DeleteIcon />}\n            disabled={loading || sessions.length <= 1}\n            sx={{\n              backgroundColor: 'rgba(208, 188, 255, 0.1)',\n              color: '#d0bcff',\n              boxShadow: '0 4px 12px rgba(208, 188, 255, 0.1)',\n              border: '1px solid rgba(208, 188, 255, 0.3)',\n              '&:hover': {\n                backgroundColor: 'rgba(208, 188, 255, 0.2)',\n              }\n            }}\n          >\n            Завершить все сессии\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      <Dialog\n        open={confirmDialog.open}\n        onClose={() => setConfirmDialog({ open: false, sessionId: null })}\n        aria-labelledby=\"alert-dialog-title\"\n        PaperProps={{\n          style: {\n            borderRadius: 16,\n            backgroundColor: '#0F0F0F',\n            color: '#fff'\n          }\n        }}\n      >\n        <DialogTitle id=\"alert-dialog-title\" sx={{ borderBottom: '1px solid #222' }}>\n          Подтверждение действия\n        </DialogTitle>\n        <DialogContent sx={{ pt: 3 }}>\n          <Typography>\n            Вы уверены, что хотите завершить эту сессию? Устройство будет отключено от аккаунта.\n          </Typography>\n        </DialogContent>\n        <DialogActions sx={{ borderTop: '1px solid #222' }}>\n          <Button \n            onClick={() => setConfirmDialog({ open: false, sessionId: null })} \n            sx={{ \n              color: '#fff' \n            }}\n          >\n            Отмена\n          </Button>\n          <Button \n            onClick={() => handleDeleteSession(confirmDialog.sessionId)} \n            variant=\"contained\"\n            sx={{\n              backgroundColor: 'rgba(208, 188, 255, 0.1)',\n              color: '#d0bcff',\n              border: '1px solid rgba(208, 188, 255, 0.3)',\n              '&:hover': {\n                backgroundColor: 'rgba(208, 188, 255, 0.2)',\n              }\n            }}\n            autoFocus\n          >\n            Завершить сессию\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      <Snackbar \n        open={alert.open} \n        autoHideDuration={6000} \n        onClose={handleCloseAlert}\n        anchorOrigin={{ vertical: 'top', horizontal: 'center' }}\n        sx={{ \n          marginBottom: isMobile ? '70px' : '10px',\n          zIndex: 9999\n        }}\n      >\n        <Alert onClose={handleCloseAlert} severity={alert.severity} sx={{ \n          width: '100%',\n          backgroundColor: alert.severity === 'success' ? 'rgb(41, 33, 58)' : '#271919',\n          color: alert.severity === 'success' ? '#d0bcff' : '#fff',\n          border: alert.severity === 'success' ? '1px solid rgb(71, 55, 110)' : 'none'\n        }}>\n          {alert.message}\n        </Alert>\n      </Snackbar>\n    </>\n  );\n};\n\nexport default SessionManager; ","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M18 20H4V6h9V4H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-9h-2zm-7.79-3.17-1.96-2.36L5.5 18h11l-3.54-4.71zM20 4V1h-2v3h-3c.01.01 0 2 0 2h3v2.99c.01.01 2 0 2 0V6h3V4z\"\n}), 'AddPhotoAlternateOutlined');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"m12 3 .01 10.55c-.59-.34-1.27-.55-2-.55C7.79 13 6 14.79 6 17s1.79 4 4.01 4S14 19.21 14 17V7h4V3zm-1.99 16c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2\"\n}), 'MusicNoteOutlined');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M14 10H3v2h11zm0-4H3v2h11zm4 8v-4h-2v4h-4v2h4v4h2v-4h4v-2zM3 16h7v-2H3z\"\n}), 'PlaylistAdd');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M7 11v2h10v-2zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8\"\n}), 'RemoveCircleOutline');","import React, { useState, useEffect, useCallback, useContext } from 'react';\nimport { \n  Box, \n  Dialog,\n  DialogContent,\n  DialogTitle,\n  Typography,\n  Button,\n  TextField,\n  IconButton,\n  styled,\n  useTheme,\n  useMediaQuery,\n  Divider,\n  CircularProgress,\n  Tabs,\n  Tab,\n  List,\n  ListItem,\n  ListItemText,\n  ListItemAvatar,\n  ListItemSecondaryAction,\n  Avatar,\n  FormControlLabel,\n  Switch,\n  Paper,\n  Skeleton,\n  Snackbar,\n  Alert,\n  alpha\n} from '@mui/material';\nimport { ThemeSettingsContext } from '../../App';\nimport CloseIcon from '@mui/icons-material/Close';\nimport AddPhotoAlternateOutlinedIcon from '@mui/icons-material/AddPhotoAlternateOutlined';\nimport MusicNoteOutlinedIcon from '@mui/icons-material/MusicNoteOutlined';\nimport PlaylistAddIcon from '@mui/icons-material/PlaylistAdd';\nimport RemoveCircleOutlineIcon from '@mui/icons-material/RemoveCircleOutline';\nimport SearchIcon from '@mui/icons-material/Search';\nimport CheckCircleIcon from '@mui/icons-material/CheckCircle';\nimport AddIcon from '@mui/icons-material/Add';\nimport SaveIcon from '@mui/icons-material/Save';\nimport DeleteIcon from '@mui/icons-material/Delete';\n\n\nconst FullScreenDialog = styled(Dialog)(({ theme }) => ({\n  '&&': {\n    '& .MuiDialog-paper': {\n      [theme.breakpoints.down('sm')]: {\n        borderRadius: '0 !important',\n        maxWidth: '100% !important',\n        maxHeight: '100% !important',\n        width: '100% !important',\n        height: '100% !important',\n        margin: '0 !important',\n      },\n      [theme.breakpoints.up('sm')]: {\n        borderRadius: `${theme.spacing(2)}px !important`,\n        maxWidth: '800px !important',\n        maxHeight: '80vh !important',\n        width: '800px !important',\n        height: '80vh !important',\n        margin: '40px auto !important',\n      },\n      backgroundColor: theme.palette.mode === 'light'\n        ? theme.palette.background.paper\n        : theme.palette.mode === 'contrast'\n          ? '#101010'\n          : '#121212',\n      backgroundImage: 'none !important',\n      overflow: 'hidden !important',\n    }\n  }\n}));\n\nconst DialogHeader = styled(DialogTitle)(({ theme }) => ({\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'space-between',\n  padding: theme.spacing(2, 3),\n  borderBottom: `1px solid ${theme.palette.divider}`,\n  color: theme.palette.mode === 'light' ? theme.palette.text.primary : '#fff',\n}));\n\nconst CoverUploadBox = styled(Box)(({ theme }) => ({\n  width: '100%',\n  aspectRatio: '1/1',\n  borderRadius: theme.spacing(2),\n  border: `2px dashed ${theme.palette.divider}`,\n  display: 'flex',\n  flexDirection: 'column',\n  alignItems: 'center',\n  justifyContent: 'center',\n  cursor: 'pointer',\n  transition: 'all 0.2s ease',\n  backgroundColor: theme.palette.mode === 'light'\n    ? alpha(theme.palette.grey[300], 0.3)\n    : theme.palette.mode === 'contrast'\n      ? 'rgba(0, 0, 0, 0.4)'\n      : 'rgba(0, 0, 0, 0.3)',\n  '&:hover': {\n    backgroundColor: theme.palette.mode === 'light'\n      ? alpha(theme.palette.grey[300], 0.5)\n      : theme.palette.mode === 'contrast'\n        ? 'rgba(0, 0, 0, 0.6)'\n        : 'rgba(0, 0, 0, 0.5)',\n    borderColor: theme.palette.primary.main,\n  },\n}));\n\nconst CoverPreview = styled(Box)(({ theme }) => ({\n  width: '100%',\n  aspectRatio: '1/1',\n  borderRadius: theme.spacing(2),\n  overflow: 'hidden',\n  position: 'relative',\n  boxShadow: '0 4px 12px rgba(0, 0, 0, 0.1)',\n}));\n\nconst TrackSearchInput = styled(TextField)(({ theme }) => ({\n  marginBottom: theme.spacing(2),\n  '& .MuiOutlinedInput-root': {\n    borderRadius: theme.spacing(3),\n    backgroundColor: theme.palette.mode === 'light'\n      ? alpha(theme.palette.grey[300], 0.2)\n      : theme.palette.mode === 'contrast'\n        ? 'rgba(255, 255, 255, 0.03)'\n        : 'rgba(255, 255, 255, 0.05)',\n  },\n}));\n\nconst TrackItem = styled(ListItem)(({ theme, selected, isPlaying }) => ({\n  borderRadius: theme.spacing(1),\n  marginBottom: theme.spacing(0.5),\n  padding: theme.spacing(1, 1.5),\n  backgroundColor: isPlaying\n    ? alpha(theme.palette.primary.main, theme.palette.mode === 'light' ? 0.15 : 0.25)\n    : selected \n      ? alpha(theme.palette.primary.main, theme.palette.mode === 'light' ? 0.08 : 0.16)\n      : 'transparent',\n  '&:hover': {\n    backgroundColor: isPlaying\n      ? alpha(theme.palette.primary.main, theme.palette.mode === 'light' ? 0.2 : 0.3)\n      : theme.palette.mode === 'light' \n        ? alpha(theme.palette.grey[300], 0.3)\n        : alpha(theme.palette.common.white, 0.08),\n  },\n}));\n\nconst TrackAvatar = styled(Avatar)(({ theme }) => ({\n  width: 36,\n  height: 36,\n  borderRadius: theme.spacing(1),\n}));\n\nconst ScrollableContent = styled(Box)(({ theme }) => ({\n  overflow: 'auto',\n  maxHeight: 'calc(100% - 48px)',\n  padding: theme.spacing(0, 3, 3, 3),\n  '&::-webkit-scrollbar': {\n    width: '6px',\n  },\n  '&::-webkit-scrollbar-track': {\n    backgroundColor: theme.palette.mode === 'light' \n      ? alpha(theme.palette.grey[300], 0.3)\n      : alpha(theme.palette.common.white, 0.05),\n    borderRadius: '3px',\n  },\n  '&::-webkit-scrollbar-thumb': {\n    backgroundColor: theme.palette.mode === 'light' \n      ? alpha(theme.palette.grey[500], 0.4)\n      : alpha(theme.palette.common.white, 0.2),\n    borderRadius: '3px',\n  },\n}));\n\nconst ActionButton = styled(Button)(({ theme }) => ({\n  borderRadius: theme.spacing(3),\n  padding: theme.spacing(1, 3),\n  textTransform: 'none',\n  boxShadow: 'none',\n}));\n\nconst PlayingIndicator = styled(Box)(({ theme }) => ({\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'center',\n  color: theme.palette.primary.main,\n  marginRight: theme.spacing(1),\n  animation: 'pulse 1.5s infinite ease-in-out',\n  '@keyframes pulse': {\n    '0%': { opacity: 0.6 },\n    '50%': { opacity: 1 },\n    '100%': { opacity: 0.6 }\n  }\n}));\n\nconst PlaylistModal = ({ \n  open, \n  onClose, \n  playlist = null, \n  onSave,\n  onAddTracks,\n  onRemoveTrack,\n  onDelete,\n  isLoading = false,\n  nowPlaying = null\n}) => {\n  const theme = useTheme();\n  const { themeSettings } = useContext(ThemeSettingsContext);\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\n  const isVeryNarrow = useMediaQuery('(max-width:360px)');\n  const [activeTab, setActiveTab] = useState(0);\n  const [name, setName] = useState('');\n  const [description, setDescription] = useState('');\n  const [isPublic, setIsPublic] = useState(true);\n  const [coverFile, setCoverFile] = useState(null);\n  const [coverPreview, setCoverPreview] = useState('');\n  const [selectedTracks, setSelectedTracks] = useState([]);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [playlistTracks, setPlaylistTracks] = useState([]);\n  const [isSearching, setIsSearching] = useState(false);\n  const [notification, setNotification] = useState({ open: false, message: '', severity: 'success' });\n  \n  \n  const isEditing = !!playlist;\n\n  \n  useEffect(() => {\n    if (open && playlist) {\n      \n      setName(playlist.name || '');\n      setDescription(playlist.description || '');\n      setIsPublic(playlist.is_public !== false);\n      setCoverPreview(playlist.cover_url || playlist.cover_image || '');\n      setPlaylistTracks(playlist.tracks || []);\n      setSelectedTracks([]);\n    } else if (open) {\n      \n      setName('');\n      setDescription('');\n      setIsPublic(true);\n      setCoverFile(null);\n      setCoverPreview('');\n      setSelectedTracks([]);\n      setPlaylistTracks([]);\n    }\n    setActiveTab(0);\n  }, [open, playlist]);\n\n  \n  const handleCoverSelect = (event) => {\n    const file = event.target.files[0];\n    if (file) {\n      setCoverFile(file);\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setCoverPreview(reader.result);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  \n  const searchTracks = useCallback(async (query) => {\n    if (!query || query.length < 2) {\n      setSearchResults([]);\n      return;\n    }\n\n    setIsSearching(true);\n    try {\n      const response = await fetch(`/api/music/search?query=${encodeURIComponent(query)}`);\n      const data = await response.json();\n      setSearchResults(data || []);\n    } catch (error) {\n      console.error('Error searching tracks:', error);\n      setNotification({\n        open: true,\n        message: 'Ошибка при поиске треков',\n        severity: 'error'\n      });\n    } finally {\n      setIsSearching(false);\n    }\n  }, []);\n\n  \n  useEffect(() => {\n    const timer = setTimeout(() => {\n      searchTracks(searchQuery);\n    }, 300);\n    return () => clearTimeout(timer);\n  }, [searchQuery, searchTracks]);\n\n  \n  const toggleTrackSelection = (track) => {\n    setSelectedTracks(prev => {\n      const isSelected = prev.some(t => t.id === track.id);\n      if (isSelected) {\n        return prev.filter(t => t.id !== track.id);\n      } else {\n        return [...prev, track];\n      }\n    });\n  };\n\n  \n  const handleSave = async () => {\n    if (!name.trim()) {\n      setNotification({\n        open: true,\n        message: 'Название плейлиста обязательно',\n        severity: 'error'\n      });\n      return;\n    }\n\n    const formData = new FormData();\n    formData.append('name', name);\n    formData.append('description', description);\n    formData.append('is_public', isPublic.toString());\n    \n    if (coverFile) {\n      formData.append('cover', coverFile);\n    }\n\n    if (!isEditing) {\n      \n      const trackIds = selectedTracks.map(track => track.id);\n      formData.append('track_ids', JSON.stringify(trackIds));\n    }\n\n    console.log('Sending playlist data to API:', {\n      name,\n      description,\n      isPublic,\n      hasCover: !!coverFile,\n      trackCount: !isEditing ? selectedTracks.length : null\n    });\n\n    onSave(formData, isEditing ? playlist.id : null);\n  };\n\n  \n  const handleAddTracks = () => {\n    if (selectedTracks.length === 0) {\n      setNotification({\n        open: true,\n        message: 'Выберите треки для добавления',\n        severity: 'info'\n      });\n      return;\n    }\n\n    const trackIds = selectedTracks.map(track => track.id);\n    onAddTracks(playlist.id, trackIds);\n    setSelectedTracks([]);\n    setActiveTab(0); \n  };\n\n  \n  const handleRemoveTrack = (trackId) => {\n    onRemoveTrack(playlist.id, trackId);\n  };\n\n  \n  const handleCloseNotification = () => {\n    setNotification({ ...notification, open: false });\n  };\n\n  \n  const isTrackInPlaylist = (trackId) => {\n    return playlistTracks.some(track => track.id === trackId);\n  };\n\n  \n  const isTrackPlaying = (track) => {\n    return nowPlaying && nowPlaying.id === track.id;\n  };\n\n  return (\n    <FullScreenDialog\n      open={open}\n      onClose={onClose}\n      fullScreen={false}\n      maxWidth={false}\n      fullWidth={false}\n    >\n      <DialogHeader>\n        <Typography variant=\"h6\" sx={{ fontWeight: 600 }}>\n          {isEditing ? 'Редактировать плейлист' : 'Создать плейлист'}\n        </Typography>\n        <IconButton edge=\"end\" color=\"inherit\" onClick={onClose} aria-label=\"close\">\n          <CloseIcon />\n        </IconButton>\n      </DialogHeader>\n\n      {isEditing && (\n        <Tabs \n          value={activeTab} \n          onChange={(_, newValue) => setActiveTab(newValue)}\n          indicatorColor=\"primary\"\n          textColor=\"primary\"\n          variant=\"fullWidth\"\n          sx={{ borderBottom: 1, borderColor: 'divider' }}\n        >\n          <Tab label=\"Плейлист\" />\n          <Tab label=\"Добавить треки\" />\n        </Tabs>\n      )}\n\n      {isLoading ? (\n        <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '400px' }}>\n          <CircularProgress />\n        </Box>\n      ) : (\n        <ScrollableContent>\n          {/* Playlist Info Tab */}\n          {(!isEditing || activeTab === 0) && (\n            <Box sx={{ mt: 2 }}>\n              <Box sx={{ \n                display: 'flex', \n                flexDirection: isMobile ? 'column' : 'row', \n                gap: 3,\n                alignItems: 'flex-start'\n              }}>\n                {/* Cover Upload */}\n                <Box sx={{ \n                  width: isMobile ? '100%' : '200px', \n                  flexShrink: 0,\n                  position: 'relative'\n                }}>\n                  {coverPreview ? (\n                    <CoverPreview>\n                      <img \n                        src={coverPreview} \n                        alt=\"Playlist cover\" \n                        style={{ width: '100%', height: '100%', objectFit: 'cover' }}\n                      />\n                      <IconButton \n                        sx={{ \n                          position: 'absolute', \n                          bottom: 8, \n                          right: 8,\n                          backgroundColor: 'rgba(0,0,0,0.5)',\n                          color: '#fff',\n                          '&:hover': { backgroundColor: 'rgba(0,0,0,0.7)' }\n                        }}\n                        component=\"label\"\n                      >\n                        <input\n                          type=\"file\"\n                          hidden\n                          accept=\"image/*\"\n                          onChange={handleCoverSelect}\n                        />\n                        <AddPhotoAlternateOutlinedIcon />\n                      </IconButton>\n                    </CoverPreview>\n                  ) : (\n                    <CoverUploadBox component=\"label\">\n                      <input\n                        type=\"file\"\n                        hidden\n                        accept=\"image/*\"\n                        onChange={handleCoverSelect}\n                      />\n                      <AddPhotoAlternateOutlinedIcon sx={{ fontSize: 40, color: theme.palette.primary.main, mb: 1 }} />\n                      <Typography variant=\"body2\" align=\"center\">\n                        Выберите обложку для плейлиста\n                      </Typography>\n                    </CoverUploadBox>\n                  )}\n                </Box>\n\n                {/* Playlist Details */}\n                <Box sx={{ flex: 1 }}>\n                  <TextField\n                    fullWidth\n                    label=\"Название плейлиста\"\n                    variant=\"outlined\"\n                    value={name}\n                    onChange={(e) => setName(e.target.value)}\n                    margin=\"normal\"\n                    required\n                    sx={{ mb: 2 }}\n                  />\n                  <TextField\n                    fullWidth\n                    label=\"Описание\"\n                    variant=\"outlined\"\n                    value={description}\n                    onChange={(e) => setDescription(e.target.value)}\n                    margin=\"normal\"\n                    multiline\n                    rows={3}\n                    sx={{ mb: 2 }}\n                  />\n                  <FormControlLabel\n                    control={\n                      <Switch \n                        checked={isPublic} \n                        onChange={(e) => setIsPublic(e.target.checked)} \n                        color=\"primary\"\n                      />\n                    }\n                    label=\"Публичный плейлист\"\n                    sx={{ mt: 1 }}\n                  />\n                </Box>\n              </Box>\n\n              {/* Current Playlist Tracks */}\n              {isEditing && playlistTracks.length > 0 && (\n                <Box sx={{ mt: 4 }}>\n                  <Typography variant=\"h6\" sx={{ fontWeight: 600, mb: 2 }}>\n                    Треки в плейлисте ({playlistTracks.length})\n                  </Typography>\n                  <Paper \n                    variant=\"outlined\" \n                    sx={{ \n                      borderRadius: theme => theme.breakpoints.down('sm') ? theme.spacing(1) : theme.spacing(2), \n                      overflow: 'hidden',\n                      maxHeight: '400px',\n                      mx: 1\n                    }}\n                  >\n                    <List sx={{ overflow: 'auto', maxHeight: '100%' }}>\n                      {playlistTracks.map((track, index) => {\n                        const playing = isTrackPlaying(track);\n                        return (\n                          <TrackItem \n                            key={track.id} \n                            divider={index !== playlistTracks.length - 1}\n                            isPlaying={playing}\n                            sx={{\n                              '&:hover': {\n                                backgroundColor: playing\n                                  ? (theme.palette.mode === 'dark' ? 'rgba(208, 188, 255, 0.2)' : 'rgba(208, 188, 255, 0.3)')\n                                  : theme.palette.mode === 'dark' \n                                    ? 'rgba(255, 255, 255, 0.05)' \n                                    : 'rgba(0, 0, 0, 0.03)'\n                              }\n                            }}\n                          >\n                            <Box sx={{ display: 'flex', alignItems: 'center', width: '24px', mr: 1, flexShrink: 0 }}>\n                              {playing ? (\n                                <PlayingIndicator>\n                                  <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                                    <rect x=\"4\" y=\"4\" width=\"3\" height=\"16\" rx=\"1.5\">\n                                      <animate attributeName=\"height\" from=\"16\" to=\"6\" dur=\"0.6s\" begin=\"0s\" repeatCount=\"indefinite\" values=\"16;6;16\" keyTimes=\"0;0.5;1\" />\n                                    </rect>\n                                    <rect x=\"10.5\" y=\"4\" width=\"3\" height=\"16\" rx=\"1.5\">\n                                      <animate attributeName=\"height\" from=\"6\" to=\"16\" dur=\"0.6s\" begin=\"0.1s\" repeatCount=\"indefinite\" values=\"6;16;6\" keyTimes=\"0;0.5;1\" />\n                                    </rect>\n                                    <rect x=\"17\" y=\"4\" width=\"3\" height=\"16\" rx=\"1.5\">\n                                      <animate attributeName=\"height\" from=\"16\" to=\"6\" dur=\"0.6s\" begin=\"0.2s\" repeatCount=\"indefinite\" values=\"16;6;16\" keyTimes=\"0;0.5;1\" />\n                                    </rect>\n                                  </svg>\n                                </PlayingIndicator>\n                              ) : (\n                                <Typography variant=\"body2\" color=\"text.secondary\">\n                                  {index + 1}\n                                </Typography>\n                              )}\n                            </Box>\n                            <ListItemAvatar sx={{ minWidth: 50 }}>\n                              <TrackAvatar src={track.cover_path} alt={track.title}>\n                                <MusicNoteOutlinedIcon />\n                              </TrackAvatar>\n                            </ListItemAvatar>\n                            <ListItemText\n                              primary={track.title}\n                              secondary={track.artist}\n                              primaryTypographyProps={{ \n                                noWrap: true, \n                                fontWeight: 500, \n                                title: track.title,\n                                color: playing ? 'primary' : 'inherit'\n                              }}\n                              secondaryTypographyProps={{ noWrap: true, title: track.artist }}\n                              sx={{ mr: 1 }}\n                            />\n                            <ListItemSecondaryAction>\n                              <IconButton edge=\"end\" size=\"small\" onClick={() => handleRemoveTrack(track.id)}>\n                                <RemoveCircleOutlineIcon />\n                              </IconButton>\n                            </ListItemSecondaryAction>\n                          </TrackItem>\n                        );\n                      })}\n                    </List>\n                  </Paper>\n                </Box>\n              )}\n\n              {/* Selected Tracks (for new playlist) */}\n              {!isEditing && selectedTracks.length > 0 && (\n                <Box sx={{ mt: 3 }}>\n                  <Typography variant=\"subtitle1\" sx={{ fontWeight: 600, mb: 1 }}>\n                    Выбранные треки ({selectedTracks.length})\n                  </Typography>\n                  <Paper variant=\"outlined\" sx={{ \n                    borderRadius: theme => theme.breakpoints.down('sm') ? theme.spacing(1) : theme.spacing(2), \n                    overflow: 'hidden',\n                    mx: 1\n                  }}>\n                    <List sx={{ maxHeight: '200px', overflow: 'auto' }}>\n                      {selectedTracks.map((track) => (\n                        <TrackItem key={track.id} divider>\n                          <ListItemAvatar sx={{ minWidth: 50 }}>\n                            <TrackAvatar src={track.cover_path} alt={track.title}>\n                              <MusicNoteOutlinedIcon />\n                            </TrackAvatar>\n                          </ListItemAvatar>\n                          <ListItemText\n                            primary={track.title}\n                            secondary={track.artist}\n                            primaryTypographyProps={{ noWrap: true, title: track.title }}\n                            secondaryTypographyProps={{ noWrap: true, title: track.artist }}\n                            sx={{ mr: 1 }}\n                          />\n                          <ListItemSecondaryAction>\n                            <IconButton edge=\"end\" size=\"small\" onClick={() => toggleTrackSelection(track)}>\n                              <RemoveCircleOutlineIcon />\n                            </IconButton>\n                          </ListItemSecondaryAction>\n                        </TrackItem>\n                      ))}\n                    </List>\n                  </Paper>\n                </Box>\n              )}\n\n              {/* Track Search for new playlist */}\n              {!isEditing && (\n                <Box sx={{ mt: 3 }}>\n                  <Typography variant=\"subtitle1\" sx={{ fontWeight: 600, mb: 1 }}>\n                    Добавить треки\n                  </Typography>\n                  <TrackSearchInput\n                    fullWidth\n                    placeholder=\"Поиск треков...\"\n                    value={searchQuery}\n                    onChange={(e) => setSearchQuery(e.target.value)}\n                    InputProps={{\n                      startAdornment: <SearchIcon sx={{ color: 'text.secondary', mr: 1 }} />,\n                    }}\n                  />\n                  <Paper variant=\"outlined\" sx={{ \n                    borderRadius: theme => theme.breakpoints.down('sm') ? theme.spacing(1) : theme.spacing(2), \n                    overflow: 'hidden',\n                    mx: 1\n                  }}>\n                    {isSearching ? (\n                      <List>\n                        {[1, 2, 3].map((_, index) => (\n                          <ListItem key={index} divider>\n                            <ListItemAvatar>\n                              <Skeleton variant=\"rectangular\" width={42} height={42} sx={{ borderRadius: 1 }} />\n                            </ListItemAvatar>\n                            <ListItemText\n                              primary={<Skeleton width=\"70%\" />}\n                              secondary={<Skeleton width=\"40%\" />}\n                            />\n                          </ListItem>\n                        ))}\n                      </List>\n                    ) : searchResults.length > 0 ? (\n                      <List sx={{ maxHeight: '300px', overflow: 'auto' }}>\n                        {searchResults.map((track) => {\n                          const isSelected = selectedTracks.some(t => t.id === track.id);\n                          \n                          return (\n                            <TrackItem \n                              key={track.id} \n                              divider\n                              selected={isSelected}\n                              onClick={() => toggleTrackSelection(track)}\n                              sx={{ cursor: 'pointer' }}\n                            >\n                              <ListItemAvatar>\n                                <TrackAvatar src={track.cover_path} alt={track.title}>\n                                  <MusicNoteOutlinedIcon />\n                                </TrackAvatar>\n                              </ListItemAvatar>\n                              <ListItemText\n                                primary={track.title}\n                                secondary={track.artist}\n                                primaryTypographyProps={{ noWrap: true }}\n                                secondaryTypographyProps={{ noWrap: true }}\n                              />\n                              {isSelected && (\n                                <CheckCircleIcon color=\"primary\" sx={{ mr: 2 }} />\n                              )}\n                            </TrackItem>\n                          );\n                        })}\n                      </List>\n                    ) : searchQuery.length > 0 ? (\n                      <Box sx={{ p: 3, textAlign: 'center' }}>\n                        <Typography color=\"text.secondary\">Ничего не найдено</Typography>\n                      </Box>\n                    ) : (\n                      <Box sx={{ p: 3, textAlign: 'center' }}>\n                        <Typography color=\"text.secondary\">\n                          Введите запрос для поиска треков\n                        </Typography>\n                      </Box>\n                    )}\n                  </Paper>\n                </Box>\n              )}\n\n              {/* Bottom Actions */}\n              {activeTab === 0 && (\n                <Box sx={{ display: 'flex', flexDirection: 'column', gap: 2, mt: 2 }}>\n                  {isEditing && (\n                    <ActionButton\n                      variant=\"outlined\"\n                      color=\"error\"\n                      onClick={() => {\n                        if (window.confirm('Вы уверены, что хотите удалить этот плейлист?')) {\n                          onDelete(playlist.id);\n                        }\n                      }}\n                      startIcon={<DeleteIcon />}\n                      fullWidth={isMobile}\n                    >\n                      {isMobile ? (isVeryNarrow ? '' : 'Удал.') : 'Удалить плейлист'}\n                    </ActionButton>\n                  )}\n                  \n                  <Box sx={{ ml: 'auto', display: 'flex', gap: 2 }}>\n                    <ActionButton\n                      variant=\"outlined\"\n                      onClick={onClose}\n                    >\n                      {isMobile ? (isVeryNarrow ? '' : 'Отм.') : 'Отмена'}\n                    </ActionButton>\n                    <ActionButton\n                      variant=\"contained\"\n                      color=\"primary\"\n                      onClick={handleSave}\n                      startIcon={<SaveIcon />}\n                      disabled={!name.trim()}\n                    >\n                      {isEditing ? \n                        (isMobile ? (isVeryNarrow ? '' : 'Сохр.') : 'Сохранить') : \n                        (isMobile ? (isVeryNarrow ? '' : 'Созд.') : 'Создать')}\n                    </ActionButton>\n                  </Box>\n                </Box>\n              )}\n            </Box>\n          )}\n\n          {/* Add Tracks Tab (only for editing) */}\n          {isEditing && activeTab === 1 && (\n            <Box sx={{ mt: 2 }}>\n              <TrackSearchInput\n                fullWidth\n                placeholder=\"Поиск треков для добавления...\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                InputProps={{\n                  startAdornment: <SearchIcon sx={{ color: 'text.secondary', mr: 1 }} />,\n                }}\n              />\n\n              {/* Search Results */}\n              <Paper variant=\"outlined\" sx={{ \n                borderRadius: theme => theme.breakpoints.down('sm') ? theme.spacing(1) : theme.spacing(2), \n                overflow: 'hidden',\n                mx: 1\n              }}>\n                {isSearching ? (\n                  <List>\n                    {[1, 2, 3].map((_, index) => (\n                      <ListItem key={index} divider>\n                        <ListItemAvatar>\n                          <Skeleton variant=\"rectangular\" width={42} height={42} sx={{ borderRadius: 1 }} />\n                        </ListItemAvatar>\n                        <ListItemText\n                          primary={<Skeleton width=\"70%\" />}\n                          secondary={<Skeleton width=\"40%\" />}\n                        />\n                      </ListItem>\n                    ))}\n                  </List>\n                ) : searchResults.length > 0 ? (\n                  <List sx={{ maxHeight: '400px', overflow: 'auto' }}>\n                    {searchResults.map((track) => {\n                      const isSelected = selectedTracks.some(t => t.id === track.id);\n                      const inPlaylist = isTrackInPlaylist(track.id);\n                      \n                      return (\n                        <TrackItem \n                          key={track.id} \n                          divider\n                          selected={isSelected}\n                          onClick={() => !inPlaylist && toggleTrackSelection(track)}\n                          sx={{ \n                            cursor: inPlaylist ? 'default' : 'pointer',\n                            opacity: inPlaylist ? 0.6 : 1\n                          }}\n                        >\n                          <ListItemAvatar>\n                            <TrackAvatar src={track.cover_path} alt={track.title}>\n                              <MusicNoteOutlinedIcon />\n                            </TrackAvatar>\n                          </ListItemAvatar>\n                          <ListItemText\n                            primary={track.title}\n                            secondary={track.artist}\n                            primaryTypographyProps={{ noWrap: true }}\n                            secondaryTypographyProps={{ noWrap: true }}\n                          />\n                          {inPlaylist ? (\n                            <Typography variant=\"caption\" color=\"text.secondary\" sx={{ mr: 2 }}>\n                              Уже в плейлисте\n                            </Typography>\n                          ) : isSelected && (\n                            <CheckCircleIcon color=\"primary\" sx={{ mr: 2 }} />\n                          )}\n                        </TrackItem>\n                      );\n                    })}\n                  </List>\n                ) : searchQuery.length > 0 ? (\n                  <Box sx={{ p: 3, textAlign: 'center' }}>\n                    <Typography color=\"text.secondary\">Ничего не найдено</Typography>\n                  </Box>\n                ) : (\n                  <Box sx={{ p: 3, textAlign: 'center' }}>\n                    <Typography color=\"text.secondary\">\n                      Введите запрос для поиска треков\n                    </Typography>\n                  </Box>\n                )}\n              </Paper>\n\n              {/* Selected tracks count */}\n              {selectedTracks.length > 0 && (\n                <Typography variant=\"body2\" color=\"primary\" sx={{ mb: 2 }}>\n                  Выбрано треков: {selectedTracks.length}\n                </Typography>\n              )}\n\n              {/* Actions */}\n              <Box sx={{ display: 'flex', justifyContent: 'flex-end', gap: 2 }}>\n                <ActionButton\n                  variant=\"outlined\"\n                  onClick={() => {\n                    setActiveTab(0);\n                    setSelectedTracks([]);\n                  }}\n                >\n                  {isMobile ? (isVeryNarrow ? '' : 'Отм.') : 'Отмена'}\n                </ActionButton>\n                <ActionButton\n                  variant=\"contained\"\n                  color=\"primary\"\n                  onClick={handleAddTracks}\n                  startIcon={<PlaylistAddIcon />}\n                  disabled={selectedTracks.length === 0}\n                >\n                  {isMobile ? (isVeryNarrow ? '' : 'Добав.') : 'Добавить выбранные треки'}\n                </ActionButton>\n              </Box>\n            </Box>\n          )}\n        </ScrollableContent>\n      )}\n\n      {/* Notifications */}\n      <Snackbar\n        open={notification.open}\n        autoHideDuration={6000}\n        onClose={handleCloseNotification}\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n      >\n        <Alert \n          onClose={handleCloseNotification} \n          severity={notification.severity} \n          variant=\"filled\" \n          sx={{ width: '100%' }}\n        >\n          {notification.message}\n        </Alert>\n      </Snackbar>\n    </FullScreenDialog>\n  );\n};\n\nexport default PlaylistModal; ","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M8 6.82v10.36c0 .79.87 1.27 1.54.84l8.14-5.18c.62-.39.62-1.29 0-1.69L9.54 5.98C8.87 5.55 8 6.03 8 6.82\"\n}), 'PlayArrowRounded');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39\"\n}), 'Public');","import React, { memo, useCallback } from 'react';\nimport { \n  Box, \n  Typography, \n  styled, \n  Card, \n  CardMedia, \n  CardContent,\n  IconButton,\n  Skeleton,\n  Stack,\n  Avatar,\n  Chip,\n  useTheme,\n  alpha\n} from '@mui/material';\nimport PlayArrowRoundedIcon from '@mui/icons-material/PlayArrowRounded';\nimport MoreVertIcon from '@mui/icons-material/MoreVert';\nimport MusicNoteIcon from '@mui/icons-material/MusicNote';\nimport PersonIcon from '@mui/icons-material/Person';\nimport PublicIcon from '@mui/icons-material/Public';\nimport LockIcon from '@mui/icons-material/Lock';\n\nconst StyledCard = styled(Card)(({ theme, active }) => ({\n  backgroundColor: active \n    ? theme.palette.mode === 'dark' || theme.palette.mode === 'contrast'\n      ? alpha(theme.palette.primary.dark, 0.8)\n      : alpha(theme.palette.primary.light, 0.2)\n    : theme.palette.mode === 'light'\n      ? alpha(theme.palette.background.paper, 0.9)\n      : theme.palette.mode === 'contrast'\n        ? '#101010'\n        : '#121212',\n  borderRadius: theme.spacing(1.2),\n  boxShadow: theme.shadows[3],\n  transition: 'all 0.2s ease',\n  height: '100%',\n  display: 'flex',\n  flexDirection: 'column',\n  overflow: 'hidden',\n  position: 'relative',\n  border: active \n    ? `1px solid ${theme.palette.primary.main}` \n    : theme.palette.mode === 'light'\n      ? '1px solid rgba(0, 0, 0, 0.08)'\n      : '1px solid rgba(255, 255, 255, 0.05)',\n  '&:hover': {\n    transform: 'translateY(-3px)',\n    boxShadow: theme.shadows[5],\n    '& .media-overlay': {\n      opacity: 1,\n    },\n  },\n}));\n\nconst MediaWrapper = styled(Box)(({ theme }) => ({\n  position: 'relative',\n  paddingTop: '100%', \n  backgroundColor: theme.palette.mode === 'light'\n    ? alpha(theme.palette.grey[300], 0.5)\n    : theme.palette.mode === 'contrast'\n      ? '#080808'\n      : '#0A0A0A',\n}));\n\nconst StyledMedia = styled('img')(({ theme }) => ({\n  position: 'absolute',\n  top: 0,\n  left: 0,\n  width: '100%',\n  height: '100%',\n  objectFit: 'cover',\n  transition: 'transform 0.3s ease',\n}));\n\nconst MediaOverlay = styled(Box)(({ theme }) => ({\n  position: 'absolute',\n  top: 0,\n  left: 0,\n  right: 0,\n  bottom: 0,\n  backgroundColor: 'rgba(0, 0, 0, 0.4)',\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'center',\n  opacity: 0,\n  transition: 'opacity 0.3s ease',\n}));\n\nconst ContentArea = styled(CardContent)(({ theme }) => ({\n  flexGrow: 1,\n  display: 'flex',\n  flexDirection: 'column',\n  padding: theme.spacing(0.8, 1),\n  backgroundColor: theme.palette.mode === 'light'\n    ? theme.palette.background.paper \n    : theme.palette.mode === 'contrast'\n      ? '#101010'\n      : '#121212',\n  color: theme.palette.mode === 'light' ? theme.palette.text.primary : '#fff',\n}));\n\nconst TrackPreviewArea = styled(Box)(({ theme }) => ({\n  display: 'flex',\n  flexDirection: 'column',\n  gap: theme.spacing(0.25),\n  marginTop: theme.spacing(0.5),\n}));\n\nconst TrackPreviewItem = styled(Box)(({ theme }) => ({\n  display: 'flex',\n  alignItems: 'center',\n  gap: theme.spacing(0.5),\n  borderRadius: theme.spacing(0.75),\n  padding: theme.spacing(0.15, 0.3),\n  backgroundColor: theme.palette.mode === 'light'\n    ? alpha(theme.palette.grey[300], 0.5)\n    : theme.palette.mode === 'contrast'\n      ? '#151515'\n      : '#1E1E1E',\n}));\n\nconst TrackPreviewImage = styled('img')(({ theme }) => ({\n  width: 15,\n  height: 15,\n  borderRadius: theme.spacing(0.2),\n  objectFit: 'cover',\n}));\n\nconst VisibilityIcon = styled(Box)(({ theme, isPublic }) => ({\n  position: 'absolute',\n  top: theme.spacing(0.75),\n  right: theme.spacing(0.75),\n  backgroundColor: isPublic \n    ? alpha(theme.palette.success.main, 0.8)\n    : alpha(theme.palette.text.secondary, 0.5),\n  color: '#fff',\n  borderRadius: '50%',\n  padding: theme.spacing(0.25),\n  width: 18,\n  height: 18,\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'center',\n  zIndex: 2,\n}));\n\nconst PlayButton = styled(IconButton)(({ theme }) => ({\n  backgroundColor: 'rgba(255, 255, 255, 0.9)',\n  color: theme.palette.mode === 'dark' ? '#000' : theme.palette.primary.main,\n  '&:hover': {\n    backgroundColor: '#fff',\n    transform: 'scale(1.05)',\n  },\n  transition: 'all 0.2s ease',\n  boxShadow: '0 2px 8px rgba(0, 0, 0, 0.2)',\n}));\n\nconst Title = styled(Typography)(({ theme, compact }) => ({\n  fontWeight: 600,\n  fontSize: compact ? '0.8rem' : '0.9rem',\n  lineHeight: 1.2,\n  letterSpacing: '0.1px',\n  overflow: 'hidden',\n  textOverflow: 'ellipsis',\n  display: '-webkit-box',\n  WebkitLineClamp: 1,\n  WebkitBoxOrient: 'vertical',\n  marginBottom: theme.spacing(0.2),\n  color: theme.palette.mode === 'light' ? theme.palette.text.primary : '#fff',\n}));\n\nconst Subtitle = styled(Typography)(({ theme, compact }) => ({\n  fontSize: compact ? '0.7rem' : '0.75rem',\n  color: theme.palette.mode === 'light' \n    ? theme.palette.text.secondary \n    : 'rgba(255, 255, 255, 0.7)',\n  lineHeight: 1.2,\n  overflow: 'hidden',\n  textOverflow: 'ellipsis',\n  display: '-webkit-box',\n  WebkitLineClamp: 1,\n  WebkitBoxOrient: 'vertical',\n}));\n\nconst MoreButton = styled(IconButton)(({ theme }) => ({\n  position: 'absolute',\n  top: theme.spacing(0.5),\n  right: theme.spacing(0.5),\n  padding: 4,\n  backgroundColor: 'rgba(0, 0, 0, 0.5)',\n  color: '#fff',\n  opacity: 0,\n  '&:hover': {\n    backgroundColor: 'rgba(0, 0, 0, 0.7)',\n  },\n  transition: 'all 0.2s ease',\n  '.PlaylistCard-root:hover &': {\n    opacity: 1,\n  },\n}));\n\nconst PreviewTracks = styled(Box)(({ theme }) => ({\n  position: 'absolute',\n  bottom: theme.spacing(1.5),\n  left: theme.spacing(1.5),\n  right: theme.spacing(1.5),\n  display: 'flex',\n  gap: theme.spacing(0.8),\n}));\n\nconst PreviewTrackCover = styled(Avatar)(({ theme }) => ({\n  width: 24,\n  height: 24,\n  borderRadius: theme.spacing(0.5),\n  border: `1px solid ${theme.palette.mode === 'dark' ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)'}`,\n  boxShadow: '0 1px 3px rgba(0, 0, 0, 0.2)',\n}));\n\nconst TracksCountChip = styled(Chip)(({ theme }) => ({\n  position: 'absolute',\n  top: theme.spacing(1),\n  left: theme.spacing(1),\n  backgroundColor: 'rgba(0, 0, 0, 0.5)',\n  color: '#fff',\n  fontSize: '0.7rem',\n  height: 24,\n  '& .MuiChip-icon': {\n    color: 'inherit',\n    marginLeft: theme.spacing(0.5),\n    fontSize: '1rem'\n  }\n}));\n\nconst PlaylistCardSkeleton = ({ compact }) => (\n  <StyledCard compact={compact}>\n    <Box sx={{ p: compact ? 1 : 1.5 }}>\n      <MediaWrapper>\n        <Skeleton \n          variant=\"rectangular\" \n          width=\"100%\" \n          height=\"100%\" \n          animation=\"wave\"\n          sx={{ \n            borderRadius: (theme) => theme.spacing(1),\n            aspectRatio: '1/1'\n          }}\n        />\n      </MediaWrapper>\n      <Box sx={{ pt: 1.5 }}>\n        <Skeleton width=\"80%\" height={24} animation=\"wave\" />\n        <Skeleton width=\"60%\" height={20} animation=\"wave\" />\n      </Box>\n    </Box>\n  </StyledCard>\n);\n\nconst PlaylistCard = React.memo(({ \n  id,\n  name,\n  description,\n  coverImage,\n  tracksCount,\n  previewTracks,\n  owner,\n  isPublic,\n  active,\n  onClick,\n  onMoreClick,\n  isLoading = false\n}) => {\n  const theme = useTheme();\n\n  \n  const handleMoreClick = useCallback((e) => {\n    if (onMoreClick) {\n      onMoreClick(e);\n    }\n  }, [onMoreClick]);\n\n  if (isLoading) {\n    return <PlaylistCardSkeleton />;\n  }\n\n  return (\n    <StyledCard\n      active={active}\n      onClick={() => onClick && onClick(id)}\n    >\n      <MediaWrapper>\n        {isPublic !== undefined && (\n          <VisibilityIcon isPublic={isPublic}>\n            {isPublic ? <PublicIcon sx={{ fontSize: 12 }} /> : <LockIcon sx={{ fontSize: 12 }} />}\n          </VisibilityIcon>\n        )}\n        <StyledMedia \n          src={coverImage || '/static/uploads/system/playlist_placeholder.jpg'} \n          alt={name} \n        />\n        <MediaOverlay className=\"media-overlay\">\n          <IconButton\n            size=\"small\"\n            sx={{ \n              color: '#fff',\n              backgroundColor: alpha(theme.palette.primary.main, 0.8),\n              '&:hover': { \n                backgroundColor: theme.palette.primary.main,\n                transform: 'scale(1.1)',\n              },\n              transition: 'all 0.2s ease',\n              width: 32,\n              height: 32,\n            }}\n          >\n            <PlayArrowRoundedIcon fontSize=\"small\" />\n          </IconButton>\n        </MediaOverlay>\n      </MediaWrapper>\n      <ContentArea>\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>\n          <Box sx={{ flex: 1, overflow: 'hidden' }}>\n            <Typography \n              variant=\"body2\" \n              component=\"h3\" \n              noWrap\n              sx={{ \n                fontWeight: 600,\n                mb: 0.25\n              }}\n            >\n              {name || 'My Playlist'}\n            </Typography>\n            \n            {owner && (\n              <Typography\n                variant=\"caption\"\n                color=\"text.secondary\"\n                sx={{\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: 0.25,\n                  mb: 0.25\n                }}\n              >\n                <PersonIcon fontSize=\"inherit\" />\n                {owner.name || owner.username || 'Unknown User'}\n              </Typography>\n            )}\n            \n            {tracksCount !== undefined && (\n              <Typography \n                variant=\"caption\" \n                color=\"text.secondary\"\n              >\n                {tracksCount} {tracksCount === 1 ? 'трек' : tracksCount > 1 && tracksCount < 5 ? 'трека' : 'треков'}\n              </Typography>\n            )}\n          </Box>\n          \n          <IconButton\n            size=\"small\"\n            onClick={(e) => {\n              e.stopPropagation();\n              handleMoreClick(e);\n            }}\n            sx={{ ml: 0.5, p: 0.5 }}\n          >\n            <MoreVertIcon fontSize=\"small\" />\n          </IconButton>\n        </Box>\n        \n        {previewTracks && previewTracks.length > 0 && (\n          <TrackPreviewArea>\n            {previewTracks.slice(0, 3).map((track, index) => (\n              <TrackPreviewItem key={track.id || index}>\n                <TrackPreviewImage \n                  src={track.cover_path || '/static/uploads/system/album_placeholder.jpg'} \n                  alt={track.title}\n                />\n                <Typography variant=\"caption\" noWrap sx={{ flex: 1, fontSize: '0.7rem' }}>\n                  {track.title}\n                </Typography>\n              </TrackPreviewItem>\n            ))}\n          </TrackPreviewArea>\n        )}\n      </ContentArea>\n    </StyledCard>\n  );\n});\n\nexport { PlaylistCardSkeleton };\nexport default memo(PlaylistCard); ","import React, { useContext } from 'react';\nimport { \n  Box, \n  Typography, \n  styled,\n  useTheme,\n  useMediaQuery\n} from '@mui/material';\nimport { ThemeSettingsContext } from '../../App';\nimport PlaylistCard, { PlaylistCardSkeleton } from '../PlaylistCard';\n\nconst GridContainer = styled(Box)(({ theme }) => ({\n  marginBottom: theme.spacing(4),\n}));\n\nconst ScrollableContainer = styled(Box)(({ theme }) => ({\n  display: 'flex',\n  overflowX: 'auto',\n  overflowY: 'hidden',\n  scrollbarWidth: 'none', /* Firefox */\n  '&::-webkit-scrollbar': {\n    display: 'none', /* Chrome, Safari */\n  },\n  '-ms-overflow-style': 'none', /* IE and Edge */\n  paddingBottom: theme.spacing(1),\n  gap: theme.spacing(2),\n  paddingRight: theme.spacing(2),\n  WebkitOverflowScrolling: 'touch',\n}));\n\nconst PlaylistItemContainer = styled(Box)(({ theme, width }) => ({\n  flexShrink: 0,\n  width: width,\n}));\n\nconst PlaylistGrid = ({\n  title,\n  subtitle,\n  playlists = [],\n  loading = false,\n  skeletonCount = 6,\n  onPlaylistClick,\n  onPlaylistPlay,\n  onPlaylistMoreClick,\n  compact = false,\n  spacing = 2,\n  ...rest\n}) => {\n  const theme = useTheme();\n  const { themeSettings } = useContext(ThemeSettingsContext);\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\n  const isTablet = useMediaQuery(theme.breakpoints.between('sm', 'md'));\n  \n  if (!loading && playlists.length === 0) {\n    return null;\n  }\n\n  \n  let itemWidth = '20%'; \n  \n  if (isMobile) {\n    itemWidth = '40%'; \n  } else if (isTablet) {\n    itemWidth = '30%'; \n  }\n\n  if (loading) {\n    return (\n      <ScrollableContainer>\n        {Array.from(new Array(skeletonCount)).map((_, index) => (\n          <PlaylistItemContainer key={`skeleton-${index}`} width={itemWidth}>\n            <PlaylistCardSkeleton />\n          </PlaylistItemContainer>\n        ))}\n      </ScrollableContainer>\n    );\n  }\n\n  return (\n    <GridContainer {...rest}>\n      {title && (\n        <Typography variant=\"h6\" sx={{ mb: 1, fontWeight: 700 }}>\n          {title}\n        </Typography>\n      )}\n      {subtitle && (\n        <Typography variant=\"body2\" sx={{ mb: 2, opacity: 0.7 }}>\n          {subtitle}\n        </Typography>\n      )}\n      \n      {playlists.length > 0 ? (\n        <ScrollableContainer>\n          {playlists.map((playlist) => (\n            <PlaylistItemContainer key={playlist.id} width={itemWidth}>\n              <PlaylistCard\n                id={playlist.id}\n                name={playlist.name}\n                description={playlist.description}\n                coverImage={playlist.cover_image}\n                tracksCount={playlist.tracks_count}\n                previewTracks={playlist.preview_tracks}\n                owner={playlist.owner}\n                isPublic={playlist.is_public}\n                isOwner={playlist.is_owner}\n                onClick={() => onPlaylistClick && onPlaylistClick(playlist.id)}\n                onMoreClick={(e) => onPlaylistMoreClick && onPlaylistMoreClick(e, playlist)}\n              />\n            </PlaylistItemContainer>\n          ))}\n        </ScrollableContainer>\n      ) : (\n        <Typography variant=\"body2\" color=\"text.secondary\" align=\"center\">\n          Нет доступных плейлистов\n        </Typography>\n      )}\n    </GridContainer>\n  );\n};\n\nexport default PlaylistGrid; ","import React, { useState } from 'react';\nimport { \n  Box, \n  Avatar, \n  Typography, \n  IconButton, \n  Menu, \n  MenuItem, \n  ListItemIcon, \n  ListItemText,\n  Tooltip\n} from '@mui/material';\nimport { Link } from 'react-router-dom';\nimport { styled } from '@mui/material/styles';\nimport FavoriteIcon from '@mui/icons-material/Favorite';\nimport FavoriteBorderIcon from '@mui/icons-material/FavoriteBorder';\nimport ChatBubbleOutlineIcon from '@mui/icons-material/ChatBubbleOutline';\nimport MoreVertIcon from '@mui/icons-material/MoreVert';\nimport ReplyIcon from '@mui/icons-material/Reply';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport ZoomInIcon from '@mui/icons-material/ZoomIn';\nimport { VerificationBadge } from '../../UIKIT';\nimport { formatTimeAgo } from '../../utils/dateUtils';\n\nconst StyledCommentCard = styled(Box)(({ theme }) => ({\n  backgroundColor: 'rgba(28, 28, 32, 0.4)',\n  backdropFilter: 'blur(10px)',\n  borderRadius: '16px',\n  padding: theme.spacing(2),\n  border: '1px solid rgba(255, 255, 255, 0.03)',\n  boxShadow: '0 2px 10px rgba(0, 0, 0, 0.1)',\n  transition: 'all 0.2s ease-in-out',\n  '&:hover': {\n    boxShadow: '0 3px 12px rgba(0, 0, 0, 0.12)',\n    backgroundColor: 'rgba(30, 30, 36, 0.5)'\n  },\n  [theme.breakpoints.down('sm')]: {\n    padding: theme.spacing(1.5),\n  }\n}));\n\nconst ActionButton = styled(Box)(({ theme, active }) => ({\n  display: 'flex',\n  alignItems: 'center',\n  cursor: 'pointer',\n  padding: '4px 10px',\n  borderRadius: '20px',\n  transition: 'all 0.2s ease',\n  backgroundColor: active ? 'rgba(140, 82, 255, 0.08)' : 'rgba(255, 255, 255, 0.03)',\n  '&:hover': {\n    backgroundColor: active ? 'rgba(140, 82, 255, 0.15)' : 'rgba(255, 255, 255, 0.06)',\n    transform: 'translateY(-1px)'\n  },\n  [theme.breakpoints.down('sm')]: {\n    padding: '3px 8px',\n  }\n}));\n\nconst ImageContainer = styled(Box)(({ theme }) => ({\n  position: 'relative',\n  borderRadius: '12px',\n  overflow: 'hidden',\n  border: '1px solid rgba(255, 255, 255, 0.05)',\n  boxShadow: '0 2px 6px rgba(0, 0, 0, 0.1)',\n  cursor: 'pointer',\n  display: 'inline-block',\n  maxWidth: '280px',\n  '&:hover': {\n    '& .zoom-icon': {\n      opacity: 1\n    }\n  },\n  [theme.breakpoints.down('sm')]: {\n    maxWidth: '240px',\n  }\n}));\n\nconst CommentContent = styled(Typography)(({ theme }) => ({\n  whiteSpace: 'pre-wrap',\n  wordBreak: 'break-word',\n  overflowWrap: 'break-word',\n  color: theme.palette.text.primary,\n  lineHeight: 1.5,\n  marginBottom: theme.spacing(1.5),\n  marginTop: theme.spacing(0.5),\n  fontSize: '0.9rem',\n  [theme.breakpoints.down('sm')]: {\n    fontSize: '0.85rem',\n  }\n}));\n\nconst CommentItem = ({ \n  comment, \n  onLike, \n  onReply, \n  onDeleteComment, \n  setLightboxOpen, \n  setCurrentLightboxImage,\n  isCommentOwner,\n  onViewImage,\n  sanitizeImagePath = (imagePath) => imagePath\n}) => {\n  const [menuAnchorEl, setMenuAnchorEl] = useState(null);\n  const [imageError, setImageError] = useState(false);\n  const menuOpen = Boolean(menuAnchorEl);\n\n  const handleMenuOpen = (event) => {\n    event.stopPropagation();\n    setMenuAnchorEl(event.currentTarget);\n  };\n\n  const handleMenuClose = () => {\n    setMenuAnchorEl(null);\n  };\n\n  const handleOpenImage = (event) => {\n    if (event) {\n      event.stopPropagation();\n    }\n    \n    if (onViewImage) {\n      onViewImage(sanitizeImagePath(comment.image));\n    } else {\n      setLightboxOpen(true);\n      setCurrentLightboxImage(sanitizeImagePath(comment.image));\n    }\n  };\n\n  const handleImageError = () => {\n    console.error(\"Comment image failed to load:\", comment.image);\n    \n    if (comment.image && comment.image.includes('/static/uploads/') && \n        (comment.image.indexOf('/static/uploads/') !== comment.image.lastIndexOf('/static/uploads/'))) {\n      \n      comment.image = comment.image.substring(comment.image.lastIndexOf('/static/uploads/'));\n      setImageError(false);\n      return;\n    }\n    \n    setImageError(true);\n  };\n  \n  return (\n    <StyledCommentCard id={`comment-${comment.id}`}>\n      <Box sx={{ display: 'flex', alignItems: 'flex-start', gap: 1.5 }}>\n        <Avatar \n          src={comment.user.photo && comment.user.photo !== 'avatar.png'\n            ? `/static/uploads/avatar/${comment.user.id}/${comment.user.photo}`\n            : `/static/uploads/avatar/system/avatar.png`}\n          alt={comment.user.name}\n          component={Link}\n          to={`/profile/${comment.user.username}`}\n          sx={{ \n            width: { xs: 36, sm: 40 }, \n            height: { xs: 36, sm: 40 },\n            border: '1px solid rgba(140, 82, 255, 0.2)', \n            transition: 'all 0.2s ease',\n            '&:hover': {\n              borderColor: 'primary.main',\n              transform: 'scale(1.05)'\n            }\n          }}\n          onError={(e) => {\n            console.error(\"Comment avatar failed to load\");\n            if (e.currentTarget && e.currentTarget.setAttribute) {\n              e.currentTarget.setAttribute('src', '/static/uploads/avatar/system/avatar.png');\n            }\n          }}\n        />\n        \n        <Box sx={{ flex: 1 }}>\n          <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', mb: 0.5 }}>\n            <Box sx={{ display: 'flex', alignItems: 'center', flexWrap: 'wrap' }}>\n              <Typography \n                component={Link}\n                to={`/profile/${comment.user.username}`}\n                sx={{ \n                  fontWeight: 600,\n                  textDecoration: 'none',\n                  color: 'text.primary',\n                  '&:hover': { color: 'primary.main' },\n                  display: 'flex',\n                  alignItems: 'center',\n                  fontSize: { xs: '0.9rem', sm: '1rem' } \n                }}\n              >\n                {comment.user.name}\n                {comment.user.verification && comment.user.verification.status > 0 && (\n                  <VerificationBadge \n                    status={comment.user.verification.status} \n                    size=\"small\" \n                  />\n                )}\n                {comment.user.achievement && (\n                  <Box \n                    component=\"img\" \n                    sx={{ \n                      width: { xs: 14, sm: 16 }, \n                      height: { xs: 14, sm: 16 }, \n                      ml: 0.5 \n                    }} \n                    src={`/static/images/bages/${comment.user.achievement.image_path}`} \n                    alt={comment.user.achievement.bage}\n                    onError={(e) => {\n                      console.error(\"Achievement badge failed to load:\", e);\n                      e.target.style.display = 'none';\n                    }}\n                  />\n                )}\n              </Typography>\n              <Tooltip title={new Date(comment.timestamp).toLocaleString()} placement=\"top\">\n                <Typography \n                  variant=\"caption\" \n                  color=\"text.secondary\"\n                  sx={{ ml: 1, fontSize: '0.75rem' }}\n                >\n                  {formatTimeAgo(comment.timestamp)}\n                </Typography>\n              </Tooltip>\n            </Box>\n            \n            {isCommentOwner && (\n              <>\n                <IconButton\n                  size=\"small\"\n                  onClick={handleMenuOpen}\n                  sx={{ \n                    p: 0.5,\n                    color: 'text.secondary',\n                    '&:hover': { color: 'text.primary' }\n                  }}\n                >\n                  <MoreVertIcon fontSize=\"small\" />\n                </IconButton>\n                \n                <Menu\n                  anchorEl={menuAnchorEl}\n                  open={menuOpen}\n                  onClose={handleMenuClose}\n                  onClick={(e) => e.stopPropagation()}\n                  PaperProps={{\n                    sx: {\n                      bgcolor: 'rgba(28, 28, 32, 0.9)',\n                      backdropFilter: 'blur(10px)',\n                      boxShadow: '0 3px 10px rgba(0, 0, 0, 0.2)',\n                      borderRadius: '12px',\n                      border: '1px solid rgba(255, 255, 255, 0.03)',\n                      mt: 1\n                    }\n                  }}\n                  transformOrigin={{\n                    vertical: 'top',\n                    horizontal: 'right',\n                  }}\n                >\n                  <MenuItem \n                    onClick={() => {\n                      handleMenuClose();\n                      onReply();\n                    }}\n                    sx={{\n                      borderRadius: '8px',\n                      mx: 0.5,\n                      my: 0.2,\n                      '&:hover': {\n                        bgcolor: 'rgba(255, 255, 255, 0.05)'\n                      }\n                    }}\n                  >\n                    <ListItemIcon>\n                      <ReplyIcon fontSize=\"small\" sx={{ color: 'text.secondary' }} />\n                    </ListItemIcon>\n                    <ListItemText primary=\"Ответить\" />\n                  </MenuItem>\n                  \n                  <MenuItem \n                    onClick={() => {\n                      handleMenuClose();\n                      onDeleteComment();\n                    }}\n                    sx={{ \n                      color: '#f44336', \n                      borderRadius: '8px',\n                      mx: 0.5,\n                      my: 0.2,\n                      '&:hover': {\n                        bgcolor: 'rgba(244, 67, 54, 0.08)'\n                      }\n                    }}\n                  >\n                    <ListItemIcon>\n                      <DeleteIcon fontSize=\"small\" sx={{ color: '#f44336' }} />\n                    </ListItemIcon>\n                    <ListItemText primary=\"Удалить\" />\n                  </MenuItem>\n                </Menu>\n              </>\n            )}\n          </Box>\n          \n          <CommentContent>\n            {comment.content}\n          </CommentContent>\n          \n          {comment.image && !imageError && (\n            <Box sx={{ mt: 1, mb: 1.5 }}>\n              <ImageContainer onClick={handleOpenImage}>\n                <img \n                  src={sanitizeImagePath(comment.image)}\n                  alt=\"Comment\" \n                  style={{ \n                    maxWidth: '100%',\n                    maxHeight: '200px',\n                    borderRadius: '10px',\n                    objectFit: 'contain', \n                    display: 'block', \n                    margin: '0 auto' \n                  }} \n                  onError={handleImageError}\n                />\n                <Box \n                  className=\"zoom-icon\"\n                  sx={{\n                    position: 'absolute',\n                    top: '50%',\n                    left: '50%',\n                    transform: 'translate(-50%, -50%)',\n                    bgcolor: 'rgba(0, 0, 0, 0.6)',\n                    color: 'white',\n                    borderRadius: '50%',\n                    width: 36,\n                    height: 36,\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    opacity: 0,\n                    transition: 'opacity 0.2s ease',\n                    cursor: 'pointer'\n                  }}\n                >\n                  <ZoomInIcon sx={{ fontSize: '1.2rem' }} />\n                </Box>\n              </ImageContainer>\n            </Box>\n          )}\n          \n          {comment.image && imageError && (\n            <Box\n              sx={{\n                backgroundColor: 'rgba(244, 67, 54, 0.1)',\n                border: '1px solid rgba(244, 67, 54, 0.3)',\n                borderRadius: '8px',\n                padding: '10px',\n                margin: '10px 0',\n                color: '#f44336',\n                fontSize: '0.85rem',\n                textAlign: 'center',\n                wordBreak: 'break-all'\n              }}\n            >\n              <Typography sx={{ fontWeight: 'bold', mb: 0.5 }}>\n                Ошибка загрузки медиа\n              </Typography>\n              <Typography sx={{ fontSize: '0.75rem', opacity: 0.8 }}>\n                {comment.image && comment.image.includes('/static/uploads/') && \n                 comment.image.indexOf('/static/uploads/') !== comment.image.lastIndexOf('/static/uploads/') \n                  ? 'Ошибка в пути к файлу (дублирование)' \n                  : comment.image || 'URL недоступен'}\n              </Typography>\n            </Box>\n          )}\n          \n          <Box sx={{ \n            display: 'flex', \n            alignItems: 'center', \n            mt: 1, \n            gap: 1.5,\n          }}>\n            <ActionButton \n              active={comment.user_liked} \n              onClick={() => onLike(comment.id)}\n            >\n              {comment.user_liked ? (\n                <FavoriteIcon sx={{ color: '#8c52ff', fontSize: { xs: 16, sm: 18 } }} />\n              ) : (\n                <FavoriteBorderIcon sx={{ color: '#757575', fontSize: { xs: 16, sm: 18 } }} />\n              )}\n              <Typography \n                variant=\"caption\" \n                sx={{ \n                  ml: 0.5,\n                  color: comment.user_liked ? '#8c52ff' : 'text.secondary',\n                  fontWeight: comment.user_liked ? 'medium' : 'normal',\n                  fontSize: '0.75rem'\n                }}\n              >\n                {comment.likes_count}\n              </Typography>\n            </ActionButton>\n\n            <ActionButton onClick={onReply}>\n              <ChatBubbleOutlineIcon sx={{ fontSize: { xs: 16, sm: 18 }, color: 'text.secondary' }} />\n              <Typography variant=\"caption\" sx={{ ml: 0.5, fontSize: '0.75rem', color: 'text.secondary' }}>\n                Ответить\n              </Typography>\n            </ActionButton>\n          </Box>\n        </Box>\n      </Box>\n    </StyledCommentCard>\n  );\n};\n\nexport default CommentItem; ","import React, { useState } from 'react';\nimport { \n  Box, \n  Avatar, \n  Typography, \n  IconButton, \n  Menu, \n  MenuItem, \n  ListItemIcon, \n  ListItemText,\n  Tooltip\n} from '@mui/material';\nimport { Link } from 'react-router-dom';\nimport { styled } from '@mui/material/styles';\nimport FavoriteIcon from '@mui/icons-material/Favorite';\nimport FavoriteBorderIcon from '@mui/icons-material/FavoriteBorder';\nimport CommentOutlinedIcon from '@mui/icons-material/CommentOutlined';\nimport MoreVertIcon from '@mui/icons-material/MoreVert';\nimport ReplyIcon from '@mui/icons-material/Reply';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport ZoomInIcon from '@mui/icons-material/ZoomIn';\nimport { formatTimeAgo } from '../../utils/dateUtils';\n\nconst StyledReplyCard = styled(Box)(({ theme }) => ({\n  backgroundColor: 'rgba(32, 32, 36, 0.4)',\n  backdropFilter: 'blur(5px)',\n  borderRadius: '14px',\n  padding: theme.spacing(1.5, 2),\n  marginBottom: theme.spacing(1), \n  border: '1px solid rgba(255, 255, 255, 0.03)',\n  boxShadow: '0 2px 10px rgba(0, 0, 0, 0.08)',\n  transition: 'all 0.2s ease-in-out',\n  '&:hover': {\n    boxShadow: '0 3px 12px rgba(0, 0, 0, 0.12)',\n    backgroundColor: 'rgba(35, 35, 40, 0.5)'\n  },\n  [theme.breakpoints.down('sm')]: {\n    padding: theme.spacing(1.25),\n  }\n}));\n\nconst QuotedMessage = styled(Box)(({ theme }) => ({\n  backgroundColor: 'rgba(255, 255, 255, 0.03)',\n  borderRadius: '8px',\n  padding: theme.spacing(1, 1.5),\n  marginBottom: theme.spacing(1),\n  borderLeft: '3px solid rgba(140, 82, 255, 0.5)'\n}));\n\nconst ActionButton = styled(Box)(({ theme, active }) => ({\n  display: 'flex',\n  alignItems: 'center',\n  cursor: 'pointer',\n  padding: '3px 8px',\n  borderRadius: '12px',\n  transition: 'all 0.2s ease',\n  backgroundColor: active ? 'rgba(140, 82, 255, 0.12)' : 'rgba(255, 255, 255, 0.04)',\n  '&:hover': {\n    backgroundColor: active ? 'rgba(140, 82, 255, 0.2)' : 'rgba(255, 255, 255, 0.08)',\n    transform: 'translateY(-1px)'\n  }\n}));\n\nconst ImageContainer = styled(Box)(({ theme }) => ({\n  position: 'relative',\n  borderRadius: '10px',\n  overflow: 'hidden',\n  border: '1px solid rgba(255, 255, 255, 0.05)',\n  boxShadow: '0 2px 6px rgba(0, 0, 0, 0.1)',\n  cursor: 'pointer',\n  display: 'inline-block',\n  maxWidth: '280px',\n  '&:hover': {\n    '& .zoom-icon': {\n      opacity: 1\n    }\n  },\n  [theme.breakpoints.down('sm')]: {\n    maxWidth: '240px',\n  }\n}));\n\nconst ReplyItem = ({ \n  reply, \n  comment,\n  parentReply, \n  onLike, \n  onReply, \n  onDelete,\n  setLightboxOpen,\n  setCurrentLightboxImage,\n  isReplyOwner,\n  onViewImage,\n  sanitizeImagePath = (imagePath) => imagePath\n}) => {\n  const [menuAnchorEl, setMenuAnchorEl] = useState(null);\n  const [imageError, setImageError] = useState(false);\n  const [imageFallback, setImageFallback] = useState(null);\n  const menuOpen = Boolean(menuAnchorEl);\n\n  const handleMenuOpen = (event) => {\n    event.stopPropagation();\n    setMenuAnchorEl(event.currentTarget);\n  };\n\n  const handleMenuClose = () => {\n    setMenuAnchorEl(null);\n  };\n  \n  const handleOpenImage = (event) => {\n    if (event) {\n      event.stopPropagation();\n    }\n    \n    if (onViewImage) {\n      onViewImage(sanitizeImagePath(reply.image));\n    } else {\n      setLightboxOpen(true);\n      setCurrentLightboxImage(sanitizeImagePath(reply.image));\n    }\n  };\n\n  const getReplyImageFallback = (originalUrl) => {\n    if (!originalUrl) return null;\n    \n    if (!originalUrl.includes('_fallback')) {\n      if (originalUrl.includes('/static/uploads/reply/')) {\n        return originalUrl.replace('/static/uploads/reply/', '/static/uploads/replies/') + '_fallback1';\n      }\n      \n      if (!originalUrl.startsWith('/')) {\n        return '/' + originalUrl + '_fallback2';\n      }\n    } \n    else if (originalUrl.includes('_fallback1')) {\n      const baseUrl = originalUrl.replace('_fallback1', '');\n      return baseUrl.replace('/static/uploads/replies/', '/static/uploads/images/replies/') + '_fallback2';\n    }\n    else if (originalUrl.includes('_fallback2')) {\n      const baseUrl = originalUrl.replace('_fallback2', '');\n      const filename = baseUrl.split('/').pop();\n      return `/static/uploads/reply/${filename}` + '_fallback3';\n    }\n    \n    return null;\n  };\n\n  const handleImageError = () => {\n    console.error(\"Reply image failed to load:\", reply.image);\n    \n    if (reply.image && reply.image.includes('/static/uploads/') && \n        (reply.image.indexOf('/static/uploads/') !== reply.image.lastIndexOf('/static/uploads/'))) {\n      const fixedUrl = reply.image.substring(reply.image.lastIndexOf('/static/uploads/'));\n      console.log(\"Fixing duplicated reply image path:\", reply.image, \"->\", fixedUrl);\n      \n      setImageFallback(fixedUrl);\n      return;\n    }\n    \n    const fallbackUrl = getReplyImageFallback(imageFallback || reply.image);\n    \n    if (fallbackUrl) {\n      console.log(`Trying fallback URL for reply ${reply.id}:`, fallbackUrl);\n      setImageFallback(fallbackUrl);\n      return;\n    }\n    \n    setImageError(true);\n  };\n\n  \n  const quotedUser = parentReply ? parentReply.user : comment.user;\n  const quotedContent = parentReply ? parentReply.content : comment.content;\n\n  return (\n    <StyledReplyCard>\n      {/* Quoted message */}\n      <QuotedMessage>\n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n          <Avatar \n            src={quotedUser.photo && quotedUser.photo !== 'avatar.png'\n              ? `/static/uploads/avatar/${quotedUser.id}/${quotedUser.photo}`\n              : `/static/uploads/avatar/system/avatar.png`}\n            alt={quotedUser.name}\n            sx={{ width: 18, height: 18 }}\n            onError={(e) => {\n              console.error(\"Reply avatar failed to load\");\n              if (e.currentTarget && e.currentTarget.setAttribute) {\n                e.currentTarget.setAttribute('src', '/static/uploads/avatar/system/avatar.png');\n              }\n            }}\n          />\n          <Typography \n            variant=\"caption\"\n            sx={{ \n              fontWeight: 'bold',\n              color: 'text.primary',\n              fontSize: '0.7rem'\n            }}\n          >\n            {quotedUser.name}\n          </Typography>\n        </Box>\n        <Typography \n          variant=\"caption\" \n          color=\"text.secondary\"\n          sx={{ \n            display: '-webkit-box',\n            WebkitLineClamp: 1,\n            WebkitBoxOrient: 'vertical',\n            overflow: 'hidden',\n            mt: 0.25,\n            fontSize: '0.7rem',\n            lineHeight: 1.3,\n            whiteSpace: 'pre-wrap',\n            wordBreak: 'break-word',\n            overflowWrap: 'break-word'\n          }}\n        >\n          {quotedContent}\n        </Typography>\n      </QuotedMessage>\n\n      {/* Reply content */}\n      <Box sx={{ display: 'flex', alignItems: 'flex-start', gap: 1 }}>\n        <Avatar \n          src={reply.user.photo && reply.user.photo !== 'avatar.png'\n            ? `/static/uploads/avatar/${reply.user.id}/${reply.user.photo}`\n            : `/static/uploads/avatar/system/avatar.png`}\n          alt={reply.user.name}\n          component={Link}\n          to={`/profile/${reply.user.username}`}\n          sx={{ \n            width: 26, \n            height: 26,\n            border: '1px solid rgba(140, 82, 255, 0.2)',\n            transition: 'all 0.2s ease',\n            '&:hover': {\n              borderColor: 'primary.main',\n              transform: 'scale(1.05)'\n            }\n          }}\n          onError={(e) => {\n            console.error(\"Reply avatar failed to load\");\n            if (e.currentTarget && e.currentTarget.setAttribute) {\n              e.currentTarget.setAttribute('src', '/static/uploads/avatar/system/avatar.png');\n            }\n          }}\n        />\n        <Box sx={{ flex: 1 }}>\n          <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', mb: 0.25 }}>\n            <Box sx={{ display: 'flex', alignItems: 'center' }}>\n              <Typography \n                component={Link}\n                to={`/profile/${reply.user.username}`}\n                sx={{ \n                  fontWeight: 'bold',\n                  textDecoration: 'none',\n                  color: 'text.primary',\n                  '&:hover': { color: 'primary.main' },\n                  fontSize: '0.8rem'\n                }}\n              >\n                {reply.user.name}\n              </Typography>\n              <Tooltip title={new Date(reply.timestamp).toLocaleString()} placement=\"top\">\n                <Typography \n                  variant=\"caption\" \n                  color=\"text.secondary\"\n                  sx={{ ml: 0.5, fontSize: '0.65rem' }}\n                >\n                  {formatTimeAgo(reply.timestamp)}\n                </Typography>\n              </Tooltip>\n            </Box>\n            \n            {isReplyOwner && (\n              <>\n                <IconButton\n                  size=\"small\"\n                  onClick={handleMenuOpen}\n                  sx={{ \n                    p: 0.25,\n                    color: 'text.secondary',\n                    '&:hover': { color: 'text.primary' }\n                  }}\n                >\n                  <MoreVertIcon fontSize=\"small\" />\n                </IconButton>\n                \n                <Menu\n                  anchorEl={menuAnchorEl}\n                  open={menuOpen}\n                  onClose={handleMenuClose}\n                  onClick={(e) => e.stopPropagation()}\n                  PaperProps={{\n                    sx: {\n                      bgcolor: 'rgba(32, 32, 36, 0.9)',\n                      backdropFilter: 'blur(10px)',\n                      boxShadow: '0 5px 15px rgba(0, 0, 0, 0.2)',\n                      borderRadius: '12px',\n                      border: '1px solid rgba(255, 255, 255, 0.05)',\n                      mt: 1\n                    }\n                  }}\n                  transformOrigin={{\n                    vertical: 'top',\n                    horizontal: 'right',\n                  }}\n                >\n                  <MenuItem \n                    onClick={() => {\n                      handleMenuClose();\n                      onReply(reply);\n                    }}\n                    sx={{\n                      borderRadius: '8px',\n                      mx: 0.5,\n                      my: 0.2,\n                      '&:hover': {\n                        bgcolor: 'rgba(255, 255, 255, 0.05)'\n                      }\n                    }}\n                  >\n                    <ListItemIcon>\n                      <ReplyIcon fontSize=\"small\" sx={{ color: 'text.secondary' }} />\n                    </ListItemIcon>\n                    <ListItemText primary=\"Ответить\" />\n                  </MenuItem>\n                  \n                  <MenuItem \n                    onClick={() => {\n                      handleMenuClose();\n                      onDelete();\n                    }}\n                    sx={{ \n                      color: '#f44336',\n                      borderRadius: '8px',\n                      mx: 0.5,\n                      my: 0.2,\n                      '&:hover': {\n                        bgcolor: 'rgba(244, 67, 54, 0.08)'\n                      }\n                    }}\n                  >\n                    <ListItemIcon>\n                      <DeleteIcon fontSize=\"small\" sx={{ color: '#f44336' }} />\n                    </ListItemIcon>\n                    <ListItemText primary=\"Удалить\" />\n                  </MenuItem>\n                </Menu>\n              </>\n            )}\n          </Box>\n          \n          <Typography variant=\"body2\" sx={{ \n            color: 'text.primary',\n            fontSize: '0.75rem',\n            lineHeight: 1.4,\n            mt: 0.5,\n            mb: 0.5,\n            whiteSpace: 'pre-wrap',\n            wordBreak: 'break-word',\n            overflowWrap: 'break-word'\n          }}>\n            {reply.content}\n          </Typography>\n          \n          {reply.image && !imageError && (\n            <Box sx={{ mt: 1, mb: 1.5 }}>\n              <ImageContainer onClick={handleOpenImage}>\n                <img \n                  src={sanitizeImagePath(imageFallback || reply.image)}\n                  alt=\"Reply\" \n                  style={{ \n                    maxWidth: '100%',\n                    maxHeight: '200px',\n                    borderRadius: '10px',\n                    objectFit: 'contain', \n                    display: 'block', \n                    margin: '0 auto' \n                  }} \n                  onError={handleImageError}\n                />\n                <Box \n                  className=\"zoom-icon\"\n                  sx={{\n                    position: 'absolute',\n                    top: '50%',\n                    left: '50%',\n                    transform: 'translate(-50%, -50%)',\n                    bgcolor: 'rgba(0, 0, 0, 0.6)',\n                    color: 'white',\n                    borderRadius: '50%',\n                    width: 36,\n                    height: 36,\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    opacity: 0,\n                    transition: 'opacity 0.2s ease',\n                    cursor: 'pointer'\n                  }}\n                >\n                  <ZoomInIcon sx={{ fontSize: '1.2rem' }} />\n                </Box>\n              </ImageContainer>\n            </Box>\n          )}\n          \n          {reply.image && imageError && (\n            <Box\n              sx={{\n                backgroundColor: 'rgba(244, 67, 54, 0.1)',\n                border: '1px solid rgba(244, 67, 54, 0.3)',\n                borderRadius: '8px',\n                padding: '10px',\n                color: '#f44336',\n                fontSize: '0.85rem',\n                textAlign: 'center',\n                width: '100%',\n                mt: 1, \n                mb: 1.5\n              }}\n            >\n              <Typography sx={{ fontWeight: 'bold', mb: 0.5 }}>\n                Ошибка загрузки медиа\n              </Typography>\n              <Typography sx={{ fontSize: '0.75rem', opacity: 0.8, wordBreak: 'break-all' }}>\n                {reply.image && reply.image.includes('/static/uploads/') && \n                 reply.image.indexOf('/static/uploads/') !== reply.image.lastIndexOf('/static/uploads/') \n                  ? 'Ошибка в пути к файлу (дублирование)' \n                  : reply.image || 'URL недоступен'}\n              </Typography>\n            </Box>\n          )}\n          \n          <Box sx={{ display: 'flex', gap: 1, alignItems: 'center', mt: 0.5 }}>\n            <ActionButton \n              active={reply.user_liked} \n              onClick={() => onLike(reply.id)}\n            >\n              {reply.user_liked ? (\n                <FavoriteIcon sx={{ color: '#8c52ff', fontSize: 12 }} />\n              ) : (\n                <FavoriteBorderIcon sx={{ color: '#757575', fontSize: 12 }} />\n              )}\n              <Typography \n                variant=\"caption\" \n                sx={{ \n                  ml: 0.5,\n                  color: reply.user_liked ? '#8c52ff' : 'text.secondary',\n                  fontWeight: reply.user_liked ? 'bold' : 'normal',\n                  fontSize: '0.7rem'\n                }}\n              >\n                {reply.likes_count}\n              </Typography>\n            </ActionButton>\n\n            <ActionButton onClick={() => onReply(reply)}>\n              <CommentOutlinedIcon sx={{ fontSize: 12, color: 'text.secondary' }} />\n              <Typography variant=\"caption\" sx={{ ml: 0.5, fontSize: '0.7rem', color: 'text.secondary' }}>\n                Ответить\n              </Typography>\n            </ActionButton>\n          </Box>\n        </Box>\n      </Box>\n    </StyledReplyCard>\n  );\n};\n\nexport default ReplyItem; ","import React from 'react';\nimport { \n  Box, \n  TextField, \n  IconButton, \n  CircularProgress, \n  Alert,\n} from '@mui/material';\nimport { styled } from '@mui/material/styles';\nimport SendIcon from '@mui/icons-material/Send';\nimport ImageIcon from '@mui/icons-material/Image';\nimport CloseIcon from '@mui/icons-material/Close';\n\nconst StyledTextField = styled(TextField)(({ theme }) => ({\n  '& .MuiOutlinedInput-root': {\n    backgroundColor: 'rgba(32, 32, 36, 0.6)',\n    backdropFilter: 'blur(5px)',\n    borderRadius: '14px',\n    border: '1px solid rgba(255, 255, 255, 0.05)',\n    '& .MuiOutlinedInput-notchedOutline': {\n      borderColor: 'transparent'\n    },\n    '&:hover .MuiOutlinedInput-notchedOutline': {\n      borderColor: 'rgba(140, 82, 255, 0.3)'\n    },\n    '&.Mui-focused .MuiOutlinedInput-notchedOutline': {\n      borderColor: 'rgba(140, 82, 255, 0.5)'\n    }\n  }\n}));\n\nconst ImagePreview = styled(Box)(({ theme }) => ({\n  marginTop: theme.spacing(1),\n  position: 'relative',\n  '& img': {\n    width: '100%',\n    maxHeight: '150px',\n    objectFit: 'cover',\n    borderRadius: '12px'\n  }\n}));\n\nconst CommentForm = ({\n  commentText,\n  setCommentText,\n  commentImage,\n  imagePreview,\n  handleImageChange,\n  handleRemoveImage,\n  handleCommentSubmit,\n  fileInputRef,\n  isSubmitting,\n  disabled,\n  error\n}) => {\n  return (\n    <Box>\n      {error && (\n        <Alert \n          severity=\"error\" \n          sx={{ mb: 2 }}\n          onClose={() => {}}\n        >\n          {error}\n        </Alert>\n      )}\n      \n      <StyledTextField\n        inputRef={fileInputRef}\n        fullWidth\n        size=\"small\"\n        placeholder=\"Написать комментарий...\"\n        value={commentText || ''}\n        onChange={(e) => typeof setCommentText === 'function' ? setCommentText(e.target.value) : null}\n        disabled={isSubmitting || disabled}\n        multiline\n        maxRows={4}\n        InputProps={{\n          endAdornment: (\n            <Box sx={{ display: 'flex', gap: 1 }}>\n              <input\n                ref={fileInputRef}\n                type=\"file\"\n                accept=\"image/*\"\n                style={{ display: 'none' }}\n                onChange={handleImageChange}\n                disabled={isSubmitting || disabled}\n                id=\"comment-image-upload\"\n              />\n              <IconButton \n                size=\"small\"\n                component=\"label\"\n                htmlFor=\"comment-image-upload\"\n                disabled={isSubmitting || disabled}\n                sx={{ \n                  color: 'text.secondary',\n                  '&:hover': { color: 'text.primary' }\n                }}\n              >\n                <ImageIcon fontSize=\"small\" />\n              </IconButton>\n              <IconButton\n                size=\"small\"\n                color=\"primary\"\n                onClick={handleCommentSubmit}\n                disabled={(!(commentText && commentText.trim()) && !commentImage) || isSubmitting || disabled}\n              >\n                {isSubmitting ? (\n                  <CircularProgress size={16} color=\"inherit\" />\n                ) : (\n                  <SendIcon fontSize=\"small\" />\n                )}\n              </IconButton>\n            </Box>\n          )\n        }}\n      />\n      \n      {imagePreview && (\n        <ImagePreview>\n          <img \n            src={imagePreview} \n            alt=\"Preview\" \n          />\n          <IconButton\n            size=\"small\"\n            onClick={handleRemoveImage}\n            sx={{\n              position: 'absolute',\n              top: 8,\n              right: 8,\n              bgcolor: 'rgba(0, 0, 0, 0.5)',\n              color: 'white',\n              '&:hover': {\n                bgcolor: 'rgba(0, 0, 0, 0.7)'\n              }\n            }}\n          >\n            <CloseIcon fontSize=\"small\" />\n          </IconButton>\n        </ImagePreview>\n      )}\n    </Box>\n  );\n};\n\nexport default CommentForm; ","import React from 'react';\nimport { \n  Box, \n  TextField, \n  IconButton, \n  Avatar,\n  Typography,\n  CircularProgress,\n} from '@mui/material';\nimport { styled } from '@mui/material/styles';\nimport CloseIcon from '@mui/icons-material/Close';\nimport SendIcon from '@mui/icons-material/Send';\nimport ImageIcon from '@mui/icons-material/Image';\n\nconst QuotedMessage = styled(Box)(({ theme }) => ({\n  backgroundColor: 'rgba(255, 255, 255, 0.03)',\n  borderRadius: '8px',\n  padding: theme.spacing(1, 1.5),\n  marginBottom: theme.spacing(1),\n  borderLeft: '3px solid rgba(140, 82, 255, 0.5)'\n}));\n\nconst StyledTextField = styled(TextField)(({ theme }) => ({\n  '& .MuiOutlinedInput-root': {\n    backgroundColor: 'rgba(32, 32, 36, 0.6)',\n    backdropFilter: 'blur(5px)',\n    borderRadius: '14px',\n    border: '1px solid rgba(255, 255, 255, 0.05)',\n    '& .MuiOutlinedInput-notchedOutline': {\n      borderColor: 'transparent'\n    },\n    '&:hover .MuiOutlinedInput-notchedOutline': {\n      borderColor: 'rgba(140, 82, 255, 0.3)'\n    },\n    '&.Mui-focused .MuiOutlinedInput-notchedOutline': {\n      borderColor: 'rgba(140, 82, 255, 0.5)'\n    }\n  }\n}));\n\nconst ImagePreview = styled(Box)(({ theme }) => ({\n  marginTop: theme.spacing(1),\n  position: 'relative',\n  '& img': {\n    width: '100%',\n    maxHeight: '150px',\n    objectFit: 'cover',\n    borderRadius: '12px'\n  }\n}));\n\nconst ReplyForm = ({\n  replyText,\n  onReplyTextChange,\n  onReplySubmit,\n  onCancel,\n  targetUser,\n  targetContent,\n  isSubmitting,\n  disabled,\n  replyFileInputRef,\n  replyImagePreview,\n  handleRemoveReplyImage,\n  handleReplyImageChange,\n  commentId,\n  replyId,\n}) => {\n  return (\n    <Box sx={{ \n      mt: 1, \n      pl: { xs: 0.5, sm: 2 },\n      pr: { xs: 0.5, sm: 0 },\n      position: 'relative',\n      mb: 2\n    }}>\n      {/* Display the message being replied to */}\n      <QuotedMessage>\n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 0.5 }}>\n          <Avatar \n            src={targetUser?.photo && targetUser.photo !== 'avatar.png'\n              ? `/static/uploads/avatar/${targetUser.id}/${targetUser.photo}`\n              : `/static/uploads/avatar/system/avatar.png`}\n            alt={targetUser?.name}\n            sx={{ width: 18, height: 18 }}\n            onError={(e) => {\n              console.error(\"Reply form avatar failed to load\");\n              if (e.currentTarget && e.currentTarget.setAttribute) {\n                e.currentTarget.setAttribute('src', '/static/uploads/avatar/system/avatar.png');\n              }\n            }}\n          />\n          <Typography \n            variant=\"caption\"\n            sx={{ \n              fontWeight: 'bold',\n              color: 'text.primary',\n              fontSize: '0.7rem'\n            }}\n          >\n            {targetUser?.name}\n          </Typography>\n        </Box>\n        <Typography variant=\"caption\" color=\"text.secondary\" sx={{ \n          display: '-webkit-box',\n          WebkitLineClamp: 1,\n          WebkitBoxOrient: 'vertical',\n          overflow: 'hidden',\n          mt: 0.25,\n          fontSize: '0.7rem',\n          lineHeight: 1.3,\n          whiteSpace: 'pre-wrap',\n          wordBreak: 'break-word',\n          overflowWrap: 'break-word'\n        }}>\n          {targetContent}\n        </Typography>\n      </QuotedMessage>\n\n      {/* Reply input field */}\n      <StyledTextField\n        fullWidth\n        size=\"small\"\n        placeholder=\"Написать ответ...\"\n        value={replyText || ''}\n        onChange={(e) => typeof onReplyTextChange === 'function' ? onReplyTextChange(e.target.value) : null}\n        disabled={isSubmitting || disabled}\n        multiline\n        maxRows={3}\n        InputProps={{\n          endAdornment: (\n            <Box sx={{ display: 'flex', gap: 1 }}>\n              <input \n                type=\"file\" \n                accept=\"image/*\" \n                onChange={handleReplyImageChange}\n                ref={replyFileInputRef}\n                style={{ display: 'none' }}\n                id=\"reply-image-upload\"\n                disabled={isSubmitting || disabled}\n              />\n              <IconButton\n                size=\"small\"\n                component=\"label\"\n                htmlFor=\"reply-image-upload\"\n                sx={{ color: 'text.secondary' }}\n                disabled={isSubmitting || disabled}\n              >\n                <ImageIcon fontSize=\"small\" />\n              </IconButton>\n              <IconButton\n                size=\"small\"\n                color=\"primary\"\n                onClick={() => typeof onReplySubmit === 'function' ? onReplySubmit(commentId, replyId) : null}\n                disabled={(!(replyText && replyText.trim()) && !replyImagePreview) || isSubmitting || disabled}\n              >\n                {isSubmitting ? (\n                  <CircularProgress size={16} color=\"inherit\" />\n                ) : (\n                  <SendIcon fontSize=\"small\" />\n                )}\n              </IconButton>\n              <IconButton\n                size=\"small\"\n                onClick={typeof onCancel === 'function' ? onCancel : null}\n                sx={{ color: 'text.secondary' }}\n              >\n                <CloseIcon fontSize=\"small\" />\n              </IconButton>\n            </Box>\n          )\n        }}\n      />\n      \n      {/* Image preview */}\n      {replyImagePreview && (\n        <ImagePreview>\n          <img \n            src={replyImagePreview} \n            alt=\"Preview\" \n          />\n          <IconButton\n            size=\"small\"\n            onClick={handleRemoveReplyImage}\n            sx={{\n              position: 'absolute',\n              top: 8,\n              right: 8,\n              bgcolor: 'rgba(0, 0, 0, 0.5)',\n              color: 'white',\n              '&:hover': {\n                bgcolor: 'rgba(0, 0, 0, 0.7)'\n              }\n            }}\n          >\n            <CloseIcon fontSize=\"small\" />\n          </IconButton>\n        </ImagePreview>\n      )}\n    </Box>\n  );\n};\n\nexport default ReplyForm; ","import React, { useState } from 'react';\nimport { \n  Box, \n  Typography,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Button,\n  CircularProgress,\n  Divider\n} from '@mui/material';\nimport { styled } from '@mui/material/styles';\nimport ChatBubbleOutlineIcon from '@mui/icons-material/ChatBubbleOutline';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport CheckCircleIcon from '@mui/icons-material/CheckCircle';\nimport SimpleImageViewer from '../../components/SimpleImageViewer';\n\nimport CommentItem from './CommentItem';\nimport ReplyItem from './ReplyItem';\nimport CommentForm from './CommentForm';\nimport ReplyForm from './ReplyForm';\n\nconst CommentSectionHeader = styled(Typography)(({ theme }) => ({\n  marginBottom: theme.spacing(3),\n  display: 'flex',\n  alignItems: 'center',\n  gap: theme.spacing(1),\n  fontWeight: 600,\n  color: theme.palette.text.primary,\n  fontSize: '1.25rem',\n  [theme.breakpoints.down('sm')]: {\n    marginBottom: theme.spacing(1.5),\n    fontSize: '1rem'\n  }\n}));\n\nconst EmptyCommentsContainer = styled(Box)(({ theme }) => ({\n  padding: theme.spacing(4),\n  textAlign: 'center',\n  backgroundColor: 'rgba(255, 255, 255, 0.02)',\n  borderRadius: '16px',\n  border: '1px dashed rgba(255, 255, 255, 0.1)',\n  [theme.breakpoints.down('sm')]: {\n    padding: theme.spacing(2)\n  }\n}));\n\nconst CommentsContainer = styled(Box)(({ theme }) => ({\n  display: 'flex',\n  flexDirection: 'column',\n  gap: theme.spacing(3),\n  [theme.breakpoints.down('sm')]: {\n    gap: theme.spacing(1.5)\n  }\n}));\n\nconst RepliesContainer = styled(Box)(({ theme }) => ({\n  marginTop: theme.spacing(0.5),\n  marginLeft: theme.spacing(4),\n  paddingLeft: theme.spacing(2),\n  borderLeft: '2px solid rgba(140, 82, 255, 0.2)',\n  paddingTop: theme.spacing(1),\n  paddingBottom: theme.spacing(1),\n  [theme.breakpoints.down('sm')]: {\n    marginLeft: theme.spacing(0.5),\n    paddingLeft: theme.spacing(0.5)\n  }\n}));\n\nconst StyledDialog = styled(Dialog)(({ theme }) => ({\n  '& .MuiDialog-paper': {\n    backgroundColor: 'rgba(32, 32, 36, 0.8)',\n    backdropFilter: 'blur(20px)',\n    boxShadow: '0 4px 15px rgba(0, 0, 0, 0.2)',\n    width: '100%',\n    maxWidth: '400px',\n    borderRadius: '16px',\n    border: '1px solid rgba(100, 90, 140, 0.1)',\n    '&:before': {\n      content: '\"\"',\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      borderRadius: '16px',\n      background: 'linear-gradient(145deg, rgba(30, 30, 30, 0.6), rgba(20, 20, 20, 0.75))',\n      backdropFilter: 'blur(30px)',\n      zIndex: -1\n    }\n  }\n}));\n\nconst CommentSystem = ({ \n  comments = [], \n  user, \n  postId,\n  onLikeComment = () => {},\n  onLikeReply = () => {},\n  onAddComment = () => {},\n  onAddReply = () => {},\n  onDeleteComment = () => {},\n  onDeleteReply = () => {},\n  commentText = '',\n  setCommentText = () => {},\n  commentImage = null,\n  setCommentImage = () => {},\n  imagePreview = '',\n  setImagePreview = () => {},\n  fileInputRef = React.createRef(),\n  isSubmittingComment = false,\n  commentError = '',\n  setCommentError = () => {},\n  waitUntil = 0,\n  onViewImage,\n  useParentDialogs = false,\n  sanitizeImagePath = (imagePath) => imagePath\n}) => {\n  const [replyText, setReplyText] = useState('');\n  const [replyFormOpen, setReplyFormOpen] = useState(false);\n  const [activeComment, setActiveComment] = useState(null);\n  const [replyingToReply, setReplyingToReply] = useState(null);\n  const [replyImage, setReplyImage] = useState(null);\n  const [replyImagePreview, setReplyImagePreview] = useState('');\n  const [replyFileInputRef, setReplyFileInputRef] = useState(React.createRef());\n  const [lightboxOpen, setLightboxOpen] = useState(false);\n  const [currentLightboxImage, setCurrentLightboxImage] = useState('');\n  \n  \n  const [commentDeleteDialog, setCommentDeleteDialog] = useState({\n    open: false,\n    deleting: false,\n    deleted: false,\n    commentId: null\n  });\n  \n  const [replyDeleteDialog, setReplyDeleteDialog] = useState({\n    open: false,\n    deleting: false,\n    deleted: false,\n    commentId: null,\n    replyId: null\n  });\n\n  const handleReplyImageChange = (event) => {\n    const file = event.target.files[0];\n    if (file && file.type.startsWith('image/')) {\n      setReplyImage(file);\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        if (typeof reader.result === 'string') {\n          setReplyImagePreview(reader.result);\n        }\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const handleRemoveReplyImage = () => {\n    setReplyImage(null);\n    setReplyImagePreview('');\n    if (replyFileInputRef.current) {\n      replyFileInputRef.current.value = '';\n    }\n  };\n\n  const handleImageChange = (event) => {\n    const file = event.target.files[0];\n    if (file && file.type.startsWith('image/')) {\n      if (typeof setCommentImage === 'function') setCommentImage(file);\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        if (typeof reader.result === 'string' && typeof setImagePreview === 'function') {\n          setImagePreview(reader.result);\n        }\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const handleRemoveImage = () => {\n    if (typeof setCommentImage === 'function') setCommentImage(null);\n    if (typeof setImagePreview === 'function') setImagePreview('');\n    if (fileInputRef && fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  const handleCommentSubmit = () => {\n    if (typeof onAddComment === 'function') onAddComment();\n  };\n\n  const handleReplySubmit = (commentId, replyId = null) => {\n    if (typeof onAddReply === 'function') onAddReply(commentId, replyId);\n    setReplyText('');\n    setReplyFormOpen(false);\n    setActiveComment(null);\n    setReplyingToReply(null);\n    setReplyImage(null);\n    setReplyImagePreview('');\n  };\n\n  const handleDeleteComment = (commentId) => {\n    if (useParentDialogs) {\n      if (typeof onDeleteComment === 'function') onDeleteComment(commentId);\n    } else {\n      setCommentDeleteDialog({\n        open: true,\n        deleting: false,\n        deleted: false,\n        commentId\n      });\n    }\n  };\n\n  const confirmDeleteComment = () => {\n    if (typeof onDeleteComment === 'function') onDeleteComment(commentDeleteDialog.commentId);\n    setCommentDeleteDialog(prev => ({ ...prev, deleting: true }));\n  };\n\n  const handleDeleteReply = (commentId, replyId) => {\n    if (useParentDialogs) {\n      if (typeof onDeleteReply === 'function') onDeleteReply(commentId, replyId);\n    } else {\n      setReplyDeleteDialog({\n        open: true,\n        deleting: false,\n        deleted: false,\n        commentId,\n        replyId\n      });\n    }\n  };\n\n  const confirmDeleteReply = () => {\n    if (typeof onDeleteReply === 'function') onDeleteReply(replyDeleteDialog.commentId, replyDeleteDialog.replyId);\n    setReplyDeleteDialog(prev => ({ ...prev, deleting: true }));\n  };\n\n  return (\n    <Box>\n      {/* Image lightbox is handled by parent when useParentDialogs is true */}\n\n      {/* Comment form */}\n      <Box sx={{ mb: 3 }}>\n        <CommentForm \n          commentText={commentText}\n          setCommentText={setCommentText}\n          commentImage={commentImage}\n          imagePreview={imagePreview}\n          handleImageChange={handleImageChange}\n          handleRemoveImage={handleRemoveImage}\n          handleCommentSubmit={handleCommentSubmit}\n          fileInputRef={fileInputRef}\n          isSubmitting={isSubmittingComment}\n          disabled={Date.now() < waitUntil}\n          error={commentError}\n        />\n      </Box>\n      \n      <Divider sx={{ mb: 3, opacity: 0.1 }} />\n      \n      {/* Comments section header */}\n      <CommentSectionHeader>\n        <ChatBubbleOutlineIcon sx={{ fontSize: { xs: 20, sm: 24 } }} />\n        Комментарии \n        <Box \n          component=\"span\" \n          sx={{ \n            display: 'inline-flex',\n            backgroundColor: 'rgba(140, 82, 255, 0.15)',\n            color: 'primary.main',\n            borderRadius: '12px',\n            padding: '2px 8px',\n            fontSize: '0.75rem',\n            fontWeight: 'bold',\n            ml: 1\n          }}\n        >\n          {comments.length}\n        </Box>\n      </CommentSectionHeader>\n      \n      {/* Comments list */}\n      {comments.length > 0 ? (\n        <CommentsContainer>\n          {comments.map(comment => {\n            const isCommentOwner = user && (comment.user_id === user.id || user.is_admin);\n            \n            return (\n              <Box key={comment.id}>\n                {/* Main comment */}\n                <CommentItem\n                  comment={comment}\n                  onLike={onLikeComment}\n                  onReply={() => {\n                    setReplyingToReply(null);\n                    setReplyFormOpen(true);\n                    setActiveComment(comment);\n                    setReplyText('');\n                  }}\n                  onDeleteComment={() => handleDeleteComment(comment.id)}\n                  setLightboxOpen={setLightboxOpen}\n                  setCurrentLightboxImage={setCurrentLightboxImage}\n                  isCommentOwner={isCommentOwner}\n                  onViewImage={onViewImage}\n                  sanitizeImagePath={sanitizeImagePath}\n                />\n                \n                {/* Replies to this comment */}\n                {comment.replies && comment.replies.length > 0 && (\n                  <RepliesContainer>\n                    {[...comment.replies]\n                      .sort((a, b) => {\n                        try {\n                          \n                          const getDate = (obj) => {\n                            if (obj.created_at) return new Date(obj.created_at);\n                            if (obj.timestamp) return new Date(obj.timestamp);\n                            if (obj.date) return new Date(obj.date);\n                            if (obj.time) return new Date(obj.time);\n                            if (obj.created) return new Date(obj.created);\n                            \n                            return new Date(0);\n                          };\n                          \n                          const dateA = getDate(a);\n                          const dateB = getDate(b);\n                          return dateA.getTime() - dateB.getTime();\n                        } catch (error) {\n                          console.error('Error sorting replies:', error);\n                          return 0; \n                        }\n                      })\n                      .map(reply => {\n                        const isReplyOwner = user && (reply.user_id === user.id || user.is_admin);\n                        const parentReply = reply.parent_reply_id \n                          ? comment.replies.find(r => r.id === reply.parent_reply_id) \n                          : null;\n                        \n                        return (\n                          <ReplyItem\n                            key={reply.id}\n                            reply={reply}\n                            comment={comment}\n                            parentReply={parentReply}\n                            onLike={() => onLikeReply(comment.id, reply.id)}\n                            onReply={(replyObj) => {\n                              setReplyingToReply(replyObj);\n                              setReplyFormOpen(true);\n                              setActiveComment(comment);\n                              setReplyText('');\n                            }}\n                            onDelete={() => handleDeleteReply(comment.id, reply.id)}\n                            setLightboxOpen={setLightboxOpen}\n                            setCurrentLightboxImage={setCurrentLightboxImage}\n                            isReplyOwner={isReplyOwner}\n                            onViewImage={onViewImage}\n                            sanitizeImagePath={sanitizeImagePath}\n                          />\n                        );\n                      })\n                    }\n                  </RepliesContainer>\n                )}\n                \n                {/* Reply form for this comment */}\n                {replyFormOpen && activeComment?.id === comment.id && (\n                  <ReplyForm\n                    replyText={replyText}\n                    onReplyTextChange={setReplyText}\n                    onReplySubmit={handleReplySubmit}\n                    onCancel={() => {\n                      setReplyFormOpen(false);\n                      setActiveComment(null);\n                      setReplyingToReply(null);\n                      setReplyText('');\n                      setReplyImage(null);\n                      setReplyImagePreview('');\n                    }}\n                    targetUser={replyingToReply ? replyingToReply.user : comment.user}\n                    targetContent={replyingToReply ? replyingToReply.content : comment.content}\n                    isSubmitting={isSubmittingComment}\n                    disabled={Date.now() < waitUntil}\n                    replyFileInputRef={replyFileInputRef}\n                    replyImagePreview={replyImagePreview}\n                    handleRemoveReplyImage={handleRemoveReplyImage}\n                    handleReplyImageChange={handleReplyImageChange}\n                    commentId={comment.id}\n                    replyId={replyingToReply?.id}\n                  />\n                )}\n              </Box>\n            );\n          })}\n        </CommentsContainer>\n      ) : (\n        <EmptyCommentsContainer>\n          <ChatBubbleOutlineIcon sx={{ fontSize: { xs: 32, sm: 40 }, color: 'text.secondary', mb: { xs: 1, sm: 2 }, opacity: 0.6 }} />\n          <Typography variant=\"body1\" color=\"text.secondary\" sx={{ fontSize: { xs: '0.9rem', sm: '1rem' } }}>\n            Комментариев пока нет. Будьте первым!\n          </Typography>\n        </EmptyCommentsContainer>\n      )}\n      \n      {/* Comment delete confirmation dialog */}\n      <StyledDialog\n        open={commentDeleteDialog.open}\n        onClose={() => !commentDeleteDialog.deleting && !commentDeleteDialog.deleted && \n                     setCommentDeleteDialog(prev => ({ ...prev, open: false }))}\n      >\n        <Box sx={{ p: 3 }}>\n          {commentDeleteDialog.deleted ? (\n            <>\n              <Box sx={{ textAlign: 'center', py: 2 }}>\n                <CheckCircleIcon sx={{ fontSize: 56, color: '#4CAF50', mb: 2 }} />\n                <Typography variant=\"h6\" sx={{ mb: 1, color: 'white' }}>\n                  Комментарий удален\n                </Typography>\n                <Typography variant=\"body2\" sx={{ color: 'rgba(255, 255, 255, 0.7)' }}>\n                  Комментарий был успешно удален\n                </Typography>\n              </Box>\n            </>\n          ) : (\n            <>\n              <Typography \n                variant=\"h6\" \n                sx={{ \n                  mb: 2, \n                  color: '#f44336',\n                  fontWeight: 'medium',\n                  display: 'flex',\n                  alignItems: 'center'\n                }}\n              >\n                <DeleteIcon sx={{ mr: 1 }} /> Удаление комментария\n              </Typography>\n              <Typography sx={{ mb: 3, color: 'rgba(255, 255, 255, 0.7)' }}>\n                Вы уверены, что хотите удалить этот комментарий? Это действие нельзя отменить.\n              </Typography>\n              <Box sx={{ display: 'flex', justifyContent: 'flex-end', gap: 1 }}>\n                <Button \n                  onClick={() => setCommentDeleteDialog(prev => ({ ...prev, open: false }))}\n                  disabled={commentDeleteDialog.deleting}\n                  sx={{ \n                    borderRadius: '10px',\n                    color: 'rgba(255, 255, 255, 0.7)',\n                    px: 2,\n                    '&:hover': {\n                      bgcolor: 'rgba(255, 255, 255, 0.08)',\n                      color: 'rgba(255, 255, 255, 0.9)'\n                    }\n                  }}\n                >\n                  Отмена\n                </Button>\n                <Button \n                  onClick={confirmDeleteComment}\n                  disabled={commentDeleteDialog.deleting}\n                  variant=\"contained\" \n                  color=\"error\"\n                  sx={{ \n                    borderRadius: '10px',\n                    boxShadow: 'none',\n                    px: 2\n                  }}\n                  endIcon={commentDeleteDialog.deleting ? <CircularProgress size={16} color=\"inherit\" /> : null}\n                >\n                  {commentDeleteDialog.deleting ? 'Удаление...' : 'Удалить'}\n                </Button>\n              </Box>\n            </>\n          )}\n        </Box>\n      </StyledDialog>\n      \n      {/* Reply delete confirmation dialog */}\n      <StyledDialog\n        open={replyDeleteDialog.open}\n        onClose={() => !replyDeleteDialog.deleting && !replyDeleteDialog.deleted && \n                     setReplyDeleteDialog(prev => ({ ...prev, open: false }))}\n      >\n        <Box sx={{ p: 3 }}>\n          {replyDeleteDialog.deleted ? (\n            <>\n              <Box sx={{ textAlign: 'center', py: 2 }}>\n                <CheckCircleIcon sx={{ fontSize: 56, color: '#4CAF50', mb: 2 }} />\n                <Typography variant=\"h6\" sx={{ mb: 1, color: 'white' }}>\n                  Ответ удален\n                </Typography>\n                <Typography variant=\"body2\" sx={{ color: 'rgba(255, 255, 255, 0.7)' }}>\n                  Ответ был успешно удален\n                </Typography>\n              </Box>\n            </>\n          ) : (\n            <>\n              <Typography \n                variant=\"h6\" \n                sx={{ \n                  mb: 2, \n                  color: '#f44336',\n                  fontWeight: 'medium',\n                  display: 'flex',\n                  alignItems: 'center'\n                }}\n              >\n                <DeleteIcon sx={{ mr: 1 }} /> Удаление ответа\n              </Typography>\n              <Typography sx={{ mb: 3, color: 'rgba(255, 255, 255, 0.7)' }}>\n                Вы уверены, что хотите удалить этот ответ? Это действие нельзя отменить.\n              </Typography>\n              <Box sx={{ display: 'flex', justifyContent: 'flex-end', gap: 1 }}>\n                <Button \n                  onClick={() => setReplyDeleteDialog(prev => ({ ...prev, open: false }))}\n                  disabled={replyDeleteDialog.deleting}\n                  sx={{ \n                    borderRadius: '10px',\n                    color: 'rgba(255, 255, 255, 0.7)',\n                    px: 2,\n                    '&:hover': {\n                      bgcolor: 'rgba(255, 255, 255, 0.08)',\n                      color: 'rgba(255, 255, 255, 0.9)'\n                    }\n                  }}\n                >\n                  Отмена\n                </Button>\n                <Button \n                  onClick={confirmDeleteReply}\n                  disabled={replyDeleteDialog.deleting}\n                  variant=\"contained\" \n                  color=\"error\"\n                  sx={{ \n                    borderRadius: '10px',\n                    boxShadow: 'none',\n                    px: 2\n                  }}\n                  endIcon={replyDeleteDialog.deleting ? <CircularProgress size={16} color=\"inherit\" /> : null}\n                >\n                  {replyDeleteDialog.deleting ? 'Удаление...' : 'Удалить'}\n                </Button>\n              </Box>\n            </>\n          )}\n        </Box>\n      </StyledDialog>\n      \n      {/* Image lightbox is handled by parent when useParentDialogs is true */}\n    </Box>\n  );\n};\n\nexport default CommentSystem; ","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M16.01 11H4v2h12.01v3L20 12l-3.99-4z\"\n}), 'ArrowRightAlt');","import React, { useState, useRef, useEffect } from 'react';\nimport axios from 'axios';\nimport styled from '@emotion/styled';\nimport {\n  Box,\n  Typography,\n  TextField,\n  Button,\n  Dialog,\n  DialogContent,\n  CircularProgress,\n  InputAdornment,\n  IconButton,\n  Avatar,\n  useMediaQuery,\n  useTheme\n} from '@mui/material';\nimport SendIcon from '@mui/icons-material/Send';\nimport CloseIcon from '@mui/icons-material/Close';\nimport CheckCircleIcon from '@mui/icons-material/CheckCircle';\nimport ArrowRightAltIcon from '@mui/icons-material/ArrowRightAlt';\nimport { alpha } from '@mui/material/styles';\nimport VerifiedIcon from '@mui/icons-material/Verified';\n\nconst StyledDialog = styled(Dialog)(({ theme }) => ({\n  '& .MuiDialog-paper': {\n    backgroundColor: 'rgba(12, 12, 14, 0.95)',\n    backdropFilter: 'blur(10px)',\n    boxShadow: '0 8px 32px rgba(0, 0, 0, 0.5)',\n    borderRadius: props => props.fullScreen ? 0 : 12,\n    overflow: 'hidden',\n    maxWidth: 500,\n  }\n}));\n\nconst DialogHeader = styled(Box)(() => ({\n  background: 'linear-gradient(45deg, #d079f3, #5e1c876b)',\n  padding: '20px',\n  position: 'relative',\n  textAlign: 'center',\n  display: 'flex',\n  flexDirection: 'column',\n  alignItems: 'center'\n}));\n\nconst DialogAvatar = styled(Avatar)(({ theme }) => ({\n  backgroundColor: 'rgba(255,255,255,0.1)',\n  color: '#fff',\n  width: 46,\n  height: 46,\n  fontSize: 20,\n  marginBottom: 12,\n  '& svg': {\n    fontSize: 24\n  }\n}));\n\nconst InputContainer = styled(Box)(() => ({\n  marginBottom: 24\n}));\n\nconst StyledTextField = styled(TextField)(({ theme }) => ({\n  '& .MuiOutlinedInput-root': {\n    backgroundColor: 'rgba(20, 20, 20, 0.4)',\n    backdropFilter: 'blur(5px)',\n    borderRadius: 8,\n    '&:hover .MuiOutlinedInput-notchedOutline': {\n      borderColor: 'rgba(255,255,255,0.2)',\n    },\n    '&.Mui-focused .MuiOutlinedInput-notchedOutline': {\n      borderColor: '#555555',\n    }\n  },\n  '& .MuiInputLabel-root': {\n    color: 'rgba(255,255,255,0.7)',\n    '&.Mui-focused': {\n      color: '#999999',\n    }\n  },\n  '& .MuiOutlinedInput-input': {\n    color: '#fff'\n  },\n  '& .MuiFormHelperText-root': {\n    marginLeft: 2,\n    marginTop: 8\n  }\n}));\n\nconst SuggestionsContainer = styled(Box)(() => ({\n  backgroundColor: 'rgba(20, 20, 20, 0.4)',\n  backdropFilter: 'blur(5px)',\n  borderRadius: 8,\n  marginBottom: 24,\n  maxHeight: 200,\n  overflow: 'auto',\n}));\n\nconst SuggestionItem = styled(Box)(() => ({\n  padding: '10px 16px',\n  display: 'flex',\n  alignItems: 'center',\n  cursor: 'pointer',\n  '&:hover': {\n    backgroundColor: 'rgba(40, 40, 40, 0.4)'\n  }\n}));\n\nconst UserAvatar = styled(Avatar)(() => ({\n  width: 32,\n  height: 32,\n  fontSize: 14,\n  marginRight: 12,\n  backgroundColor: '#444444'\n}));\n\nconst ButtonContainer = styled(Box)(() => ({\n  padding: 24, \n  display: 'flex', \n  justifyContent: 'space-between',\n  borderTop: '1px solid rgba(54, 54, 54, 0.68)',\n  background: 'rgba(10, 10, 10, 0.8)'\n}));\n\nconst CancelButton = styled(Button)(() => ({\n  color: 'rgba(255,255,255,0.7)',\n  '&:hover': {\n    backgroundColor: 'rgba(40, 40, 40, 0.4)'\n  }\n}));\n\nconst GradientButton = styled(Button)(() => ({\n  backgroundImage: 'linear-gradient(90deg, #6b5d97, #827095)',\n  color: 'white',\n  padding: '8px 24px',\n  '&:hover': {\n    opacity: 0.9,\n  },\n  '&:disabled': {\n    color: 'rgba(255,255,255,0.5)',\n    backgroundImage: 'none',\n    backgroundColor: 'rgba(40, 40, 40, 0.4)'\n  }\n}));\n\n// Функция для определения светлого/темного фона\nconst isLightColor = (color) => {\n  if (!color || !color.startsWith('#')) {\n    return false;\n  }\n  const hex = color.replace('#', '');\n  const r = parseInt(hex.substr(0, 2), 16);\n  const g = parseInt(hex.substr(2, 2), 16);\n  const b = parseInt(hex.substr(4, 2), 16);\n  const brightness = (r * 299 + g * 587 + b * 114) / 1000;\n  return brightness > 128;\n};\n\nconst UserCard = styled(Box)(({ theme, decoration }) => {\n  // Определяем тип фона (градиент, изображение или цвет)\n  const isGradient = decoration?.background?.includes('linear-gradient');\n  const isImage = decoration?.background?.includes('/');\n  const isHexColor = decoration?.background?.startsWith('#');\n  const isLightBackground = isHexColor && isLightColor(decoration?.background);\n\n  return {\n    display: 'flex',\n    alignItems: 'center',\n    padding: theme.spacing(1.5),\n    borderRadius: theme.spacing(2),\n    marginBottom: theme.spacing(1),\n    backgroundColor: theme.palette.background.paper,\n    position: 'relative',\n    overflow: 'hidden',\n    background: decoration?.background ? (\n      isImage ? `url(${decoration.background})` : decoration.background\n    ) : theme.palette.background.paper,\n    backgroundSize: isImage ? 'cover' : 'auto',\n    backgroundPosition: isImage ? 'center' : 'auto',\n    color: isLightBackground ? 'rgba(0, 0, 0, 0.87)' : theme.palette.text.primary,\n    '& .MuiTypography-root': {\n      color: isLightBackground ? 'rgba(0, 0, 0, 0.87)' : 'inherit',\n    },\n    '& .MuiTypography-colorTextSecondary': {\n      color: isLightBackground ? 'rgba(0, 0, 0, 0.6)' : theme.palette.text.secondary,\n    },\n    '&:hover': {\n      backgroundColor: alpha(theme.palette.background.paper, 0.8),\n      cursor: 'pointer',\n    },\n    '&::before': isGradient ? {\n      content: '\"\"',\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      background: decoration.background,\n      opacity: 0.15,\n      zIndex: 0,\n    } : {},\n  };\n});\n\nconst DecorationItem = styled('img')({\n  position: 'absolute',\n  right: 0,\n  height: 'max-content',\n  maxHeight: 60,\n  opacity: 1,\n  pointerEvents: 'none',\n  zIndex: 1,\n});\n\nconst TransferMenu = ({ open, onClose, userPoints, onSuccess }) => {\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\n  const [transferData, setTransferData] = useState({ username: '', amount: '', message: '', recipient_id: null });\n  const [transferErrors, setTransferErrors] = useState({});\n  const [userSearch, setUserSearch] = useState({ loading: false, exists: false, suggestions: [] });\n  const [isTransferring, setIsTransferring] = useState(false);\n  const [transferSuccess, setTransferSuccess] = useState(false);\n  const [transferReceipt, setTransferReceipt] = useState(null);\n  \n  const debounceTimerRef = useRef(null);\n\n  useEffect(() => {\n    \n    return () => {\n      if (debounceTimerRef.current) {\n        clearTimeout(debounceTimerRef.current);\n      }\n    };\n  }, []);\n\n  useEffect(() => {\n    \n    if (!open) {\n      if (debounceTimerRef.current) {\n        clearTimeout(debounceTimerRef.current);\n        debounceTimerRef.current = null;\n      }\n    }\n  }, [open]);\n\n  const searchUser = (query) => {\n    setUserSearch(prev => ({...prev, loading: true}));\n    \n    \n    if (debounceTimerRef.current) {\n      clearTimeout(debounceTimerRef.current);\n    }\n    \n    \n    debounceTimerRef.current = setTimeout(() => {\n      \n      const url = `/api/search/recipients?query=${encodeURIComponent(query)}`;\n      \n      axios.get(url)\n        .then(response => {\n          if (response.data && response.data.users && response.data.users.length > 0) {\n            \n            const exactMatch = response.data.users.find(u => \n              u.username.toLowerCase() === query.toLowerCase()\n            );\n            \n            \n            if (exactMatch) {\n              setTransferData(prev => ({...prev, recipient_id: exactMatch.id}));\n            } else {\n              setTransferData(prev => ({...prev, recipient_id: null}));\n            }\n            \n            \n            setUserSearch(prev => ({\n              ...prev,\n              loading: false,\n              exists: !!exactMatch,\n              suggestions: response.data.users.slice(0, 3),\n            }));\n          } else {\n            setUserSearch(prev => ({\n              ...prev,\n              loading: false,\n              exists: false,\n              suggestions: [],\n            }));\n            setTransferData(prev => ({...prev, recipient_id: null}));\n          }\n        })\n        .catch(error => {\n          console.error('Ошибка при поиске пользователя:', error);\n          setUserSearch(prev => ({\n            ...prev,\n            loading: false,\n            exists: false,\n            suggestions: [],\n          }));\n          setTransferData(prev => ({...prev, recipient_id: null}));\n        });\n    }, 300); \n  };\n\n  const handleUsernameChange = (e) => {\n    const username = e.target.value;\n    setTransferData(prev => ({...prev, username}));\n    \n    if (username.trim()) {\n      searchUser(username.trim());\n    } else {\n      \n      if (debounceTimerRef.current) {\n        clearTimeout(debounceTimerRef.current);\n        debounceTimerRef.current = null;\n      }\n      setUserSearch(prev => ({\n        ...prev,\n        loading: false,\n        exists: false,\n        suggestions: [],\n      }));\n      setTransferData(prev => ({...prev, recipient_id: null}));\n    }\n  };\n\n  const selectSuggestion = (username, userId) => {\n    setTransferData(prev => ({...prev, username, recipient_id: userId}));\n    setUserSearch(prev => ({\n      ...prev,\n      loading: false,\n      exists: true,\n      suggestions: []\n    }));\n  };\n\n  // Calculate commission and total amount\n  const calculateCommission = (amount) => {\n    if (!amount || isNaN(amount)) return { commission: 0, total: 0, recipientAmount: 0 };\n    const numAmount = parseInt(amount);\n    const commission = Math.floor(numAmount * 0.1); // 10% commission\n    return {\n      commission,\n      total: numAmount,\n      recipientAmount: numAmount - commission\n    };\n  };\n\n  const handleTransferPoints = async () => {\n    const errors = {};\n    if (!transferData.username) errors.username = 'Введите имя пользователя';\n    if (!transferData.recipient_id) errors.username = 'Пользователь не найден';\n    if (!transferData.amount) {\n      errors.amount = 'Введите сумму перевода';\n    } else if (isNaN(transferData.amount) || parseInt(transferData.amount) <= 0) {\n      errors.amount = 'Сумма должна быть положительным числом';\n    } else {\n      const { total } = calculateCommission(transferData.amount);\n      if (total > userPoints) {\n        errors.amount = `Недостаточно баллов для перевода`;\n      }\n    }\n\n    if (Object.keys(errors).length > 0) {\n      setTransferErrors(errors);\n      return;\n    }\n\n    if (isTransferring) return;\n\n    setTransferErrors({});\n    setIsTransferring(true);\n    \n    const transferAmount = parseInt(transferData.amount);\n    const { commission, total, recipientAmount } = calculateCommission(transferAmount);\n    const newBalance = userPoints - total;\n    \n    try {\n      const response = await axios.post(`/api/user/transfer-points`, {\n        recipient_username: transferData.username,\n        recipient_id: transferData.recipient_id,\n        amount: transferAmount,\n        message: transferData.message\n      });\n      \n      try {\n        const now = new Date();\n        const transactionId = `TR-${Date.now().toString().slice(-8)}`;\n        \n        const receiptResponse = await axios.post(`/api/user/generate-receipt`, {\n          transaction_data: {\n            transactionId: transactionId,\n            amount: transferAmount,\n            commission: commission,\n            total: total,\n            recipientAmount: recipientAmount,\n            recipientUsername: transferData.username,\n            senderUsername: response.data.sender_username || 'Вы', \n            date: now.toISOString()\n          }\n        });\n        \n        if (receiptResponse.data && receiptResponse.data.success) {\n          setTransferReceipt({\n            dataUrl: `data:application/pdf;base64,${receiptResponse.data.pdf_data}`,\n            filePath: receiptResponse.data.file_path,\n            amount: transferAmount,\n            commission: commission,\n            total: total,\n            recipientAmount: recipientAmount,\n            recipient: transferData.username,\n            previousBalance: userPoints,\n            newBalance: newBalance\n          });\n          \n          setTransferSuccess(true);\n          \n          if (onSuccess) {\n            onSuccess({\n              newBalance: newBalance,\n              previousBalance: userPoints,\n              amount: transferAmount,\n              commission: commission,\n              total: total,\n              recipientAmount: recipientAmount\n            });\n          }\n        }\n      } catch (error) {\n        console.error('Ошибка при создании чека:', error);\n        \n        setTransferSuccess(true);\n        if (onSuccess) {\n          onSuccess({\n            newBalance: newBalance,\n            previousBalance: userPoints,\n            amount: transferAmount,\n            commission: commission,\n            total: total,\n            recipientAmount: recipientAmount\n          });\n        }\n      }\n      \n      setTransferData({ username: '', amount: '', message: '', recipient_id: null });\n      setIsTransferring(false);\n      \n    } catch (error) {\n      console.error('Ошибка при переводе баллов:', error);\n      setTransferErrors({ general: error.response?.data?.error || 'Ошибка при переводе баллов' });\n      setIsTransferring(false);\n    }\n  };\n\n  const handleClearUsername = () => {\n    if (debounceTimerRef.current) {\n      clearTimeout(debounceTimerRef.current);\n      debounceTimerRef.current = null;\n    }\n    setTransferData(prev => ({...prev, username: '', recipient_id: null}));\n    setUserSearch(prev => ({ ...prev, loading: false, exists: false, suggestions: [] }));\n  };\n\n  return (\n    <StyledDialog \n      open={open} \n      onClose={() => {\n        if (!isTransferring) {\n          if (transferSuccess) {\n            setTransferSuccess(false);\n          }\n          onClose();\n        }\n      }}\n      maxWidth=\"sm\"\n      fullWidth\n      fullScreen={isMobile}\n    >\n      {!transferSuccess ? (\n        <>\n          <DialogHeader>\n            <DialogAvatar>\n              <SendIcon />\n            </DialogAvatar>\n            <Typography variant=\"h5\" sx={{ color: 'white', fontWeight: 700, mb: 1 }}>\n              Перевод баллов\n            </Typography>\n            <Typography variant=\"body2\" sx={{ color: 'rgba(255,255,255,0.7)', maxWidth: '80%' }}>\n              Мгновенный перевод баллов другому пользователю платформы\n            </Typography>\n          </DialogHeader>\n          \n          <DialogContent sx={{ p: 3, bgcolor: 'rgba(10, 10, 10, 0.8)' }}>\n            <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 4 }}>\n              <Typography variant=\"subtitle2\" sx={{ color: 'rgba(255,255,255,0.7)' }}>\n                Доступно для перевода\n              </Typography>\n              <Typography variant=\"h6\" fontWeight=\"bold\" sx={{ color: '#AAAAAA' }}>\n                {userPoints} баллов\n              </Typography>\n            </Box>\n\n            <InputContainer>\n              <StyledTextField\n                label=\"Получатель\"\n                fullWidth\n                variant=\"outlined\"\n                value={transferData.username}\n                onChange={handleUsernameChange}\n                error={!!transferErrors.username}\n                helperText={transferErrors.username}\n                placeholder=\"Введите имя пользователя\"\n                InputProps={{\n                  endAdornment: (\n                    <React.Fragment>\n                      {userSearch.loading && <CircularProgress size={20} color=\"inherit\" />}\n                      {userSearch.exists && !userSearch.loading && \n                        <CheckCircleIcon sx={{ color: '#4CAF50' }} />\n                      }\n                      {transferData.username && !userSearch.loading && (\n                        <InputAdornment position=\"end\">\n                          <IconButton \n                            edge=\"end\"\n                            onClick={handleClearUsername}\n                          >\n                            <CloseIcon fontSize=\"small\" />\n                          </IconButton>\n                        </InputAdornment>\n                      )}\n                    </React.Fragment>\n                  )\n                }}\n              />\n            </InputContainer>\n            \n            {userSearch.suggestions.length > 0 && !userSearch.exists && (\n              <SuggestionsContainer>\n                <Box sx={{ p: 2, pb: 1 }}>\n                  <Typography variant=\"subtitle2\" sx={{ color: 'rgba(255,255,255,0.6)', fontSize: '0.85rem' }}>\n                    Похожие пользователи\n                  </Typography>\n                </Box>\n                {userSearch.suggestions.map((user) => (\n                  <UserCard\n                    key={user.id}\n                    decoration={user.decoration}\n                    onClick={() => selectSuggestion(user.username, user.id)}\n                  >\n                    {user.decoration?.item_path && (() => {\n                      const [path, ...styles] = user.decoration.item_path.split(';');\n                      const styleObj = styles.reduce((acc, style) => {\n                        const [key, value] = style.split(':').map(s => s.trim());\n                        // Уменьшаем размеры в два раза для height\n                        if (key === 'height') {\n                          const size = parseInt(value);\n                          return { ...acc, [key]: `${size / 2}px` };\n                        }\n                        return { ...acc, [key]: value };\n                      }, {});\n\n                      return (\n                        <DecorationItem \n                          src={path}\n                          alt=\"decoration\"\n                          style={styleObj}\n                        />\n                      );\n                    })()}\n                    <Box sx={{ position: 'relative', zIndex: 2, display: 'flex', alignItems: 'center', width: '100%' }}>\n                      <UserAvatar \n                        src={user.photo ? `/static/uploads/avatar/${user.id}/${user.photo}` : undefined}\n                        alt={user.username}\n                      >\n                        {user.username.charAt(0).toUpperCase()}\n                      </UserAvatar>\n                      <Box sx={{ flex: 1 }}>\n                        <Box sx={{ display: 'flex', alignItems: 'center' }}>\n                          <Typography variant=\"subtitle1\" sx={{ fontWeight: 'bold' }}>\n                            {user.name}\n                          </Typography>\n                          {user.verification_status === 'verified' && (\n                            <VerifiedIcon \n                              sx={{ \n                                fontSize: 16, \n                                ml: 0.5, \n                                color: '#D0BCFF' \n                              }} \n                            />\n                          )}\n                        </Box>\n                        <Typography variant=\"body2\" color=\"text.secondary\">\n                          @{user.username}\n                        </Typography>\n                      </Box>\n                    </Box>\n                  </UserCard>\n                ))}\n              </SuggestionsContainer>\n            )}\n            \n            {userSearch.exists && transferData.recipient_id && (\n              <Box sx={{ \n                p: 2, \n                mb: 3, \n                bgcolor: 'rgba(40, 40, 40, 0.4)', \n                backdropFilter: 'blur(5px)',\n                borderRadius: 2,\n                border: '1px solid rgba(60, 60, 60, 0.4)',\n                display: 'flex',\n                alignItems: 'center'\n              }}>\n                <CheckCircleIcon sx={{ color: '#4CAF50', mr: 1 }} />\n                <Typography variant=\"body2\">\n                  Получатель подтвержден: <strong>{transferData.username}</strong>\n                </Typography>\n              </Box>\n            )}\n            \n            <InputContainer>\n              <StyledTextField\n                label=\"Сумма перевода\"\n                fullWidth\n                variant=\"outlined\"\n                type=\"number\"\n                value={transferData.amount}\n                onChange={(e) => {\n                  const value = e.target.value;\n                  if (value === '' || /^\\d+$/.test(value)) {\n                    setTransferData(prev => ({...prev, amount: value}));\n                    setTransferErrors(prev => ({...prev, amount: ''}));\n                  }\n                }}\n                error={!!transferErrors.amount}\n                helperText={transferErrors.amount}\n                InputProps={{\n                  endAdornment: <InputAdornment position=\"end\">баллов</InputAdornment>\n                }}\n              />\n              {transferData.amount && !transferErrors.amount && (\n                <Box sx={{ mt: 2, p: 2, bgcolor: 'rgba(0,0,0,0.2)', borderRadius: 1 }}>\n                  <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\n                    Детали перевода:\n                  </Typography>\n                  <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 1 }}>\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                      Сумма перевода:\n                    </Typography>\n                    <Typography variant=\"body2\" color=\"text.primary\">\n                      {transferData.amount} баллов\n                    </Typography>\n                  </Box>\n                  <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 1 }}>\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                      Комиссия (10%):\n                    </Typography>\n                    <Typography variant=\"body2\" color=\"error\">\n                      -{calculateCommission(transferData.amount).commission} баллов\n                    </Typography>\n                  </Box>\n                  <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 1 }}>\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                      Получатель получит:\n                    </Typography>\n                    <Typography variant=\"body2\" color=\"success.main\">\n                      {calculateCommission(transferData.amount).recipientAmount} баллов\n                    </Typography>\n                  </Box>\n                  <Box sx={{ display: 'flex', justifyContent: 'space-between' }}>\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                      Ваш баланс после перевода:\n                    </Typography>\n                    <Typography variant=\"body2\" color=\"text.primary\">\n                      {userPoints - calculateCommission(transferData.amount).total} баллов\n                    </Typography>\n                  </Box>\n                </Box>\n              )}\n            </InputContainer>\n            \n            <InputContainer>\n              <StyledTextField\n                label=\"Сообщение (необязательно)\"\n                fullWidth\n                variant=\"outlined\"\n                value={transferData.message}\n                onChange={(e) => setTransferData(prev => ({ ...prev, message: e.target.value }))}\n                placeholder=\"Введите сообщение для получателя\"\n                multiline\n                rows={2}\n              />\n            </InputContainer>\n            \n            {transferErrors.general && (\n              <Box sx={{ \n                p: 2, \n                mb: 2, \n                bgcolor: 'rgba(50, 20, 20, 0.4)', \n                backdropFilter: 'blur(5px)',\n                borderRadius: 2,\n                border: '1px solid rgba(70, 20, 20, 0.4)',\n              }}>\n                <Typography variant=\"body2\" color=\"error\">\n                  {transferErrors.general}\n                </Typography>\n              </Box>\n            )}\n          </DialogContent>\n          \n          <ButtonContainer>\n            <CancelButton \n              onClick={onClose}\n              disabled={isTransferring}\n            >\n              Отмена\n            </CancelButton>\n            <GradientButton \n              onClick={handleTransferPoints} \n              disabled={!userSearch.exists || !transferData.recipient_id || userSearch.loading || !transferData.amount || isTransferring}\n              startIcon={isTransferring ? <CircularProgress size={20} color=\"inherit\" /> : <SendIcon />}\n            >\n              {isTransferring ? 'Выполнение перевода...' : 'Перевести безопасно'}\n            </GradientButton>\n          </ButtonContainer>\n        </>\n      ) : (\n        <>\n          <DialogHeader>\n            <DialogAvatar sx={{ backgroundColor: 'rgba(76, 175, 80, 0.2)', color: '#4CAF50', width: 60, height: 60 }}>\n              <CheckCircleIcon sx={{ fontSize: 32 }} />\n            </DialogAvatar>\n            <Typography variant=\"h5\" sx={{ color: 'white', fontWeight: 700, mb: 1 }}>\n              Перевод выполнен\n            </Typography>\n            <Typography variant=\"body2\" sx={{ color: 'rgba(255,255,255,0.7)', maxWidth: '80%' }}>\n              Баллы успешно переведены пользователю {transferReceipt?.recipient}\n            </Typography>\n          </DialogHeader>\n          \n          <DialogContent sx={{ p: 3, bgcolor: 'rgba(10, 10, 10, 0.8)' }}>\n            <Box sx={{ \n              p: 3, \n              bgcolor: 'rgba(40, 40, 40, 0.4)', \n              borderRadius: 2,\n              mb: 3,\n              border: '1px solid rgba(60, 60, 60, 0.4)',\n            }}>\n              <Typography variant=\"subtitle1\" sx={{ color: 'rgba(255,255,255,0.7)', mb: 2 }}>\n                Детали транзакции\n              </Typography>\n              \n              <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 1 }}>\n                <Typography variant=\"body2\" sx={{ color: 'rgba(255,255,255,0.7)' }}>\n                  Сумма перевода\n                </Typography>\n                <Typography variant=\"body1\" sx={{ fontWeight: 'bold' }}>\n                  {transferReceipt?.amount} баллов\n                </Typography>\n              </Box>\n              \n              <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 1 }}>\n                <Typography variant=\"body2\" sx={{ color: 'rgba(255,255,255,0.7)' }}>\n                  Получатель\n                </Typography>\n                <Typography variant=\"body1\">\n                  {transferReceipt?.recipient}\n                </Typography>\n              </Box>\n              \n              <Box sx={{ mt: 4, mb: 1 }}>\n                <Typography variant=\"subtitle2\" sx={{ color: '#4CAF50', mb: 2 }}>\n                  Баланс после операции\n                </Typography>\n                \n                <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\n                  <Box>\n                    <Typography variant=\"caption\" sx={{ color: 'rgba(255,255,255,0.5)' }}>\n                      До перевода\n                    </Typography>\n                    <Typography variant=\"h6\">\n                      {transferReceipt?.previousBalance}\n                    </Typography>\n                  </Box>\n                  \n                  <ArrowRightAltIcon sx={{ color: 'rgba(255,255,255,0.3)', mx: 2 }} />\n                  \n                  <Box sx={{ textAlign: 'right' }}>\n                    <Typography variant=\"caption\" sx={{ color: 'rgba(255,255,255,0.5)' }}>\n                      После перевода\n                    </Typography>\n                    <Typography variant=\"h6\" sx={{ color: '#AAAAAA' }}>\n                      {transferReceipt?.newBalance}\n                    </Typography>\n                  </Box>\n                </Box>\n              </Box>\n            </Box>\n            \n            {transferReceipt?.dataUrl && (\n              <Box sx={{ textAlign: 'center', mb: 2 }}>\n                <Button \n                  component=\"a\"\n                  href={transferReceipt.dataUrl}\n                  download={`receipt-${Date.now()}.pdf`}\n                  variant=\"outlined\"\n                  sx={{\n                    borderColor: 'rgba(255,255,255,0.2)',\n                    color: 'white',\n                    '&:hover': {\n                      borderColor: 'rgba(255,255,255,0.4)',\n                      backgroundColor: 'rgba(255,255,255,0.05)'\n                    }\n                  }}\n                >\n                  Скачать квитанцию\n                </Button>\n              </Box>\n            )}\n            \n          </DialogContent>\n          \n          <ButtonContainer>\n            <GradientButton \n              onClick={() => {\n                setTransferSuccess(false);\n                onClose();\n              }}\n              fullWidth\n            >\n              Закрыть\n            </GradientButton>\n          </ButtonContainer>\n        </>\n      )}\n    </StyledDialog>\n  );\n};\n\nexport default TransferMenu; "],"names":["_interopRequireDefault","require$$0","Object","defineProperty","SwapHoriz","value","default","_createSvgIcon","_jsxRuntime","require$$2","jsx","d","MenuContainer","styled","Box","theme","position","zIndex","backgroundColor","palette","mode","alpha","background","paper","borderRadius","boxShadow","minWidth","padding","overflow","animation","border","from","opacity","transform","to","MenuItem","disabled","display","alignItems","cursor","transition","userSelect","color","text","primary","main","MenuIcon","marginRight","justifyContent","width","height","MenuLabel","fontSize","ContextMenu","items","x","y","show","onClose","useTheme","themeSettings","useContext","ThemeSettingsContext","menuRef","useRef","setPosition","useState","useEffect","current","rect","getBoundingClientRect","viewportWidth","window","innerWidth","viewportHeight","innerHeight","adjustedX","adjustedY","handleClickOutside","event","contains","target","addEventListener","removeEventListener","handleEscape","e","key","ref","sx","left","top","map","item","jsxs","onClick","icon","label","id","NavItemStyled","ListItem","active","isspecial","themecolor","spacing","marginBottom","content","breakpoints","down","NavIconStyled","ListItemIcon","filter","NavTextStyled","ListItemText","fontWeight","letterSpacing","textShadow","NavButton$1","memo","NavButton","path","isSpecial","themeColor","endIcon","endIconActive","component","nested","rel","rest","componentProps","RouterLink","nestedStyles","pl","button","undefined","children","areEqual","prevProps","nextProps","MoreButtonStyled","paddingRight","marginTop","MoreButton$1","MoreButton","arrowIcon","arrowUpIcon","arrowDownIcon","ArrowIcon","className","AlternateEmail","StyledDialogTitle","DialogTitle","backdropFilter","borderBottom","divider","StyledDialogContent","DialogContent","HistoryItem","Paper","shape","OwnerBox","dark","light","truncateText","maxLength","length","substring","usernameHistoryCache","userDataCache","loadCacheFromSessionStorage","historyCache","sessionStorage","getItem","assign","JSON","parse","userCache","error","UsernameCard","username","open","loading","setLoading","history","setHistory","setError","userData","setUserData","isMobile","useMediaQuery","async","cacheKey","toLowerCase","currentTime","Date","now","cacheExpiration","historyData","timestamp","data","cachedUsers","users","keys","forEach","userId","response","axios","get","success","Error","message","saveCacheToSessionStorage","setItem","stringify","err","fetchUsernameHistory","renderUserInfo","isFirst","size","user","isSmall","avatarSize","photo","Avatar","src","mr","bgcolor","name","charAt","Link","href","underline","maxWidth","Typography","noWrap","is_verified","VerifiedIcon","ml","variant","Dialog","fullWidth","fullScreen","PaperProps","elevation","maxHeight","AlternateEmailIcon","IconButton","edge","CloseIcon","p","CircularProgress","current_owner_id","Divider","my","mb","HistoryIcon","ownership_history","mt","slice","reverse","index","SwapHorizIcon","flex","seller_id","mx","buyer_id","formatDate","price","textAlign","Devices","Computer","PhoneAndroid","Laptop","ReportProblem","defaults","headers","delete","Transition","React","forwardRef","props","Slide","direction","getDeviceIcon","deviceType","baseStyle","PhoneAndroidIcon","style","LaptopIcon","ComputerIcon","DevicesIcon","formatLastActive","dateString","date","includes","datePart","timePart","split","day","month","year","diffMs","diffMins","Math","floor","diffHours","diffDays","options","hour","minute","hour12","toLocaleString","SessionManager","sessions","setSessions","alert","setAlert","severity","confirmDialog","setConfirmDialog","sessionId","fetchSessions","handleCloseAlert","currentSession","find","s","is_current","Fragment","TransitionComponent","keepMounted","py","px","pb","overflowX","ReportProblemIcon","Button","List","disablePadding","right","xs","sm","device","browser","CheckCircleIcon","secondary","overflowY","session","flexWrap","whiteSpace","wordBreak","ip_address","last_activity","openDeleteConfirm","DeleteIcon","DialogActions","pt","borderTop","bottom","borderColor","fetch","method","body","delete_all","json","startIcon","handleDeleteSession","autoFocus","Snackbar","autoHideDuration","anchorOrigin","vertical","horizontal","Alert","AddPhotoAlternateOutlined","MusicNoteOutlined","PlaylistAdd","RemoveCircleOutline","FullScreenDialog","margin","up","backgroundImage","DialogHeader","CoverUploadBox","aspectRatio","flexDirection","grey","CoverPreview","TrackSearchInput","TextField","TrackItem","selected","isPlaying","common","white","TrackAvatar","ScrollableContent","ActionButton","textTransform","PlayingIndicator","PlaylistModal","playlist","onSave","onAddTracks","onRemoveTrack","onDelete","isLoading","nowPlaying","isVeryNarrow","activeTab","setActiveTab","setName","description","setDescription","isPublic","setIsPublic","coverFile","setCoverFile","coverPreview","setCoverPreview","selectedTracks","setSelectedTracks","searchQuery","setSearchQuery","searchResults","setSearchResults","playlistTracks","setPlaylistTracks","isSearching","setIsSearching","notification","setNotification","isEditing","is_public","cover_url","cover_image","tracks","handleCoverSelect","file","files","reader","FileReader","onloadend","result","readAsDataURL","searchTracks","useCallback","query","encodeURIComponent","timer","setTimeout","clearTimeout","toggleTrackSelection","track","prev","some","t","handleCloseNotification","Tabs","onChange","_","newValue","indicatorColor","textColor","Tab","gap","flexShrink","alt","objectFit","type","hidden","accept","AddPhotoAlternateOutlinedIcon","align","required","multiline","rows","FormControlLabel","control","Switch","checked","playing","isTrackPlaying","viewBox","fill","rx","attributeName","dur","begin","repeatCount","values","keyTimes","ListItemAvatar","cover_path","title","MusicNoteOutlinedIcon","artist","primaryTypographyProps","secondaryTypographyProps","ListItemSecondaryAction","handleRemoveTrack","trackId","RemoveCircleOutlineIcon","placeholder","InputProps","startAdornment","SearchIcon","Skeleton","isSelected","confirm","trim","formData","FormData","append","toString","trackIds","SaveIcon","inPlaylist","handleAddTracks","PlaylistAddIcon","PlayArrowRounded","Public","StyledCard","Card","shadows","MediaWrapper","paddingTop","StyledMedia","MediaOverlay","ContentArea","CardContent","flexGrow","TrackPreviewArea","TrackPreviewItem","TrackPreviewImage","VisibilityIcon","compact","lineHeight","textOverflow","WebkitLineClamp","WebkitBoxOrient","Chip","marginLeft","PlaylistCardSkeleton","PlaylistCard","coverImage","tracksCount","previewTracks","owner","onMoreClick","handleMoreClick","PublicIcon","LockIcon","PlayArrowRoundedIcon","PersonIcon","stopPropagation","MoreVertIcon","GridContainer","ScrollableContainer","scrollbarWidth","paddingBottom","WebkitOverflowScrolling","PlaylistItemContainer","PlaylistGrid","subtitle","playlists","skeletonCount","onPlaylistClick","onPlaylistPlay","onPlaylistMoreClick","isTablet","between","itemWidth","Array","tracks_count","preview_tracks","isOwner","is_owner","overflowWrap","borderLeft","paddingLeft","ArrowRightAlt","StyledDialog","DialogAvatar","InputContainer","StyledTextField","SuggestionsContainer","UserAvatar","ButtonContainer","CancelButton","GradientButton","UserCard","decoration","isGradient","isImage","isHexColor","startsWith","isLightBackground","hex","replace","parseInt","substr","isLightColor","backgroundSize","backgroundPosition","DecorationItem","pointerEvents","TransferMenu","userPoints","onSuccess","transferData","setTransferData","amount","recipient_id","transferErrors","setTransferErrors","userSearch","setUserSearch","exists","suggestions","isTransferring","setIsTransferring","transferSuccess","setTransferSuccess","transferReceipt","setTransferReceipt","debounceTimerRef","calculateCommission","isNaN","commission","total","recipientAmount","numAmount","recipient","previousBalance","ArrowRightAltIcon","newBalance","dataUrl","download","SendIcon","url","then","exactMatch","u","catch","helperText","endAdornment","InputAdornment","handleClearUsername","selectSuggestion","item_path","styles","styleObj","reduce","acc","toUpperCase","verification_status","test","gutterBottom","general","errors","transferAmount","post","recipient_username","transactionId","receiptResponse","transaction_data","recipientUsername","senderUsername","sender_username","toISOString","pdf_data","filePath","file_path"],"mappings":"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","x_google_ignoreList":[0,4,6,7,8,9,10,12,13,14,15,17,18,26]}