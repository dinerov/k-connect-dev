import{b as W,g as z,j as e,h as P,i as r,T as l,P as M,A as m,L as D,m as S,I as L,w as T,l as V,o as q,V as E}from"./vendor-mui.08p3AH88.js";import{u as O,d as U,r as n,L as k}from"./vendor-router.BRqU_Zs2.js";import{V as $}from"./Visibility.Bq_lujd_.js";import{V as G}from"./VisibilityOff.qSdmZWpe.js";import{m as p,a as H}from"./vendor.CL98q8z6.js";import{S as Z}from"./index.CdVNWeFt.js";import"./vendor-react.DF-_cTkv.js";const J=()=>{const I=W(),s=z(I.breakpoints.down("sm")),h=O(),u=U(),[A,B]=n.useState(""),[i,b]=n.useState(""),[g,f]=n.useState(""),[c,R]=n.useState(!1),[x,y]=n.useState(!1),[j,o]=n.useState(""),[w,v]=n.useState(""),[d,F]=n.useState("");return n.useEffect(()=>{const a=(()=>{let t=new URLSearchParams(u.search).get("token");if(!t&&window.location.hash){const C=window.location.hash.split("?");C.length>1&&(t=new URLSearchParams(C[1]).get("token"))}return t})();a?(B(a),F("")):(F("\u0422\u043E\u043A\u0435\u043D \u0441\u0431\u0440\u043E\u0441\u0430 \u043F\u0430\u0440\u043E\u043B\u044F \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D. \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0443\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044C, \u0447\u0442\u043E \u0432\u044B \u043F\u0435\u0440\u0435\u0448\u043B\u0438 \u043F\u043E \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u043E\u0439 \u0441\u0441\u044B\u043B\u043A\u0435."),setTimeout(()=>{h("/forgot-password")},3e3))},[u,h]),e.jsxs(P,{disableGutters:!0,maxWidth:!1,sx:{display:"flex",minHeight:"100vh",width:"100%",overflow:"hidden",position:"relative"},children:[e.jsx(Z,{title:"\u0421\u0431\u0440\u043E\u0441 \u043F\u0430\u0440\u043E\u043B\u044F | \u041A-\u041A\u043E\u043D\u043D\u0435\u043A\u0442",description:"\u0421\u0431\u0440\u043E\u0441 \u043F\u0430\u0440\u043E\u043B\u044F \u0432 \u0441\u043E\u0446\u0438\u0430\u043B\u044C\u043D\u043E\u0439 \u0441\u0435\u0442\u0438 \u041A-\u041A\u043E\u043D\u043D\u0435\u043A\u0442"}),!s&&e.jsxs(r,{sx:{flex:"0 0 45%",background:"linear-gradient(135deg, rgba(20, 20, 30, 1) 0%, rgba(40, 40, 60, 0.95) 100%)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",position:"relative",overflow:"hidden",p:6},children:[e.jsx(r,{sx:{position:"absolute",width:"200%",height:"200%",top:"-50%",left:"-50%",background:"radial-gradient(circle, rgba(208, 188, 255, 0.05) 0%, rgba(208, 188, 255, 0) 70%)",zIndex:0}}),e.jsx(p.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.7,delay:.2},style:{position:"relative",zIndex:1},children:e.jsx("img",{src:"/static/icons/clear-logonew.svg",alt:"\u041A-\u041A\u043E\u043D\u043D\u0435\u043A\u0442 \u041B\u043E\u0433\u043E",style:{width:180,marginBottom:40}})}),e.jsxs(p.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.5},style:{position:"relative",zIndex:1,textAlign:"center"},children:[e.jsxs(l,{variant:"h3",sx:{fontWeight:700,mb:2},children:[e.jsx("span",{style:{color:"#D0BCFF"},children:"\u041A"}),"-\u041A\u041E\u041D\u041D\u0415\u041A\u0422"]}),e.jsx(l,{variant:"h6",color:"text.secondary",sx:{maxWidth:400},children:"\u0421\u043E\u0437\u0434\u0430\u0439\u0442\u0435 \u043D\u043E\u0432\u044B\u0439 \u043F\u0430\u0440\u043E\u043B\u044C \u0434\u043B\u044F \u0434\u043E\u0441\u0442\u0443\u043F\u0430 \u043A \u0432\u0430\u0448\u0435\u043C\u0443 \u0430\u043A\u043A\u0430\u0443\u043D\u0442\u0443"})]}),e.jsx(r,{sx:{position:"absolute",bottom:40,left:0,right:0,display:"flex",justifyContent:"center",gap:2},children:[...Array(3)].map((a,t)=>e.jsx(p.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.4,delay:.8+.2*t},children:e.jsx(r,{sx:{width:12+4*t,height:12+4*t,borderRadius:"50%",background:`rgba(208, 188, 255, ${.6-.15*t})`}})},t))})]}),e.jsx(r,{sx:{flex:s?1:"0 0 55%",display:"flex",alignItems:"center",justifyContent:"center",p:0,background:s?"linear-gradient(135deg, rgba(20, 20, 30, 1) 0%, rgba(40, 40, 60, 0.95) 100%)":"transparent"},children:e.jsxs(p.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5},style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",padding:s?"16px":"40px"},children:[s&&e.jsxs(r,{sx:{position:"absolute",top:"32px",left:0,width:"100%",textAlign:"center"},children:[e.jsx("img",{src:"/static/icons/clear-logonew.svg",alt:"\u041A-\u041A\u043E\u043D\u043D\u0435\u043A\u0442 \u041B\u043E\u0433\u043E",style:{width:90,marginBottom:16}}),e.jsxs(l,{variant:"h4",component:"h1",sx:{fontWeight:700},children:[e.jsx("span",{style:{color:"#D0BCFF"},children:"\u041A"}),"-\u041A\u041E\u041D\u041D\u0415\u041A\u0422"]})]}),e.jsxs(M,{elevation:s?0:6,sx:{p:s?3:4,width:"100%",maxWidth:"480px",borderRadius:4,background:s?"transparent":"rgba(30, 30, 40, 0.85)",backdropFilter:"blur(10px)",border:s?"none":"1px solid rgba(255, 255, 255, 0.1)",mt:s?"120px":0},children:[e.jsx(l,{variant:"h5",component:"h2",sx:{mb:1,fontWeight:600},children:"\u0421\u0431\u0440\u043E\u0441 \u043F\u0430\u0440\u043E\u043B\u044F"}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"\u0421\u043E\u0437\u0434\u0430\u0439\u0442\u0435 \u043D\u043E\u0432\u044B\u0439 \u043F\u0430\u0440\u043E\u043B\u044C \u0434\u043B\u044F \u0432\u0445\u043E\u0434\u0430 \u0432 \u0430\u043A\u043A\u0430\u0443\u043D\u0442"}),d&&e.jsxs(m,{severity:"error",sx:{mb:3,borderRadius:2,"& .MuiAlert-icon":{alignItems:"center"}},children:[d,e.jsx(r,{mt:2,children:e.jsx(D,{component:k,to:"/forgot-password",sx:{color:"#D0BCFF",textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"\u0417\u0430\u043F\u0440\u043E\u0441\u0438\u0442\u044C \u043D\u043E\u0432\u0443\u044E \u0441\u0441\u044B\u043B\u043A\u0443 \u0434\u043B\u044F \u0441\u0431\u0440\u043E\u0441\u0430 \u043F\u0430\u0440\u043E\u043B\u044F"})})]}),j&&!d&&e.jsx(m,{severity:"error",sx:{mb:3,borderRadius:2,"& .MuiAlert-icon":{alignItems:"center"}},children:j}),w&&e.jsx(m,{severity:"success",sx:{mb:3,borderRadius:2,"& .MuiAlert-icon":{alignItems:"center"}},children:w}),!d&&e.jsxs(r,{component:"form",onSubmit:async a=>{if(a.preventDefault(),o(""),v(""),i===g)if(i.length<8)o("\u041F\u0430\u0440\u043E\u043B\u044C \u0434\u043E\u043B\u0436\u0435\u043D \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u043D\u0435 \u043C\u0435\u043D\u0435\u0435 8 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432.");else if([/[a-z]/.test(i),/[A-Z]/.test(i),/\d/.test(i),/[!@#$%^&*(),.?":{}|<>]/.test(i)].filter(Boolean).length<3)o("\u041F\u0430\u0440\u043E\u043B\u044C \u043D\u0435\u0434\u043E\u0441\u0442\u0430\u0442\u043E\u0447\u043D\u043E \u043D\u0430\u0434\u0435\u0436\u043D\u044B\u0439. \u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u043A\u043E\u043C\u0431\u0438\u043D\u0430\u0446\u0438\u044E \u043F\u0440\u043E\u043F\u0438\u0441\u043D\u044B\u0445 \u0438 \u0441\u0442\u0440\u043E\u0447\u043D\u044B\u0445 \u0431\u0443\u043A\u0432, \u0446\u0438\u0444\u0440 \u0438 \u0441\u043F\u0435\u0446\u0438\u0430\u043B\u044C\u043D\u044B\u0445 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432.");else{y(!0);try{const t=await H.post("/api/auth/reset-password",{token:A,password:i});t.data.success?(v(t.data.message||"\u041F\u0430\u0440\u043E\u043B\u044C \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0438\u0437\u043C\u0435\u043D\u0435\u043D. \u0422\u0435\u043F\u0435\u0440\u044C \u0432\u044B \u043C\u043E\u0436\u0435\u0442\u0435 \u0432\u043E\u0439\u0442\u0438 \u0441 \u043D\u043E\u0432\u044B\u043C \u043F\u0430\u0440\u043E\u043B\u0435\u043C."),b(""),f(""),setTimeout(()=>{h("/login")},3e3)):o(t.data.error||"\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0441\u0431\u0440\u043E\u0441\u0435 \u043F\u0430\u0440\u043E\u043B\u044F. \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u043F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u043F\u043E\u0437\u0436\u0435.")}catch(t){t.response&&t.response.data?o(t.response.data.error||"\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0441\u0431\u0440\u043E\u0441\u0435 \u043F\u0430\u0440\u043E\u043B\u044F. \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u043F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u043F\u043E\u0437\u0436\u0435."):o("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043F\u043E\u0434\u043A\u043B\u044E\u0447\u0438\u0442\u044C\u0441\u044F \u043A \u0441\u0435\u0440\u0432\u0435\u0440\u0443. \u041F\u0440\u043E\u0432\u0435\u0440\u044C\u0442\u0435 \u043F\u043E\u0434\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u0435 \u043A \u0438\u043D\u0442\u0435\u0440\u043D\u0435\u0442\u0443.")}finally{y(!1)}}else o("\u041F\u0430\u0440\u043E\u043B\u0438 \u043D\u0435 \u0441\u043E\u0432\u043F\u0430\u0434\u0430\u044E\u0442.")},sx:{width:"100%"},children:[e.jsx(S,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"\u041D\u043E\u0432\u044B\u0439 \u043F\u0430\u0440\u043E\u043B\u044C",type:c?"text":"password",id:"password",autoComplete:"new-password",value:i,onChange:a=>b(a.target.value),disabled:x,variant:"outlined",InputProps:{endAdornment:e.jsx(L,{position:"end",children:e.jsx(T,{"aria-label":"toggle password visibility",onClick:()=>{R(!c)},edge:"end",children:c?e.jsx(G,{}):e.jsx($,{})})})},sx:{mb:2.5,"& .MuiOutlinedInput-root":{borderRadius:2}}}),e.jsx(S,{margin:"normal",required:!0,fullWidth:!0,name:"confirmPassword",label:"\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u043F\u0430\u0440\u043E\u043B\u044C",type:c?"text":"password",id:"confirmPassword",autoComplete:"new-password",value:g,onChange:a=>f(a.target.value),disabled:x,variant:"outlined",sx:{mb:3,"& .MuiOutlinedInput-root":{borderRadius:2}}}),e.jsx(V,{type:"submit",fullWidth:!0,variant:"contained",size:"large",disabled:x||!i||!g||d,sx:{py:1.5,borderRadius:2,fontSize:"1rem",textTransform:"none",background:"linear-gradient(90deg, #B69DF8 0%, #D0BCFF 100%)",boxShadow:"0 4px 12px rgba(182, 157, 248, 0.3)","&:hover":{background:"linear-gradient(90deg, #D0BCFF 0%, #E9DDFF 100%)",boxShadow:"0 6px 16px rgba(182, 157, 248, 0.4)"}},children:x?e.jsx(q,{size:24,color:"inherit"}):"\u0421\u0431\u0440\u043E\u0441\u0438\u0442\u044C \u043F\u0430\u0440\u043E\u043B\u044C"})]}),e.jsx(E,{sx:{my:3,"&::before, &::after":{borderColor:"rgba(255,255,255,0.1)"}}}),e.jsx(r,{sx:{textAlign:"center"},children:e.jsxs(l,{variant:"body2",children:["\u0412\u0441\u043F\u043E\u043C\u043D\u0438\u043B\u0438 \u043F\u0430\u0440\u043E\u043B\u044C?"," ",e.jsx(D,{component:k,to:"/login",sx:{color:"#D0BCFF",fontWeight:500,textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"\u0412\u043E\u0439\u0442\u0438"})]})})]})]})})]})};export{J as default};
