import{r as Ne,a as Ye,b as fe,d as x,j as e,P as Oe,B as Ue,e as $,g as Je,i as r,o as Z,h as qe,T as s,s as o,A as je,t as G,av as Ke,aw as Qe,a8 as D,G as ee,a0 as Xe,w as ae,k as te,l as C,D as ie,E as Ze,H as re,q as _,m as N,bj as ea,bk as se,bl as ne,aD as aa,V as ta,v as ia,au as ra,C as sa,p as na,J as oa}from"./vendor-mui.08p3AH88.js";import{u as ye,r as d,d as da}from"./vendor-router.BRqU_Zs2.js";import{r as la,T as pa,I as L,A as ca,d as oe,b as xa}from"./index.CdVNWeFt.js";import{a as R}from"./vendor.CL98q8z6.js";import{A as ve}from"./Add.BKfOzMjp.js";import{C as de}from"./Close.BG2YHWMj.js";import{T as ga,S as we}from"./ShoppingCart.BDp27tTE.js";import{A as ke}from"./AccountBalanceWallet.DfnSQtMa.js";import{g as ma}from"./vendor-react.DF-_cTkv.js";import{A as Se}from"./AttachMoney.CLjR6rlb.js";import{N as Ce}from"./NewReleases.BImcOub6.js";import{C as ha}from"./ContentCopy.BChjYHZa.js";var _e,F={};function ba(){if(_e)return F;_e=1;var a=Ne();Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0;var l=a(la()),B=Ye();return F.default=(0,l.default)((0,B.jsx)("path",{d:"M3 18h6v-2H3zM3 6v2h18V6zm0 7h12v-2H3z"}),"Sort"),F}const Ie=ma(ba()),ua=({tabValue:a,onTabChange:l})=>{const B=ye(),g=fe(),{themeSettings:y}=d.useContext(pa),m=g.palette.mode==="light"?x(g.palette.divider,.1):g.palette.mode==="contrast"?x(g.palette.common.white,.15):x(g.palette.common.white,.1),A=g.palette.mode==="light"?x(g.palette.text.primary,.7):g.palette.mode==="contrast"?x(g.palette.common.white,.9):"rgb(214 209 227 / 77%)";return e.jsx(Oe,{sx:{position:"fixed",bottom:0,left:0,right:0,display:{xs:"block",md:"none"},zIndex:1e3,borderTop:`1px solid ${m}`,background:"rgba(255, 255, 255, 0.03)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",boxShadow:"0 5px 15px rgba(0, 0, 0, 0.2)"},elevation:0,children:e.jsxs(Ue,{value:a,onChange:(P,H)=>{H===-1?B(-1):l(P,H)},sx:{bgcolor:"transparent",height:75,display:"flex",justifyContent:"center",alignItems:"flex-start",marginTop:"10px","& .MuiBottomNavigationAction-root":{color:A,"&.Mui-selected":{color:y.primaryColor||g.palette.primary.main}}},children:[e.jsx($,{value:-1,icon:e.jsx(L,{icon:"solar:arrow-left-bold",width:"28",height:"28"}),sx:{minWidth:"auto"}}),e.jsx($,{value:0,icon:e.jsx(L,{icon:"solar:star-bold",width:"28",height:"28"}),sx:{minWidth:"auto"}}),e.jsx($,{value:1,icon:e.jsx(L,{icon:"solar:user-circle-bold",width:"28",height:"28"}),sx:{minWidth:"auto"}}),e.jsx($,{value:2,icon:e.jsx(L,{icon:"solar:cart-large-bold",width:"28",height:"28"}),sx:{minWidth:"auto"}}),e.jsx($,{value:3,icon:e.jsx(L,{icon:"solar:tag-price-bold",width:"28",height:"28"}),sx:{minWidth:"auto"}})]})})},fa=o(sa)(({theme:a})=>({height:"100%",display:"flex",flexDirection:"column",transition:"all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1)",borderRadius:16,overflow:"hidden",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.08)",position:"relative",backgroundColor:a.palette.mode==="dark"?x("#000",.8):"#fff",backdropFilter:"blur(10px)","&:hover":{transform:"translateY(-6px)",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.12)","& .badge-image":{transform:"scale(1.05)"},"& .badge-overlay":{opacity:1}},[a.breakpoints.down("sm")]:{"& .MuiCardMedia-root":{height:"100px"}}})),ja=o("img")({width:"100%",height:"130px",objectFit:"contain",padding:"12px",transition:"transform 0.5s cubic-bezier(0.25, 0.8, 0.25, 1)","&:hover":{transform:"scale(1.05)"},"@media (max-width: 600px)":{height:"100px",padding:"8px"}}),ya=o(r)(({theme:a})=>({position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(to bottom, rgba(0,0,0,0) 0%, rgba(0,0,0,0.7) 100%)",display:"flex",alignItems:"flex-end",justifyContent:"center",padding:a.spacing(2),opacity:0,transition:"opacity 0.3s ease",zIndex:1})),va=o(r)(({theme:a})=>({padding:a.spacing(2,2,1.5),display:"flex",flexDirection:"column",alignItems:"center",position:"relative","@media (max-width: 600px)":{padding:a.spacing(1.5,1.5,1)}})),wa=o(na)(({theme:a})=>({flexGrow:1,padding:a.spacing(1.5),display:"flex",flexDirection:"column",justifyContent:"space-between",background:a.palette.background.paper,borderTop:`1px solid ${x(a.palette.divider,.1)}`,"&:last-child":{paddingBottom:a.spacing(1.5)},[a.breakpoints.down("sm")]:{padding:a.spacing(1)}})),ka=o(s)(({theme:a})=>({fontWeight:600,fontSize:"0.95rem",color:a.palette.text.primary,textAlign:"center",marginBottom:a.spacing(.5),[a.breakpoints.down("sm")]:{fontSize:"0.85rem"}})),Sa=o(s)(({theme:a})=>({color:a.palette.text.secondary,fontSize:"0.8rem",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textAlign:"center",marginBottom:a.spacing(1.5),lineHeight:1.4,[a.breakpoints.down("sm")]:{fontSize:"0.75rem",marginBottom:a.spacing(1)}})),Ca=o(r)(({theme:a})=>({display:"flex",alignItems:"center",justifyContent:"center",gap:a.spacing(.75),marginBottom:a.spacing(1.5),[a.breakpoints.down("sm")]:{marginBottom:a.spacing(1)}})),_a=o(te)(({theme:a})=>({width:24,height:24,border:`2px solid ${a.palette.primary.main}`,[a.breakpoints.down("sm")]:{width:20,height:20}})),Ia=o(s)(({theme:a})=>({fontSize:"0.8rem",color:a.palette.text.secondary,[a.breakpoints.down("sm")]:{fontSize:"0.7rem"}})),za=o(r)(({theme:a})=>({display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"auto",paddingTop:a.spacing(1),borderTop:`1px solid ${x(a.palette.divider,.1)}`,[a.breakpoints.down("sm")]:{paddingTop:a.spacing(.5)}})),Wa=o(r)(({theme:a})=>({display:"flex",alignItems:"center",gap:a.spacing(.5),[a.breakpoints.down("sm")]:{gap:a.spacing(.25)}})),Ra=o(oe)(({theme:a})=>({color:a.palette.primary.main,fontSize:"1.2rem",[a.breakpoints.down("sm")]:{fontSize:"1rem"}})),Ba=o(s)(({theme:a})=>({fontWeight:700,color:a.palette.primary.main,fontSize:"0.9rem",[a.breakpoints.down("sm")]:{fontSize:"0.8rem"}})),ze=o(C)(({theme:a})=>({borderRadius:20,textTransform:"none",fontWeight:600,padding:"4px 12px",minWidth:"auto",fontSize:"0.75rem",boxShadow:"none",backgroundColor:a.palette.mode==="dark"?"#d0bcff":"#6200ee",color:a.palette.mode==="dark"?"#000":"#fff","&:hover":{backgroundColor:a.palette.mode==="dark"?"#cabcfc":"#5000d2",boxShadow:"0 2px 6px rgba(0,0,0,0.1)"},"&.Mui-disabled":{backgroundColor:x(a.palette.action.disabled,.1),color:a.palette.action.disabled},[a.breakpoints.down("sm")]:{padding:"2px 8px",fontSize:"0.7rem"}})),Ma=o(_)(({theme:a})=>({fontWeight:"bold",background:`linear-gradient(45deg, #d0bcff 30%, ${x("#d0bcff",.8)} 90%)`,color:"#1a1a1a",border:"none",boxShadow:"0 3px 5px 2px rgba(208, 188, 255, 0.2)",borderRadius:20,padding:"0 10px","& .MuiChip-label":{fontSize:"0.9rem","@media (max-width: 600px)":{fontSize:"0.8rem"}}})),Ta=o(_)(({theme:a})=>({fontWeight:"bold",fontSize:"1.1rem",background:`linear-gradient(45deg, #d0bcff 30%, ${x("#d0bcff",.8)} 90%)`,color:"#1a1a1a",boxShadow:"0 3px 5px 2px rgba(208, 188, 255, 0.2)",borderRadius:20,padding:"5px 15px","@media (max-width: 600px)":{fontSize:"1rem",padding:"4px 12px"}})),$a=o(ia)(({theme:a})=>({marginBottom:a.spacing(3),"& .MuiTabs-indicator":{backgroundColor:"#d0bcff"},"& .MuiTab-root":{color:a.palette.text.secondary,"&.Mui-selected":{color:"#d0bcff"}}})),We=o(C)(({theme:a})=>({background:`linear-gradient(45deg, #d0bcff 30%, ${x("#d0bcff",.8)} 90%)`,color:"#1a1a1a",fontWeight:"bold",padding:"8px 24px",borderRadius:25,boxShadow:"0 3px 5px 2px rgba(208, 188, 255, 0.2)","&:hover":{background:`linear-gradient(45deg, ${x("#d0bcff",.9)} 30%, #d0bcff 90%)`},"@media (max-width: 600px)":{padding:"6px 16px",fontSize:"0.9rem"}})),Da=o(ie)(({theme:a})=>({"& .MuiDialog-paper":{maxWidth:"90%",width:"400px",margin:a.spacing(2),borderRadius:2*a.shape.borderRadius,maxHeight:"90vh",display:"flex",flexDirection:"column",[a.breakpoints.down("sm")]:{width:"100%",maxWidth:"100%",margin:0,borderRadius:0,maxHeight:"100vh"},zIndex:1e6,background:"rgba(18, 18, 18, 0.8)",backdropFilter:"blur(10px)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.1)"},"& .MuiBackdrop-root":{zIndex:999999}})),La=o("img")(({theme:a})=>({width:"100%",height:"auto",maxHeight:"200px",objectFit:"contain",borderRadius:a.shape.borderRadius,[a.breakpoints.down("sm")]:{maxHeight:"150px"}})),Fa=o(r)(({theme:a})=>({display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:a.spacing(3),padding:a.spacing(2,3),borderBottom:`1px solid ${a.palette.divider}`,backgroundColor:a.palette.background.paper})),Aa=o(s)(({theme:a})=>({fontWeight:"bold",color:a.palette.text.primary,"@media (max-width: 600px)":{fontSize:"1.25rem"}})),Pa=o(re)(({theme:a})=>({padding:a.spacing(1.5),[a.breakpoints.down("sm")]:{padding:a.spacing(1)}})),Ha=o(s)(({theme:a})=>({color:a.palette.text.secondary,marginBottom:a.spacing(1.5),lineHeight:1.5,padding:a.spacing(1.5),background:x(a.palette.background.default,.5),borderRadius:12,[a.breakpoints.down("sm")]:{padding:a.spacing(1),marginBottom:a.spacing(1)}})),Va=o(r)(({theme:a})=>({display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:a.spacing(1.5),padding:a.spacing(1.5,2),borderTop:`1px solid ${a.palette.divider}`,[a.breakpoints.down("sm")]:{padding:a.spacing(1,1.5),marginTop:a.spacing(1)}})),Ea=o(r)(({theme:a})=>({display:"flex",alignItems:"center",gap:a.spacing(1),marginBottom:a.spacing(1.5),padding:a.spacing(1),borderRadius:a.shape.borderRadius,backgroundColor:a.palette.background.default,[a.breakpoints.down("sm")]:{padding:a.spacing(.5),gap:a.spacing(.5),marginBottom:a.spacing(1)}})),Ga=o(te)(({theme:a})=>({width:40,height:40,[a.breakpoints.down("sm")]:{width:32,height:32}}));o(r)(({theme:a})=>({display:"flex",alignItems:"center",gap:a.spacing(2),padding:a.spacing(3),background:x(a.palette.success.main,.1),borderRadius:16,marginBottom:a.spacing(3),boxShadow:"0 2px 8px rgba(0, 255, 0, 0.1)",[a.breakpoints.down("sm")]:{padding:a.spacing(1.5),gap:a.spacing(1),marginBottom:a.spacing(2)}}));const Na=o(r)(({theme:a})=>({display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:a.spacing(1.5),padding:a.spacing(1.5),background:x(a.palette.background.paper,.1),borderRadius:16,marginBottom:a.spacing(1.5),boxShadow:"0 2px 8px rgba(208, 188, 255, 0.1)",[a.breakpoints.down("sm")]:{gap:a.spacing(1),padding:a.spacing(1),marginBottom:a.spacing(1)}})),Re=o(r)(({theme:a})=>({display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",padding:a.spacing(1),background:x(a.palette.background.paper,.5),borderRadius:12,transition:"transform 0.2s ease-in-out","&:hover":{transform:"translateY(-2px)"},[a.breakpoints.down("sm")]:{padding:a.spacing(.75)}}));o(ee)(({theme:a})=>({padding:a.spacing(2),[a.breakpoints.down("sm")]:{padding:a.spacing(1)}}));const Ya=o(ra)(({theme:a})=>({minWidth:160,margin:a.spacing(0,2),"& .MuiOutlinedInput-root":{borderRadius:20,background:x(a.palette.background.paper,.9),boxShadow:"0 2px 5px rgba(0,0,0,0.05)","&:hover":{boxShadow:"0 4px 8px rgba(0,0,0,0.1)"}},[a.breakpoints.down("sm")]:{minWidth:"100%",margin:a.spacing(1,0)}})),Be=o(_)(({theme:a,issoldout:l})=>({position:"absolute",top:8,right:8,height:24,borderRadius:12,fontWeight:500,backgroundColor:x(l==="true"?a.palette.error.main:a.palette.mode==="dark"?"#d0bcff":"#6200ee",.1),color:l==="true"?a.palette.error.main:a.palette.mode==="dark"?"#d0bcff":"#6200ee",border:`1px solid ${x(l==="true"?a.palette.error.main:a.palette.mode==="dark"?"#d0bcff":"#6200ee",.2)}`,backdropFilter:"blur(4px)",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)","& .MuiChip-label":{fontSize:"0.7rem",padding:"0 8px",letterSpacing:"0.02em"},[a.breakpoints.down("sm")]:{height:20,top:6,right:6,"& .MuiChip-label":{fontSize:"0.65rem"}}})),Oa=o(ie)(({theme:a})=>({"& .MuiDialog-container":{zIndex:999999999999},"& .MuiDialog-paper":{borderRadius:16,background:a.palette.mode==="dark"?"rgba(18, 18, 18, 0.8)":"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(10px)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.2)",border:a.palette.mode==="dark"?"1px solid rgba(255, 255, 255, 0.1)":"1px solid rgba(208, 188, 255, 0.3)",overflow:"hidden",maxWidth:"450px",width:"100%",margin:a.spacing(2),[a.breakpoints.down("sm")]:{width:"100%",maxWidth:"100%",margin:0,borderRadius:0}},"& .MuiDialogTitle-root":{fontSize:"1.2rem",fontWeight:500}})),Ua=o(r)(({theme:a})=>({position:"relative",overflow:"hidden",padding:a.spacing(2),borderBottom:"1px solid "+(a.palette.mode==="dark"?"rgba(255, 255, 255, 0.1)":"rgba(208, 188, 255, 0.2)"),background:a.palette.mode==="dark"?"linear-gradient(90deg, rgba(208, 188, 255, 0.2) 0%, rgba(0, 0, 0, 0) 100%)":"linear-gradient(90deg, rgba(208, 188, 255, 0.2) 0%, rgba(255, 255, 255, 0) 100%)"})),Ja=o(r)(({theme:a})=>({position:"absolute",top:-50,right:-50,width:150,height:150,borderRadius:"50%",background:"radial-gradient(circle, rgba(208, 188, 255, 0.3) 0%, rgba(208, 188, 255, 0) 70%)",zIndex:0})),qa=o(r)(({theme:a})=>({position:"relative",zIndex:1,display:"flex",alignItems:"center"})),Me=o(oa)(({theme:a})=>({padding:a.spacing(2),paddingLeft:a.spacing(3),paddingRight:a.spacing(3),justifyContent:"space-between",backgroundColor:a.palette.mode==="dark"?"rgba(0, 0, 0, 0.4)":"rgba(255, 255, 255, 0.6)",borderTop:"1px solid "+(a.palette.mode==="dark"?"rgba(255, 255, 255, 0.1)":"rgba(208, 188, 255, 0.2)")})),Te=o(C)(({theme:a})=>({borderRadius:12,paddingLeft:a.spacing(3),paddingRight:a.spacing(3),borderColor:a.palette.mode==="dark"?"rgba(255, 255, 255, 0.2)":"rgba(0, 0, 0, 0.2)",color:a.palette.mode==="dark"?"rgba(255, 255, 255, 0.7)":"rgba(0, 0, 0, 0.7)","&:hover":{borderColor:a.palette.mode==="dark"?"rgba(255, 255, 255, 0.4)":"rgba(0, 0, 0, 0.4)",background:a.palette.mode==="dark"?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.05)"}})),le=o(C)(({theme:a})=>({borderRadius:12,paddingLeft:a.spacing(4),paddingRight:a.spacing(4),paddingTop:a.spacing(.75),paddingBottom:a.spacing(.75),boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",background:"linear-gradient(45deg, #6200ee 30%, #9c64f2 90%)",color:"#fff","&:hover":{boxShadow:"0 6px 16px rgba(0, 0, 0, 0.25)"}})),$e=o(r)(({theme:a})=>({position:"relative",padding:a.spacing(2.5),borderRadius:8,backgroundColor:a.palette.mode==="dark"?"rgba(208, 188, 255, 0.05)":"rgba(208, 188, 255, 0.1)",border:"1px solid "+(a.palette.mode==="dark"?"rgba(208, 188, 255, 0.2)":"rgba(208, 188, 255, 0.3)"),marginBottom:a.spacing(2)})),Ka=()=>{const a=fe(),l=Je(a.breakpoints.down("sm")),B=ye(),g=da(),{user:y}=d.useContext(ca),[m,A]=d.useState(0),[P,H]=d.useState("newest"),[v,De]=d.useState([]),[I,Le]=d.useState(0),[Fe,pe]=d.useState(!0),[ce,w]=d.useState(""),[n,V]=d.useState(null),[Ae,Y]=d.useState(!1),[Pe,M]=d.useState(!1),[He,z]=d.useState(!1),[u,f]=d.useState(0),[p,W]=d.useState({name:"",description:"",price:"",royalty_percentage:30,max_copies:"",image:null}),[T,O]=d.useState(!1),[Ve,xe]=d.useState(!1),[U,Ee]=d.useState(0),[Qa,ge]=d.useState(!1),[E,k]=d.useState(3),[h,J]=d.useState(null),[b,Ge]=d.useState(null),[me,q]=d.useState(!1),he=async()=>{try{const t=await R.get("/api/badges/created");if(t.data&&t.data.total_badges!==void 0){Ee(t.data.total_badges);const i=h&&h.subscription_type&&(h.subscription_type.toLowerCase()==="ultimate"||h.subscription_type.toLowerCase().includes("ultimate"));ge(!i&&t.data.total_badges>=E)}}catch{}};d.useEffect(()=>{K(),Q(),(async()=>{try{const t=await R.get("/api/user/subscription/status");t.data.active?(J(t.data),(i=>{if(!i)return void k(3);const c=i.toLowerCase().trim();c==="basic"?k(5):c==="premium"?k(8):c==="ultimate"||c.includes("ultimate")?k(1/0):k(3)})(t.data.subscription_type)):(J(null),k(3))}catch{J(null),k(3)}})()},[]),d.useEffect(()=>{const t=h&&h.subscription_type&&(h.subscription_type.toLowerCase()==="ultimate"||h.subscription_type.toLowerCase().includes("ultimate"));ge(!t&&U>=E)},[E,U,h]),d.useEffect(()=>{he()},[h]),d.useEffect(()=>{if(g.state&&g.state.openBadgeId&&v.length>0){const t=v.find(i=>String(i.id)===String(g.state.openBadgeId));t&&(V(t),Y(!0),B("/badge-shop",{replace:!0,state:{}}))}},[g.state,v]);const be=t=>t?`/static/images/bages/shop/${t}`:"",K=async()=>{pe(!0);try{const t=await R.get("/api/badges/shop");De(t.data.badges||[])}catch{w("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u0431\u0435\u0439\u0434\u0436\u0438\u043A\u043E\u0432")}finally{pe(!1)}},Q=async()=>{try{const t=await R.get("/api/user/points");Le(t.data.points)}catch{}},ue=t=>{V(t),f(0),q(!1),z(!0)},X=()=>{Y(!1),V(null)};d.useEffect(()=>()=>{b&&URL.revokeObjectURL(b)},[b]);const S={previewContainer:{display:"flex",gap:a.spacing(3),marginTop:a.spacing(2),backgroundColor:"rgba(0, 0, 0, 0.02)",borderRadius:a.shape.borderRadius,padding:a.spacing(2),flexWrap:"wrap",justifyContent:"center"},previewItem:{display:"flex",flexDirection:"column",alignItems:"center",gap:a.spacing(1)},previewLabel:{fontSize:12,color:a.palette.text.secondary}};return Fe?e.jsx(r,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"80vh",children:e.jsx(Z,{})}):e.jsxs(qe,{maxWidth:"lg",sx:{py:l?2:4,pb:l?12:4},children:[e.jsxs(r,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:l?2:4,flexDirection:l?"column":"row",gap:2,children:[e.jsx(s,{variant:l?"h5":"h4",component:"h1",gutterBottom:!0,children:"\u041C\u0430\u0433\u0430\u0437\u0438\u043D \u0431\u0435\u0439\u0434\u0436\u0438\u043A\u043E\u0432"}),e.jsxs(r,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(Ta,{icon:e.jsx(ke,{}),label:`${I} \u0431\u0430\u043B\u043B\u043E\u0432`}),e.jsx(We,{variant:"contained",startIcon:e.jsx(ve,{}),onClick:()=>M(!0),children:"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u0431\u0435\u0439\u0434\u0436\u0438\u043A"})]})]}),l&&e.jsx(r,{sx:{mb:2,p:1.5,bgcolor:"background.paper",borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs(s,{variant:"h6",align:"center",sx:{fontWeight:600},children:[m===0&&"\u0414\u043E\u0441\u0442\u0443\u043F\u043D\u044B\u0435 \u0431\u0435\u0439\u0434\u0436\u0438\u043A\u0438",m===1&&"\u041C\u043E\u0438 \u0431\u0435\u0439\u0434\u0436\u0438\u043A\u0438",m===2&&"\u041A\u0443\u043F\u043B\u0435\u043D\u043D\u044B\u0435 \u0431\u0435\u0439\u0434\u0436\u0438\u043A\u0438",m===3&&"\u0421\u043A\u0443\u043F\u043B\u0435\u043D\u043D\u044B\u0435 \u0431\u0435\u0439\u0434\u0436\u0438\u043A\u0438"]})}),ce&&e.jsx(je,{severity:"error",sx:{mb:2},onClose:()=>w(null),children:ce}),e.jsxs(r,{sx:{display:"flex",flexDirection:l?"column":"row",alignItems:l?"stretch":"center",justifyContent:"space-between",mb:3,gap:2},children:[e.jsxs($a,{value:m,onChange:(t,i)=>A(i),variant:l?"fullWidth":"standard",centered:!l,sx:{mb:l?2:0,display:{xs:"none",md:"flex"}},children:[e.jsx(G,{label:"\u0414\u043E\u0441\u0442\u0443\u043F\u043D\u044B\u0435"}),e.jsx(G,{label:"\u041C\u043E\u0438"}),e.jsx(G,{label:"\u041A\u0443\u043F\u043B\u0435\u043D\u043D\u044B\u0435"}),e.jsx(G,{label:"\u0421\u043A\u0443\u043F\u043B\u0435\u043D\u043D\u044B\u0435"})]}),e.jsxs(Ya,{size:"small",children:[e.jsx(Ke,{id:"sort-select-label",children:e.jsxs(r,{display:"flex",alignItems:"center",gap:.5,children:[e.jsx(Ie,{fontSize:"small"}),e.jsx("span",{children:"\u0421\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u043A\u0430"})]})}),e.jsxs(Qe,{labelId:"sort-select-label",value:P,onChange:t=>{H(t.target.value)},label:e.jsxs(r,{display:"flex",alignItems:"center",gap:.5,children:[e.jsx(Ie,{fontSize:"small"}),e.jsx("span",{children:"\u0421\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u043A\u0430"})]}),size:"small",children:[e.jsx(D,{value:"newest",children:e.jsxs(r,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(Ce,{fontSize:"small"}),e.jsx("span",{children:"\u0421\u043D\u0430\u0447\u0430\u043B\u0430 \u043D\u043E\u0432\u044B\u0435"})]})}),e.jsx(D,{value:"oldest",children:e.jsxs(r,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(Ce,{fontSize:"small",sx:{transform:"rotate(180deg)"}}),e.jsx("span",{children:"\u0421\u043D\u0430\u0447\u0430\u043B\u0430 \u0441\u0442\u0430\u0440\u044B\u0435"})]})}),e.jsx(D,{value:"popular",children:e.jsxs(r,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(ga,{fontSize:"small"}),e.jsx("span",{children:"\u041F\u043E\u043F\u0443\u043B\u044F\u0440\u043D\u044B\u0435"})]})}),e.jsx(D,{value:"price-low",children:e.jsxs(r,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(Se,{fontSize:"small"}),e.jsx("span",{children:"\u0414\u0435\u0448\u0435\u0432\u043B\u0435"})]})}),e.jsx(D,{value:"price-high",children:e.jsxs(r,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(Se,{fontSize:"small",sx:{transform:"scale(1.2)"}}),e.jsx("span",{children:"\u0414\u043E\u0440\u043E\u0436\u0435"})]})})]})]})]}),e.jsx(ee,{container:!0,spacing:l?1:2,children:(()=>{let t=v;return m===0?t=v.filter(i=>!(i.max_copies===1&&i.copies_sold>=1||i.max_copies&&i.copies_sold>=i.max_copies||i.purchases?.some(c=>c.buyer_id===y?.id))):m===1?t=v.filter(i=>i.creator_id===y?.id):m===2?t=v.filter(i=>i.purchases?.some(c=>c.buyer_id===y?.id)):m===3&&(t=v.filter(i=>i.max_copies===1&&i.copies_sold>=1||i.max_copies&&i.copies_sold>=i.max_copies)),(i=>{if(!i.length)return[];switch(P){case"newest":return[...i].sort((c,j)=>j.id-c.id);case"oldest":return[...i].sort((c,j)=>c.id-j.id);case"popular":return[...i].sort((c,j)=>(j.purchases?.length||0)-(c.purchases?.length||0));case"price-low":return[...i].sort((c,j)=>c.price-j.price);case"price-high":return[...i].sort((c,j)=>j.price-c.price);default:return i}})(t)})().map(t=>e.jsx(ee,{item:!0,xs:6,sm:4,md:3,children:e.jsxs(fa,{onClick:()=>(i=>{V(i),Y(!0)})(t),sx:{cursor:"pointer",height:"100%"},children:[e.jsxs(r,{sx:{position:"relative",overflow:"hidden"},children:[e.jsx(ja,{className:"badge-image",src:`/static/images/bages/shop/${t.image_path}`,alt:t.name||"\u0411\u0435\u0439\u0434\u0436\u0438\u043A"}),e.jsx(ya,{className:"badge-overlay",children:e.jsx(s,{variant:"body2",color:"white",sx:{textAlign:"center"},children:"\u041D\u0430\u0436\u043C\u0438\u0442\u0435 \u0434\u043B\u044F \u043F\u043E\u0434\u0440\u043E\u0431\u043D\u043E\u0441\u0442\u0435\u0439"})}),t.max_copies>0&&e.jsx(Be,{size:"small",label:`${t.copies_sold||0}/${t.max_copies}`,issoldout:(t.max_copies===1&&t.copies_sold>=1||t.max_copies&&t.copies_sold>=t.max_copies).toString()})]}),e.jsx(va,{children:e.jsx(ka,{variant:"subtitle1",children:t.name||"\u0411\u0435\u0439\u0434\u0436\u0438\u043A \u0431\u0435\u0437 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u044F"})}),e.jsxs(wa,{children:[e.jsx(Sa,{variant:"body2",children:t.description||"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442"}),e.jsxs(Ca,{children:[e.jsx(_a,{src:t.creator?.avatar_url,alt:t.creator?.name||"\u0421\u043E\u0437\u0434\u0430\u0442\u0435\u043B\u044C"}),e.jsx(Ia,{variant:"caption",children:t.creator?.name||"\u0421\u043E\u0437\u0434\u0430\u0442\u0435\u043B\u044C"})]}),e.jsxs(za,{children:[e.jsxs(Wa,{children:[e.jsx(Ra,{}),e.jsxs(Ba,{children:[t.price," \u0431\u0430\u043B\u043B\u043E\u0432"]})]}),t.max_copies===1&&t.copies_sold>=1||t.max_copies&&t.copies_sold>=t.max_copies?e.jsx(ze,{variant:"outlined",color:"error",disabled:!0,children:"\u0420\u0430\u0441\u043F\u0440\u043E\u0434\u0430\u043D\u043E"}):!t.purchases?.some(i=>i.buyer_id===y?.id)&&e.jsx(ze,{onClick:i=>{i.stopPropagation(),ue(t)},disabled:I<t.price,children:"\u041A\u0443\u043F\u0438\u0442\u044C"})]})]})]})},t.id))}),e.jsx(Da,{open:Ae,onClose:X,fullScreen:!1,TransitionComponent:Xe,TransitionProps:{timeout:300},PaperProps:{style:{background:a.palette.background.default,borderRadius:20,overflow:"hidden",zIndex:1e9,maxHeight:"90vh",display:"flex",flexDirection:"column"}},children:n&&e.jsxs(e.Fragment,{children:[e.jsxs(Fa,{children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Aa,{variant:"h5",children:n.name!=="shop_1"?n.name:"\u0411\u0435\u0439\u0434\u0436\u0438\u043A \u0431\u0435\u0437 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u044F"}),n.max_copies>0&&e.jsx(Be,{size:"small",label:`${n.copies_sold||0}/${n.max_copies}`,issoldout:(n.max_copies===1&&n.copies_sold>=1||n.max_copies&&n.copies_sold>=n.max_copies).toString(),sx:{position:"static",my:0,ml:1}})]}),e.jsx(ae,{edge:"end",color:"inherit",onClick:X,"aria-label":"close",children:e.jsx(de,{})})]}),e.jsxs(Pa,{children:[e.jsx(r,{sx:{position:"relative",mb:4},children:e.jsx(La,{src:be(n.image_path),alt:n.name})}),e.jsxs(Ea,{children:[e.jsx(Ga,{src:n.creator?.avatar_url,alt:n.creator?.name}),e.jsxs(r,{children:[e.jsx(s,{variant:"subtitle2",color:"text.secondary",children:"\u0421\u043E\u0437\u0434\u0430\u0442\u0435\u043B\u044C"}),e.jsx(s,{variant:"body1",sx:{fontWeight:"bold",color:a.palette.primary.main},children:n.creator?.name||"\u0421\u043E\u0437\u0434\u0430\u0442\u0435\u043B\u044C"})]})]}),n.purchases?.length>0&&e.jsxs(r,{sx:{mb:3},children:[e.jsx(s,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"\u0412\u043B\u0430\u0434\u0435\u043B\u044C\u0446\u044B"}),e.jsx(r,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:n.purchases.map(t=>e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1,p:1,borderRadius:1,bgcolor:"background.paper",boxShadow:1},children:[e.jsx(te,{src:t.buyer?.avatar_url,alt:t.buyer?.name,sx:{width:24,height:24}}),e.jsx(s,{variant:"body2",children:t.buyer?.name||"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C"})]},t.buyer_id))})]}),e.jsx(Ha,{variant:"body1",children:n.description||"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442"}),e.jsx(C,{id:"copy-badge-link",variant:"outlined",startIcon:e.jsx(ha,{}),onClick:()=>{const t=`${window.location.origin}/badge/${n.id}`;navigator.clipboard.writeText(t).then(()=>{const i=document.getElementById("copy-badge-link");if(i){const c=i.textContent;i.textContent="\u0421\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u043D\u043E!",setTimeout(()=>{i.textContent=c},2e3)}})},sx:{mb:2},children:"\u0421\u0441\u044B\u043B\u043A\u0430"}),e.jsxs(Na,{children:[e.jsxs(Re,{children:[e.jsx(s,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:n.max_copies>0?"\u041F\u0440\u043E\u0434\u0430\u043D\u043E \u043A\u043E\u043F\u0438\u0439":"\u0412\u0441\u0435\u0433\u043E \u043F\u0440\u043E\u0434\u0430\u043D\u043E"}),e.jsx(s,{variant:"h4",sx:{color:a.palette.primary.main,fontWeight:"bold"},children:n.max_copies>0?`${n.purchases?.length||0}/${n.max_copies}`:n.purchases?.length||0})]}),e.jsxs(Re,{children:[e.jsx(s,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"\u0414\u043E\u0445\u043E\u0434 \u0441\u043E\u0437\u0434\u0430\u0442\u0435\u043B\u044F"}),e.jsx(s,{variant:"h4",sx:{color:a.palette.primary.main,fontWeight:"bold"},children:Math.round((n.purchases?.length||0)*n.price*.3)}),e.jsx(s,{variant:"caption",color:"text.secondary",children:"\u0431\u0430\u043B\u043B\u043E\u0432"})]})]})]}),e.jsxs(Va,{children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(oe,{sx:{color:a.palette.primary.main,fontSize:28}}),e.jsxs(s,{variant:"h5",sx:{color:a.palette.primary.main,fontWeight:"bold"},children:[n.price," \u0431\u0430\u043B\u043B\u043E\u0432"]})]}),!n.purchases?.some(t=>t.buyer_id===y?.id)&&n.creator_id!==y?.id&&e.jsx(We,{variant:"contained",startIcon:e.jsx(we,{}),onClick:()=>{X(),ue(n)},disabled:I<n.price,sx:{minWidth:120},children:"\u041A\u0443\u043F\u0438\u0442\u044C"})]})]})}),e.jsxs(ie,{open:Pe,onClose:()=>M(!1),maxWidth:"sm",fullWidth:!0,sx:{position:"fixed",zIndex:1e6,"& .MuiBackdrop-root":{position:"fixed"},"& .MuiPaper-root":{borderRadius:"16px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.12)",overflow:"hidden"}},children:[e.jsxs(Ze,{sx:{borderBottom:"1px solid rgba(0, 0, 0, 0.06)",backgroundColor:"rgba(0, 0, 0, 0.02)",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(r,{component:"span",sx:{display:"inline-flex",alignItems:"center",justifyContent:"center",p:1,bgcolor:"primary.light",borderRadius:"50%",color:"white",mr:1},children:e.jsx(ve,{fontSize:"small"})}),"\u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u043D\u043E\u0432\u043E\u0433\u043E \u0431\u0435\u0439\u0434\u0436\u0438\u043A\u0430"]}),e.jsx(ae,{"aria-label":"close",onClick:()=>M(!1),sx:{color:"text.secondary","&:hover":{bgcolor:"rgba(0, 0, 0, 0.04)"}},children:e.jsx(de,{})})]}),e.jsx(re,{sx:{padding:a.spacing(3),bgcolor:"background.paper"},children:e.jsxs(r,{sx:{pt:1},children:[e.jsxs(r,{sx:{mb:2,p:2,bgcolor:"rgba(0, 0, 0, 0.03)",borderRadius:1},children:[e.jsx(s,{variant:"subtitle2",gutterBottom:!0,children:"\u041B\u0438\u043C\u0438\u0442\u044B \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F \u0431\u0435\u0439\u0434\u0436\u0438\u043A\u043E\u0432:"}),e.jsxs(r,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:1},children:[e.jsx(_,{label:"\u0411\u0435\u0437 \u043F\u043E\u0434\u043F\u0438\u0441\u043A\u0438: 3 \u0431\u0435\u0439\u0434\u0436\u0438\u043A\u0430",size:"small"}),e.jsx(_,{label:"Basic: 5 \u0431\u0435\u0439\u0434\u0436\u0438\u043A\u043E\u0432",size:"small"}),e.jsx(_,{label:"Premium: 8 \u0431\u0435\u0439\u0434\u0436\u0438\u043A\u043E\u0432",size:"small"}),e.jsx(_,{label:"Ultimate: \u0431\u0435\u0437 \u043E\u0433\u0440\u0430\u043D\u0438\u0447\u0435\u043D\u0438\u0439",size:"small",color:"primary"})]}),e.jsxs(s,{variant:"body2",color:"textSecondary",children:["\u0412\u044B \u0441\u043E\u0437\u0434\u0430\u043B\u0438 ",U||0," \u0438\u0437 ",h?.subscription_type==="ultimate"?"\u221E":E||3," \u0431\u0435\u0439\u0434\u0436\u0438\u043A\u043E\u0432"]})]}),e.jsxs(r,{sx:{mb:2,p:2,bgcolor:"rgba(0, 0, 0, 0.03)",borderRadius:1},children:[e.jsx(s,{variant:"subtitle2",gutterBottom:!0,children:"\u0422\u0440\u0435\u0431\u043E\u0432\u0430\u043D\u0438\u044F \u043A \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044E:"}),e.jsx(s,{variant:"body2",color:"textSecondary",children:"\u2022 \u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0439\u0442\u0435 \u0442\u043E\u043B\u044C\u043A\u043E SVG \u0444\u043E\u0440\u043C\u0430\u0442"}),e.jsx(s,{variant:"body2",color:"textSecondary",children:"\u2022 \u041C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u0430\u044F \u0448\u0438\u0440\u0438\u043D\u0430: 100px"}),e.jsx(s,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:"\u2022 \u041E\u0433\u0440\u0430\u043D\u0438\u0447\u0435\u043D\u0438\u044F \u043F\u043E \u0432\u044B\u0441\u043E\u0442\u0435: 23px, 30px, 60px"}),b?e.jsxs(r,{sx:S.previewContainer,children:[e.jsxs(r,{sx:S.previewItem,children:[e.jsx(s,{sx:S.previewLabel,children:"23px"}),e.jsx(r,{sx:{height:23,maxWidth:100,display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid rgba(0, 0, 0, 0.12)",borderRadius:"4px",padding:"0 8px",overflow:"hidden"},children:e.jsx("img",{src:b,alt:"Badge preview",style:{height:"100%",maxWidth:"100%"}})})]}),e.jsxs(r,{sx:S.previewItem,children:[e.jsx(s,{sx:S.previewLabel,children:"30px"}),e.jsx(r,{sx:{height:30,maxWidth:100,display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid rgba(0, 0, 0, 0.12)",borderRadius:"4px",padding:"0 8px",overflow:"hidden"},children:e.jsx("img",{src:b,alt:"Badge preview",style:{height:"100%",maxWidth:"100%"}})})]}),e.jsxs(r,{sx:S.previewItem,children:[e.jsx(s,{sx:S.previewLabel,children:"60px"}),e.jsx(r,{sx:{height:60,maxWidth:100,display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid rgba(0, 0, 0, 0.12)",borderRadius:"4px",padding:"0 8px",overflow:"hidden"},children:e.jsx("img",{src:b,alt:"Badge preview",style:{height:"100%",maxWidth:"100%"}})})]})]}):e.jsx(s,{variant:"body2",color:"textSecondary",align:"center",sx:{mt:2},children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 SVG \u0434\u043B\u044F \u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0430 \u043F\u0440\u0435\u0432\u044C\u044E"})]}),e.jsx(N,{fullWidth:!0,label:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435",value:p.name,onChange:t=>W({...p,name:t.target.value}),margin:"normal",variant:"outlined",InputProps:{sx:{borderRadius:"8px"}}}),e.jsx(N,{fullWidth:!0,label:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435",multiline:!0,rows:3,value:p.description,onChange:t=>W({...p,description:t.target.value}),margin:"normal",variant:"outlined",InputProps:{sx:{borderRadius:"8px"}}}),e.jsx(N,{fullWidth:!0,label:"\u0426\u0435\u043D\u0430 (\u0431\u0430\u043B\u043B\u043E\u0432)",type:"number",value:p.price,onChange:t=>W({...p,price:t.target.value}),margin:"normal",variant:"outlined",InputProps:{sx:{borderRadius:"8px"}}}),e.jsx(N,{fullWidth:!0,label:"\u041C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u043E\u0435 \u043A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u043A\u043E\u043F\u0438\u0439",type:"number",value:p.max_copies,onChange:t=>W({...p,max_copies:t.target.value}),margin:"normal",helperText:"\u041E\u0441\u0442\u0430\u0432\u044C\u0442\u0435 \u043F\u0443\u0441\u0442\u044B\u043C \u0434\u043B\u044F \u043D\u0435\u043E\u0433\u0440\u0430\u043D\u0438\u0447\u0435\u043D\u043D\u043E\u0433\u043E \u043A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u0430",variant:"outlined",InputProps:{sx:{borderRadius:"8px"}}}),e.jsxs(r,{component:"label",sx:{display:"flex",alignItems:"center",justifyContent:"center",p:3,mt:2,borderRadius:"12px",border:"2px dashed",borderColor:b?"primary.main":"divider",bgcolor:"rgba(0, 0, 0, 0.02)",cursor:"pointer",transition:"all 0.2s","&:hover":{borderColor:"primary.main",bgcolor:"rgba(0, 0, 0, 0.03)"}},children:[e.jsx("input",{type:"file",hidden:!0,accept:".svg",onChange:t=>{const i=t.target.files[0];if(i&&i.type==="image/svg+xml"){W({...p,image:i});const c=URL.createObjectURL(i);Ge(c)}else w("\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 SVG \u0444\u0430\u0439\u043B")}}),e.jsx(r,{sx:{textAlign:"center"},children:b?e.jsxs(r,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx("img",{src:b,alt:"SVG Preview",style:{height:80,maxWidth:"100%",marginBottom:a.spacing(2),filter:"drop-shadow(0 4px 6px rgba(0,0,0,0.1))"}}),e.jsx(s,{variant:"body2",color:"primary",children:"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0432\u044B\u0431\u0440\u0430\u0442\u044C \u0434\u0440\u0443\u0433\u043E\u0439 \u0444\u0430\u0439\u043B"})]}):e.jsxs(e.Fragment,{children:[e.jsx(s,{variant:"subtitle1",gutterBottom:!0,children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 SVG \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435"}),e.jsx(s,{variant:"body2",color:"textSecondary",children:"\u041F\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0444\u0430\u0439\u043B \u0441\u044E\u0434\u0430 \u0438\u043B\u0438 \u043D\u0430\u0436\u043C\u0438\u0442\u0435 \u0434\u043B\u044F \u0432\u044B\u0431\u043E\u0440\u0430"})]})})]})]})}),e.jsxs(Me,{sx:{padding:a.spacing(2,3),borderTop:"1px solid rgba(0, 0, 0, 0.06)",backgroundColor:"rgba(0, 0, 0, 0.02)"},children:[e.jsx(C,{onClick:()=>M(!1),sx:{borderRadius:"8px",textTransform:"none",fontWeight:500},children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),e.jsx(C,{onClick:async()=>{try{if(!(p.name&&p.description&&p.price&&p.image))return void w("\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0437\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u0432\u0441\u0435 \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u0435 \u043F\u043E\u043B\u044F");const t=parseInt(p.price);if(isNaN(t)||t<=0)return void w("\u0426\u0435\u043D\u0430 \u0434\u043E\u043B\u0436\u043D\u0430 \u0431\u044B\u0442\u044C \u043F\u043E\u043B\u043E\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u043C \u0447\u0438\u0441\u043B\u043E\u043C");const i=new FormData;i.append("name",p.name),i.append("description",p.description),i.append("price",t),i.append("royalty_percentage",p.royalty_percentage),(parseInt(p.max_copies)||0)===1?(i.append("max_copies",1),i.append("is_sold_out",!0)):p.max_copies&&i.append("max_copies",p.max_copies),i.append("image",p.image),i.append("strip_path_prefix",!0),i.append("file_path_mode","clean"),i.append("auto_assign_to_creator",!0),await R.post("/api/badges/create",i,{headers:{"Content-Type":"multipart/form-data"}}),M(!1),W({name:"",description:"",price:"",royalty_percentage:30,max_copies:"",image:null}),await he(),K(),Q()}catch(t){w(t.response?.data?.error||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u0438 \u0431\u0435\u0439\u0434\u0436\u0438\u043A\u0430")}},variant:"contained",disabled:!p.name||!p.price||!p.image,sx:{borderRadius:"8px",textTransform:"none",fontWeight:500,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",px:3},children:"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u0437\u0430 3000 \u0431\u0430\u043B\u043B\u043E\u0432"})]})]}),e.jsxs(Oa,{open:He,onClose:()=>{u!==2&&(z(!1),f(0))},fullWidth:!0,children:[e.jsxs(Ua,{children:[e.jsx(Ja,{}),e.jsxs(qa,{children:[e.jsx(we,{color:"primary",sx:{mr:1.5,fontSize:24}}),e.jsx(s,{variant:"h6",fontWeight:"bold",color:"primary.light",children:"\u041F\u043E\u043A\u0443\u043F\u043A\u0430 \u0431\u0435\u0439\u0434\u0436\u0438\u043A\u0430"})]}),u!==2&&e.jsx(ae,{"aria-label":"close",onClick:()=>z(!1),sx:{position:"absolute",right:8,top:8},children:e.jsx(de,{})})]}),e.jsx(re,{sx:{p:3,pt:2.5,bgcolor:"transparent"},children:n&&e.jsxs(e.Fragment,{children:[e.jsxs(ea,{activeStep:u,sx:{mt:3,mb:4,"& .MuiStepLabel-label":{[a.breakpoints.down("sm")]:{fontSize:"0.75rem"}},"& .MuiStepper-root":{flexWrap:"nowrap"},"& .MuiStep-root":{px:0},"& .MuiStepConnector-line":{minHeight:0}},alternativeLabel:l,children:[e.jsx(se,{children:e.jsx(ne,{children:l?"\u0418\u043D\u0444\u043E":"\u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F"})}),e.jsx(se,{children:e.jsx(ne,{children:l?"\u041F\u043E\u0434\u0442\u0432.":"\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u0435"})}),e.jsx(se,{children:e.jsx(ne,{children:l?"\u0418\u0442\u043E\u0433":"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0438\u0435"})})]}),u===0&&e.jsxs($e,{children:[e.jsxs(r,{sx:{display:"flex",flexDirection:"column",alignItems:"center",mb:3},children:[e.jsx(r,{sx:{width:120,height:120,mb:3,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(208, 188, 255, 0.1)",borderRadius:2,padding:1},children:e.jsx("img",{src:be(n.image_path),alt:n.name,style:{width:"90%",height:"90%",objectFit:"contain"}})}),e.jsxs(r,{sx:{width:"100%",textAlign:"center"},children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:n.name}),e.jsx(s,{variant:"body2",gutterBottom:!0,sx:{opacity:.7},children:n.description}),e.jsx(Ma,{icon:e.jsx(oe,{}),label:`${n.price} \u0431\u0430\u043B\u043B\u043E\u0432`,variant:"outlined",size:"medium",sx:{mt:1}})]})]}),e.jsxs(je,{severity:"warning",sx:{mb:2},children:[e.jsx(aa,{children:"\u0412\u0430\u0436\u043D\u043E\u0435 \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0435"}),"\u041F\u043E\u043A\u0443\u043F\u043A\u0430 \u0431\u0435\u0439\u0434\u0436\u0438\u043A\u0430 \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043D\u0435\u043E\u0431\u0440\u0430\u0442\u0438\u043C\u043E\u0439 \u043E\u043F\u0435\u0440\u0430\u0446\u0438\u0435\u0439. \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0443\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044C, \u0447\u0442\u043E \u0432\u044B \u0445\u043E\u0442\u0438\u0442\u0435 \u043F\u0440\u0438\u043E\u0431\u0440\u0435\u0441\u0442\u0438 \u044D\u0442\u043E\u0442 \u0431\u0435\u0439\u0434\u0436\u0438\u043A."]})]}),u===1&&e.jsxs($e,{children:[e.jsx(s,{variant:"subtitle1",sx:{mb:2,fontWeight:"bold"},children:"\u0414\u0435\u0442\u0430\u043B\u0438 \u043F\u043E\u043A\u0443\u043F\u043A\u0438:"}),e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(s,{variant:"body1",children:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435:"}),e.jsx(s,{variant:"body1",sx:{fontWeight:"bold"},children:n.name})]}),e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(s,{variant:"body1",children:"\u0421\u0442\u043E\u0438\u043C\u043E\u0441\u0442\u044C:"}),e.jsxs(s,{variant:"body1",sx:{fontWeight:"bold",color:"primary.main"},children:[n.price," \u0431\u0430\u043B\u043B\u043E\u0432"]})]}),e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[e.jsx(s,{variant:"body1",children:"\u0412\u0430\u0448 \u0431\u0430\u043B\u0430\u043D\u0441 \u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u043A\u0443\u043F\u043A\u0438:"}),e.jsxs(s,{variant:"body1",sx:{fontWeight:"bold"},children:[I-n.price," \u0431\u0430\u043B\u043B\u043E\u0432"]})]}),e.jsx(ta,{sx:{my:2}}),e.jsx(s,{variant:"body2",color:"text.secondary",children:"\u0411\u0435\u0439\u0434\u0436\u0438\u043A \u0431\u0443\u0434\u0435\u0442 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D \u0432 \u0432\u0430\u0448\u0438 \u0434\u043E\u0441\u0442\u0438\u0436\u0435\u043D\u0438\u044F \u0441\u0440\u0430\u0437\u0443 \u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u043A\u0443\u043F\u043A\u0438"})]}),u===2&&e.jsx(r,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",py:4,position:"relative",overflow:"hidden"},children:me?e.jsxs(e.Fragment,{children:[Ve&&e.jsx(r,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:1,animation:"confetti 1s ease-out forwards","@keyframes confetti":{"0%":{opacity:0},"100%":{opacity:1}}},children:[...Array(15)].map((t,i)=>e.jsx(r,{sx:{position:"absolute",width:8*Math.random()+5,height:8*Math.random()+5,backgroundColor:["#6200ee","#9c64f2","#d0bcff","#e9ddff","#6200ee","#9c64f2","#d0bcff","#e9ddff","#6200ee","#9c64f2"][Math.floor(10*Math.random())],borderRadius:"50%",left:100*Math.random()+"%",top:0,animation:`fall${i%3} ${1.5*Math.random()+1}s linear forwards`,"@keyframes fall0":{to:{transform:"translateY(300px) rotate(360deg)",opacity:0}},"@keyframes fall1":{to:{transform:"translateY(300px) rotate(-360deg)",opacity:0}},"@keyframes fall2":{to:{transform:"translateY(300px) rotate(720deg)",opacity:0}}}},i))}),e.jsxs(r,{sx:{animation:"pop-in 0.5s cubic-bezier(0.19, 1, 0.22, 1) forwards","@keyframes pop-in":{"0%":{transform:"scale(0)",opacity:0},"80%":{transform:"scale(1.1)",opacity:1},"100%":{transform:"scale(1)",opacity:1}},display:"flex",flexDirection:"column",alignItems:"center",zIndex:2},children:[e.jsx(xa,{color:"success",sx:{fontSize:80,mb:2}}),e.jsx(s,{variant:"h6",gutterBottom:!0,align:"center",children:"\u041F\u043E\u0437\u0434\u0440\u0430\u0432\u043B\u044F\u0435\u043C \u0441 \u043F\u043E\u043A\u0443\u043F\u043A\u043E\u0439!"}),e.jsxs(s,{variant:"body1",align:"center",children:['\u0411\u0435\u0439\u0434\u0436\u0438\u043A "',n.name,'" \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D \u0432 \u0432\u0430\u0448\u0438 \u0434\u043E\u0441\u0442\u0438\u0436\u0435\u043D\u0438\u044F.']}),e.jsxs(r,{sx:{mt:3,p:2,borderRadius:2,bgcolor:"background.paper",boxShadow:1,width:"100%",maxWidth:250,animation:"fade-in 1s ease-in-out forwards","@keyframes fade-in":{from:{opacity:0,transform:"translateY(20px)"},to:{opacity:1,transform:"translateY(0)"}}},children:[e.jsx(s,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,align:"center",children:"\u041D\u043E\u0432\u044B\u0439 \u0431\u0430\u043B\u0430\u043D\u0441:"}),e.jsxs(s,{variant:"h6",color:"primary",sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[e.jsx(ke,{sx:{mr:1}}),I-Math.ceil(1.1*n?.price)," \u0431\u0430\u043B\u043B\u043E\u0432"]})]})]})]}):e.jsxs(r,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[e.jsx(Z,{size:40}),e.jsx(s,{variant:"body1",children:"\u041E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430 \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0438..."})]})})]})}),e.jsxs(Me,{children:[u===0&&e.jsxs(e.Fragment,{children:[e.jsx(Te,{onClick:()=>z(!1),variant:"outlined",children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),e.jsx(le,{onClick:()=>{f(1)},disabled:I<(n?.price||0),children:"\u041F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C"})]}),u===1&&e.jsxs(e.Fragment,{children:[e.jsx(Te,{onClick:()=>f(0),variant:"outlined",disabled:T,children:"\u041D\u0430\u0437\u0430\u0434"}),e.jsx(le,{onClick:()=>(async t=>{if(!T)try{O(!0),f(1.5),await new Promise(i=>setTimeout(i,1e3)),await R.post(`/api/badges/purchase/${t.id}`,{badge_info:{name:t.name!=="shop_1"?t.name:"\u0411\u0435\u0439\u0434\u0436\u0438\u043A",remove_badge_prefix:!0,add_shop_prefix:!0}}),f(2),q(!0),xe(!0),setTimeout(()=>{z(!1),f(0),q(!1),xe(!1),K(),Q(),O(!1)},3e3)}catch(i){w(i.response?.data?.error||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043F\u043E\u043A\u0443\u043F\u043A\u0435 \u0431\u0435\u0439\u0434\u0436\u0438\u043A\u0430"),f(0),O(!1)}})(n),disabled:T,startIcon:T?e.jsx(Z,{size:16,color:"inherit"}):null,children:T?"\u041E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430...":"\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044C \u043F\u043E\u043A\u0443\u043F\u043A\u0443"})]}),u===2&&me&&e.jsx(le,{onClick:()=>{z(!1),f(0)},sx:{mx:"auto"},children:"\u0413\u043E\u0442\u043E\u0432\u043E"})]})]}),e.jsx(ua,{tabValue:m,onTabChange:(t,i)=>A(i)})]})};export{Ka as default};
