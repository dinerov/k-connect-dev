import{r as xe,a as pe,b as qe,d as C,j as e,P as he,B as os,e as Oe,A as K,G as B,m as te,l as v,o as Z,af as Ht,at as is,w as Q,i as a,T as n,k as _e,a6 as ns,a8 as Te,I as pt,O as Lt,Q as Ee,a7 as ls,U as Ne,D as Pe,E as Ge,H as $e,J as Qe,s as U,C as gr,p as fr,g as Qr,ap as cs,au as ds,av as xs,aw as ps,V as ht,R as Ut,L as hs,ax as Xr,ay as ea,az as ta,aA as Jt,aB as J,aC as ra,q as Y,h as us,v as ms,t as bs,aD as gs,aE as fs,ai as ut,aF as js}from"./vendor-mui.08p3AH88.js";import{u as jr,r as i}from"./vendor-router.BRqU_Zs2.js";import{a as k,m as Ve}from"./vendor.CL98q8z6.js";import{r as ue,T as yr,I as Xe,h as aa,A as sa,n as mt,N as oa,c as ia,L as na,F as ys,l as vr,b as la}from"./index.CdVNWeFt.js";import{g as vs}from"./imageUtils.BkCfy0de.js";import{g as me,r as Kt}from"./vendor-react.DF-_cTkv.js";import{A as Cr,P as ca,a as Cs,D as ws,S as Ss}from"./TransferMenu.2g5UFehs.js";import{u as da}from"./notistack.esm.BoLx6yWs.js";import{A as xa}from"./AttachMoney.CLjR6rlb.js";import{A as ks}from"./AccountBalanceWallet.DfnSQtMa.js";import{B as pa}from"./Badge.Dv8azNVM.js";import{C as Fs}from"./Clear.ONWxSfjH.js";import{T as ha,S as bt}from"./ShoppingCart.BDp27tTE.js";import{S as _s}from"./SupportAgent.D8YXuy4j.js";import{C as gt}from"./Close.BG2YHWMj.js";import{M as Bs}from"./MoreVert.C0-1U5Ci.js";import{P as Zt}from"./PhotoCamera.GVaun1S8.js";import{S as Ws}from"./Save.D4JlNQm5.js";import{D as Yt}from"./Delete.C47j6PO2.js";import{A as ua}from"./Add.BKfOzMjp.js";import{T as et}from"./Telegram.dTatVh8b.js";import{C as tt}from"./Check.8Oxd4z3r.js";import{P as ma}from"./Person.B_G_dVGx.js";import{A as Ds}from"./AccountCircle.C55a0IjL.js";import{A as zs}from"./ArrowBack.DeCcUwS3.js";import{L as Is}from"./Link.BmVIpf9S.js";import{S as Ms}from"./Security.Cr7xxssj.js";import{V as ba}from"./VerifiedUser.CnoA7dRM.js";import{B as Ts}from"./Block.CDlxe_qq.js";import{W as Ps}from"./WarningAmber.ahx4NMS2.js";import{H as ga}from"./History.BL_2VNvs.js";import{C as wr}from"./Chat.cmss1gek.js";import{M as Rs}from"./MusicNote.D4Jp3FIY.js";import{L as As,C as Os}from"./Cake.Ds5sEyJA.js";import{S as Es}from"./Storefront.C18hyH4H.js";import{S as Ns}from"./Shield.D0EJ_IOk.js";import"./thumbnails.CEJMDkxh.js";import"./dateUtils.JaLtthGQ.js";import"./Send.DjUSpM3V.js";const He=new class{async getVapidPublicKey(){return"BHHDcCL7H0Aze-qL17sSPR-x4PcDrvConfsgy-BaRmEkSBq8QyacSjt-EDocdQbxvEwplO0GbBVFe0UWmM0HKp0="}async registerServiceWorker(){if(!("serviceWorker"in navigator))throw new Error("Service Worker not supported in this browser");try{const r=await navigator.serviceWorker.getRegistrations();for(const x of r)if(x.active&&x.active.scriptURL.includes("service-worker.js"))return x;const l=await navigator.serviceWorker.register("/service-worker.js",{scope:"/",updateViaCache:"none"});return l.installing&&l.installing.addEventListener("statechange",x=>{x.target.state}),l}catch(r){throw r}}async subscribeToPushNotifications(){try{if(Notification.permission!=="granted"){const o=await this.requestNotificationPermission();if(o!=="granted")throw new Error(`Notification permission not granted: ${o}`)}let r;r=navigator.serviceWorker.controller?await navigator.serviceWorker.ready:await this.registerServiceWorker();const l=await this.getVapidPublicKey(),x=this.urlBase64ToUint8Array(l);let u=await r.pushManager.getSubscription();if(u){const o=new Uint8Array(u.options.applicationServerKey);let m=o.length!==x.length;if(!m){for(let h=0;h<o.length;h++)if(o[h]!==x[h]){m=!0;break}}m&&(await u.unsubscribe(),u=null)}if(!u)try{u=await r.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:x})}catch(o){throw o}return await this.saveSubscription(u),u}catch(r){throw r}}async unsubscribeFromPushNotifications(){try{if(!navigator.serviceWorker.controller)return!1;const r=await navigator.serviceWorker.ready,l=await r.pushManager.getSubscription();return!!l&&(await k.delete("/api/notifications/push-subscription",{data:{endpoint:l.endpoint}}),await l.unsubscribe(),!0)}catch(r){throw r}}async saveSubscription(r){try{const l={...r.toJSON(),send_test:!0,platform:this.getBrowserInfo(),url:"https://k-connect.ru"};return(await k.post("/api/notifications/push-subscription",l)).data}catch(l){throw l.response,l}}getBrowserInfo(){const r=navigator.userAgent;let l="other";return r.match(/chrome|chromium|crios/i)?l="chrome":r.match(/firefox|fxios/i)?l="firefox":r.match(/safari/i)?l="safari":r.match(/opr\//i)?l="opera":r.match(/edg/i)&&(l="edge"),l}async getNotificationPermissionStatus(){return"Notification"in window?Notification.permission:"unsupported"}async requestNotificationPermission(){return"Notification"in window?await Notification.requestPermission():"unsupported"}async isPushNotificationSupported(){return"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window}parseNotificationLink(r){return r?r.startsWith("/profile/")?{type:"profile",username:r.split("/profile/")[1]}:r.includes("?comment=")&&r.includes("&reply=")?{type:"reply",postId:r.split("/post/")[1].split("?")[0],commentId:r.split("comment=")[1].split("&")[0],replyId:r.split("reply=")[1]}:r.includes("?comment=")?{type:"comment",postId:r.split("/post/")[1].split("?")[0],commentId:r.split("comment=")[1]}:r.startsWith("/post/")?{type:"post",postId:r.split("/post/")[1]}:{type:"unknown"}:{type:"unknown"}}async fetchNotificationContent(r){try{if(!r||!r.link)return r;const l=this.parseNotificationLink(r.link);switch(l.type){case"post":try{const x=await k.get(`/api/posts/${l.postId}/preview`);if(x.data&&x.data.success)return{...r,post_data:x.data.post}}catch{}break;case"comment":try{const x=await k.get(`/api/comments/${l.commentId}/preview`);if(x.data&&x.data.success)return{...r,comment_data:x.data.comment}}catch{}break;case"reply":try{const x=await k.get(`/api/comments/${l.replyId}/preview`);if(x.data&&x.data.success)return{...r,reply_data:x.data.comment}}catch{}}return r}catch{return r}}urlBase64ToUint8Array(r){if(!r)throw new Error("Invalid VAPID key: empty string");try{let l=r.replace(/-/g,"+").replace(/_/g,"/");for(;l.length%4!=0;)l+="=";const x=atob(l),u=new Uint8Array(x.length);for(let h=0;h<x.length;++h)u[h]=x.charCodeAt(h);const o=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),m=/iPad|iPhone|iPod/.test(navigator.userAgent);return(o||m)&&u.length,u}catch(l){throw new Error(`Failed to convert VAPID key: ${l.message}`)}}async sendTestNotification(){try{return(await k.post("/api/notifications/test",{url:"https://k-connect.ru",title:"\u0422\u0435\u0441\u0442\u043E\u0432\u043E\u0435 \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0435",body:"\u0423\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u044F \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043D\u044B \u0438 \u0440\u0430\u0431\u043E\u0442\u0430\u044E\u0442"})).data}catch(r){throw r.response,r}}};var fa,ft={};function $s(){if(fa)return ft;fa=1;var r=xe();Object.defineProperty(ft,"__esModule",{value:!0}),ft.default=void 0;var l=r(ue()),x=pe();return ft.default=(0,l.default)((0,x.jsx)("path",{d:"M7 14c-1.66 0-3 1.34-3 3 0 1.31-1.16 2-2 2 .92 1.22 2.49 2 4 2 2.21 0 4-1.79 4-4 0-1.66-1.34-3-3-3m13.71-9.37-1.34-1.34a.9959.9959 0 0 0-1.41 0L9 12.25 11.75 15l8.96-8.96c.39-.39.39-1.02 0-1.41"}),"Brush"),ft}const Sr=me($s()),Vs=({activeTab:r,onTabChange:l,user:x})=>{const u=jr(),o=x?.account_type==="channel",m=qe(),{themeSettings:h}=i.useContext(yr),w=m.palette.mode==="light"?C(m.palette.divider,.1):m.palette.mode==="contrast"?C(m.palette.common.white,.15):C(m.palette.common.white,.1),g=m.palette.mode==="light"?C(m.palette.text.primary,.7):m.palette.mode==="contrast"?C(m.palette.common.white,.9):"rgb(214 209 227 / 77%)";return e.jsx(he,{sx:{position:"fixed",bottom:0,left:0,right:0,display:{xs:"block",md:"none"},zIndex:1e3,borderTop:`1px solid ${w}`,background:"rgba(255, 255, 255, 0.03)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",boxShadow:"0 5px 15px rgba(0, 0, 0, 0.2)"},elevation:0,children:e.jsxs(os,{value:r,onChange:(S,W)=>{W===-1?u(-1):l(S,W)},sx:{bgcolor:"transparent",height:75,display:"flex",justifyContent:"center",alignItems:"flex-start",marginTop:"10px","& .MuiBottomNavigationAction-root":{color:g,"&.Mui-selected":{color:h.primaryColor||m.palette.primary.main}}},children:[e.jsx(Oe,{value:-1,label:"\u041D\u0430\u0437\u0430\u0434",icon:e.jsx(Xe,{icon:"solar:arrow-left-bold",width:"28",height:"28"}),sx:{minWidth:"auto","& .MuiBottomNavigationAction-label":{fontSize:"0.8rem"}}}),e.jsx(Oe,{value:0,icon:e.jsx(Xe,{icon:"solar:user-circle-bold",width:"28",height:"28"}),sx:{minWidth:"auto","& .MuiBottomNavigationAction-label":{fontSize:"0.8rem"}}}),e.jsx(Oe,{value:1,icon:e.jsx(Sr,{sx:{fontSize:28}}),sx:{minWidth:"auto","& .MuiBottomNavigationAction-label":{fontSize:"0.8rem"}}}),!o&&e.jsx(Oe,{value:2,icon:e.jsx(Xe,{icon:"solar:bell-bold",width:"28",height:"28"}),sx:{minWidth:"auto","& .MuiBottomNavigationAction-label":{fontSize:"0.8rem"}}}),e.jsx(Oe,{value:3,icon:e.jsx(Xe,{icon:"solar:medal-ribbon-bold",width:"28",height:"28"}),sx:{minWidth:"auto","& .MuiBottomNavigationAction-label":{fontSize:"0.8rem"}}}),!o&&e.jsx(Oe,{value:4,icon:e.jsx(Cr,{sx:{fontSize:28}}),sx:{minWidth:"auto","& .MuiBottomNavigationAction-label":{fontSize:"0.8rem"}}}),!o&&e.jsx(Oe,{value:5,icon:e.jsx(Xe,{icon:"solar:lock-bold",width:"28",height:"28"}),sx:{minWidth:"auto","& .MuiBottomNavigationAction-label":{fontSize:"0.8rem"}}})]})})},Hs=()=>{const[r,l]=i.useState(""),[x,u]=i.useState(""),[o,m]=i.useState(""),[h,w]=i.useState(""),[g,S]=i.useState(!1),[W,X]=i.useState(!1),[I,A]=i.useState(""),[oe,_]=i.useState(""),[H,$]=i.useState(""),[T,re]=i.useState({open:!1,message:"",severity:"info"});i.useEffect(()=>{(async()=>{try{const D=await fetch("/api/user/has-credentials",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(D.ok){const M=await D.json();S(M.hasCredentials)}}catch{}})()},[]);const ie=(D,M)=>{re({open:!0,message:M,severity:D})},Be=()=>{re({...T,open:!1})};return e.jsx(be,{children:e.jsxs(ge,{children:[e.jsxs(ae,{variant:"h5",children:[e.jsx(Xe,{icon:"solar:lock-bold",width:"24",height:"24"}),"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0432\u0445\u043E\u0434\u0430 \u043F\u043E \u043B\u043E\u0433\u0438\u043D\u0443 \u0438 \u043F\u0430\u0440\u043E\u043B\u044E"]}),g?e.jsx(K,{severity:"info",sx:{mb:3},children:"\u0423 \u0432\u0430\u0441 \u0443\u0436\u0435 \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043D\u044B \u0443\u0447\u0435\u0442\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435 \u0434\u043B\u044F \u0432\u0445\u043E\u0434\u0430. \u0412\u044B \u043C\u043E\u0436\u0435\u0442\u0435 \u043E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u0438\u0445 \u043F\u0440\u0438 \u043D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E\u0441\u0442\u0438."}):e.jsx(K,{severity:"info",sx:{mb:3},children:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u0442\u0435 \u0443\u0447\u0435\u0442\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435, \u0447\u0442\u043E\u0431\u044B \u0438\u043C\u0435\u0442\u044C \u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E\u0441\u0442\u044C \u0432\u0445\u043E\u0434\u0438\u0442\u044C \u043F\u043E \u043B\u043E\u0433\u0438\u043D\u0443 \u0438 \u043F\u0430\u0440\u043E\u043B\u044E."}),e.jsx("form",{onSubmit:async D=>{if(D.preventDefault(),(()=>{let M=!0;return r?r.length<3?(A("\u0418\u043C\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F \u0434\u043E\u043B\u0436\u043D\u043E \u0431\u044B\u0442\u044C \u043D\u0435 \u043C\u0435\u043D\u0435\u0435 3 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432"),M=!1):A(""):(A("\u0418\u043C\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E"),M=!1),x?/\S+@\S+\.\S+/.test(x)?_(""):(_("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 email"),M=!1):(_("Email \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u0435\u043D"),M=!1),o?o.length<6?($("\u041F\u0430\u0440\u043E\u043B\u044C \u0434\u043E\u043B\u0436\u0435\u043D \u0431\u044B\u0442\u044C \u043D\u0435 \u043C\u0435\u043D\u0435\u0435 6 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432"),M=!1):o!==h?($("\u041F\u0430\u0440\u043E\u043B\u0438 \u043D\u0435 \u0441\u043E\u0432\u043F\u0430\u0434\u0430\u044E\u0442"),M=!1):$(""):($("\u041F\u0430\u0440\u043E\u043B\u044C \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u0435\u043D"),M=!1),M})()){X(!0);try{const M=await fetch("/api/auth/setup-credentials",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,email:x,password:o})}),ne=await M.json();M.ok?(ie("success","\u0423\u0447\u0435\u0442\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u044B"),S(!0),m(""),w("")):ie("error",ne.error||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0438 \u0443\u0447\u0435\u0442\u043D\u044B\u0445 \u0434\u0430\u043D\u043D\u044B\u0445")}catch{ie("error","\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0438 \u0443\u0447\u0435\u0442\u043D\u044B\u0445 \u0434\u0430\u043D\u043D\u044B\u0445")}finally{X(!1)}}},children:e.jsxs(B,{container:!0,spacing:2,children:[e.jsx(B,{item:!0,xs:12,children:e.jsx(te,{fullWidth:!0,label:"\u0418\u043C\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F",value:r,onChange:D=>l(D.target.value),error:!!I,helperText:I,variant:"outlined",margin:"normal"})}),e.jsx(B,{item:!0,xs:12,children:e.jsx(te,{fullWidth:!0,label:"Email",type:"email",value:x,onChange:D=>u(D.target.value),error:!!oe,helperText:oe,variant:"outlined",margin:"normal"})}),e.jsx(B,{item:!0,xs:12,md:6,children:e.jsx(te,{fullWidth:!0,label:"\u041F\u0430\u0440\u043E\u043B\u044C",type:"password",value:o,onChange:D=>m(D.target.value),error:!!H,helperText:H,variant:"outlined",margin:"normal"})}),e.jsx(B,{item:!0,xs:12,md:6,children:e.jsx(te,{fullWidth:!0,label:"\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u043F\u0430\u0440\u043E\u043B\u044C",type:"password",value:h,onChange:D=>w(D.target.value),error:o!==h&&h!=="",helperText:o!==h&&h!==""?"\u041F\u0430\u0440\u043E\u043B\u0438 \u043D\u0435 \u0441\u043E\u0432\u043F\u0430\u0434\u0430\u044E\u0442":"",variant:"outlined",margin:"normal"})}),e.jsx(B,{item:!0,xs:12,children:e.jsx(v,{type:"submit",variant:"contained",color:"primary",disabled:W,sx:{mt:2},children:W?e.jsx(Z,{size:24}):"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"})})]})}),e.jsx(Ht,{open:T.open,autoHideDuration:6e3,onClose:Be,children:e.jsx(K,{onClose:Be,severity:T.severity,children:T.message})})]})})};var ja,jt={};function Ls(){if(ja)return jt;ja=1;var r=xe();Object.defineProperty(jt,"__esModule",{value:!0}),jt.default=void 0;var l=r(ue()),x=pe();return jt.default=(0,l.default)((0,x.jsx)("path",{d:"M21 6H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m0 10H3V8h2v4h2V8h2v4h2V8h2v4h2V8h2v4h2V8h2z"}),"Straighten"),jt}const ya=me(Ls()),Us=({open:r,onClose:l})=>{qe();const[x,u]=i.useState(""),[o,m]=i.useState([]),[h,w]=i.useState([]),[g,S]=i.useState(null),[W,X]=i.useState(null),[I,A]=i.useState(!1),[oe,_]=i.useState(null),[H,$]=i.useState("search"),[T,re]=i.useState(null),[ie,Be]=i.useState(null),D=async()=>{try{const j=await fetch("/api/user/connections/list?type=love"),R=await j.json();if(R.success){w(R.connections||[]);const O=R.connections.find(q=>q.connection_status==="pending");S(O);const V=R.connections.find(q=>q.connection_status==="received");X(V),O?$("pending"):V?$("received"):R.connections.some(q=>q.connection_status==="confirmed")?$("connected"):$("search")}}catch{_("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u043A\u043E\u043D\u043D\u0435\u043A\u0442\u043E\u0432")}},M=async j=>{A(!0);try{const R=await fetch("/api/user/connections/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:j,connection_type:"love"})}),O=await R.json();O.success?(await D(),u(""),m([])):_(O.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u0438 \u043A\u043E\u043D\u043D\u0435\u043A\u0442\u0430")}catch{_("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u0438 \u043A\u043E\u043D\u043D\u0435\u043A\u0442\u0430")}finally{A(!1)}},ne=async j=>{A(!0);try{const R=await fetch("/api/user/connections/remove",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:j,connection_type:"love"})}),O=await R.json();O.success?await D():_(O.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u0438 \u043A\u043E\u043D\u043D\u0435\u043A\u0442\u0430")}catch{_("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u0438 \u043A\u043E\u043D\u043D\u0435\u043A\u0442\u0430")}finally{A(!1)}};i.useEffect(()=>{r&&D()},[r]),i.useEffect(()=>{const j=setTimeout(()=>{x&&(async R=>{if(R)try{const O=await fetch(`/api/user/connections/search?query=${encodeURIComponent(R)}`),V=await O.json();V.results?m(V.results):m([])}catch{_("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043F\u043E\u0438\u0441\u043A\u0435 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439"),m([])}else m([])})(x)},300);return()=>clearTimeout(j)},[x]);const P=()=>{re(null),Be(null)},Ce=typeof window<"u"&&window.innerWidth<=600;return e.jsx(is,{open:r,onClose:l,"aria-labelledby":"connection-modal",sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs(he,{sx:{width:"100%",maxWidth:500,height:Ce?"100vh":"auto",minHeight:Ce?"100vh":400,bgcolor:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(10px)",borderRadius:Ce?0:"24px",boxShadow:24,position:"relative",overflow:"hidden",zIndex:1300,backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.08))"},children:[e.jsx(Q,{onClick:l,sx:{position:"absolute",right:8,top:8,color:"rgba(255, 255, 255, 0.7)"},children:e.jsx(gt,{})}),H==="pending"&&e.jsxs(a,{sx:{p:2,textAlign:"center"},children:[e.jsx(n,{variant:"h6",sx:{mb:2,color:"#fff"},children:"\u041E\u0436\u0438\u0434\u0430\u043D\u0438\u0435 \u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u044F"}),e.jsxs(a,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:2},children:[e.jsx(_e,{src:`/static/uploads/avatar/${g.id}/${g.photo}`,alt:g.username,sx:{width:64,height:64,mr:2}}),e.jsxs(a,{children:[e.jsx(n,{sx:{color:"#fff"},children:g.username}),e.jsx(n,{sx:{color:"rgba(255, 255, 255, 0.7)"},children:g.name})]})]}),e.jsx(n,{sx:{color:"rgba(255, 255, 255, 0.7)",mb:2},children:"\u041E\u0436\u0438\u0434\u0430\u0435\u043C \u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u044F \u043E\u0442 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F"}),e.jsx(v,{variant:"contained",onClick:()=>ne(g.username),disabled:I,sx:{color:"#D0BCFF",bgcolor:"rgba(255, 255, 255, 0.1)","&:hover":{bgcolor:"rgba(255, 255, 255, 0.2)"}},children:"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C \u0437\u0430\u043F\u0440\u043E\u0441"})]}),H==="received"&&e.jsxs(a,{sx:{p:2,textAlign:"center"},children:[e.jsx(n,{variant:"h6",sx:{mb:2,color:"#fff"},children:"\u0417\u0430\u043F\u0440\u043E\u0441 \u043D\u0430 \u0441\u0432\u044F\u0437\u044C"}),e.jsxs(a,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:2},children:[e.jsx(_e,{src:`/static/uploads/avatar/${W.id}/${W.photo}`,alt:W.username,sx:{width:64,height:64,mr:2}}),e.jsxs(a,{children:[e.jsx(n,{sx:{color:"#fff"},children:W.username}),e.jsx(n,{sx:{color:"rgba(255, 255, 255, 0.7)"},children:W.name})]})]}),e.jsxs(a,{sx:{display:"flex",gap:2,justifyContent:"center"},children:[e.jsx(v,{variant:"contained",onClick:()=>M(W.username),disabled:I,sx:{color:"#D0BCFF",bgcolor:"rgba(255, 255, 255, 0.1)","&:hover":{bgcolor:"rgba(255, 255, 255, 0.2)"}},children:"\u041F\u0440\u0438\u043D\u044F\u0442\u044C"}),e.jsx(v,{variant:"contained",onClick:()=>ne(W.username),disabled:I,sx:{color:"#D0BCFF",bgcolor:"rgba(255, 255, 255, 0.1)","&:hover":{bgcolor:"rgba(255, 255, 255, 0.2)"}},children:"\u041E\u0442\u043A\u043B\u043E\u043D\u0438\u0442\u044C"})]})]}),H==="connected"&&e.jsxs(a,{sx:{p:2},children:[e.jsx(n,{variant:"h6",sx:{mb:2,color:"#fff"},children:"\u0412\u0430\u0448\u0430 \u043B\u044E\u0431\u043E\u0432\u043D\u0430\u044F \u0441\u0432\u044F\u0437\u044C"}),h.map(j=>{const R=(O=>{if(!O)return null;const V=new Date(O);return Math.floor((new Date-V)/864e5)})(j.confirmed_at);return e.jsxs(a,{sx:{display:"flex",alignItems:"center",bgcolor:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",p:2,mb:2},children:[e.jsx(_e,{src:`/static/uploads/avatar/${j.id}/${j.photo}`,alt:j.username,sx:{width:44,height:44,mr:2}}),e.jsxs(a,{sx:{flex:1},children:[e.jsx(n,{sx:{color:"#fff"},children:j.username}),e.jsx(n,{sx:{color:"rgba(255, 255, 255, 0.7)"},children:j.name}),j.is_confirmed&&R!==null&&e.jsxs(n,{sx:{color:"#D0BCFF",fontSize:"0.85rem",mt:.5},children:["\u0412\u043C\u0435\u0441\u0442\u0435 ",R," ",R===1?"\u0434\u0435\u043D\u044C":R<5?"\u0434\u043D\u044F":"\u0434\u043D\u0435\u0439"]})]}),j.is_confirmed?e.jsxs(e.Fragment,{children:[e.jsx(Q,{onClick:O=>{return V=O,q=j.id,re(V.currentTarget),void Be(q);var V,q},sx:{color:"rgba(255, 255, 255, 0.7)"},children:e.jsx(Bs,{})}),e.jsx(ns,{anchorEl:T,open:!!T&&ie===j.id,onClose:P,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:e.jsx(Te,{onClick:()=>{ne(j.username),P()},sx:{color:"#e57373"},children:"\u0423\u0431\u0440\u0430\u0442\u044C \u0441\u043E\u0435\u0434\u0438\u043D\u0435\u043D\u0438\u0435"})})]}):e.jsx(v,{onClick:()=>ne(j.username),disabled:I,variant:"outlined",color:"error",sx:{ml:2,minWidth:120},children:"\u0423\u0431\u0440\u0430\u0442\u044C \u0441\u043E\u0435\u0434\u0438\u043D\u0435\u043D\u0438\u0435"})]},j.id)})]}),H==="search"&&e.jsxs(e.Fragment,{children:[e.jsx(te,{fullWidth:!0,placeholder:"\u041F\u043E\u0438\u0441\u043A \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439...",value:x,onChange:j=>u(j.target.value),sx:{mb:2,"& .MuiOutlinedInput-root":{color:"#fff","& fieldset":{borderColor:"rgba(255, 255, 255, 0.23)"},"&:hover fieldset":{borderColor:"rgba(255, 255, 255, 0.5)"}}},InputProps:{startAdornment:e.jsx(pt,{position:"start",children:e.jsx(aa,{sx:{color:"rgba(255, 255, 255, 0.7)"}})})}}),e.jsxs(a,{sx:{flex:1,overflow:"auto","&::-webkit-scrollbar":{width:"8px"},"&::-webkit-scrollbar-track":{background:"rgba(255, 255, 255, 0.1)",borderRadius:"4px"},"&::-webkit-scrollbar-thumb":{background:"rgba(255, 255, 255, 0.2)",borderRadius:"4px","&:hover":{background:"rgba(255, 255, 255, 0.3)"}}},children:[x&&o.length>0&&e.jsx(Lt,{children:o.map(j=>e.jsxs(Ee,{sx:{bgcolor:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",mb:1,"&:hover":{bgcolor:"rgba(255, 255, 255, 0.1)"}},children:[e.jsx(ls,{children:e.jsx(_e,{src:`/static/uploads/avatar/${j.id}/${j.photo}`,alt:j.username})}),e.jsx(Ne,{primary:j.username,secondary:j.name,sx:{color:"#fff","& .MuiListItemText-secondary":{color:"rgba(255, 255, 255, 0.7)"}}}),e.jsx(v,{variant:"contained",onClick:()=>M(j.username),disabled:I||j.is_connected,sx:{color:"#D0BCFF",bgcolor:"rgba(255, 255, 255, 0.1)","&:hover":{bgcolor:"rgba(255, 255, 255, 0.2)"}},children:j.is_connected?"\u041F\u043E\u0434\u043A\u043B\u044E\u0447\u0435\u043D\u043E":"\u041A\u043E\u043D\u043D\u0435\u043A\u0442"})]},j.id))}),x&&o.length===0&&e.jsx(n,{sx:{color:"rgba(255, 255, 255, 0.7)",textAlign:"center",py:2},children:"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0438 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u044B"})]})]}),e.jsx(Ht,{open:!!oe,autoHideDuration:6e3,onClose:()=>_(null),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:e.jsx(K,{onClose:()=>_(null),severity:"error",sx:{width:"100%"},children:oe})})]})})};var va,yt={};function Js(){if(va)return yt;va=1;var r=xe();Object.defineProperty(yt,"__esModule",{value:!0}),yt.default=void 0;var l=r(ue()),x=pe();return yt.default=(0,l.default)((0,x.jsx)("path",{d:"M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10c1.38 0 2.5-1.12 2.5-2.5 0-.61-.23-1.2-.64-1.67-.08-.1-.13-.21-.13-.33 0-.28.22-.5.5-.5H16c3.31 0 6-2.69 6-6 0-4.96-4.49-9-10-9m5.5 11c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m-3-4c-.83 0-1.5-.67-1.5-1.5S13.67 6 14.5 6s1.5.67 1.5 1.5S15.33 9 14.5 9M5 11.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5S7.33 13 6.5 13 5 12.33 5 11.5m6-4c0 .83-.67 1.5-1.5 1.5S8 8.33 8 7.5 8.67 6 9.5 6s1.5.67 1.5 1.5"}),"Palette"),yt}const Ca=me(Js());var wa,vt={};function Ks(){if(wa)return vt;wa=1;var r=xe();Object.defineProperty(vt,"__esModule",{value:!0}),vt.default=void 0,function(o){if(o&&o.__esModule)return o;if(o===null||typeof o!="object"&&typeof o!="function")return{default:o};var m=u(void 0);if(m&&m.has(o))return m.get(o);var h={__proto__:null},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in o)if(g!=="default"&&Object.prototype.hasOwnProperty.call(o,g)){var S=w?Object.getOwnPropertyDescriptor(o,g):null;S&&(S.get||S.set)?Object.defineProperty(h,g,S):h[g]=o[g]}h.default=o,m&&m.set(o,h)}(Kt());var l=r(ue()),x=pe();function u(o){if(typeof WeakMap!="function")return null;var m=new WeakMap,h=new WeakMap;return(u=function(w){return w?h:m})(o)}return vt.default=(0,l.default)((0,x.jsx)("path",{d:"M5 3h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2m13 2h-2.5A3.5 3.5 0 0 0 12 8.5V11h-2v3h2v7h3v-7h3v-3h-3V9a1 1 0 0 1 1-1h2V5z"}),"Facebook"),vt}const kr=me(Ks());var Sa,Ct={};function Zs(){if(Sa)return Ct;Sa=1;var r=xe();Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.default=void 0,function(o){if(o&&o.__esModule)return o;if(o===null||typeof o!="object"&&typeof o!="function")return{default:o};var m=u(void 0);if(m&&m.has(o))return m.get(o);var h={__proto__:null},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in o)if(g!=="default"&&Object.prototype.hasOwnProperty.call(o,g)){var S=w?Object.getOwnPropertyDescriptor(o,g):null;S&&(S.get||S.set)?Object.defineProperty(h,g,S):h[g]=o[g]}h.default=o,m&&m.set(o,h)}(Kt());var l=r(ue()),x=pe();function u(o){if(typeof WeakMap!="function")return null;var m=new WeakMap,h=new WeakMap;return(u=function(w){return w?h:m})(o)}return Ct.default=(0,l.default)((0,x.jsx)("path",{d:"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"}),"Twitter"),Ct}const Fr=me(Zs());var ka,wt={};function Ys(){if(ka)return wt;ka=1;var r=xe();Object.defineProperty(wt,"__esModule",{value:!0}),wt.default=void 0,function(o){if(o&&o.__esModule)return o;if(o===null||typeof o!="object"&&typeof o!="function")return{default:o};var m=u(void 0);if(m&&m.has(o))return m.get(o);var h={__proto__:null},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in o)if(g!=="default"&&Object.prototype.hasOwnProperty.call(o,g)){var S=w?Object.getOwnPropertyDescriptor(o,g):null;S&&(S.get||S.set)?Object.defineProperty(h,g,S):h[g]=o[g]}h.default=o,m&&m.set(o,h)}(Kt());var l=r(ue()),x=pe();function u(o){if(typeof WeakMap!="function")return null;var m=new WeakMap,h=new WeakMap;return(u=function(w){return w?h:m})(o)}return wt.default=(0,l.default)((0,x.jsx)("path",{d:"M7.8 2h8.4C19.4 2 22 4.6 22 7.8v8.4a5.8 5.8 0 0 1-5.8 5.8H7.8C4.6 22 2 19.4 2 16.2V7.8A5.8 5.8 0 0 1 7.8 2m-.2 2A3.6 3.6 0 0 0 4 7.6v8.8C4 18.39 5.61 20 7.6 20h8.8a3.6 3.6 0 0 0 3.6-3.6V7.6C20 5.61 18.39 4 16.4 4H7.6m9.65 1.5a1.25 1.25 0 0 1 1.25 1.25A1.25 1.25 0 0 1 17.25 8 1.25 1.25 0 0 1 16 6.75a1.25 1.25 0 0 1 1.25-1.25M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3z"}),"Instagram"),wt}const _r=me(Ys());var Fa,St={};function qs(){if(Fa)return St;Fa=1;var r=xe();Object.defineProperty(St,"__esModule",{value:!0}),St.default=void 0,function(o){if(o&&o.__esModule)return o;if(o===null||typeof o!="object"&&typeof o!="function")return{default:o};var m=u(void 0);if(m&&m.has(o))return m.get(o);var h={__proto__:null},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in o)if(g!=="default"&&Object.prototype.hasOwnProperty.call(o,g)){var S=w?Object.getOwnPropertyDescriptor(o,g):null;S&&(S.get||S.set)?Object.defineProperty(h,g,S):h[g]=o[g]}h.default=o,m&&m.set(o,h)}(Kt());var l=r(ue()),x=pe();function u(o){if(typeof WeakMap!="function")return null;var m=new WeakMap,h=new WeakMap;return(u=function(w){return w?h:m})(o)}return St.default=(0,l.default)((0,x.jsx)("path",{d:"M10 15l5.19-3L10 9v6m11.56-7.83c.13.47.22 1.1.28 1.9.07.8.1 1.49.1 2.09L22 12c0 2.19-.16 3.8-.44 4.83-.25.9-.83 1.48-1.73 1.73-.47.13-1.33.22-2.65.28-1.3.07-2.49.1-3.59.1L12 19c-4.19 0-6.8-.16-7.83-.44-.9-.25-1.48-.83-1.73-1.73-.13-.47-.22-1.1-.28-1.9-.07-.8-.1-1.49-.1-2.09L2 12c0-2.19.16-3.8.44-4.83.25-.9.83-1.48 1.73-1.73.47-.13 1.33-.22 2.65-.28 1.3-.07 2.49-.1 3.59-.1L12 5c4.19 0 6.8.16 7.83.44.9.25 1.48.83 1.73 1.73z"}),"YouTube"),St}const Br=me(qs());var _a,kt={};function Gs(){if(_a)return kt;_a=1;var r=xe();Object.defineProperty(kt,"__esModule",{value:!0}),kt.default=void 0;var l=r(ue()),x=pe();return kt.default=(0,l.default)((0,x.jsx)("path",{d:"M7.58 4.08 6.15 2.65C3.75 4.48 2.17 7.3 2.03 10.5h2c.15-2.65 1.51-4.97 3.55-6.42m12.39 6.42h2c-.15-3.2-1.73-6.02-4.12-7.85l-1.42 1.43c2.02 1.45 3.39 3.77 3.54 6.42M18 11c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-6 11c.14 0 .27-.01.4-.04.65-.14 1.18-.58 1.44-1.18.1-.24.15-.5.15-.78h-4c.01 1.1.9 2 2.01 2"}),"NotificationsActive"),kt}const Ba=me(Gs());var Wa,Ft={};function Qs(){if(Wa)return Ft;Wa=1;var r=xe();Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.default=void 0;var l=r(ue()),x=pe();return Ft.default=(0,l.default)((0,x.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96"}),"Cloud"),Ft}const Xs=me(Qs());var Da,_t={};function eo(){if(Da)return _t;Da=1;var r=xe();Object.defineProperty(_t,"__esModule",{value:!0}),_t.default=void 0;var l=r(ue()),x=pe();return _t.default=(0,l.default)((0,x.jsx)("path",{d:"M18 6h-2c0-2.21-1.79-4-4-4S8 3.79 8 6H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m-8 4c0 .55-.45 1-1 1s-1-.45-1-1V8h2zm2-6c1.1 0 2 .9 2 2h-4c0-1.1.9-2 2-2m4 6c0 .55-.45 1-1 1s-1-.45-1-1V8h2z"}),"ShoppingBag"),_t}const za=me(eo());var Ia,Bt={};function to(){if(Ia)return Bt;Ia=1;var r=xe();Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.default=void 0;var l=r(ue()),x=pe();return Bt.default=(0,l.default)((0,x.jsx)("path",{d:"m20.71 5.63-2.34-2.34a.9959.9959 0 0 0-1.41 0l-3.12 3.12-1.93-1.91-1.41 1.41 1.42 1.42L3 16.25V21h4.75l8.92-8.92 1.42 1.42 1.41-1.41-1.92-1.92 3.12-3.12c.4-.4.4-1.03.01-1.42M6.92 19 5 17.08l8.06-8.06 1.92 1.92z"}),"Colorize"),Bt}const ro=me(to()),ao=({open:r,onClose:l,channelId:x,onDelete:u})=>{const[o,m]=i.useState(""),[h,w]=i.useState(""),[g,S]=i.useState(!1);return e.jsxs(Pe,{open:r,onClose:l,maxWidth:"sm",fullWidth:!0,children:[e.jsx(Ge,{children:"\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u043A\u0430\u043D\u0430\u043B\u0430"}),e.jsxs($e,{children:[e.jsx(n,{variant:"body1",gutterBottom:!0,children:"\u0412\u044B \u0441\u043E\u0431\u0438\u0440\u0430\u0435\u0442\u0435\u0441\u044C \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u043A\u0430\u043D\u0430\u043B. \u042D\u0442\u043E \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043D\u0435\u043B\u044C\u0437\u044F \u043E\u0442\u043C\u0435\u043D\u0438\u0442\u044C."}),e.jsx(n,{variant:"body2",color:"error",gutterBottom:!0,children:"\u0412\u0441\u0435 \u0434\u0430\u043D\u043D\u044B\u0435 \u043A\u0430\u043D\u0430\u043B\u0430 \u0431\u0443\u0434\u0443\u0442 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u044B \u0432 \u0430\u0440\u0445\u0438\u0432\u0435 \u043F\u0435\u0440\u0435\u0434 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u0435\u043C."}),e.jsxs(a,{mt:2,children:[e.jsx(n,{variant:"body2",gutterBottom:!0,children:'\u0414\u043B\u044F \u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u044F \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043B\u043E\u0432\u043E "\u041F\u041E\u0414\u0422\u0412\u0415\u0420\u0416\u0414\u0415\u041D\u0418\u0415" \u0437\u0430\u0433\u043B\u0430\u0432\u043D\u044B\u043C\u0438 \u0431\u0443\u043A\u0432\u0430\u043C\u0438:'}),e.jsx(te,{fullWidth:!0,value:o,onChange:W=>{m(W.target.value),w("")},error:!!h,helperText:h,margin:"normal"})]}),h&&e.jsx(K,{severity:"error",sx:{mt:2},children:h})]}),e.jsxs(Qe,{children:[e.jsx(v,{onClick:l,disabled:g,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),e.jsx(v,{onClick:async()=>{if(o==="\u041F\u041E\u0414\u0422\u0412\u0415\u0420\u0416\u0414\u0415\u041D\u0418\u0415"){S(!0);try{const W=await fetch(`/api/users/delete-channel/${x}`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}),X=await W.json();X.success?(u(X),l()):w(X.error||"\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u0438 \u043A\u0430\u043D\u0430\u043B\u0430")}catch{w("\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u0438 \u043A\u0430\u043D\u0430\u043B\u0430")}finally{S(!1)}}else w('\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043B\u043E\u0432\u043E "\u041F\u041E\u0414\u0422\u0412\u0415\u0420\u0416\u0414\u0415\u041D\u0418\u0415" \u0437\u0430\u0433\u043B\u0430\u0432\u043D\u044B\u043C\u0438 \u0431\u0443\u043A\u0432\u0430\u043C\u0438')},color:"error",disabled:o!=="\u041F\u041E\u0414\u0422\u0412\u0415\u0420\u0416\u0414\u0415\u041D\u0418\u0415"||g,children:g?"\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435...":"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043A\u0430\u043D\u0430\u043B"})]})]})},qt=U(r=>e.jsx(fs,{focusVisibleClassName:".Mui-focusVisible",disableRipple:!0,...r}))(({theme:r})=>({width:42,height:26,padding:0,"& .MuiSwitch-switchBase":{padding:0,margin:2,transitionDuration:"300ms","&.Mui-checked":{transform:"translateX(16px)",color:"#fff","& + .MuiSwitch-track":{backgroundColor:"#D0BCFF",opacity:1,border:0},"&.Mui-disabled + .MuiSwitch-track":{opacity:.5}},"&.Mui-focusVisible .MuiSwitch-thumb":{color:"#D0BCFF",border:"6px solid #fff"},"&.Mui-disabled .MuiSwitch-thumb":{color:r.palette.mode==="light"?r.palette.grey[100]:r.palette.grey[600]},"&.Mui-disabled + .MuiSwitch-track":{opacity:r.palette.mode==="light"?.7:.3}},"& .MuiSwitch-thumb":{boxSizing:"border-box",width:22,height:22},"& .MuiSwitch-track":{borderRadius:13,backgroundColor:r.palette.mode==="light"?"#555":"#39393D",opacity:1,transition:r.transitions.create(["background-color"],{duration:500})}})),so=U(us)(({theme:r})=>({marginTop:r.spacing(3),marginBottom:r.spacing(3),padding:0,[r.breakpoints.down("sm")]:{paddingBottom:"100px"}})),oo=U(a)(({theme:r})=>({display:"flex",alignItems:"center",marginBottom:r.spacing(4),gap:r.spacing(2)})),be=U(gr)(({theme:r})=>({marginBottom:r.spacing(3),borderRadius:r.spacing(1),boxShadow:"0 4px 20px rgba(0, 0, 0, 0.2)",overflow:"hidden",transition:"transform 0.3s ease, box-shadow 0.3s ease",backgroundImage:"unset",backgroundColor:r.palette.mode==="light"?C(r.palette.background.paper,.95):r.palette.mode==="contrast"?C("#101010",.95):C("#1c1c1c",.95),border:r.palette.mode==="light"?"1px solid rgba(0, 0, 0, 0.08)":"1px solid rgba(255, 255, 255, 0.05)","&:hover":{boxShadow:r.palette.mode==="light"?"0 8px 30px rgba(0, 0, 0, 0.15)":"0 8px 30px rgba(0, 0, 0, 0.25)"}})),ge=U(fr)(({theme:r})=>({padding:r.spacing(3)})),ae=U(n)(({theme:r})=>({display:"flex",alignItems:"center",gap:r.spacing(1),marginBottom:r.spacing(3),fontWeight:600,"& .MuiSvgIcon-root":{color:r.palette.primary.main}}));U(a)(({theme:r})=>({position:"relative",width:120,height:120,margin:"0 auto",marginBottom:r.spacing(3),"&:hover .edit-overlay":{opacity:1}})),U(a)(({theme:r})=>({position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:C(r.palette.common.black,.7),display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"50%",opacity:0,transition:"opacity 0.3s ease"})),U(a)(({theme:r})=>({position:"relative",width:"100%",height:180,marginBottom:r.spacing(4),borderRadius:2*r.shape.borderRadius,overflow:"hidden",backgroundColor:C(r.palette.background.paper,.5),"&:hover .edit-overlay":{opacity:1}})),U(a)(({theme:r})=>({position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:C(r.palette.common.black,.7),display:"flex",justifyContent:"center",alignItems:"center",opacity:0,transition:"opacity 0.3s ease"})),U(a)(({bg:r})=>({width:40,height:40,borderRadius:8,backgroundColor:r,cursor:"pointer",transition:"transform 0.2s ease",border:"1px solid rgba(255, 255, 255, 0.2)","&:hover":{transform:"scale(1.1)"}}));const io=U(ms)(({theme:r})=>({marginBottom:r.spacing(3),backgroundColor:r.palette.mode==="light"?"rgba(240, 240, 240, 0.8)":r.palette.mode==="contrast"?"rgba(10, 10, 10, 0.8)":"rgba(16, 16, 16, 0.6)",borderRadius:8,padding:"4px","& .MuiTabs-indicator":{backgroundColor:r.palette.primary.main,height:3,borderRadius:"3px 3px 0 0"},"& .MuiTab-root":{fontWeight:600,textTransform:"none",minWidth:120,"&.Mui-selected":{color:r.palette.primary.main}}})),rt=U(bs)(({theme:r})=>({"&.MuiTab-root":{fontWeight:600,fontSize:"1rem",transition:"all 0.2s ease","&:hover":{backgroundColor:C(r.palette.primary.main,.08)},"&.Mui-selected":{color:r.palette.primary.main}}})),Ma=U("input")({display:"none"}),Gt=r=>e.jsx(ut,{...r,children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1.17 14.93l-4.11-4.11 1.41-1.41 2.7 2.7 5.88-5.88 1.41 1.41-7.29 7.29z"})}),Wr=r=>e.jsxs(ut,{...r,viewBox:"0 0 6000 6000",children:[e.jsx("rect",{x:"3564.05",y:"1024",width:"1500",height:"3500",rx:"221",transform:"rotate(24.0085 3564.05 1024)",fill:"currentColor"}),e.jsx("rect",{x:"1066",y:"1901.42",width:"1500",height:"3250",rx:"221",transform:"rotate(-18.8815 1066 1901.42)",fill:"currentColor"})]}),Ta=(r,l)=>{if(l){const u=l.toLowerCase();if(u.includes("facebook.com"))return e.jsx(kr,{});if(u.includes("twitter.com"))return e.jsx(Fr,{});if(u.includes("instagram.com"))return e.jsx(_r,{});if(u.includes("t.me")||u.includes("telegram."))return e.jsx(et,{});if(u.includes("youtube.com"))return e.jsx(Br,{});if(u.includes("element.com")||u.includes("elemsocial.com"))return e.jsx(Gt,{});if(u.includes("aumbent.ru"))return e.jsx(Wr,{});if(u.includes("vk.com"))return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M15.07 2H8.93C3.33 2 2 3.33 2 8.93V15.07C2 20.67 3.33 22 8.93 22H15.07C20.67 22 22 20.67 22 15.07V8.93C22 3.33 20.67 2 15.07 2M15.54 13.5C15.24 13.41 14.95 13.33 14.7 13.21C13.3 12.58 12.64 11.3 12.34 10.55C12.23 10.26 12.16 10 12.15 9.89C12.15 9.89 12.15 9.89 12.15 9.89V9.85C12.15 9.63 12.34 9.44 12.56 9.44H13.43C13.6 9.44 13.75 9.59 13.75 9.76V9.76C13.81 9.93 13.82 9.98 13.96 10.26C14.11 10.59 14.36 11.09 14.91 11.54C15.18 11.77 15.34 11.75 15.46 11.66C15.46 11.66 15.5 11.55 15.5 11.13V10.11C15.46 9.85 15.4 9.77 15.35 9.67C15.32 9.61 15.29 9.56 15.27 9.47C15.27 9.37 15.35 9.28 15.45 9.28H17.1C17.27 9.28 17.4 9.41 17.4 9.58V10.94C17.4 11.05 17.42 11.94 18.05 11.94C18.38 11.94 18.66 11.63 19.07 11.15C19.5 10.57 19.71 10.08 19.81 9.85C19.86 9.76 19.93 9.53 20.04 9.47C20.12 9.42 20.21 9.44 20.28 9.44H21.1C21.27 9.44 21.42 9.59 21.42 9.77C21.42 9.77 21.42 9.77 21.42 9.77C21.46 9.97 21.39 10.14 21.17 10.45C20.88 10.91 20.57 11.32 20.32 11.66C19.58 12.68 19.58 12.75 20.35 13.46C20.65 13.76 20.9 14.02 21.1 14.25C21.27 14.45 21.45 14.66 21.6 14.89C21.69 15.04 21.77 15.19 21.74 15.37C21.71 15.57 21.53 15.72 21.33 15.72H20.2C19.84 15.72 19.77 15.5 19.44 15.11C19.37 15.02 19.28 14.94 19.2 14.85C18.98 14.59 18.81 14.4 18.59 14.23C18 13.71 17.57 13.77 17.33 13.77C17.13 13.79 16.98 13.95 16.98 14.15V15.07C16.98 15.35 16.95 15.5 16.71 15.62C16.66 15.62 16.57 15.67 16.53 15.67H15.54V13.5Z"})});if(u.includes("tiktok.com"))return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M16.6 5.82s.51.5 0 0A4.278 4.278 0 0 1 15.54 3h-3.09v12.4a2.592 2.592 0 0 1-2.59 2.5c-1.42 0-2.59-1.16-2.59-2.5 0-1.4 1.16-2.5 2.59-2.5.27 0 .53.04.77.13v-3.13c-.25-.02-.5-.04-.77-.04-3.09 0-5.59 2.57-5.59 5.67 0 3.1 2.5 5.67 5.59 5.67 3.09 0 5.59-2.57 5.59-5.67V9.14c.85.63 1.91 1.05 3.09 1.05V7.15c-1.32 0-2.59-.7-3.09-1.33z"})})}const x=(r||"").toLowerCase();switch(x){case"facebook":return e.jsx(kr,{});case"twitter":return e.jsx(Fr,{});case"instagram":return e.jsx(_r,{});case"telegram":return e.jsx(et,{});case"youtube":return e.jsx(Br,{});case"element":return e.jsx(Gt,{});case"aumbent":case"iq_search":return e.jsx(Wr,{});case"vk":case"\u0432\u043A\u043E\u043D\u0442\u0430\u043A\u0442\u0435":return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M15.07 2H8.93C3.33 2 2 3.33 2 8.93V15.07C2 20.67 3.33 22 8.93 22H15.07C20.67 22 22 20.67 22 15.07V8.93C22 3.33 20.67 2 15.07 2M15.54 13.5C15.24 13.41 14.95 13.33 14.7 13.21C13.3 12.58 12.64 11.3 12.34 10.55C12.23 10.26 12.16 10 12.15 9.89C12.15 9.89 12.15 9.89 12.15 9.89V9.85C12.15 9.63 12.34 9.44 12.56 9.44H13.43C13.6 9.44 13.75 9.59 13.75 9.76V9.76C13.81 9.93 13.82 9.98 13.96 10.26C14.11 10.59 14.36 11.09 14.91 11.54C15.18 11.77 15.34 11.75 15.46 11.66C15.46 11.66 15.5 11.55 15.5 11.13V10.11C15.46 9.85 15.4 9.77 15.35 9.67C15.32 9.61 15.29 9.56 15.27 9.47C15.27 9.37 15.35 9.28 15.45 9.28H17.1C17.27 9.28 17.4 9.41 17.4 9.58V10.94C17.4 11.05 17.42 11.94 18.05 11.94C18.38 11.94 18.66 11.63 19.07 11.15C19.5 10.57 19.71 10.08 19.81 9.85C19.86 9.76 19.93 9.53 20.04 9.47C20.12 9.42 20.21 9.44 20.28 9.44H21.1C21.27 9.44 21.42 9.59 21.42 9.77C21.42 9.77 21.42 9.77 21.42 9.77C21.46 9.97 21.39 10.14 21.17 10.45C20.88 10.91 20.57 11.32 20.32 11.66C19.58 12.68 19.58 12.75 20.35 13.46C20.65 13.76 20.9 14.02 21.1 14.25C21.27 14.45 21.45 14.66 21.6 14.89C21.69 15.04 21.77 15.19 21.74 15.37C21.71 15.57 21.53 15.72 21.33 15.72H20.2C19.84 15.72 19.77 15.5 19.44 15.11C19.37 15.02 19.28 14.94 19.2 14.85C18.98 14.59 18.81 14.4 18.59 14.23C18 13.71 17.57 13.77 17.33 13.77C17.13 13.79 16.98 13.95 16.98 14.15V15.07C16.98 15.35 16.95 15.5 16.71 15.62C16.66 15.62 16.57 15.67 16.53 15.67H15.54V13.5Z"})});case"tiktok":return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M16.6 5.82s.51.5 0 0A4.278 4.278 0 0 1 15.54 3h-3.09v12.4a2.592 2.592 0 0 1-2.59 2.5c-1.42 0-2.59-1.16-2.59-2.5 0-1.4 1.16-2.5 2.59-2.5.27 0 .53.04.77.13v-3.13c-.25-.02-.5-.04-.77-.04-3.09 0-5.59 2.57-5.59 5.67 0 3.1 2.5 5.67 5.59 5.67 3.09 0 5.59-2.57 5.59-5.67V9.14c.85.63 1.91 1.05 3.09 1.05V7.15c-1.32 0-2.59-.7-3.09-1.33z"})});default:return x.includes("facebook")?e.jsx(kr,{}):x.includes("twitter")?e.jsx(Fr,{}):x.includes("instagram")?e.jsx(_r,{}):x.includes("telegram")?e.jsx(et,{}):x.includes("youtube")?e.jsx(Br,{}):x.includes("element")?e.jsx(Gt,{}):x.includes("aumbent")||x.includes("iq_search")?e.jsx(Wr,{}):x.includes("vk")||x.includes("\u0432\u043A\u043E\u043D\u0442\u0430\u043A\u0442\u0435")?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M15.07 2H8.93C3.33 2 2 3.33 2 8.93V15.07C2 20.67 3.33 22 8.93 22H15.07C20.67 22 22 20.67 22 15.07V8.93C22 3.33 20.67 2 15.07 2M15.54 13.5C15.24 13.41 14.95 13.33 14.7 13.21C13.3 12.58 12.64 11.3 12.34 10.55C12.23 10.26 12.16 10 12.15 9.89C12.15 9.89 12.15 9.89 12.15 9.89V9.85C12.15 9.63 12.34 9.44 12.56 9.44H13.43C13.6 9.44 13.75 9.59 13.75 9.76V9.76C13.81 9.93 13.82 9.98 13.96 10.26C14.11 10.59 14.36 11.09 14.91 11.54C15.18 11.77 15.34 11.75 15.46 11.66C15.46 11.66 15.5 11.55 15.5 11.13V10.11C15.46 9.85 15.4 9.77 15.35 9.67C15.32 9.61 15.29 9.56 15.27 9.47C15.27 9.37 15.35 9.28 15.45 9.28H17.1C17.27 9.28 17.4 9.41 17.4 9.58V10.94C17.4 11.05 17.42 11.94 18.05 11.94C18.38 11.94 18.66 11.63 19.07 11.15C19.5 10.57 19.71 10.08 19.81 9.85C19.86 9.76 19.93 9.53 20.04 9.47C20.12 9.42 20.21 9.44 20.28 9.44H21.1C21.27 9.44 21.42 9.59 21.42 9.77C21.42 9.77 21.42 9.77 21.42 9.77C21.46 9.97 21.39 10.14 21.17 10.45C20.88 10.91 20.57 11.32 20.32 11.66C19.58 12.68 19.58 12.75 20.35 13.46C20.65 13.76 20.9 14.02 21.1 14.25C21.27 14.45 21.45 14.66 21.6 14.89C21.69 15.04 21.77 15.19 21.74 15.37C21.71 15.57 21.53 15.72 21.33 15.72H20.2C19.84 15.72 19.77 15.5 19.44 15.11C19.37 15.02 19.28 14.94 19.2 14.85C18.98 14.59 18.81 14.4 18.59 14.23C18 13.71 17.57 13.77 17.33 13.77C17.13 13.79 16.98 13.95 16.98 14.15V15.07C16.98 15.35 16.95 15.5 16.71 15.62C16.66 15.62 16.57 15.67 16.53 15.67H15.54V13.5Z"})}):x.includes("tiktok")?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M16.6 5.82s.51.5 0 0A4.278 4.278 0 0 1 15.54 3h-3.09v12.4a2.592 2.592 0 0 1-2.59 2.5c-1.42 0-2.59-1.16-2.59-2.5 0-1.4 1.16-2.5 2.59-2.5.27 0 .53.04.77.13v-3.13c-.25-.02-.5-.04-.77-.04-3.09 0-5.59 2.57-5.59 5.67 0 3.1 2.5 5.67 5.59 5.67 3.09 0 5.59-2.57 5.59-5.67V9.14c.85.63 1.91 1.05 3.09 1.05V7.15c-1.32 0-2.59-.7-3.09-1.33z"})}):e.jsx(ca,{})}};U(Pe)(({theme:r})=>({"& .MuiDialog-paper":{borderRadius:16,backgroundImage:"linear-gradient(to bottom, rgba(18, 18, 18, 0.95), rgba(22, 22, 22, 0.95))",backdropFilter:"blur(10px)",boxShadow:"0 14px 28px rgba(0,0,0,0.4), 0 10px 10px rgba(0,0,0,0.3)",border:"1px solid rgba(255, 255, 255, 0.05)",overflow:"hidden",[r.breakpoints.down("sm")]:{width:"100%",maxWidth:"100%",margin:0,borderRadius:0}}}));const no=U(a)(({theme:r})=>({position:"relative",padding:r.spacing(3),paddingBottom:r.spacing(4),textAlign:"center",borderRadius:"8px 8px 0 0",background:"linear-gradient(135deg, rgba(208, 188, 255, 0.15) 0%, rgba(124, 77, 255, 0.25) 100%)",display:"flex",flexDirection:"column",alignItems:"center",[r.breakpoints.down("sm")]:{padding:r.spacing(2),paddingBottom:r.spacing(3)}}));U(v)(({theme:r})=>({backgroundImage:"linear-gradient(135deg, rgba(100, 181, 246, 0.8) 0%, rgba(25, 118, 210, 0.9) 100%)",borderRadius:12,padding:r.spacing(1.2,3),fontWeight:600,textTransform:"none",transition:"all 0.3s ease",boxShadow:"0 4px 12px rgba(25, 118, 210, 0.2)",border:"1px solid rgba(255, 255, 255, 0.05)","&:hover":{boxShadow:"0 6px 16px rgba(25, 118, 210, 0.3)",transform:"translateY(-2px)"},"&:active":{boxShadow:"0 2px 8px rgba(25, 118, 210, 0.2)",transform:"translateY(0)"},"&.Mui-disabled":{background:"rgba(30, 30, 30, 0.5)",border:"1px solid rgba(255, 255, 255, 0.1)"}}));const lo=()=>{const r=qe(),l=Qr(r.breakpoints.down("sm")),x=jr(),{enqueueSnackbar:u}=da(),[o,m]=i.useState(""),[h,w]=i.useState(null),[g,S]=i.useState(!1),[W,X]=i.useState(!1),[I,A]=i.useState([]),[oe,_]=i.useState(""),[H,$]=i.useState(0),[T,re]=i.useState(!1),[ie,Be]=i.useState(null),[D,M]=i.useState(!1),[ne,P]=i.useState(!1),[Ce,j]=i.useState(!1),[R,O]=i.useState(!1),[V,q]=i.useState(!1),[L,fe]=i.useState(null),[je,we]=i.useState(3),[Le,Se]=i.useState({open:!1,message:"",severity:"success"}),ye=(p,f)=>{if(f||(f=p==="error"?"\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0432\u044B\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u0438 \u043E\u043F\u0435\u0440\u0430\u0446\u0438\u0438":"\u041E\u043F\u0435\u0440\u0430\u0446\u0438\u044F \u0432\u044B\u043F\u043E\u043B\u043D\u0435\u043D\u0430"),typeof f=="object"&&f!==null)if(f.message)f=f.message;else try{f=JSON.stringify(f)}catch{f="\u041D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u0430\u044F \u043E\u0448\u0438\u0431\u043A\u0430"}Se({open:!0,message:f,severity:p}),u(f,{variant:p,anchorOrigin:{vertical:"bottom",horizontal:"center"}})},We=(p,f)=>{f!=="clickaway"&&Se(E=>({...E,open:!1}))};i.useEffect(()=>{Ue(),at(),(async()=>{try{const f=await k.get("/api/user/subscription/status");if(f.data.active){fe(f.data);const E=(p=f.data.subscription_type)?p==="basic"?5:p==="premium"?8:p==="ultimate"?1/0:3:3;we(E)}else fe(null),we(3)}catch{fe(null),we(3)}var p})()},[]);const Ue=async()=>{try{const p=await k.get("/api/username/purchased");if(p.data.success){const f=p.data.usernames||[];A(f),q(f.length>=je)}else _(p.data.message||"Failed to fetch purchased usernames"),A([])}catch(p){_("Error loading purchased usernames: "+p.message),A([])}},at=async()=>{try{const p=await k.get("/api/user/points");$(p.data.points)}catch{}},st=p=>{Be(p),re(!0)},Wt=p=>p<=3?3:p<=6?2:p<=10?1.5:1,Je=p=>{if(!p)return"";const f=new Date(p);return new Intl.DateTimeFormat("ru-RU",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(f)};return i.useEffect(()=>{I.length>0&&q(L?.subscription_type!=="ultimate"&&I.length>=je)},[je,I.length,L]),e.jsxs(a,{sx:{maxWidth:"100%",mx:"auto"},children:[e.jsxs(a,{sx:{mb:{xs:2,md:4},p:{xs:1.5,md:2},bgcolor:"rgba(30, 30, 30, 0.6)",borderRadius:2},children:[e.jsx(n,{variant:"body1",sx:{mb:2},children:"\u041F\u0440\u0438\u043E\u0431\u0440\u0435\u0442\u0430\u0439\u0442\u0435 \u0443\u043D\u0438\u043A\u0430\u043B\u044C\u043D\u044B\u0435 \u044E\u0437\u0435\u0440\u043D\u0435\u0439\u043C\u044B \u0438 \u0432\u044B\u0434\u0435\u043B\u0438\u0442\u0435\u0441\u044C \u0441\u0440\u0435\u0434\u0438 \u0434\u0440\u0443\u0433\u0438\u0445 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439! \u0427\u0435\u043C \u043A\u043E\u0440\u043E\u0447\u0435 \u0438 \u043F\u043E\u043F\u0443\u043B\u044F\u0440\u043D\u0435\u0435 \u044E\u0437\u0435\u0440\u043D\u0435\u0439\u043C, \u0442\u0435\u043C \u043E\u043D \u0434\u043E\u0440\u043E\u0436\u0435."}),e.jsxs(n,{variant:"body2",sx:{color:"#D0BCFF"},children:["\u0423 \u0432\u0430\u0441 ",H," \u0431\u0430\u043B\u043B\u043E\u0432"]})]}),e.jsxs(he,{elevation:0,sx:{p:{xs:2,md:3},mb:{xs:2,md:3},bgcolor:"rgba(18, 18, 18, 0.9)",borderRadius:2,border:"1px solid rgba(208, 188, 255, 0.1)",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.2)",backdropFilter:"blur(10px)"},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(vr,{sx:{color:"#D0BCFF",mr:1.5,fontSize:"1.2rem"}}),e.jsx(n,{variant:"h6",sx:{color:"#D0BCFF",fontWeight:600,fontSize:"1.1rem"},children:"\u041F\u0440\u0430\u0432\u0438\u043B\u0430 \u043F\u043E\u043A\u0443\u043F\u043A\u0438 \u044E\u0437\u0435\u0440\u043D\u0435\u0439\u043C\u043E\u0432"})]}),e.jsxs(a,{sx:{mt:1},children:[e.jsxs(n,{variant:"body2",paragraph:!0,sx:{color:"rgba(255, 255, 255, 0.8)"},children:[L&&L.subscription_type==="ultimate"?e.jsxs("span",{children:["\u0421 \u043F\u043E\u0434\u043F\u0438\u0441\u043A\u043E\u0439 ",e.jsx("strong",{style:{color:"#D0BCFF"},children:"Ultimate"})," \u0432\u044B \u043C\u043E\u0436\u0435\u0442\u0435 \u043F\u0440\u0438\u043E\u0431\u0440\u0435\u0441\u0442\u0438 ",e.jsx("strong",{style:{color:"#4CAF50"},children:"\u043D\u0435\u043E\u0433\u0440\u0430\u043D\u0438\u0447\u0435\u043D\u043D\u043E\u0435 \u043A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E"})," \u044E\u0437\u0435\u0440\u043D\u0435\u0439\u043C\u043E\u0432."]}):e.jsxs("span",{children:["\u0412\u044B \u043C\u043E\u0436\u0435\u0442\u0435 \u043A\u0443\u043F\u0438\u0442\u044C \u0434\u043E ",e.jsxs("strong",{style:{color:"#D0BCFF"},children:[je===1/0?"\u221E":je," \u044E\u0437\u0435\u0440\u043D\u0435\u0439\u043C\u043E\u0432"]})," \u043D\u0430 \u043E\u0434\u0438\u043D \u0430\u043A\u043A\u0430\u0443\u043D\u0442",L?e.jsxs("span",{children:[" \u0441 \u0432\u0430\u0448\u0435\u0439 ",e.jsx("strong",{style:{color:"#D0BCFF"},children:L.subscription_type==="basic"?"Basic":"Premium"})," \u043F\u043E\u0434\u043F\u0438\u0441\u043A\u043E\u0439."]}):e.jsx("span",{children:"."})]}),V&&e.jsx("span",{style:{color:"#FF9800",fontWeight:"bold"},children:" \u0412\u044B \u0434\u043E\u0441\u0442\u0438\u0433\u043B\u0438 \u043B\u0438\u043C\u0438\u0442\u0430."})]}),e.jsx(ht,{sx:{my:1.5,borderColor:"rgba(208, 188, 255, 0.1)"}}),e.jsxs(B,{container:!0,spacing:2,children:[e.jsx(B,{item:!0,xs:12,md:6,children:e.jsxs(a,{sx:{p:1.5,borderRadius:2,bgcolor:"rgba(0, 0, 0, 0.2)",border:"1px solid rgba(255, 255, 255, 0.05)",height:"100%"},children:[e.jsxs(n,{variant:"subtitle2",sx:{color:"#D0BCFF",mb:1,fontWeight:600,display:"flex",alignItems:"center"},children:[e.jsx(ya,{sx:{fontSize:"0.9rem",mr:.5}}),"\u0426\u0435\u043D\u0430 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043E\u0442 \u0434\u043B\u0438\u043D\u044B:"]}),e.jsxs(a,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:[e.jsx(Y,{label:"1-3 \u0441\u0438\u043C\u0432\u043E\u043B\u0430: x3.0",size:"small",sx:{bgcolor:"rgba(208, 188, 255, 0.1)",color:"#fff",border:"1px solid rgba(208, 188, 255, 0.2)"}}),e.jsx(Y,{label:"4-6 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432: x2.0",size:"small",sx:{bgcolor:"rgba(208, 188, 255, 0.08)",color:"#fff",border:"1px solid rgba(208, 188, 255, 0.15)"}}),e.jsx(Y,{label:"7-10 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432: x1.5",size:"small",sx:{bgcolor:"rgba(208, 188, 255, 0.05)",color:"#fff",border:"1px solid rgba(208, 188, 255, 0.1)"}}),e.jsx(Y,{label:"11+ \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432: x1.0",size:"small",sx:{bgcolor:"rgba(208, 188, 255, 0.02)",color:"#fff",border:"1px solid rgba(208, 188, 255, 0.07)"}})]})]})}),e.jsx(B,{item:!0,xs:12,md:6,children:e.jsxs(a,{sx:{p:1.5,borderRadius:2,bgcolor:"rgba(0, 0, 0, 0.2)",border:"1px solid rgba(255, 255, 255, 0.05)",height:"100%"},children:[e.jsxs(n,{variant:"subtitle2",sx:{color:"#D0BCFF",mb:1,fontWeight:600,display:"flex",alignItems:"center"},children:[e.jsx(ha,{sx:{fontSize:"0.9rem",mr:.5}}),"\u041F\u043E\u043F\u0443\u043B\u044F\u0440\u043D\u043E\u0441\u0442\u044C:"]}),e.jsx(n,{variant:"body2",sx:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.85rem"},children:"\u0427\u0435\u043C \u043F\u043E\u043F\u0443\u043B\u044F\u0440\u043D\u0435\u0435 \u044E\u0437\u0435\u0440\u043D\u0435\u0439\u043C, \u0442\u0435\u043C \u0432\u044B\u0448\u0435 \u0435\u0433\u043E \u0441\u0442\u043E\u0438\u043C\u043E\u0441\u0442\u044C. \u041F\u043E\u043F\u0443\u043B\u044F\u0440\u043D\u043E\u0441\u0442\u044C \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043E\u0442 \u0447\u0430\u0441\u0442\u043E\u0442\u044B \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u044F \u043F\u043E\u0434\u043E\u0431\u043D\u044B\u0445 \u044E\u0437\u0435\u0440\u043D\u0435\u0439\u043C\u043E\u0432."})]})})]}),V&&e.jsx(K,{severity:"warning",sx:{mt:2,borderRadius:2,backgroundColor:"rgba(237, 108, 2, 0.1)",border:"1px solid rgba(237, 108, 2, 0.2)","& .MuiAlert-icon":{color:"#FF9800"}},children:L?L.subscription_type!=="ultimate"?e.jsx("span",{children:"\u0414\u043B\u044F \u0441\u043D\u044F\u0442\u0438\u044F \u043E\u0433\u0440\u0430\u043D\u0438\u0447\u0435\u043D\u0438\u0439 \u043F\u0435\u0440\u0435\u0439\u0434\u0438\u0442\u0435 \u043D\u0430 \u043F\u043E\u0434\u043F\u0438\u0441\u043A\u0443 Ultimate \u0438\u043B\u0438 \u043E\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044C \u0432 \u043F\u043E\u0434\u0434\u0435\u0440\u0436\u043A\u0443 t.me/KConnectSUP_bot"}):e.jsx("span",{children:"\u0414\u043B\u044F \u0440\u0435\u0448\u0435\u043D\u0438\u044F \u0432\u043E\u043F\u0440\u043E\u0441\u0430 \u043E\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044C \u0432 \u043F\u043E\u0434\u0434\u0435\u0440\u0436\u043A\u0443 t.me/KConnectSUP_bot"}):e.jsx("span",{children:"\u0414\u043B\u044F \u0443\u0432\u0435\u043B\u0438\u0447\u0435\u043D\u0438\u044F \u043B\u0438\u043C\u0438\u0442\u0430 \u043F\u0440\u0438\u043E\u0431\u0440\u0435\u0442\u0438\u0442\u0435 \u043F\u043E\u0434\u043F\u0438\u0441\u043A\u0443 \u0438\u043B\u0438 \u043E\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044C \u0432 \u043F\u043E\u0434\u0434\u0435\u0440\u0436\u043A\u0443 t.me/KConnectSUP_bot"})}),!L&&e.jsx(K,{severity:"info",icon:e.jsx(xa,{fontSize:"inherit"}),sx:{mt:2,borderRadius:2,backgroundColor:"rgba(41, 182, 246, 0.1)",border:"1px solid rgba(41, 182, 246, 0.2)","& .MuiAlert-icon":{color:"#29B6F6"}},children:e.jsxs(a,{sx:{display:"flex",flexDirection:"column"},children:[e.jsx(n,{variant:"subtitle2",sx:{mb:1,fontWeight:600},children:"\u0423\u0432\u0435\u043B\u0438\u0447\u044C\u0442\u0435 \u043B\u0438\u043C\u0438\u0442 \u044E\u0437\u0435\u0440\u043D\u0435\u0439\u043C\u043E\u0432 \u0441 \u043F\u043E\u0434\u043F\u0438\u0441\u043A\u043E\u0439:"}),e.jsxs(a,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:1.5},children:[e.jsx(Y,{label:"Basic: 5 \u044E\u0437\u0435\u0440\u043D\u0435\u0439\u043C\u043E\u0432",size:"small",color:"primary",variant:"outlined"}),e.jsx(Y,{label:"Premium: 8 \u044E\u0437\u0435\u0440\u043D\u0435\u0439\u043C\u043E\u0432",size:"small",color:"primary",variant:"outlined"}),e.jsx(Y,{label:"Ultimate: \u0431\u0435\u0437 \u043E\u0433\u0440\u0430\u043D\u0438\u0447\u0435\u043D\u0438\u0439",size:"small",color:"primary",variant:"outlined"})]}),e.jsx(v,{variant:"outlined",size:"small",color:"primary",onClick:()=>x("/balance"),startIcon:e.jsx(bt,{fontSize:"small"}),sx:{alignSelf:"flex-start",borderRadius:2,textTransform:"none"},children:"\u041A\u0443\u043F\u0438\u0442\u044C \u043F\u043E\u0434\u043F\u0438\u0441\u043A\u0443"})]})})]})]}),e.jsxs(he,{elevation:0,sx:{p:{xs:2,md:3},mb:{xs:2,md:3},bgcolor:"rgba(18, 18, 18, 0.9)",borderRadius:2,border:"1px solid rgba(208, 188, 255, 0.1)",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.2)",backdropFilter:"blur(10px)",opacity:V?.7:1,position:"relative"},children:[V&&L?.subscription_type!=="ultimate"&&e.jsx(a,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.85)",backdropFilter:"blur(4px)",zIndex:1,borderRadius:2},children:e.jsxs(a,{sx:{textAlign:"center",p:3,maxWidth:"80%"},children:[e.jsx(na,{sx:{fontSize:48,color:"#FF9800",mb:2}}),e.jsx(n,{variant:"h6",sx:{color:"#FF9800",mb:1.5,fontWeight:600},children:"\u0414\u043E\u0441\u0442\u0438\u0433\u043D\u0443\u0442 \u043B\u0438\u043C\u0438\u0442 \u044E\u0437\u0435\u0440\u043D\u0435\u0439\u043C\u043E\u0432"}),e.jsx(n,{variant:"body2",sx:{mb:2,color:"rgba(255, 255, 255, 0.8)"},children:L?L.subscription_type==="basic"?e.jsxs(e.Fragment,{children:["\u0412\u044B \u0443\u0436\u0435 \u043F\u0440\u0438\u043E\u0431\u0440\u0435\u043B\u0438 \u043C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u043E\u0435 \u043A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u044E\u0437\u0435\u0440\u043D\u0435\u0439\u043C\u043E\u0432 (",je,"). \u041F\u0435\u0440\u0435\u0439\u0434\u0438\u0442\u0435 \u043D\u0430 Premium (8) \u0438\u043B\u0438 Ultimate (\u0431\u0435\u0437 \u043E\u0433\u0440\u0430\u043D\u0438\u0447\u0435\u043D\u0438\u0439)."]}):e.jsxs(e.Fragment,{children:["\u0412\u044B \u0443\u0436\u0435 \u043F\u0440\u0438\u043E\u0431\u0440\u0435\u043B\u0438 \u043C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u043E\u0435 \u043A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u044E\u0437\u0435\u0440\u043D\u0435\u0439\u043C\u043E\u0432 (",je,"). \u041F\u0435\u0440\u0435\u0439\u0434\u0438\u0442\u0435 \u043D\u0430 Ultimate \u0434\u043B\u044F \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u044F \u0431\u0435\u0437\u043B\u0438\u043C\u0438\u0442\u043D\u043E\u0433\u043E \u0434\u043E\u0441\u0442\u0443\u043F\u0430."]}):e.jsxs(e.Fragment,{children:["\u0412\u044B \u0443\u0436\u0435 \u043F\u0440\u0438\u043E\u0431\u0440\u0435\u043B\u0438 \u043C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u043E\u0435 \u043A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u044E\u0437\u0435\u0440\u043D\u0435\u0439\u043C\u043E\u0432 (",je,"). \u041F\u0440\u0438\u043E\u0431\u0440\u0435\u0442\u0438\u0442\u0435 \u043F\u043E\u0434\u043F\u0438\u0441\u043A\u0443 \u0434\u043B\u044F \u0443\u0432\u0435\u043B\u0438\u0447\u0435\u043D\u0438\u044F \u043B\u0438\u043C\u0438\u0442\u0430."]})}),e.jsxs(a,{sx:{display:"flex",justifyContent:"center",gap:1.5},children:[(!L||L.subscription_type!=="ultimate")&&e.jsx(v,{variant:"contained",color:"primary",onClick:()=>x("/balance"),startIcon:e.jsx(bt,{}),sx:{borderRadius:2,textTransform:"none"},children:"\u041A\u0443\u043F\u0438\u0442\u044C \u043F\u043E\u0434\u043F\u0438\u0441\u043A\u0443"}),e.jsx(v,{variant:"outlined",color:"primary",href:"https://t.me/KConnectSUP_bot",target:"_blank",startIcon:e.jsx(_s,{}),sx:{borderRadius:2,textTransform:"none"},children:"\u041F\u043E\u0434\u0434\u0435\u0440\u0436\u043A\u0430"})]})]})}),e.jsxs(a,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(aa,{sx:{color:"#D0BCFF",mr:1.5,fontSize:"1.2rem"}}),e.jsx(n,{variant:"h6",sx:{color:"#D0BCFF",fontWeight:600,fontSize:"1.1rem"},children:"\u041D\u0430\u0439\u0442\u0438 \u0438 \u043F\u0440\u0438\u043E\u0431\u0440\u0435\u0441\u0442\u0438 \u044E\u0437\u0435\u0440\u043D\u0435\u0439\u043C"})]}),e.jsx(n,{variant:"body2",sx:{mb:2,color:"rgba(255,255,255,0.7)",fontSize:"0.85rem"},children:"\u042E\u0437\u0435\u0440\u043D\u0435\u0439\u043C \u0434\u043E\u043B\u0436\u0435\u043D \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u0445\u043E\u0442\u044F \u0431\u044B \u043E\u0434\u043D\u0443 \u0431\u0443\u043A\u0432\u0443 \u0438 \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0441\u043E\u0441\u0442\u043E\u044F\u0442\u044C \u0442\u043E\u043B\u044C\u043A\u043E \u0438\u0437 \u0446\u0438\u0444\u0440 \u0438\u043B\u0438 \u0441\u043F\u0435\u0446\u0438\u0430\u043B\u044C\u043D\u044B\u0445 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432. \u0414\u043B\u0438\u043D\u0430 \u043E\u0442 3 \u0434\u043E 16 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432. \u0411\u043E\u043B\u0435\u0435 \u043A\u043E\u0440\u043E\u0442\u043A\u0438\u0435 \u044E\u0437\u0435\u0440\u043D\u0435\u0439\u043C\u044B \u0441\u0442\u043E\u044F\u0442 \u0434\u043E\u0440\u043E\u0436\u0435."}),e.jsx(te,{fullWidth:!0,label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0436\u0435\u043B\u0430\u0435\u043C\u044B\u0439 \u044E\u0437\u0435\u0440\u043D\u0435\u0439\u043C",variant:"outlined",value:o,onChange:p=>{const f=p.target.value.trim();if(m(f),!f)return w(null),void _("");if(f.length<3)return _("\u042E\u0437\u0435\u0440\u043D\u0435\u0439\u043C \u0434\u043E\u043B\u0436\u0435\u043D \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u043D\u0435 \u043C\u0435\u043D\u0435\u0435 3 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432"),void w(null);if(f.length>16)return _("\u042E\u0437\u0435\u0440\u043D\u0435\u0439\u043C \u043D\u0435 \u0434\u043E\u043B\u0436\u0435\u043D \u043F\u0440\u0435\u0432\u044B\u0448\u0430\u0442\u044C 16 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432"),void w(null);if(!/[a-zA-Z]/.test(f))return _("\u042E\u0437\u0435\u0440\u043D\u0435\u0439\u043C \u0434\u043E\u043B\u0436\u0435\u043D \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u0445\u043E\u0442\u044F \u0431\u044B \u043E\u0434\u043D\u0443 \u0431\u0443\u043A\u0432\u0443"),void w(null);_("");const E=setTimeout(()=>{(async De=>{try{S(!0),_("");const ee=await k.post("/api/username/calculate-price",{username:De});ee.data.success?w(ee.data):(_(ee.data.message||"Error calculating price"),w(null))}catch(ee){_("Error calculating price: "+(ee.response?.data?.message||ee.message)),w(null)}finally{S(!1)}})(f)},500);return()=>clearTimeout(E)},sx:{mb:2,"& .MuiOutlinedInput-root":{borderRadius:2,"& fieldset":{borderColor:"rgba(208, 188, 255, 0.5)",borderWidth:"1px"},"&:hover fieldset":{borderColor:"#D0BCFF"},"&.Mui-focused fieldset":{borderColor:"#D0BCFF",borderWidth:"1px"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)"},"& .MuiInputLabel-root.Mui-focused":{color:"#D0BCFF"},"& .MuiFormHelperText-root":{fontSize:"0.75rem",marginTop:"4px",marginLeft:"4px"}},helperText:"\u0414\u043E\u043B\u0436\u0435\u043D \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u0445\u043E\u0442\u044F \u0431\u044B \u043E\u0434\u043D\u0443 \u0431\u0443\u043A\u0432\u0443. \u041E\u0442 3 \u0434\u043E 16 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432. \u0414\u043E\u043F\u0443\u0441\u0442\u0438\u043C\u044B \u0442\u043E\u043B\u044C\u043A\u043E \u043B\u0430\u0442\u0438\u043D\u0441\u043A\u0438\u0435 \u0431\u0443\u043A\u0432\u044B, \u0446\u0438\u0444\u0440\u044B, \u0442\u043E\u0447\u043A\u0438, \u043F\u043E\u0434\u0447\u0435\u0440\u043A\u0438\u0432\u0430\u043D\u0438\u044F \u0438 \u0434\u0435\u0444\u0438\u0441\u044B.",error:!!oe,InputProps:{endAdornment:o&&e.jsx(pt,{position:"end",children:e.jsx(Q,{edge:"end",onClick:()=>m(""),size:"small",children:e.jsx(Fs,{fontSize:"small"})})})}}),oe&&e.jsx(K,{severity:"error",sx:{mb:2,borderRadius:2},children:oe}),g&&e.jsx(a,{sx:{display:"flex",justifyContent:"center",my:2},children:e.jsx(Z,{size:24,sx:{color:"#D0BCFF"}})}),h&&h.available&&!h.owned&&e.jsxs(a,{sx:{mt:2,p:{xs:2,md:2.5},bgcolor:"rgba(30, 30, 30, 0.7)",borderRadius:2,border:"1px solid rgba(208, 188, 255, 0.15)",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.15)"},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",mb:1.5},children:[e.jsx(la,{sx:{color:"#81C784",mr:1,fontSize:"1.2rem"}}),e.jsx(n,{variant:"subtitle1",sx:{color:"#81C784",fontWeight:600},children:"\u042E\u0437\u0435\u0440\u043D\u0435\u0439\u043C \u0434\u043E\u0441\u0442\u0443\u043F\u0435\u043D!"})]}),e.jsxs(a,{sx:{display:"flex",flexWrap:"wrap",gap:1.5,mb:2},children:[e.jsx(Y,{icon:e.jsx(ya,{}),label:`\u0414\u043B\u0438\u043D\u0430: ${h?.length||0} \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432 (x${Wt(h?.length||0)})`,size:"small",sx:{bgcolor:"rgba(208, 188, 255, 0.1)",color:"white",border:"1px solid rgba(208, 188, 255, 0.15)",fontWeight:500,"& .MuiChip-icon":{color:"rgba(255, 255, 255, 0.8)"}}}),e.jsx(Y,{icon:e.jsx(ha,{}),label:`\u041F\u043E\u043F\u0443\u043B\u044F\u0440\u043D\u043E\u0441\u0442\u044C: x${h?.popularity?.toFixed(1)||"1.0"}`,size:"small",sx:{bgcolor:"rgba(208, 188, 255, 0.1)",color:"white",border:"1px solid rgba(208, 188, 255, 0.15)",fontWeight:500,"& .MuiChip-icon":{color:"rgba(255, 255, 255, 0.8)"}}})]}),e.jsx(ht,{sx:{borderColor:"rgba(255, 255, 255, 0.05)",my:1.5}}),e.jsxs(a,{sx:{display:"flex",flexDirection:l?"column":"row",alignItems:l?"stretch":"center",justifyContent:"space-between",mt:1.5,gap:l?1.5:0},children:[e.jsxs(a,{children:[e.jsx(n,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.6)"},children:"\u0421\u0442\u043E\u0438\u043C\u043E\u0441\u0442\u044C:"}),e.jsxs(n,{variant:"h6",sx:{fontWeight:"bold",color:"#D0BCFF",fontSize:"1.25rem",letterSpacing:"0.5px",display:"flex",alignItems:"center"},children:[e.jsx(xa,{sx:{fontSize:"1.2rem",mr:.5}}),h?.price||0," \u0431\u0430\u043B\u043B\u043E\u0432"]})]}),e.jsx(v,{variant:"contained",color:"primary",disabled:W||H<(h?.price||0),onClick:()=>{!(o&&h&&h.available)||h.owned||H<h.price||P(!0)},startIcon:W?e.jsx(Z,{size:20,color:"inherit"}):e.jsx(bt,{}),sx:{bgcolor:"#D0BCFF",color:"#1A1A1A",fontWeight:600,width:l?"100%":"auto",borderRadius:2,px:3,py:1,textTransform:"none",boxShadow:"0 4px 10px rgba(208, 188, 255, 0.3)","&:hover":{bgcolor:"#B39DDB",boxShadow:"0 6px 15px rgba(208, 188, 255, 0.4)"}},children:W?"\u041F\u043E\u043A\u0443\u043F\u043A\u0430...":"\u041A\u0443\u043F\u0438\u0442\u044C"})]}),H<(h?.price||0)&&e.jsxs(K,{severity:"warning",icon:e.jsx(ks,{fontSize:"inherit"}),sx:{mt:2,borderRadius:2,backgroundColor:"rgba(237, 108, 2, 0.1)",border:"1px solid rgba(237, 108, 2, 0.2)","& .MuiAlert-icon":{color:"#FF9800"}},children:["\u0423 \u0432\u0430\u0441 \u043D\u0435\u0434\u043E\u0441\u0442\u0430\u0442\u043E\u0447\u043D\u043E \u0431\u0430\u043B\u043B\u043E\u0432 \u0434\u043B\u044F \u043F\u043E\u043A\u0443\u043F\u043A\u0438 \u044D\u0442\u043E\u0433\u043E \u044E\u0437\u0435\u0440\u043D\u0435\u0439\u043C\u0430.",e.jsx(v,{size:"small",sx:{ml:1,textTransform:"none",fontSize:"0.75rem"},onClick:()=>x("/balance"),children:"\u041F\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u044C \u0431\u0430\u043B\u0430\u043D\u0441"})]})]}),h&&!h.available&&e.jsx(K,{severity:"warning",sx:{mt:2,borderRadius:2,backgroundColor:"rgba(237, 108, 2, 0.1)",border:"1px solid rgba(237, 108, 2, 0.2)"},children:"\u042E\u0437\u0435\u0440\u043D\u0435\u0439\u043C \u0443\u0436\u0435 \u0437\u0430\u043D\u044F\u0442"}),h&&h.owned&&e.jsx(K,{severity:"info",sx:{mt:2,borderRadius:2,backgroundColor:"rgba(41, 182, 246, 0.1)",border:"1px solid rgba(41, 182, 246, 0.2)"},children:"\u0412\u044B \u0443\u0436\u0435 \u0432\u043B\u0430\u0434\u0435\u0435\u0442\u0435 \u044D\u0442\u0438\u043C \u044E\u0437\u0435\u0440\u043D\u0435\u0439\u043C\u043E\u043C"})]}),e.jsxs(he,{elevation:0,sx:{p:{xs:2,md:3},mb:{xs:2,md:4},bgcolor:"rgba(18, 18, 18, 0.9)",borderRadius:2,border:"1px solid rgba(208, 188, 255, 0.1)",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.2)",backdropFilter:"blur(10px)"},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(pa,{sx:{color:"#D0BCFF",mr:1.5,fontSize:"1.2rem"}}),e.jsx(n,{variant:"h6",sx:{color:"#D0BCFF",fontWeight:600,fontSize:"1.1rem"},children:"\u041C\u043E\u0438 \u044E\u0437\u0435\u0440\u043D\u0435\u0439\u043C\u044B"})]}),I&&I.length>0?e.jsxs(e.Fragment,{children:[e.jsx(a,{sx:{display:{xs:"none",md:"block"}},children:e.jsx(Xr,{sx:{mt:1,borderRadius:2,border:"1px solid rgba(255, 255, 255, 0.05)",backgroundColor:"transparent"},children:e.jsxs(ea,{size:"medium",children:[e.jsx(ta,{children:e.jsxs(Jt,{sx:{backgroundColor:"rgba(208, 188, 255, 0.05)"},children:[e.jsx(J,{sx:{color:"#D0BCFF",fontWeight:600,borderBottom:"1px solid rgba(255, 255, 255, 0.05)"},children:"\u042E\u0437\u0435\u0440\u043D\u0435\u0439\u043C"}),e.jsx(J,{sx:{color:"#D0BCFF",fontWeight:600,borderBottom:"1px solid rgba(255, 255, 255, 0.05)"},children:"\u0426\u0435\u043D\u0430"}),e.jsx(J,{sx:{color:"#D0BCFF",fontWeight:600,borderBottom:"1px solid rgba(255, 255, 255, 0.05)"},children:"\u0414\u0430\u0442\u0430 \u043F\u043E\u043A\u0443\u043F\u043A\u0438"}),e.jsx(J,{sx:{color:"#D0BCFF",fontWeight:600,borderBottom:"1px solid rgba(255, 255, 255, 0.05)"},children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),e.jsx(J,{sx:{color:"#D0BCFF",fontWeight:600,borderBottom:"1px solid rgba(255, 255, 255, 0.05)"},children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044F"})]})}),e.jsx(ra,{children:I.map(p=>e.jsxs(Jt,{sx:{bgcolor:p.is_active?"rgba(208, 188, 255, 0.05)":"transparent","&:hover":{bgcolor:"rgba(208, 188, 255, 0.03)"},borderBottom:"1px solid rgba(255, 255, 255, 0.03)"},children:[e.jsx(J,{sx:{fontWeight:p.is_active?"bold":"normal",color:p.is_active?"#D0BCFF":"inherit",maxWidth:"120px",wordBreak:"break-word",overflowWrap:"break-word",borderBottom:"none"},children:p.username}),e.jsxs(J,{sx:{borderBottom:"none"},children:[p.price_paid," \u0431\u0430\u043B\u043B\u043E\u0432"]}),e.jsx(J,{sx:{borderBottom:"none"},children:Je(p.purchase_date)}),e.jsx(J,{sx:{borderBottom:"none"},children:p.is_active?e.jsx(Y,{label:"\u0410\u043A\u0442\u0438\u0432\u0435\u043D",color:"success",size:"small",sx:{bgcolor:"rgba(76, 175, 80, 0.15)",color:"#81C784",border:"1px solid rgba(76, 175, 80, 0.3)",fontWeight:500}}):p.is_current?e.jsx(Y,{label:"\u0422\u0435\u043A\u0443\u0449\u0438\u0439",color:"warning",size:"small",sx:{bgcolor:"rgba(255, 152, 0, 0.15)",color:"#FFB74D",border:"1px solid rgba(255, 152, 0, 0.3)",fontWeight:500}}):null}),e.jsx(J,{sx:{borderBottom:"none"},children:!p.is_active&&e.jsx(v,{variant:"outlined",size:"small",onClick:()=>st(p),sx:{borderColor:"#D0BCFF",color:"#D0BCFF",borderRadius:2,textTransform:"none",fontSize:"0.8125rem","&:hover":{borderColor:"#D0BCFF",color:"#D0BCFF",bgcolor:"rgba(208, 188, 255, 0.05)"}},children:"\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C"})})]},p.id))})]})})}),e.jsx(a,{sx:{display:{xs:"flex",md:"none"},flexDirection:"column",gap:2,mt:2},children:I.map(p=>e.jsxs(he,{elevation:0,sx:{p:2,borderRadius:2,border:"1px solid "+(p.is_active?"rgba(208, 188, 255, 0.2)":"rgba(255, 255, 255, 0.05)"),backgroundColor:p.is_active?"rgba(208, 188, 255, 0.05)":"rgba(16, 16, 16, 0.5)"},children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1.5},children:[e.jsx(n,{variant:"subtitle1",sx:{fontWeight:p.is_active?600:500,color:p.is_active?"#D0BCFF":"white",wordBreak:"break-word"},children:p.username}),(p.is_active||p.is_current)&&e.jsx(Y,{label:p.is_active?"\u0410\u043A\u0442\u0438\u0432\u0435\u043D":"\u0422\u0435\u043A\u0443\u0449\u0438\u0439",color:p.is_active?"success":"warning",size:"small",sx:{bgcolor:p.is_active?"rgba(76, 175, 80, 0.15)":"rgba(255, 152, 0, 0.15)",color:p.is_active?"#81C784":"#FFB74D",border:p.is_active?"1px solid rgba(76, 175, 80, 0.3)":"1px solid rgba(255, 152, 0, 0.3)",fontWeight:500,height:24}})]}),e.jsxs(B,{container:!0,spacing:1,sx:{mb:1.5},children:[e.jsxs(B,{item:!0,xs:6,children:[e.jsx(n,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.5)"},children:"\u0426\u0435\u043D\u0430:"}),e.jsxs(n,{variant:"body2",children:[p.price_paid," \u0431\u0430\u043B\u043B\u043E\u0432"]})]}),e.jsxs(B,{item:!0,xs:6,children:[e.jsx(n,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.5)"},children:"\u0414\u0430\u0442\u0430 \u043F\u043E\u043A\u0443\u043F\u043A\u0438:"}),e.jsx(n,{variant:"body2",children:Je(p.purchase_date)})]})]}),!p.is_active&&e.jsx(v,{variant:"outlined",size:"small",fullWidth:!0,onClick:()=>st(p),sx:{borderColor:"#D0BCFF",color:"#D0BCFF",borderRadius:2,textTransform:"none",mt:1,"&:hover":{borderColor:"#D0BCFF",color:"#D0BCFF",bgcolor:"rgba(208, 188, 255, 0.05)"}},children:"\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C"})]},p.id))})]}):e.jsxs(a,{sx:{p:4,textAlign:"center",color:"text.secondary",bgcolor:"rgba(0, 0, 0, 0.2)",borderRadius:2,border:"1px solid rgba(255, 255, 255, 0.05)"},children:[e.jsx(pa,{sx:{fontSize:40,color:"rgba(208, 188, 255, 0.3)",mb:1}}),e.jsx(n,{variant:"subtitle1",sx:{color:"rgba(255, 255, 255, 0.7)",mb:1},children:"\u0423 \u0432\u0430\u0441 \u043F\u043E\u043A\u0430 \u043D\u0435\u0442 \u043F\u0440\u0438\u043E\u0431\u0440\u0435\u0442\u0435\u043D\u043D\u044B\u0445 \u044E\u0437\u0435\u0440\u043D\u0435\u0439\u043C\u043E\u0432"}),e.jsx(n,{variant:"body2",sx:{color:"rgba(255, 255, 255, 0.5)",mb:2},children:"\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u0444\u043E\u0440\u043C\u0443 \u0432\u044B\u0448\u0435, \u0447\u0442\u043E\u0431\u044B \u043D\u0430\u0439\u0442\u0438 \u0438 \u043F\u0440\u0438\u043E\u0431\u0440\u0435\u0441\u0442\u0438 \u0443\u043D\u0438\u043A\u0430\u043B\u044C\u043D\u044B\u0439 \u044E\u0437\u0435\u0440\u043D\u0435\u0439\u043C"})]})]}),e.jsxs(Pe,{open:T,onClose:()=>re(!1),PaperProps:{style:{backgroundColor:"#1e1e1e",color:"#fff",borderRadius:"8px"}},maxWidth:"xs",fullWidth:!0,children:[e.jsx(Ge,{sx:{color:"#D0BCFF",p:l?2:3},children:"\u0421\u043C\u0435\u043D\u0438\u0442\u044C \u044E\u0437\u0435\u0440\u043D\u0435\u0439\u043C"}),e.jsx($e,{sx:{p:l?2:3},children:e.jsxs(js,{sx:{color:"#eeeeee"},children:["\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0438\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u0441\u0432\u043E\u0439 \u044E\u0437\u0435\u0440\u043D\u0435\u0439\u043C \u043D\u0430 ",e.jsx("strong",{style:{color:"#D0BCFF",wordBreak:"break-word",overflowWrap:"break-word"},children:ie?.username}),"?",e.jsx("br",{}),e.jsx("br",{}),"\u042D\u0442\u043E\u0442 \u044E\u0437\u0435\u0440\u043D\u0435\u0439\u043C \u0431\u0443\u0434\u0435\u0442 \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0430\u0442\u044C\u0441\u044F \u0432 \u0432\u0430\u0448\u0435\u043C \u043F\u0440\u043E\u0444\u0438\u043B\u0435 \u0438 \u0432\u0441\u0435\u0445 \u0432\u0430\u0448\u0438\u0445 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044F\u0445 \u043D\u0430 \u043F\u043B\u0430\u0442\u0444\u043E\u0440\u043C\u0435."]})}),e.jsxs(Qe,{sx:{p:l?2:3,pt:0},children:[e.jsx(v,{onClick:()=>re(!1),sx:{color:"#D0BCFF"},disabled:D,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),e.jsx(v,{onClick:async()=>{if(ie){M(!0);try{const p=await k.post("/api/username/set-active",{username_id:ie.id});if(p.data.success){const f=localStorage.getItem("userData");if(f)try{const E=JSON.parse(f);E.username=p.data.username,localStorage.setItem("userData",JSON.stringify(E))}catch{}ye("success",p.data.message||"Username changed successfully!"),Ue()}else _(p.data.message||"Failed to change username"),ye("error",p.data.message||"Failed to change username")}catch(p){_("Error changing username: "+(p.response?.data?.message||p.message)),ye("error","Error changing username: "+(p.response?.data?.message||p.message))}finally{M(!1),re(!1)}}},variant:"contained",disabled:D,startIcon:D?e.jsx(Z,{size:20,color:"inherit"}):null,sx:{bgcolor:"#D0BCFF",color:"#1A1A1A","&:hover":{bgcolor:"#B39DDB"}},children:D?"\u041F\u0440\u0438\u043C\u0435\u043D\u0435\u043D\u0438\u0435...":"\u041F\u0440\u0438\u043C\u0435\u043D\u0438\u0442\u044C"})]})]}),e.jsxs(Pe,{open:ne,onClose:()=>!Ce&&P(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:3,backgroundImage:"linear-gradient(135deg, rgba(18, 18, 18, 0.95) 0%, rgba(20, 20, 20, 0.9) 100%)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.05)"}},children:[e.jsxs(no,{children:[e.jsx(_e,{sx:{width:l?60:70,height:l?60:70,bgcolor:"rgba(208, 188, 255, 0.15)",mb:2,border:"2px solid rgba(208, 188, 255, 0.2)"},children:e.jsx(bt,{sx:{fontSize:l?30:40,color:"#d0bcff"}})}),e.jsx(n,{variant:"h5",sx:{color:"white",fontWeight:700,mb:1,fontSize:l?"1.2rem":"1.5rem"},children:"\u041F\u043E\u043A\u0443\u043F\u043A\u0430 \u044E\u0437\u0435\u0440\u043D\u0435\u0439\u043C\u0430"}),e.jsxs(n,{variant:"body2",sx:{color:"rgba(255,255,255,0.7)",maxWidth:"80%"},children:["\u0412\u044B \u0441\u043E\u0431\u0438\u0440\u0430\u0435\u0442\u0435\u0441\u044C \u043F\u0440\u0438\u043E\u0431\u0440\u0435\u0441\u0442\u0438 \u044E\u0437\u0435\u0440\u043D\u0435\u0439\u043C ",e.jsx("strong",{children:o})]})]}),e.jsx($e,{sx:{p:l?2:3,mt:l?1:2},children:Ce?e.jsx(a,{sx:{display:"flex",flexDirection:"column",alignItems:"center",py:l?2:3},children:R?e.jsxs(a,{sx:{textAlign:"center"},children:[e.jsx(la,{sx:{fontSize:l?50:70,color:"#4CAF50",mb:2}}),e.jsx(n,{variant:"h6",sx:{color:"#4CAF50",fontWeight:"bold"},children:"\u041F\u043E\u043A\u0443\u043F\u043A\u0430 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0430!"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Z,{size:l?50:70,sx:{mb:3,color:"#D0BCFF"}}),e.jsx(n,{variant:"h6",sx:{mb:1},children:"\u041E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430 \u043F\u043E\u043A\u0443\u043F\u043A\u0438..."}),e.jsx(n,{variant:"body2",color:"textSecondary",children:"\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u043F\u043E\u0434\u043E\u0436\u0434\u0438\u0442\u0435"})]})}):e.jsx(e.Fragment,{children:e.jsx(a,{sx:{mb:l?2:3},children:e.jsx(B,{container:!0,spacing:l?1:2,children:e.jsx(B,{item:!0,xs:12,children:e.jsxs(a,{sx:{p:l?1.5:2,borderRadius:2,bgcolor:"rgba(30, 30, 30, 0.6)",border:"1px solid rgba(208, 188, 255, 0.2)",boxShadow:"0 2px 10px rgba(0,0,0,0.15)"},children:[e.jsx(n,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:"\u0414\u0435\u0442\u0430\u043B\u0438 \u043F\u043E\u043A\u0443\u043F\u043A\u0438:"}),e.jsxs(n,{variant:"body1",sx:{fontWeight:"bold",mb:1},children:["\u042E\u0437\u0435\u0440\u043D\u0435\u0439\u043C: ",e.jsx("span",{style:{color:"#D0BCFF",wordBreak:"break-word",overflowWrap:"break-word"},children:o})]}),e.jsxs(n,{variant:"body1",sx:{mb:1},children:["\u0414\u043B\u0438\u043D\u0430: ",h?.length||0," \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432 (x",Wt(h?.length||0),")"]}),e.jsxs(n,{variant:"body1",sx:{mb:1},children:["\u041F\u043E\u043F\u0443\u043B\u044F\u0440\u043D\u043E\u0441\u0442\u044C: x",h?.popularity?.toFixed(1)||"1.0"]}),e.jsx(ht,{sx:{my:1.5,bgcolor:"rgba(208, 188, 255, 0.1)"}}),e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",mt:1},children:[e.jsx(n,{variant:"body1",children:"\u0411\u0430\u043B\u0430\u043D\u0441:"}),e.jsxs(n,{variant:"body1",children:[H," \u0431\u0430\u043B\u043B\u043E\u0432"]})]}),e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",mt:1},children:[e.jsx(n,{variant:"body1",children:"\u0421\u0442\u043E\u0438\u043C\u043E\u0441\u0442\u044C:"}),e.jsxs(n,{variant:"body1",color:"error",children:["-",h?.price||0," \u0431\u0430\u043B\u043B\u043E\u0432"]})]}),e.jsx(ht,{sx:{my:1.5,bgcolor:"rgba(208, 188, 255, 0.1)"}}),e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",mt:1},children:[e.jsx(n,{variant:"body1",fontWeight:"bold",children:"\u041E\u0441\u0442\u0430\u043D\u0435\u0442\u0441\u044F:"}),e.jsxs(n,{variant:"body1",fontWeight:"bold",children:[H-(h?.price||0)," \u0431\u0430\u043B\u043B\u043E\u0432"]})]})]})})})})})}),!Ce&&e.jsxs(a,{sx:{p:l?2:3,display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(208, 188, 255, 0.1)"},children:[e.jsx(v,{onClick:()=>P(!1),sx:{borderRadius:2,color:"rgba(255,255,255,0.7)","&:hover":{bgcolor:"rgba(255,255,255,0.05)"}},children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),e.jsx(v,{onClick:async()=>{if(o&&h&&h.available&&!h.owned)try{X(!0),j(!0),_(""),await new Promise(f=>setTimeout(f,1500));const p=await k.post("/api/username/purchase",{username:o,subscription_type:L?.subscription_type||null});if(p.data.success){const f=localStorage.getItem("userData");if(f)try{const E=JSON.parse(f);E.points=p.data.new_balance,localStorage.setItem("userData",JSON.stringify(E))}catch{}$(p.data.new_balance),O(!0),setTimeout(()=>{P(!1),j(!1),O(!1),ye("success",p.data.message||"Username purchased successfully!"),m(""),w(null),Ue()},1e3)}else _(p.data.message||"Failed to purchase username"),ye("error",p.data.message||"Failed to purchase username"),P(!1),j(!1)}catch(p){const f=p.response?.data||{},E=f.message||p.message;if(f.limit_reached)q(!0),ye("warning",E),f.donation_url&&window.open(f.donation_url,"_blank");else{const De=E.includes("PurchasedUsername")?"Server error: Problem creating purchased username entry. Please try again later.":"Error purchasing username: "+E;_(De),ye("error",De)}P(!1),j(!1)}finally{X(!1),at()}},disabled:W,startIcon:e.jsx(bt,{}),variant:"contained",sx:{bgcolor:"#D0BCFF",color:"#1A1A1A",backgroundImage:"linear-gradient(135deg, #D0BCFF 0%, #7C4DFF 100%)","&:hover":{backgroundImage:"linear-gradient(135deg, #B39DDB 0%, #673AB7 100%)"}},children:"\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044C \u043F\u043E\u043A\u0443\u043F\u043A\u0443"})]})]}),e.jsx(Ht,{open:Le.open,autoHideDuration:6e3,onClose:We,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:e.jsx(K,{onClose:We,severity:Le.severity,variant:"filled",sx:{width:"100%",bgcolor:p=>p==="success"?"rgba(46, 125, 50, 0.9)":p==="error"?"rgba(211, 47, 47, 0.9)":p==="warning"?"rgba(237, 108, 2, 0.9)":"rgba(2, 136, 209, 0.9)",backdropFilter:"blur(4px)"},children:Le.message})})]})},co=U("img")(({customStyles:r})=>({position:"absolute",right:0,height:"max-content",maxHeight:60,opacity:1,pointerEvents:"none",zIndex:1,...r})),xo=({decoration:r,children:l})=>{r?.background?.includes("linear-gradient");const x=r?.background?.includes("/");return r?.background?.startsWith("#"),e.jsx(a,{sx:{position:"relative",width:"100%",height:60,borderRadius:1,overflow:"hidden",bgcolor:"background.default",background:r?.background?x?"none":r.background:"background.default","&::before":x?{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,backgroundImage:`url(${r.background})`,backgroundSize:"cover",backgroundPosition:"center",opacity:.75,zIndex:0}:{},display:"flex",alignItems:"center",justifyContent:"center"},children:l})},po=()=>{const r=qe(),l=jr(),x=Qr(r.breakpoints.down("sm")),{user:u,updateUserData:o}=i.useContext(sa),{themeSettings:m,updateThemeSettings:h}=i.useContext(yr),{enqueueSnackbar:w}=da(),[g,S]=i.useState([]),[W,X]=i.useState(!1),I=u?.account_type==="channel",[A,oe]=i.useState(0),[_,H]=i.useState(!0),[$,T]=i.useState(!1),[re,ie]=i.useState(!1),[Be,D]=i.useState(null),[M,ne]=i.useState(!1),[P,Ce]=i.useState("good"),[j,R]=i.useState([]),[O,V]=i.useState(!1),[q,L]=i.useState(!1),[fe,je]=i.useState(null),[we,Le]=i.useState(""),[Se,ye]=i.useState(""),[We,Ue]=i.useState(""),[at,st]=i.useState(null),[Wt,Je]=i.useState(""),[p,f]=i.useState(null),[E,De]=i.useState(""),[ee,Qt]=i.useState([]),[Dt,Pa]=i.useState([]),[Ra,Xt]=i.useState(!1),[er,Ke]=i.useState(!1),[ve,zt]=i.useState(!1),[Aa,It]=i.useState(!1),[uo,tr]=i.useState(""),[rr,ar]=i.useState(!1),[Oa,ot]=i.useState(!1),[ze,Dr]=i.useState(""),[Mt,zr]=i.useState(""),[Ir,Mr]=i.useState({background_color:"#131313",container_color:"#1c1c1c",welcome_bubble_color:"#131313",avatar_border_color:"#D0BCFF",button_primary_color:"#ffffff00",button_primary_border_color:"#ffffff00",button_edit_color:"#ffffff00",button_edit_border_color:"#ff9800",info_bubble_color:"#242526",info_bubble_border_color:"#cccccc",popup_alert_color:"rgba(0, 0, 0, 0.8)",header_color:"#1c1c1c",bottom_nav_color:"#1c1c1c",content_color:"#1c1c1c"}),[sr,Tr]=i.useState({open:!1,message:"",severity:"success"}),[G,or]=i.useState({pushNotificationsEnabled:!0,telegramNotificationsEnabled:!1,telegramConnected:!1}),[mo,ir]=i.useState(!1),[Ea,Tt]=i.useState(!1),[bo,Na]=i.useState(!1),[go,nr]=i.useState(!1),[$a,Va]=i.useState(!1),[Pr,Ha]=i.useState("default"),[lr,Re]=i.useState(!1),[La,ke]=i.useState(!1),[Ua,it]=i.useState(!1),[nt,Rr]=i.useState(""),[Ar,Pt]=i.useState(""),[cr,lt]=i.useState(!1),[Ie,Or]=i.useState(null),[Ja,Ka]=i.useState([]),[Za,dr]=i.useState(!1),[xr,Er]=i.useState(!1),[Ya,Nr]=i.useState(!1),[qa,$r]=i.useState(!1);i.useEffect(()=>{ct(),Rt(),Jr(),Vr();const t=s=>{s.key==="elem_connected"&&s.newValue==="true"&&(hr(),localStorage.removeItem("elem_connected"))};return window.addEventListener("storage",t),()=>{window.removeEventListener("storage",t)}},[]);const Vr=async()=>{X(!0);try{const t=await fetch("/api/decorations/current");if(!t.ok)throw new Error("Failed to fetch decorations");const s=await t.json();s.success&&S(s.decorations)}catch{}finally{X(!1)}};i.useEffect(()=>{const t=()=>{hr()};return window.addEventListener("focus",t),()=>{window.removeEventListener("focus",t)}},[]);const ct=async()=>{try{H(!0);const t=await mt.getProfile(u.username);t&&t.user&&(Le(t.user.name||""),ye(t.user.username||""),Ue(t.user.about||""),Je(t.user.avatar_url||""),De(t.user.banner_url||""),Qt(t.socials||[]),Or(t),Er(t.user.profile_id===2),t.user.element_connected!==void 0?zt(t.user.element_connected):zt(!!t.user.elem_id));const s=await mt.getSettings();s&&s.success&&s.settings&&Mr(s.settings),H(!1)}catch{b("error","\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0434\u0430\u043D\u043D\u044B\u0435 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F"),H(!1)}},Rt=async()=>{try{Xt(!0);const t=await k.get("/api/profile/achievements");t.data&&t.data.achievements&&Pa(t.data.achievements),Xt(!1)}catch{Xt(!1)}},pr=async()=>{try{dr(!0);const t=await k.get("/api/badges/purchases");t.data&&t.data.purchases&&Ka(t.data.purchases),dr(!1)}catch{dr(!1)}};i.useEffect(()=>{u&&(Rt(),pr())},[u]);const Hr=async t=>{try{Ke(!0);const s=await k.post("/api/profile/achievements/active",{achievement_id:t});s.data&&s.data.success&&(Rt(),pr(),b("success","\u0410\u043A\u0442\u0438\u0432\u043D\u044B\u0439 \u0431\u0435\u0439\u0434\u0436 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D")),Ke(!1)}catch{b("error","\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u0430\u043A\u0442\u0438\u0432\u043D\u044B\u0439 \u0431\u0435\u0439\u0434\u0436"),Ke(!1)}};i.useEffect(()=>{u&&((()=>{const t="serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window;Na(t),nr(!1),t&&window.PushNotifications&&window.PushNotifications.checkSubscription().then(s=>{nr(s)}).catch(s=>{nr(!1)})})(),(async()=>{try{ir(!0);const t=await k.get("/api/notifications/preferences");if(t.data){const s=t.data.push_notifications_enabled,c=t.data.telegram_notifications_enabled,d=t.data.telegram_connected;or({pushNotificationsEnabled:s,telegramNotificationsEnabled:c,telegramConnected:d})}ir(!1)}catch{ir(!1)}})())},[u]),i.useEffect(()=>{u&&(async()=>{try{const t=await He.isPushNotificationSupported();if(Va(t),t){const s=await He.getNotificationPermissionStatus();Ha(s),window.setupCaching&&window.setupCaching;let c=!1;if("serviceWorker"in navigator)try{const d=(await navigator.serviceWorker.getRegistrations()).find(F=>F.active&&F.active.scriptURL&&F.active.scriptURL.includes("service-worker.js"));if(c=!!d,d){const F=await d.pushManager.getSubscription();Re(!!F)}else Re(!1)}catch{Re(!1)}else Re(!1)}}catch{}})()},[u]);const Lr=(t,s)=>{oe(s)},Ze=t=>{if(!I)return t;switch(t){case 0:return 0;case 1:return 1;case 2:return 3;default:return t}},b=(t,s)=>{if(s||(s=t==="error"?"\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0432\u044B\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u0438 \u043E\u043F\u0435\u0440\u0430\u0446\u0438\u0438":"\u041E\u043F\u0435\u0440\u0430\u0446\u0438\u044F \u0432\u044B\u043F\u043E\u043B\u043D\u0435\u043D\u0430"),typeof s=="object"&&s!==null)if(s.message)s=s.message;else try{s=JSON.stringify(s)}catch{s="\u041D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u0430\u044F \u043E\u0448\u0438\u0431\u043A\u0430"}Tr({open:!0,message:s,severity:t}),w(s,{variant:t,anchorOrigin:{vertical:"bottom",horizontal:"center"}})},Ur=(t,s)=>{s!=="clickaway"&&Tr(c=>({...c,open:!1}))},hr=async()=>{try{if(!rr&&ve!==null)return ve;ar(!0);const t=await k.get("/api/profile/element/status"),s=t.data&&t.data.connected;return zt(!!s),ar(!1),s}catch{return zt(!1),ar(!1),!1}},Jr=async()=>{try{L(!0);const t=await k.get("/api/user/warnings");t.data.success&&(R(t.data.warnings||[]),Ce(t.data.account_status||"good"),je(t.data.ban_info))}catch{}finally{L(!1)}},ur=t=>{if(!t)return"\u041D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u043E";try{return new Date(t).toLocaleString("ru-RU",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return t}},Ga=({profileData:t,subscription:s,onStatusUpdate:c})=>{const d=qe(),[F,le]=i.useState(""),[z,dt]=i.useState("#D0BCFF"),[At,Ae]=i.useState(!1),[Qa,xt]=i.useState(""),[mr,Kr]=i.useState(!1),[br,Zr]=i.useState(!1),[Ot,Yr]=i.useState(!1),[Xa,es]=i.useState(!1),[ce,qr]=i.useState(null),[ts,Et]=i.useState(!1),{user:rs}=i.useContext(sa),Nt=rs?.account_type==="channel",$t=[{name:"cloud",component:e.jsx(Xs,{sx:{fontSize:24}})},{name:"minion",component:e.jsx(ut,{sx:{fontSize:24},children:e.jsxs("svg",{width:"800",height:"800",viewBox:"0 0 800 800",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M402.667 518C367.33 518 332.786 507.523 303.405 487.89C274.023 468.257 251.123 440.353 237.6 407.707C224.077 375.06 220.539 339.137 227.433 304.478C234.327 269.82 251.343 237.984 276.33 212.997C301.317 188.01 333.153 170.994 367.81 164.1C402.47 157.206 438.393 160.744 471.04 174.267C503.687 187.79 531.59 210.69 551.223 240.072C570.853 269.453 581.333 303.997 581.333 339.333C581.333 362.797 576.713 386.03 567.733 407.707C558.753 429.383 545.593 449.08 529.003 465.67C512.413 482.26 492.717 495.42 471.04 504.4C449.363 513.38 426.13 518 402.667 518ZM402.667 210.667C377.22 210.667 352.343 218.213 331.183 232.351C310.024 246.489 293.533 266.584 283.794 290.095C274.056 313.606 271.508 339.477 276.472 364.437C281.437 389.393 293.691 412.32 311.686 430.313C329.68 448.31 352.607 460.563 377.567 465.527C402.523 470.493 428.393 467.943 451.907 458.207C475.417 448.467 495.51 431.977 509.65 410.817C523.787 389.657 531.333 364.78 531.333 339.333C531.333 305.209 517.777 272.482 493.647 248.353C469.517 224.223 436.79 210.667 402.667 210.667Z",fill:"currentColor"}),e.jsx("path",{d:"M400 643.667C376.53 643.72 353.28 639.123 331.597 630.14C309.913 621.157 290.224 607.97 273.667 591.333C269.251 586.593 266.847 580.327 266.961 573.85C267.075 567.373 269.699 561.193 274.28 556.613C278.86 552.033 285.04 549.407 291.516 549.293C297.993 549.18 304.261 551.583 309 556C333.693 579.057 366.216 591.88 400 591.88C433.783 591.88 466.31 579.057 491 556C495.74 551.583 502.006 549.18 508.483 549.293C514.96 549.407 521.14 552.033 525.72 556.613C530.303 561.193 532.926 567.373 533.04 573.85C533.153 580.327 530.75 586.593 526.333 591.333C509.776 607.97 490.086 621.157 468.403 630.14C446.72 639.123 423.47 643.72 400 643.667Z",fill:"currentColor"}),e.jsx("path",{d:"M402.667 400C436.173 400 463.333 372.837 463.333 339.333C463.333 305.828 436.173 278.666 402.667 278.666C369.163 278.666 342 305.828 342 339.333C342 372.837 369.163 400 402.667 400Z",fill:"currentColor"}),e.jsx("path",{d:"M666.666 755.333C660.036 755.333 653.676 752.7 648.99 748.01C644.3 743.323 641.666 736.963 641.666 730.333V333.333C637.156 272.944 609.983 216.492 565.596 175.297C521.21 134.102 462.89 111.209 402.333 111.209C341.776 111.209 283.457 134.102 239.07 175.297C194.684 216.492 167.511 272.944 163 333.333V730.333C163 736.963 160.366 743.323 155.678 748.01C150.989 752.7 144.631 755.333 138 755.333C131.37 755.333 125.011 752.7 120.322 748.01C115.634 743.323 113 736.963 113 730.333V333.333C115.55 258.166 147.202 186.929 201.278 134.656C255.354 82.3832 327.623 53.1636 402.833 53.1636C478.043 53.1636 550.313 82.3832 604.39 134.656C658.466 186.929 690.116 258.166 692.666 333.333V730.333C692.623 733.69 691.913 737.003 690.58 740.08C689.246 743.16 687.313 745.943 684.893 748.27C682.476 750.597 679.62 752.417 676.49 753.63C673.36 754.843 670.023 755.423 666.666 755.333Z",fill:"currentColor"}),e.jsx("path",{d:"M666.666 755.333H138C131.37 755.333 125.011 752.7 120.322 748.01C115.634 743.323 113 736.963 113 730.333C113 723.703 115.634 717.343 120.322 712.657C125.011 707.967 131.37 705.333 138 705.333H666.666C673.296 705.333 679.656 707.967 684.343 712.657C689.033 717.343 691.666 723.703 691.666 730.333C691.666 736.963 689.033 743.323 684.343 748.01C679.656 752.7 673.296 755.333 666.666 755.333Z",fill:"currentColor"})]})})},{name:"heart",component:e.jsx(ut,{sx:{fontSize:24},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12,21.35l-1.45-1.32C5.4,15.36,2,12.28,2,8.5C2,5.42,4.42,3,7.5,3c1.74,0,3.41,0.81,4.5,2.09C13.09,3.81,14.76,3,16.5,3 C19.58,3,22,5.42,22,8.5c0,3.78-3.4,6.86-8.55,11.54L12,21.35z"})})})},{name:"star",component:e.jsx(ut,{sx:{fontSize:24},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12,17.27L18.18,21l-1.64-7.03L22,9.24l-7.19-0.61L12,2L9.19,8.63L2,9.24l5.46,4.73L5.82,21L12,17.27z"})})})},{name:"music",component:e.jsx(Rs,{sx:{fontSize:24}})},{name:"location",component:e.jsx(As,{sx:{fontSize:24}})},{name:"cake",component:e.jsx(Os,{sx:{fontSize:24}})},{name:"chat",component:e.jsx(wr,{sx:{fontSize:24}})},{name:"info",component:e.jsx(vr,{sx:{fontSize:24}})}];i.useEffect(()=>{if(t){if(Nt&&t.user&&t.user.main_account_id){const se=s&&(s.type==="premium"||s.type==="ultimate"||s.type==="pick-me")&&s.active||t.main_account_subscription&&(t.main_account_subscription.type==="premium"||t.main_account_subscription.type==="ultimate"||t.main_account_subscription.type==="pick-me")&&t.main_account_subscription.active;Zr(se);const de=s&&s.type==="ultimate"&&s.active||t.main_account_subscription&&t.main_account_subscription.type==="ultimate"&&t.main_account_subscription.active;Yr(de)}else Zr(s&&(s.type==="premium"||s.type==="ultimate"||s.type==="pick-me")&&s.active),Yr(s&&s.type==="ultimate"&&s.active);const y=t.user?.status_text||t.status_text;if(y){const se=as(y);le(se.text),qr(se.iconName)}const N=t.user?.status_color||t.status_color;N&&dt(N),es(!0)}},[t,s,Nt]);const as=y=>{const N=/\{(\w+)\}/,se=y.match(N),de={text:y,iconName:null};return se&&(de.iconName=se[1].toLowerCase(),de.text=y.replace(N,"").trim()),de},Vt=y=>{y&&y.trim()!==""?dt(y):dt("#D0BCFF")},Gr=()=>ce?`{${ce}} ${F}`:F,ss=()=>{const y=(de=>{let Fe=parseInt(de.substr(1,2),16),Me=parseInt(de.substr(3,2),16),Ye=parseInt(de.substr(5,2),16);return(299*Fe+587*Me+114*Ye)/1e3<128?(Fe=Math.min(255,Fe+30),Me=Math.min(255,Me+30),Ye=Math.min(255,Ye+30)):(Fe=Math.max(0,Fe-30),Me=Math.max(0,Me-30),Ye=Math.max(0,Ye-30)),`#${Fe.toString(16).padStart(2,"0")}${Me.toString(16).padStart(2,"0")}${Ye.toString(16).padStart(2,"0")}`})(z||"#D0BCFF"),N=(se=z||"#D0BCFF",(299*parseInt(se.substr(1,2),16)+587*parseInt(se.substr(3,2),16)+114*parseInt(se.substr(5,2),16))/1e3>128?"#000000":"#FFFFFF");var se;return e.jsxs(a,{sx:{display:"flex",alignItems:"center",background:C(d.palette.background.paper,.5),borderRadius:2,padding:2,marginBottom:2,position:"relative"},children:[e.jsx(_e,{sx:{width:50,height:50,marginRight:3},children:e.jsx(ma,{})}),F||ce?e.jsx(a,{sx:{position:"relative",ml:1},children:e.jsx(a,{sx:{position:"relative",filter:"drop-shadow(0 4px 8px rgba(0,0,0,0.2))","&:before":{content:'""',position:"absolute",top:"40%",left:-14,width:0,height:0,borderStyle:"solid",borderWidth:"0 14px 14px 0",borderColor:`transparent ${z||"#D0BCFF"} transparent transparent`,transform:"rotate(40deg)",filter:"drop-shadow(-3px 2px 2px rgba(0,0,0,0.1))",zIndex:0}},children:e.jsxs(a,{sx:{background:`linear-gradient(135deg, ${z||"#D0BCFF"} 0%, ${y} 100%)`,color:N,padding:"8px 12px",borderRadius:"18px",fontSize:"14px",fontWeight:500,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",boxShadow:`inset 0 0 10px rgba(255,255,255,0.15), 
                             0 1px 1px rgba(0,0,0,0.1),
                             0 4px 10px rgba(0,0,0,0.15)`,backdropFilter:"blur(4px)",border:"1px solid "+(z==="#ffffff"?"rgba(0,0,0,0.1)":"rgba(255,255,255,0.2)"),display:"flex",alignItems:"center",gap:"6px",maxWidth:"200px"},children:[ce?(de=>{const Fe=$t.find(Me=>Me.name===de);return Fe?Fe.component:$t[0].component})(ce):e.jsx(wr,{sx:{fontSize:16,opacity:.7}}),F]})})}):e.jsx(n,{variant:"body2",color:"text.secondary",children:"\u0417\u0434\u0435\u0441\u044C \u0431\u0443\u0434\u0435\u0442 \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0430\u0442\u044C\u0441\u044F \u0432\u0430\u0448 \u0441\u0442\u0430\u0442\u0443\u0441"})]})};return e.jsxs(a,{sx:{mt:4},children:[e.jsxs(ae,{variant:"h6",children:[e.jsx(wr,{}),"\u0421\u0442\u0430\u0442\u0443\u0441 \u043F\u0440\u043E\u0444\u0438\u043B\u044F",!br&&e.jsx(Y,{label:"Premium",size:"small",color:"secondary",sx:{ml:1}})]}),Xa?e.jsx(e.Fragment,{children:br?e.jsxs(e.Fragment,{children:[e.jsx(ss,{}),e.jsxs(a,{sx:{mb:3},children:[e.jsx(n,{variant:"subtitle2",gutterBottom:!0,children:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u043A\u043E\u043D\u043A\u0443 \u0434\u043B\u044F \u0441\u0442\u0430\u0442\u0443\u0441\u0430"}),e.jsx(a,{sx:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(60px, 1fr))",gap:1,mt:1},children:$t.map(y=>e.jsx(Q,{onClick:()=>{return N=y.name,void qr(N===ce?null:N);var N},sx:{borderRadius:2,padding:1,bgcolor:ce===y.name?C(d.palette.primary.main,.2):"transparent",color:ce===y.name?d.palette.primary.main:"inherit",border:ce===y.name?`1px solid ${d.palette.primary.main}`:"1px solid rgba(255,255,255,0.1)","&:hover":{bgcolor:C(d.palette.primary.main,.1)}},children:y.component},y.name))})]}),e.jsx(te,{label:"\u0422\u0435\u043A\u0441\u0442 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",value:F,onChange:y=>{const N=y.target.value;N.length<=50&&(le(N),Ae(!1),xt(""))},fullWidth:!0,variant:"outlined",margin:"normal",helperText:`${F.length}/50 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432`,error:At,FormHelperTextProps:{sx:{display:"flex",justifyContent:"space-between"}},InputProps:{startAdornment:ce&&e.jsx(pt,{position:"start",children:$t.find(y=>y.name===ce)?.component})},sx:{mb:2}}),At&&e.jsx(n,{color:"error",variant:"body2",sx:{mb:2},children:Qa}),e.jsx(n,{variant:"subtitle2",sx:{mt:2,mb:1},children:"\u0426\u0432\u0435\u0442 \u0441\u0442\u0430\u0442\u0443\u0441\u0430"}),e.jsxs(a,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:2,mt:1,alignItems:"center"},children:[["#D0BCFF","#90CAF9","#A5D6A7","#FFCC80","#EF9A9A","#CE93D8","#FFF59D","#B0BEC5","#F48FB1","#81D4FA"].map(y=>e.jsx(a,{onClick:()=>Vt(y),sx:{width:36,height:36,borderRadius:"50%",bgcolor:y,cursor:"pointer",transition:"all 0.2s ease",transform:z===y?"scale(1.2)":"scale(1)",border:z===y?"2px solid white":"2px solid transparent",boxShadow:z===y?`0 0 0 2px ${d.palette.primary.main}, 0 0 10px rgba(0,0,0,0.2)`:"none","&:hover":{transform:"scale(1.1)",boxShadow:"0 0 10px rgba(0,0,0,0.2)"}}},y)),Ot&&e.jsx(v,{variant:"outlined",onClick:()=>Et(!0),startIcon:e.jsx(ro,{}),sx:{ml:1,borderColor:C(d.palette.primary.main,.5),"&:hover":{borderColor:d.palette.primary.main,bgcolor:C(d.palette.primary.main,.08)}},children:"\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0446\u0432\u0435\u0442 \u0441 \u043F\u0430\u043B\u0438\u0442\u0440\u044B"})]}),Ot&&e.jsxs(Pe,{open:ts,onClose:()=>Et(!1),maxWidth:"sm",PaperProps:{sx:{bgcolor:d.palette.background.paper,color:d.palette.text.primary,borderRadius:2,boxShadow:d.shadows[24],"@media (max-width: 600px)":{width:"100%",maxWidth:"100%",margin:0,borderRadius:0}}},children:[e.jsxs(Ge,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:`1px solid ${C(d.palette.divider,.1)}`,pb:2},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ca,{fontSize:"small",color:"primary"}),e.jsx(n,{variant:"h6",children:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043B\u044E\u0431\u043E\u0439 \u0446\u0432\u0435\u0442"}),e.jsx(Y,{label:"Ultimate",size:"small",color:"secondary"})]}),e.jsx(Q,{size:"small",onClick:()=>Et(!1),color:"inherit",children:e.jsx(gt,{fontSize:"small"})})]}),e.jsxs($e,{sx:{pt:3},children:[e.jsx(a,{sx:{height:100,width:"100%",backgroundColor:z,borderRadius:2,mb:3,boxShadow:`0 4px 20px ${C(z,.5)}`,border:`1px solid ${C(d.palette.divider,.1)}`}}),e.jsx("input",{type:"color",value:z,onChange:y=>Vt(y.target.value),style:{width:"100%",height:60,border:"none",borderRadius:8,cursor:"pointer",background:"none"}}),e.jsx(te,{label:"HEX \u043A\u043E\u0434",value:z,onChange:y=>{const N=y.target.value;(N===""||/^#([0-9A-F]{3}){1,2}$/i.test(N))&&Vt(N||"#D0BCFF")},fullWidth:!0,margin:"normal",placeholder:"#RRGGBB",InputProps:{startAdornment:e.jsx(pt,{position:"start",children:e.jsx(a,{sx:{height:16,width:16,backgroundColor:z,borderRadius:1}})})}}),e.jsx(n,{variant:"subtitle2",sx:{mt:3,mb:1},children:"\u041F\u0440\u0435\u0434\u0443\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u043D\u044B\u0435 \u0446\u0432\u0435\u0442\u0430"}),e.jsx(a,{sx:{display:"flex",flexWrap:"wrap",gap:1,mt:1},children:["#000000","#FFFFFF","#F44336","#E91E63","#9C27B0","#673AB7","#3F51B5","#2196F3","#03A9F4","#00BCD4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722"].map(y=>e.jsx(a,{onClick:()=>Vt(y),sx:{height:32,width:32,backgroundColor:y,borderRadius:1,cursor:"pointer",border:"1px solid rgba(255, 255, 255, 0.2)",transform:z===y?"scale(1.1)":"scale(1)",transition:"all 0.2s ease","&:hover":{transform:"scale(1.1)",boxShadow:"0 0 10px rgba(0,0,0,0.2)"}}},y))})]}),e.jsx(Qe,{sx:{p:2,pt:1},children:e.jsx(v,{onClick:()=>Et(!1),color:"primary",variant:"contained",children:"\u0412\u044B\u0431\u0440\u0430\u0442\u044C"})})]}),e.jsx(a,{sx:{mt:1,mb:2,p:2,borderRadius:2,bgcolor:C(d.palette.primary.main,.1),border:"1px solid",borderColor:Ot?d.palette.primary.main:C(d.palette.primary.main,.2)},children:e.jsxs(n,{variant:"body2",sx:{display:"flex",alignItems:"center",color:d.palette.primary.light},children:[e.jsx(vr,{fontSize:"small",sx:{mr:1}}),Ot?"\u0421 \u043F\u043E\u0434\u043F\u0438\u0441\u043A\u043E\u0439 Ultimate \u0432\u044B \u043C\u043E\u0436\u0435\u0442\u0435 \u0432\u044B\u0431\u0440\u0430\u0442\u044C \u043B\u044E\u0431\u043E\u0439 \u0446\u0432\u0435\u0442 \u0434\u043B\u044F \u0432\u0430\u0448\u0435\u0433\u043E \u043F\u0440\u043E\u0444\u0438\u043B\u044F!":"\u041E\u0444\u043E\u0440\u043C\u0438\u0442\u0435 \u043F\u043E\u0434\u043F\u0438\u0441\u043A\u0443 Ultimate, \u0447\u0442\u043E\u0431\u044B \u0432\u044B\u0431\u0440\u0430\u0442\u044C \u043B\u044E\u0431\u043E\u0439 \u0446\u0432\u0435\u0442 \u0434\u043B\u044F \u0432\u0430\u0448\u0435\u0433\u043E \u043F\u0440\u043E\u0444\u0438\u043B\u044F!"]})}),e.jsx(a,{sx:{display:"flex",justifyContent:"flex-end",gap:2},children:e.jsx(v,{variant:"contained",color:"primary",onClick:async()=>{if(!br)return Ae(!0),void xt(Nt?"\u0414\u043B\u044F \u0443\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u043D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E, \u0447\u0442\u043E\u0431\u044B \u043E\u0441\u043D\u043E\u0432\u043D\u043E\u0439 \u0430\u043A\u043A\u0430\u0443\u043D\u0442 \u0438\u043C\u0435\u043B \u043F\u043E\u0434\u043F\u0438\u0441\u043A\u0443 Premium, Ultimate \u0438\u043B\u0438 Pick-me!":"\u0414\u043B\u044F \u0443\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u043D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u0430 \u043F\u043E\u0434\u043F\u0438\u0441\u043A\u0430 Premium, Ultimate \u0438\u043B\u0438 Pick-me!");Kr(!0);try{const y=await fetch("/api/profile/v2update-profilestatus",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({status_text:Gr(),status_color:z,is_channel:Nt})}),N=await y.json();y.ok?(Ae(!1),xt(""),b("success","\u0421\u0442\u0430\u0442\u0443\u0441 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D"),c&&c({status_text:Gr(),status_color:z})):(Ae(!0),xt(N.error||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0438 \u0441\u0442\u0430\u0442\u0443\u0441\u0430"),b("error","\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0438 \u0441\u0442\u0430\u0442\u0443\u0441\u0430"))}catch{Ae(!0),xt("\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0435\u0434\u0438\u043D\u0435\u043D\u0438\u044F. \u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u043F\u043E\u0437\u0436\u0435."),b("error","\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0435\u0434\u0438\u043D\u0435\u043D\u0438\u044F. \u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u043F\u043E\u0437\u0436\u0435.")}finally{Kr(!1)}},disabled:mr,startIcon:mr?e.jsx(Z,{size:20}):e.jsx(tt,{}),fullWidth:!0,sx:{mt:1,width:"auto"},children:mr?"\u0421\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0435...":"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0441\u0442\u0430\u0442\u0443\u0441"})})]}):e.jsxs(K,{severity:"info",variant:"filled",sx:{mb:2,display:"flex",alignItems:"center","& .MuiAlert-icon":{fontSize:"1.5rem"}},children:[e.jsx(gs,{children:"\u0424\u0443\u043D\u043A\u0446\u0438\u044F \u0434\u043E\u0441\u0442\u0443\u043F\u043D\u0430 \u0442\u043E\u043B\u044C\u043A\u043E \u0434\u043B\u044F Premium-\u043F\u043E\u0434\u043F\u0438\u0441\u043A\u0438"}),"\u0421\u0442\u0430\u0442\u0443\u0441 \u043F\u0440\u043E\u0444\u0438\u043B\u044F \u0434\u043E\u0441\u0442\u0443\u043F\u0435\u043D \u0442\u043E\u043B\u044C\u043A\u043E \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F\u043C \u0441 \u043F\u043E\u0434\u043F\u0438\u0441\u043A\u0430\u043C\u0438 ",e.jsx("strong",{children:"Premium"}),", ",e.jsx("strong",{children:"Ultimate"})," \u0438\u043B\u0438 ",e.jsx("strong",{children:"Pick-me"}),". \u041E\u0444\u043E\u0440\u043C\u0438\u0442\u0435 \u043F\u043E\u0434\u043F\u0438\u0441\u043A\u0443, \u0447\u0442\u043E\u0431\u044B \u0443\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C \u0441\u0432\u043E\u0439 \u0443\u043D\u0438\u043A\u0430\u043B\u044C\u043D\u044B\u0439 \u0441\u0442\u0430\u0442\u0443\u0441 \u0438 \u0432\u044B\u0434\u0435\u043B\u0438\u0442\u044C\u0441\u044F \u0441\u0440\u0435\u0434\u0438 \u0434\u0440\u0443\u0433\u0438\u0445 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439."]})}):e.jsx(Z,{})]})};return _?e.jsx(a,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:e.jsx(Z,{})}):e.jsx(Ve.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0},transition:{duration:.3},children:e.jsxs(so,{maxWidth:"lg",children:[e.jsxs(oo,{children:[e.jsx(Q,{onClick:()=>l(-1),children:e.jsx(zs,{})}),e.jsx(n,{variant:"h4",fontWeight:600,children:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u043F\u0440\u043E\u0444\u0438\u043B\u044F"})]}),e.jsxs(io,{value:A,onChange:Lr,variant:x?"scrollable":"standard",scrollButtons:"auto",allowScrollButtonsMobile:!0,centered:!x,sx:{display:{xs:"none",md:"flex"},"& .MuiTabs-scroller":{overflowX:"auto","&::-webkit-scrollbar":{display:"none"},scrollbarWidth:"none"}},children:[e.jsx(rt,{icon:e.jsx(Ds,{}),label:"\u041F\u0440\u043E\u0444\u0438\u043B\u044C"}),e.jsx(rt,{icon:e.jsx(Sr,{}),label:"\u041E\u0444\u043E\u0440\u043C\u043B\u0435\u043D\u0438\u0435"}),!I&&e.jsx(rt,{icon:e.jsx(oa,{}),label:"\u0423\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u044F"}),e.jsx(rt,{icon:e.jsx(ia,{}),label:"\u0411\u0435\u0439\u0434\u0436\u0438"}),!I&&e.jsx(rt,{icon:e.jsx(Cr,{}),label:"\u042E\u0437\u0435\u0440\u043D\u0435\u0439\u043C\u044B"}),!I&&e.jsx(rt,{icon:e.jsx(na,{}),label:"\u0412\u0445\u043E\u0434 \u043F\u043E \u043F\u0430\u0440\u043E\u043B\u044E"})]}),Ze(A)===0&&e.jsxs(a,{component:Ve.div,initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[e.jsx(be,{children:e.jsxs(ge,{children:[e.jsxs(ae,{variant:"h5",children:[e.jsx(ma,{}),"\u041E\u0441\u043D\u043E\u0432\u043D\u0430\u044F \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F"]}),e.jsx(a,{sx:{position:"relative",mb:4,borderRadius:2,backgroundColor:"rgba(18, 18, 18, 0.9)",border:"1px solid rgba(255, 255, 255, 0.05)",display:"flex",flexDirection:"column"},children:e.jsxs(B,{container:!0,sx:{p:2},children:[e.jsxs(B,{item:!0,xs:12,sm:4,md:3,sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",p:2},children:[e.jsxs(a,{sx:{position:"relative",width:{xs:120,sm:140},height:{xs:120,sm:140},borderRadius:"50%",border:`4px solid ${Ir.avatar_border_color||r.palette.primary.main}`,boxShadow:"0 4px 20px rgba(0, 0, 0, 0.4)",backgroundColor:"rgba(18, 18, 18, 0.7)",mb:2,"&:hover .avatar-overlay":{opacity:1}},children:[e.jsx(_e,{src:Wt||(u?.photo?`/static/uploads/avatar/${u.id}/${u.photo}`:void 0),sx:{width:"100%",height:"100%"}}),e.jsxs(a,{className:"avatar-overlay",sx:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",transition:"all 0.2s",opacity:0,display:"flex",alignItems:"center",justifyContent:"center",gap:1,borderRadius:"50%","&:hover":{opacity:1}},children:[e.jsx("label",{htmlFor:"avatar-input",children:e.jsx(Q,{component:"span",sx:{bgcolor:"rgba(0, 0, 0, 0.6)",color:"#fff",p:1},children:e.jsx(Zt,{})})}),e.jsx(Q,{onClick:async()=>{try{(await k.post("/api/profile/delete-avatar")).data.success&&(Je(""),st(null),b("success","\u0410\u0432\u0430\u0442\u0430\u0440 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0443\u0434\u0430\u043B\u0435\u043D"),o&&o({...u,photo:null}))}catch(t){b("error",t.response?.data?.error||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u0438 \u0430\u0432\u0430\u0442\u0430\u0440\u0430")}},sx:{bgcolor:"rgba(0, 0, 0, 0.6)",color:"#fff",p:1},children:e.jsx(Yt,{})}),e.jsx(Ma,{id:"avatar-input",type:"file",accept:"image/*",onChange:t=>(s=>{if(!s)return;st(s);const c=new FileReader;c.onloadend=()=>{Je(c.result)},c.readAsDataURL(s)})(t.target.files[0])})]})]}),e.jsx(n,{variant:"subtitle2",sx:{mt:1,mb:.5,textAlign:"center"},children:"\u0410\u0432\u0430\u0442\u0430\u0440 \u043F\u0440\u043E\u0444\u0438\u043B\u044F"})]}),e.jsxs(B,{item:!0,xs:12,sm:8,md:9,sx:{p:2},children:[e.jsxs(a,{sx:{position:"relative",height:{xs:150,sm:180},width:"100%",overflow:"hidden",borderRadius:2,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.2)",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx(a,{component:"img",src:E||(u?.banner?`/static/uploads/banner/${u.id}/${u.banner}`:void 0),alt:"Banner",sx:{width:"100%",height:"100%",objectFit:"cover"},onError:t=>{t.target.onerror=null,t.target.src=vs(800,200,"Banner","#424242","#ffffff")}}),e.jsxs(a,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.3)",transition:"all 0.2s",opacity:0,display:"flex",alignItems:"center",justifyContent:"center",gap:2,"&:hover":{opacity:1}},children:[e.jsx("label",{htmlFor:"banner-input",children:e.jsx(Q,{component:"span",sx:{bgcolor:"rgba(0, 0, 0, 0.6)",color:"#fff"},children:e.jsx(Zt,{})})}),e.jsx(Q,{onClick:async()=>{try{(await k.post("/api/profile/delete-banner")).data.success&&(De(""),f(null),b("success","\u0411\u0430\u043D\u043D\u0435\u0440 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0443\u0434\u0430\u043B\u0435\u043D"),o&&o({...u,banner:null}))}catch(t){b("error",t.response?.data?.error||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u0438 \u0431\u0430\u043D\u043D\u0435\u0440\u0430")}},sx:{bgcolor:"rgba(0, 0, 0, 0.6)",color:"#fff"},children:e.jsx(Yt,{})}),e.jsx(Ma,{id:"banner-input",type:"file",accept:"image/*",onChange:t=>(s=>{if(!s)return;f(s);const c=new FileReader;c.onloadend=()=>{De(c.result)},c.readAsDataURL(s)})(t.target.files[0])})]})]}),e.jsx(n,{variant:"subtitle2",sx:{mt:2,mb:.5},children:"\u0411\u0430\u043D\u043D\u0435\u0440 \u043F\u0440\u043E\u0444\u0438\u043B\u044F"}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"\u0420\u0435\u043A\u043E\u043C\u0435\u043D\u0434\u0443\u0435\u043C\u044B\u0439 \u0440\u0430\u0437\u043C\u0435\u0440: 1200\xD7300 \u043F\u0438\u043A\u0441\u0435\u043B\u0435\u0439"})]})]})}),e.jsxs(B,{container:!0,spacing:2,sx:{mt:7},children:[" ",e.jsx(B,{item:!0,xs:12,md:6,children:e.jsx(te,{label:"\u0418\u043C\u044F",value:we,onChange:t=>Le(t.target.value),fullWidth:!0,margin:"normal",variant:"outlined",helperText:`${we?.length||0}/15 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432`,inputProps:{maxLength:15},FormHelperTextProps:{sx:{ml:0}}})}),e.jsx(B,{item:!0,xs:12,md:6,children:e.jsx(te,{label:"\u0418\u043C\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F",value:Se,onChange:t=>ye(t.target.value),fullWidth:!0,margin:"normal",variant:"outlined",helperText:`${Se?.length||0}/16 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432, \u0431\u0435\u0437 \u043F\u0440\u043E\u0431\u0435\u043B\u043E\u0432`,inputProps:{maxLength:16},FormHelperTextProps:{sx:{ml:0}}})}),e.jsx(B,{item:!0,xs:12,children:e.jsx(te,{label:"\u041E \u0441\u0435\u0431\u0435",value:We,onChange:t=>Ue(t.target.value),fullWidth:!0,multiline:!0,rows:4,margin:"normal",variant:"outlined",helperText:`${We?.length||0}/200 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432`,inputProps:{maxLength:200},FormHelperTextProps:{sx:{ml:0}}})})]}),e.jsx(Ga,{profileData:Ie,subscription:Ie?.subscription,onStatusUpdate:t=>{Or(s=>({...s,status_text:t.status_text,status_color:t.status_color}))}}),e.jsxs(a,{sx:{mt:3,display:"flex",justifyContent:"flex-end",gap:2},children:[e.jsx(v,{variant:"contained",color:"primary",startIcon:e.jsx(ys,{}),onClick:()=>$r(!0),sx:{},children:"\u041A\u043E\u043D\u043D\u0435\u043A\u0442"}),e.jsx(v,{variant:"contained",color:"primary",startIcon:$?e.jsx(Z,{size:20}):re?e.jsx(tt,{}):e.jsx(Ws,{}),onClick:async()=>{try{T(!0);let t=!1,s=[];if(we!==u.name)try{const c=new FormData;c.append("name",we);const d=await k.post("/api/profile/update-name",c,{headers:{"Content-Type":"multipart/form-data"}});s.push({type:"name",success:d.data.success||!1,message:d.data.message||d.data.error||"\u041D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u0430\u044F \u043E\u0448\u0438\u0431\u043A\u0430"}),d.data.success||(t=!0)}catch(c){s.push({type:"name",success:!1,message:c.response?.data?.error||c.response?.data?.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F \u0438\u043C\u0435\u043D\u0438"}),t=!0}if(Se!==u.username)try{const c=new FormData;c.append("username",Se);const d=await k.post("/api/profile/update-username",c,{headers:{"Content-Type":"multipart/form-data"}});s.push({type:"username",success:d.data.success||!1,message:d.data.message||d.data.error||"\u041D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u0430\u044F \u043E\u0448\u0438\u0431\u043A\u0430"}),d.data.success||(t=!0)}catch(c){s.push({type:"username",success:!1,message:c.response?.data?.error||c.response?.data?.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F username"}),t=!0}if(We!==(u.about||""))try{const c=new FormData;c.append("about",We);const d=await k.post("/api/profile/update-about",c,{headers:{"Content-Type":"multipart/form-data"}});s.push({type:"about",success:d.data.success||!1,message:d.data.message||d.data.error||"\u041D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u0430\u044F \u043E\u0448\u0438\u0431\u043A\u0430"}),d.data.success||(t=!0)}catch(c){s.push({type:"about",success:!1,message:c.response?.data?.error||c.response?.data?.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u044F"}),t=!0}if(at)try{const c=new FormData;c.append("avatar",at);const d=await k.post("/api/profile/upload-avatar",c,{headers:{"Content-Type":"multipart/form-data"}});s.push({type:"avatar",success:d.data.success||!1,message:d.data.message||d.data.error||"\u041D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u0430\u044F \u043E\u0448\u0438\u0431\u043A\u0430"}),d.data.success||(t=!0)}catch(c){s.push({type:"avatar",success:!1,message:c.response?.data?.error||c.response?.data?.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0430\u0432\u0430\u0442\u0430\u0440\u0430"}),t=!0}if(p)try{const c=new FormData;c.append("banner",p);const d=await k.post("/api/profile/upload-banner",c,{headers:{"Content-Type":"multipart/form-data"}});s.push({type:"banner",success:d.data.success||!1,message:d.data.message||d.data.error||"\u041D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u0430\u044F \u043E\u0448\u0438\u0431\u043A\u0430"}),d.data.success||(t=!0)}catch(c){s.push({type:"banner",success:!1,message:c.response?.data?.error||c.response?.data?.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0431\u0430\u043D\u043D\u0435\u0440\u0430"}),t=!0}if(o&&o({...u,name:we,username:Se,about:We}),t){let c="";const d=s.filter(F=>!F.success);d.length===1?c=d[0].message:(c=`\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0441\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0435 \u0434\u0430\u043D\u043D\u044B\u0435:
`,d.forEach(F=>{c+=`\u2022 ${F.type}: ${F.message}
`})),b("error",c)}else b("success","\u041F\u0440\u043E\u0444\u0438\u043B\u044C \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D"),l(`/profile/${Se}`)}catch(t){b("error","\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0438 \u043F\u0440\u043E\u0444\u0438\u043B\u044F: "+(t.message||"\u041D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u0430\u044F \u043E\u0448\u0438\u0431\u043A\u0430"))}finally{T(!1)}},disabled:$,sx:{borderRadius:"12px",py:1},children:$?"\u0421\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0435...":re?"\u0421\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u043E":"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F"})]})]})}),e.jsx(be,{children:e.jsxs(ge,{children:[e.jsxs(ae,{variant:"h5",children:[e.jsx(ca,{}),"\u0421\u043E\u0446\u0438\u0430\u043B\u044C\u043D\u044B\u0435 \u0441\u0435\u0442\u0438"]}),e.jsx(Lt,{sx:{bgcolor:"rgba(16, 16, 16, 0.8)",borderRadius:2,mb:3,border:"1px solid rgba(255, 255, 255, 0.05)"},children:ee.length===0?e.jsx(Ee,{children:e.jsx(Ne,{primary:e.jsx(n,{variant:"body2",color:"text.secondary",align:"center",children:"\u0423 \u0432\u0430\u0441 \u043D\u0435\u0442 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u043D\u044B\u0445 \u0441\u043E\u0446\u0438\u0430\u043B\u044C\u043D\u044B\u0445 \u0441\u0435\u0442\u0435\u0439"})})}):ee.map((t,s)=>e.jsxs(Ee,{divider:s<ee.length-1,sx:{borderRadius:s===0?"8px 8px 0 0":s===ee.length-1?"0 0 8px 8px":"0",overflow:"hidden",transition:"all 0.2s ease","&:hover":{bgcolor:C(r.palette.primary.main,.08)}},children:[e.jsx(a,{sx:{mr:2,color:"primary.main"},children:Ta(t.name,t.link)}),e.jsx(Ne,{primary:e.jsx(n,{variant:"subtitle2",fontWeight:500,children:t.name}),secondary:e.jsx(n,{variant:"body2",component:"a",href:t.link,target:"_blank",rel:"noopener noreferrer",sx:{color:"primary.main",textDecoration:"none","&:hover":{textDecoration:"underline"}},children:t.link})}),e.jsx(cs,{children:e.jsx(Q,{edge:"end",onClick:()=>(async c=>{try{T(!0);const d=await mt.deleteSocial(c);if(!d.success)throw new Error(d.error||"Failed to delete social network");Qt(ee.filter(F=>F.name!==c)),b("success","\u0421\u043E\u0446\u0438\u0430\u043B\u044C\u043D\u0430\u044F \u0441\u0435\u0442\u044C \u0443\u0434\u0430\u043B\u0435\u043D\u0430"),T(!1)}catch{b("error","\u041E\u0448\u0438\u0431\u043A\u0430 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u044F \u0441\u043E\u0446\u0438\u0430\u043B\u044C\u043D\u043E\u0439 \u0441\u0435\u0442\u0438"),T(!1)}})(t.name),sx:{color:"error.main","&:hover":{bgcolor:C(r.palette.error.main,.1)}},children:e.jsx(Yt,{})})})]},s))}),e.jsx(a,{sx:{display:"flex",justifyContent:"center"},children:e.jsx(v,{variant:"outlined",color:"primary",startIcon:e.jsx(ua,{}),onClick:()=>ot(!0),sx:{borderRadius:"12px",py:1,px:3},children:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0441\u043E\u0446\u0438\u0430\u043B\u044C\u043D\u0443\u044E \u0441\u0435\u0442\u044C"})}),e.jsxs(Pe,{open:Oa,onClose:()=>ot(!1),maxWidth:"sm",PaperProps:{sx:{bgcolor:r.palette.background.paper,color:r.palette.text.primary,borderRadius:2}},children:[e.jsx(Ge,{sx:{borderBottom:`1px solid ${C(r.palette.divider,.1)}`},children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(n,{variant:"h6",children:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0441\u043E\u0446\u0438\u0430\u043B\u044C\u043D\u0443\u044E \u0441\u0435\u0442\u044C"}),e.jsx(Q,{onClick:()=>ot(!1),size:"small",children:e.jsx(gt,{fontSize:"small"})})]})}),e.jsxs($e,{sx:{mt:2},children:[e.jsxs(ds,{fullWidth:!0,margin:"normal",children:[e.jsx(xs,{children:"\u0421\u043E\u0446\u0438\u0430\u043B\u044C\u043D\u0430\u044F \u0441\u0435\u0442\u044C"}),e.jsxs(ps,{value:ze,onChange:t=>Dr(t.target.value),label:"\u0421\u043E\u0446\u0438\u0430\u043B\u044C\u043D\u0430\u044F \u0441\u0435\u0442\u044C",children:[e.jsx(Te,{value:"Element",children:"Element"}),e.jsx(Te,{value:"Aumbent",children:"Aumbent"}),e.jsx(Te,{value:"VK",children:"\u0412\u041A\u043E\u043D\u0442\u0430\u043A\u0442\u0435"}),e.jsx(Te,{value:"TikTok",children:"TikTok"}),e.jsx(Te,{value:"Telegram",children:"Telegram"}),e.jsx(Te,{value:"YouTube",children:"YouTube"}),e.jsx(Te,{value:"Website",children:"\u0412\u0435\u0431-\u0441\u0430\u0439\u0442"})]})]}),e.jsx(te,{label:"\u0421\u0441\u044B\u043B\u043A\u0430",value:Mt,onChange:t=>zr(t.target.value),fullWidth:!0,margin:"normal",variant:"outlined",placeholder:"https://",InputProps:{startAdornment:e.jsx(pt,{position:"start",children:Ta(ze)})}})]}),e.jsxs(Qe,{sx:{p:2,pt:0},children:[e.jsx(v,{onClick:()=>ot(!1),color:"inherit",children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),e.jsx(v,{onClick:async()=>{try{if(T(!0),!ze||!Mt)return b("error","\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0437\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u0432\u0441\u0435 \u043F\u043E\u043B\u044F"),void T(!1);let t=Mt;if(t.startsWith("http://")||t.startsWith("https://")||(t="https://"+t),ee.some(c=>c.name.toLowerCase()===ze.toLowerCase()))return b("error",`\u0421\u043E\u0446\u0438\u0430\u043B\u044C\u043D\u0430\u044F \u0441\u0435\u0442\u044C ${ze} \u0443\u0436\u0435 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0430`),void T(!1);const s=await mt.addSocial(ze,t);s.success?(Qt([...ee,{name:ze,link:t}]),b("success","\u0421\u043E\u0446\u0438\u0430\u043B\u044C\u043D\u0430\u044F \u0441\u0435\u0442\u044C \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0430"),ot(!1),Dr(""),zr("")):b("error",s.error||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u044F \u0441\u043E\u0446\u0438\u0430\u043B\u044C\u043D\u043E\u0439 \u0441\u0435\u0442\u0438"),T(!1)}catch(t){b("error",t.response?.data?.error||t.message||"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0434\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0441\u043E\u0446\u0438\u0430\u043B\u044C\u043D\u0443\u044E \u0441\u0435\u0442\u044C"),T(!1)}},color:"primary",variant:"contained",disabled:!ze||!Mt||$,startIcon:$?e.jsx(Z,{size:16}):e.jsx(ua,{}),children:$?"\u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u0435...":"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"})]})]})]})}),e.jsx(be,{children:e.jsxs(ge,{children:[e.jsxs(ae,{variant:"h5",children:[e.jsx(Ms,{}),"\u0421\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u0435 \u0443\u0447\u0435\u0442\u043D\u043E\u0439 \u0437\u0430\u043F\u0438\u0441\u0438"]}),e.jsxs(a,{sx:{display:"flex",alignItems:"center",p:2,borderRadius:2,bgcolor:"rgba(18, 18, 18, 0.9)",border:"1px solid rgba(255, 255, 255, 0.05)",mb:P!=="good"?2:0,boxShadow:"0 4px 20px rgba(0, 0, 0, 0.25)"},children:[e.jsxs(a,{sx:{mr:2},children:[P==="good"&&e.jsx(ba,{sx:{color:"#81C784",fontSize:30}}),P==="warning"&&e.jsx(Ps,{sx:{color:"#FFB74D",fontSize:30}}),P==="banned"&&e.jsx(Ts,{sx:{color:"#E57373",fontSize:30}})]}),e.jsxs(a,{children:[e.jsxs(n,{variant:"subtitle1",sx:{fontWeight:600},children:[P==="good"&&"\u0412\u0441\u0451 \u0432 \u043F\u043E\u0440\u044F\u0434\u043A\u0435",P==="warning"&&"\u0415\u0441\u0442\u044C \u043F\u0440\u0435\u0434\u0443\u043F\u0440\u0435\u0436\u0434\u0435\u043D\u0438\u044F",P==="banned"&&"\u0410\u043A\u043A\u0430\u0443\u043D\u0442 \u0437\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u043D"]}),P!=="good"&&e.jsxs(n,{variant:"body2",color:"text.secondary",children:[P==="warning"&&`${j.length} \u0430\u043A\u0442\u0438\u0432\u043D\u044B\u0445 \u043F\u0440\u0435\u0434\u0443\u043F\u0440\u0435\u0436\u0434\u0435\u043D\u0438\u0439`,P==="banned"&&"\u0412\u0440\u0435\u043C\u0435\u043D\u043D\u0430\u044F \u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u043A\u0430"]})]}),e.jsx(a,{sx:{ml:"auto"},children:e.jsx(v,{variant:"text",size:"small",onClick:()=>{Jr(),V(!0)},startIcon:e.jsx(ga,{fontSize:"small"}),sx:{textTransform:"none",fontSize:"0.8rem",color:P==="good"?"#81C784":P==="warning"?"#FFB74D":"#E57373"},children:"\u0418\u0441\u0442\u043E\u0440\u0438\u044F"})})]}),P==="banned"&&fe&&e.jsxs(a,{sx:{p:2,borderRadius:2,bgcolor:"rgba(18, 18, 18, 0.9)",border:`1px solid ${C("#d32f2f",.3)}`},children:[e.jsxs(n,{variant:"body2",sx:{mb:.5},children:[e.jsx("strong",{children:"\u041F\u0440\u0438\u0447\u0438\u043D\u0430 \u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u043A\u0438:"})," ",fe.reason]}),e.jsxs(n,{variant:"body2",sx:{mb:.5},children:[e.jsx("strong",{children:"\u0414\u043E:"})," ",ur(fe.end_date)]}),e.jsxs(n,{variant:"body2",children:[e.jsx("strong",{children:"\u041E\u0441\u0442\u0430\u043B\u043E\u0441\u044C \u0434\u043D\u0435\u0439:"})," ",fe.remaining_days]}),fe.details&&e.jsx(n,{variant:"body2",sx:{mt:1,fontStyle:"italic"},children:fe.details})]})]})})]}),Ze(A)===1&&e.jsxs(a,{component:Ve.div,initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[e.jsx(ho,{onThemeSelect:async t=>{try{T(!0);let s={...Ir};const c=(F,le)=>{localStorage.setItem(F,le),sessionStorage.setItem(F,le);try{const z=new Date;z.setTime(z.getTime()+31536e6),document.cookie=`${F}=${le};expires=${z.toUTCString()};path=/;SameSite=Lax`}catch{}if(F==="theme"||F==="themeMode")document.documentElement.setAttribute("data-theme",le);else{const z=F.replace(/([A-Z])/g,"-$1").toLowerCase();document.documentElement.style.setProperty(`--${z}`,le)}},d={};t==="dark"?(s={...s,background_color:"#131313",container_color:"#1c1c1c",welcome_bubble_color:"#131313",avatar_border_color:"#D0BCFF",info_bubble_color:"#242526",header_color:"#1c1c1c",bottom_nav_color:"#1c1c1c",content_color:"#1c1c1c"},h({mode:"dark",backgroundColor:"#131313",paperColor:"#1c1c1c",headerColor:"#1c1c1c",bottomNavColor:"#1c1c1c",contentColor:"#1c1c1c",primaryColor:"#D0BCFF",textColor:"#FFFFFF"}),c("theme","dark"),c("themeMode","dark"),c("backgroundColor","#131313"),c("paperColor","#1c1c1c"),c("headerColor","#1c1c1c"),c("bottomNavColor","#1c1c1c"),c("contentColor","#1c1c1c"),c("primaryColor","#D0BCFF"),c("textColor","#FFFFFF"),d.mode="dark",d.theme="dark",d.themeMode="dark",d.backgroundColor="#131313",d.paperColor="#1c1c1c",d.headerColor="#1c1c1c",d.bottomNavColor="#1c1c1c",d.contentColor="#1c1c1c",d.primaryColor="#D0BCFF",d.textColor="#FFFFFF"):t==="light"?(s={...s,background_color:"#f5f5f5",container_color:"#ffffff",welcome_bubble_color:"#f0f0f0",avatar_border_color:"#8c52ff",info_bubble_color:"#e0e0e0",header_color:"#ffffff",bottom_nav_color:"#ffffff",content_color:"#ffffff"},h({mode:"light",backgroundColor:"#f5f5f5",paperColor:"#ffffff",headerColor:"#ffffff",bottomNavColor:"#ffffff",contentColor:"#ffffff",primaryColor:"#8c52ff",textColor:"#121212"}),c("theme","light"),c("themeMode","light"),c("backgroundColor","#f5f5f5"),c("paperColor","#ffffff"),c("headerColor","#ffffff"),c("bottomNavColor","#ffffff"),c("contentColor","#ffffff"),c("primaryColor","#8c52ff"),c("textColor","#121212"),d.mode="light",d.theme="light",d.themeMode="light",d.backgroundColor="#f5f5f5",d.paperColor="#ffffff",d.headerColor="#ffffff",d.bottomNavColor="#ffffff",d.contentColor="#ffffff",d.primaryColor="#8c52ff",d.textColor="#121212"):t==="contrast"&&(s={...s,background_color:"#080808",container_color:"#101010",welcome_bubble_color:"#0A0A0A",avatar_border_color:"#7B46E3",info_bubble_color:"#151515",header_color:"#101010",bottom_nav_color:"#101010",content_color:"#101010"},h({mode:"contrast",backgroundColor:"#080808",paperColor:"#101010",headerColor:"#101010",bottomNavColor:"#101010",contentColor:"#101010",primaryColor:"#7B46E3",textColor:"#FFFFFF"}),c("theme","contrast"),c("themeMode","contrast"),c("backgroundColor","#080808"),c("paperColor","#101010"),c("headerColor","#101010"),c("bottomNavColor","#101010"),c("contentColor","#101010"),c("primaryColor","#7B46E3"),c("textColor","#FFFFFF"),d.mode="contrast",d.theme="contrast",d.themeMode="contrast",d.backgroundColor="#080808",d.paperColor="#101010",d.headerColor="#101010",d.bottomNavColor="#101010",d.contentColor="#101010",d.primaryColor="#7B46E3",d.textColor="#FFFFFF");try{localStorage.setItem("themeData",JSON.stringify(d)),sessionStorage.setItem("themeData",JSON.stringify(d))}catch{}if(Mr(s),!(await mt.updateSettings(s)).success)throw new Error("Failed to apply theme");ie(!0),b("success",`\u0422\u0435\u043C\u0430 "${t}" \u043F\u0440\u0438\u043C\u0435\u043D\u0435\u043D\u0430`),window.dispatchEvent(new Event("storage")),T(!1)}catch{b("error","\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438\u043C\u0435\u043D\u0435\u043D\u0438\u044F \u0442\u0435\u043C\u044B"),T(!1)}}}),Ie?.subscription?.type==="ultimate"&&e.jsx(a,{sx:{mt:4,mb:2},children:e.jsx(he,{sx:{p:2,borderRadius:2,bgcolor:"rgba(18, 18, 18, 0.9)"},children:e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(a,{children:[e.jsx(n,{variant:"subtitle1",fontWeight:600,children:"\u041D\u0435\u043E\u0431\u044B\u0447\u043D\u044B\u0439 \u043F\u0440\u043E\u0444\u0438\u043B\u044C"}),e.jsx(n,{variant:"body2",color:"text.secondary",children:"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u0432\u043D\u0435\u0448\u043D\u0438\u0439 \u0432\u0438\u0434 \u043F\u0440\u043E\u0444\u0438\u043B\u044F"})]}),e.jsx(qt,{checked:xr,onChange:async()=>{try{const t=xr?1:2,s=await fetch("/api/user/profile-style",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile_id:t})}),c=await s.json();c.success?(Er(!xr),b("success","\u0421\u0442\u0438\u043B\u044C \u043F\u0440\u043E\u0444\u0438\u043B\u044F \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D")):b("error",c.error||"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u0441\u0442\u0438\u043B\u044C \u043F\u0440\u043E\u0444\u0438\u043B\u044F")}catch{b("error","\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0438 \u0441\u0442\u0438\u043B\u044F \u043F\u0440\u043E\u0444\u0438\u043B\u044F")}}})]})})}),e.jsx(ht,{sx:{my:3}}),e.jsx(n,{variant:"h6",sx:{mb:2},children:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0430 \u0446\u0432\u0435\u0442\u043E\u0432 \u0438\u043D\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430"}),e.jsx(be,{children:e.jsxs(ge,{children:[e.jsxs(ae,{variant:"h5",children:[e.jsx(Ca,{}),"\u0426\u0432\u0435\u0442\u043E\u0432\u0430\u044F \u0441\u0445\u0435\u043C\u0430"]}),e.jsxs(a,{sx:{textAlign:"center",my:4},children:[e.jsx(n,{variant:"h4",color:"primary",fontWeight:"600",gutterBottom:!0,children:"\u0421\u043A\u043E\u0440\u043E"}),e.jsx(n,{variant:"body1",color:"text.secondary",sx:{mb:4},children:"\u041D\u043E\u0432\u044B\u0435 \u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E\u0441\u0442\u0438 \u043A\u0430\u0441\u0442\u043E\u043C\u0438\u0437\u0430\u0446\u0438\u0438 \u0432\u043D\u0435\u0448\u043D\u0435\u0433\u043E \u0432\u0438\u0434\u0430 \u043F\u043E\u044F\u0432\u044F\u0442\u0441\u044F \u0432 \u0431\u043B\u0438\u0436\u0430\u0439\u0448\u0435\u043C \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0438"})]})]})}),e.jsxs(a,{sx:{mt:3},children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"\u0414\u0435\u043A\u043E\u0440\u0430\u0446\u0438\u0438 \u043F\u0440\u043E\u0444\u0438\u043B\u044F"}),e.jsx(n,{variant:"body2",color:"textSecondary",sx:{mb:2},children:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0438 \u0430\u043A\u0442\u0438\u0432\u0438\u0440\u0443\u0439\u0442\u0435 \u0434\u0435\u043A\u043E\u0440\u0430\u0446\u0438\u0438 \u0434\u043B\u044F \u0432\u0430\u0448\u0435\u0433\u043E \u043F\u0440\u043E\u0444\u0438\u043B\u044F"}),W?e.jsx(a,{sx:{display:"flex",justifyContent:"center",p:2},children:e.jsx(Z,{})}):g.length===0?e.jsx(he,{sx:{p:3,textAlign:"center",bgcolor:"background.paper"},children:e.jsx(n,{color:"textSecondary",children:"\u0423 \u0432\u0430\u0441 \u043F\u043E\u043A\u0430 \u043D\u0435\u0442 \u0434\u0435\u043A\u043E\u0440\u0430\u0446\u0438\u0439"})}):e.jsx(B,{container:!0,spacing:2,children:g.map(t=>{const s=t.decoration;return e.jsx(B,{item:!0,xs:12,md:6,children:e.jsxs(he,{sx:{p:2,bgcolor:"background.paper",transition:"transform 0.2s, box-shadow 0.2s",height:"100%","&:hover":{transform:"translateY(-2px)",boxShadow:c=>c.shadows[4]}},children:[e.jsx(xo,{decoration:s,children:s.item_path&&(()=>{const[c,...d]=s.item_path.split(";"),F=d.reduce((le,z)=>{const[dt,At]=z.split(":").map(Ae=>Ae.trim());return{...le,[dt]:At}},{});return e.jsx(co,{src:c,alt:"",customStyles:F})})()}),e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:1},children:[e.jsx(a,{children:e.jsx(n,{variant:"subtitle1",sx:{fontWeight:500},children:s.name})}),e.jsx(qt,{checked:t.is_active,onChange:c=>(async(d,F)=>{try{if(!(await fetch("/api/decorations/toggle",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({decoration_id:d,is_active:F})})).ok)throw new Error("Failed to toggle decoration");Vr()}catch{}})(s.id,c.target.checked)})]})]})},s.id)})})]}),e.jsx(be,{sx:{mt:3},children:e.jsxs(ge,{children:[e.jsxs(ae,{variant:"h5",children:[e.jsx(Sr,{}),"\u0414\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0435 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438"]}),Ie?.subscription?.type==="ultimate"&&e.jsxs(a,{sx:{mt:3},children:[e.jsx(n,{variant:"subtitle1",fontWeight:600,sx:{mb:1},children:"\u0424\u043E\u043D\u043E\u0432\u0430\u044F \u043A\u0430\u0440\u0442\u0438\u043D\u043A\u0430 \u043F\u0440\u043E\u0444\u0438\u043B\u044F"}),e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:2},children:[Ie.user?.profile_background_url?e.jsxs(a,{sx:{position:"relative"},children:[e.jsx(_e,{variant:"rounded",src:Ie.user.profile_background_url,alt:"Profile Background",sx:{width:96,height:96,borderRadius:3,boxShadow:2}}),e.jsx(Q,{size:"small",color:"error",sx:{position:"absolute",top:0,right:0,bgcolor:"rgba(0,0,0,0.5)"},onClick:async()=>{try{await k.delete("/api/profile/background"),b("success","\u0424\u043E\u043D \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0443\u0434\u0430\u043B\u0451\u043D"),ct&&ct()}catch(t){b("error",t?.response?.data?.error||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u044F \u0444\u043E\u043D\u0430")}},children:e.jsx(Yt,{fontSize:"small"})})]}):e.jsx(_e,{variant:"rounded",sx:{width:96,height:96,borderRadius:3,bgcolor:"background.default",color:"text.disabled",boxShadow:1},children:e.jsx(Zt,{fontSize:"large"})}),e.jsxs(a,{children:[e.jsxs(v,{variant:"contained",component:"label",startIcon:e.jsx(Zt,{}),children:["\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0444\u043E\u043D",e.jsx("input",{type:"file",accept:"image/png, image/jpeg, image/jpg, image/gif",hidden:!0,onChange:async t=>{const s=t.target.files[0];if(!s)return;const c=new FormData;c.append("background",s);try{await k.post("/api/profile/background",c,{headers:{"Content-Type":"multipart/form-data"}}),b("success","\u0424\u043E\u043D \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D"),ct&&ct()}catch(d){b("error",d?.response?.data?.error||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0444\u043E\u043D\u0430")}}})]}),e.jsx(n,{variant:"caption",sx:{display:"block",mt:1,color:"text.secondary"},children:"\u0422\u043E\u043B\u044C\u043A\u043E \u0434\u043B\u044F \u043F\u043E\u0434\u043F\u0438\u0441\u043A\u0438 Ultimate. PNG, JPG, GIF. \u0414\u043E 5MB."})]})]})]})]})})]}),Ze(A)===2&&!I&&e.jsxs(a,{component:Ve.div,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsxs(ae,{variant:"h5",children:[e.jsx(Ba,{}),"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0439"]}),e.jsx(be,{sx:{mt:3},children:e.jsxs(ge,{children:[e.jsxs(ae,{variant:"h5",sx:{mb:2},children:[e.jsx(oa,{sx:{mr:1}}),"\u0423\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u044F"]}),$a?e.jsxs(e.Fragment,{children:[Pr==="denied"&&e.jsx(K,{severity:"error",sx:{mb:2},children:"\u0412\u044B \u0437\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u043B\u0438 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043D\u0438\u0435 \u043D\u0430 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0443 \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0439."}),e.jsxs(Lt,{disablePadding:!0,sx:{mb:1},children:[e.jsxs(Ee,{sx:{py:1.5,px:2,borderRadius:2,bgcolor:C(r.palette.background.default,.4),border:`1px solid ${C(r.palette.divider,.1)}`,mb:1},children:[e.jsx(Ut,{sx:{minWidth:40},children:e.jsx(Ba,{color:lr?"success":"action"})}),e.jsx(Ne,{primary:"Push-\u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u044F",primaryTypographyProps:{fontWeight:500}}),La?e.jsx(Z,{size:24,sx:{color:"#D0BCFF"}}):e.jsx(qt,{checked:lr,onChange:lr?async()=>{try{ke(!0);const t=await He.unsubscribeFromPushNotifications();try{await k.post("/api/notifications/preferences",{push_notifications_enabled:!1})}catch{}Re(!1),b(t?"success":"info","Push-\u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u044F \u043E\u0442\u043A\u043B\u044E\u0447\u0435\u043D\u044B"),ke(!1)}catch{b("error","\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430, \u043D\u043E push-\u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u044F \u043E\u0442\u043A\u043B\u044E\u0447\u0435\u043D\u044B"),Re(!1),ke(!1)}}:async()=>{try{if(ke(!0),!await He.isPushNotificationSupported())return b("error","Push-\u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u044F \u043D\u0435 \u043F\u043E\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044E\u0442\u0441\u044F \u0432\u0430\u0448\u0438\u043C \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u043E\u043C"),void ke(!1);if(await He.getNotificationPermissionStatus()==="denied")return b("error","\u0420\u0430\u0437\u0440\u0435\u0448\u0435\u043D\u0438\u0435 \u043D\u0430 \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u044F \u0437\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u043D\u043E. \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0438\u0437\u043C\u0435\u043D\u0438\u0442\u0435 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0432 \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0435."),void ke(!1);try{await He.subscribeToPushNotifications(),Re(!0);try{await k.post("/api/notifications/preferences",{push_notifications_enabled:!0})}catch(t){t.response}try{await He.sendTestNotification(),b("success","Push-\u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u044F \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0432\u043A\u043B\u044E\u0447\u0435\u043D\u044B")}catch(t){t.response,b("info","Push-\u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u044F \u0432\u043A\u043B\u044E\u0447\u0435\u043D\u044B, \u043D\u043E \u0442\u0435\u0441\u0442\u043E\u0432\u043E\u0435 \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0435 \u043D\u0435 \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u043E")}}catch(t){return b("error",`\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043F\u043E\u0434\u043F\u0438\u0441\u043A\u0435 \u043D\u0430 \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u044F: ${t.message}`),void ke(!1)}ke(!1)}catch(t){b("error",`\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0432\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u0438 push-\u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0439: ${t.message}`),ke(!1)}},disabled:Pr==="denied"})]}),e.jsxs(Ee,{sx:{py:1.5,px:2,borderRadius:2,bgcolor:C(r.palette.background.default,.4),border:`1px solid ${C(r.palette.divider,.1)}`},children:[e.jsx(Ut,{sx:{minWidth:40},children:e.jsx(et,{color:G.telegramNotificationsEnabled?"success":"action"})}),e.jsx(Ne,{primary:"Telegram-\u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u044F",primaryTypographyProps:{fontWeight:500},secondary:G.telegramConnected?void 0:"\u041F\u043E\u0434\u043A\u043B\u044E\u0447\u0438\u0442\u0435 Telegram"}),Ea?e.jsx(Z,{size:24,sx:{color:"#D0BCFF"}}):e.jsx(qt,{checked:G.telegramNotificationsEnabled,onChange:async()=>{try{if(Tt(!0),!G.telegramConnected)return b("warning","\u0414\u043B\u044F \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u044F \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0439 \u0441\u043D\u0430\u0447\u0430\u043B\u0430 \u043F\u043E\u0434\u043A\u043B\u044E\u0447\u0438\u0442\u0435 Telegram \u0432 \u043F\u0440\u043E\u0444\u0438\u043B\u0435"),void Tt(!1);const t=!G.telegramNotificationsEnabled;try{const s=await k.post("/api/notifications/preferences",{push_notifications_enabled:G.pushNotificationsEnabled,telegram_notifications_enabled:t});if(!s.data||!s.data.success)throw new Error(s.data?.error||s.data?.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A");or({...G,telegramNotificationsEnabled:t}),b("success",t?"Telegram-\u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u044F \u0432\u043A\u043B\u044E\u0447\u0435\u043D\u044B":"Telegram-\u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u044F \u043E\u0442\u043A\u043B\u044E\u0447\u0435\u043D\u044B")}catch(s){b("error",s.message||"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0438\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 Telegram-\u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0439")}Tt(!1)}catch(t){b("error",t.message||"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0438\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 Telegram-\u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0439"),Tt(!1)}},disabled:!G.telegramConnected})]})]}),e.jsx(n,{variant:"caption",sx:{display:"block",mt:2,color:"text.disabled",textAlign:"center"},children:"Push-\u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u044F \u0440\u0430\u0431\u043E\u0442\u0430\u044E\u0442 \u0434\u0430\u0436\u0435 \u043A\u043E\u0433\u0434\u0430 \u0431\u0440\u0430\u0443\u0437\u0435\u0440 \u0437\u0430\u043A\u0440\u044B\u0442"})]}):e.jsx(K,{severity:"warning",sx:{mb:2},children:"\u0412\u0430\u0448 \u0431\u0440\u0430\u0443\u0437\u0435\u0440 \u043D\u0435 \u043F\u043E\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 push-\u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u044F"})]})}),e.jsx(be,{sx:{mt:3},children:e.jsxs(ge,{children:[e.jsxs(ae,{variant:"h5",sx:{mb:2},children:[e.jsx(Is,{sx:{mr:1}}),"\u0421\u0432\u044F\u0437\u0430\u043D\u043D\u044B\u0435 \u0430\u043A\u043A\u0430\u0443\u043D\u0442\u044B"]}),e.jsxs(Lt,{disablePadding:!0,children:[e.jsxs(Ee,{sx:{py:1.5,px:2,borderRadius:2,bgcolor:C(r.palette.background.default,.4),border:`1px solid ${C(r.palette.divider,.1)}`,mb:1},children:[e.jsx(Ut,{sx:{minWidth:40},children:e.jsx(Gt,{sx:{color:ve?"#D0BCFF":"#777"}})}),e.jsx(Ne,{primary:"Element",primaryTypographyProps:{fontWeight:500},secondary:rr?"\u041F\u0440\u043E\u0432\u0435\u0440\u043A\u0430 \u0441\u0442\u0430\u0442\u0443\u0441\u0430...":ve?"\u041F\u043E\u0434\u043A\u043B\u044E\u0447\u0435\u043D":"\u041D\u0435 \u043F\u043E\u0434\u043A\u043B\u044E\u0447\u0435\u043D"}),rr?e.jsx(Z,{size:24,sx:{color:"#D0BCFF"}}):Aa?e.jsx(Q,{edge:"end",color:"error",onClick:()=>{tr(""),It(!1),localStorage.removeItem("element_auth_pending")},size:"small",children:e.jsx(gt,{fontSize:"small"})}):e.jsx(v,{variant:"contained",size:"small",onClick:ve?null:()=>{(async()=>{try{It(!0);const s=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);tr(s),b("info","\u041F\u0435\u0440\u0435\u0439\u0434\u0438\u0442\u0435 \u043F\u043E \u0441\u0441\u044B\u043B\u043A\u0435, \u0447\u0442\u043E\u0431\u044B \u043F\u0440\u0438\u0432\u044F\u0437\u0430\u0442\u044C Element \u0430\u043A\u043A\u0430\u0443\u043D\u0442")}catch{b("error","\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0441\u0433\u0435\u043D\u0435\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0442\u043E\u043A\u0435\u043D \u0434\u043B\u044F Element"),It(!1)}})();const t=setInterval(()=>{hr().then(s=>{s&&(clearInterval(t),It(!1),tr(""),b("success","Element \u0430\u043A\u043A\u0430\u0443\u043D\u0442 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043F\u043E\u0434\u043A\u043B\u044E\u0447\u0435\u043D!"))})},2e3);localStorage.setItem("element_auth_pending","true"),setTimeout(()=>{clearInterval(t),localStorage.removeItem("element_auth_pending")},12e4)},disabled:ve,sx:{bgcolor:ve?"transparent":"rgba(208, 188, 255, 0.1)",color:ve?"success.main":"#D0BCFF",border:ve?"none":"1px solid rgba(208, 188, 255, 0.3)",boxShadow:"none",minWidth:"auto",px:2,"&:hover":{bgcolor:"rgba(208, 188, 255, 0.2)"}},children:ve?e.jsx(tt,{fontSize:"small"}):"\u041F\u043E\u0434\u043A\u043B\u044E\u0447\u0438\u0442\u044C"})]}),e.jsxs(Ee,{sx:{py:1.5,px:2,borderRadius:2,bgcolor:C(r.palette.background.default,.4),border:`1px solid ${C(r.palette.divider,.1)}`},children:[e.jsx(Ut,{sx:{minWidth:40},children:e.jsx(et,{sx:{color:G.telegramConnected?"#D0BCFF":"#777"}})}),e.jsx(Ne,{primary:"Telegram",primaryTypographyProps:{fontWeight:500},secondary:G.telegramConnected?"\u041F\u043E\u0434\u043A\u043B\u044E\u0447\u0435\u043D":"\u041D\u0435 \u043F\u043E\u0434\u043A\u043B\u044E\u0447\u0435\u043D"}),e.jsx(v,{variant:"contained",size:"small",onClick:()=>it(!0),disabled:!1,sx:{bgcolor:G.telegramConnected?"transparent":"rgba(208, 188, 255, 0.1)",color:G.telegramConnected?"success.main":"#D0BCFF",border:G.telegramConnected?"none":"1px solid rgba(208, 188, 255, 0.3)",boxShadow:"none",minWidth:"auto",px:2,"&:hover":{bgcolor:"rgba(208, 188, 255, 0.2)"}},children:G.telegramConnected?e.jsx(tt,{fontSize:"small"}):"\u041F\u043E\u0434\u043A\u043B\u044E\u0447\u0438\u0442\u044C"})]})]})]})})]}),Ze(A)===3&&e.jsx(a,{component:Ve.div,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:e.jsx(be,{children:e.jsxs(ge,{children:[e.jsxs(ae,{variant:"h5",children:[e.jsx(ia,{}),"\u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0431\u0435\u0439\u0434\u0436\u0430\u043C\u0438"]}),e.jsx(n,{variant:"body2",sx:{mb:3,color:"text.secondary"},children:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0435\u0439\u0434\u0436, \u043A\u043E\u0442\u043E\u0440\u044B\u0439 \u0431\u0443\u0434\u0435\u0442 \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0430\u0442\u044C\u0441\u044F \u0440\u044F\u0434\u043E\u043C \u0441 \u0432\u0430\u0448\u0438\u043C \u0438\u043C\u0435\u043D\u0435\u043C \u0432 \u043F\u0440\u043E\u0444\u0438\u043B\u0435 \u0438 \u043F\u0443\u0431\u043B\u0438\u043A\u0430\u0446\u0438\u044F\u0445"}),Ra||Za?e.jsx(a,{sx:{display:"flex",justifyContent:"center",my:4},children:e.jsx(Z,{})}):e.jsxs(a,{sx:{width:"100%"},children:[Dt.some(t=>t.is_active)&&e.jsx(a,{sx:{display:"flex",justifyContent:"flex-end",mb:2},children:e.jsx(v,{variant:"outlined",color:"error",size:"small",startIcon:e.jsx(Cs,{}),onClick:async()=>{try{Ke(!0);const t=await k.post("/api/profile/achievements/deactivate");t.data&&t.data.success&&(Rt(),pr(),b("success","\u0410\u043A\u0442\u0438\u0432\u043D\u044B\u0439 \u0431\u0435\u0439\u0434\u0436 \u0443\u0434\u0430\u043B\u0435\u043D")),Ke(!1)}catch{b("error","\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u0430\u043A\u0442\u0438\u0432\u043D\u044B\u0439 \u0431\u0435\u0439\u0434\u0436"),Ke(!1)}},disabled:er,sx:{borderRadius:"10px",textTransform:"none","&:hover":{backgroundColor:C(r.palette.error.main,.08)}},children:"\u0423\u0431\u0440\u0430\u0442\u044C \u0431\u0435\u0439\u0434\u0436"})}),Dt.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",mb:2,mt:2},children:[e.jsx(Ns,{sx:{mr:1,color:r.palette.primary.main}}),e.jsx(n,{variant:"h6",color:"primary",sx:{fontWeight:600},children:"\u0417\u0430\u0440\u0430\u0431\u043E\u0442\u0430\u043D\u043D\u044B\u0435 \u0434\u043E\u0441\u0442\u0438\u0436\u0435\u043D\u0438\u044F"})]}),e.jsx(B,{container:!0,spacing:1.5,children:Dt.filter(t=>!t.image_path.includes("shop/")).map(t=>e.jsx(B,{item:!0,xs:4,sm:3,md:2,children:e.jsxs(gr,{elevation:0,sx:{position:"relative",height:"100%",borderRadius:2,background:"transparent",border:t.is_active?`2px solid ${r.palette.primary.main}`:"1px solid rgba(255, 255, 255, 0.05)",transition:"all 0.2s ease",overflow:"visible","&:hover":{transform:"translateY(-3px)",boxShadow:t.is_active?r.shadows[4]:"none"}},children:[t.is_active&&e.jsx(a,{sx:{position:"absolute",top:-6,right:-6,backgroundColor:r.palette.success.main,color:"#fff",borderRadius:"50%",width:16,height:16,display:"flex",alignItems:"center",justifyContent:"center",zIndex:2},children:e.jsx(tt,{sx:{fontSize:12}})}),e.jsxs(fr,{sx:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",p:1.5,"&:last-child":{pb:1.5}},children:[e.jsx(a,{component:"img",src:`/static/images/bages/${t.image_path}`,alt:t.name||t.bage,sx:{width:50,height:50,objectFit:"contain",mb:1,filter:t.is_active?"none":"grayscale(30%)",transition:"all 0.3s ease"},onError:s=>{s.target.onerror=null,s.target.src="/static/images/bages/default-badge.png"}}),e.jsx(n,{variant:"caption",sx:{fontWeight:600,mb:.5,display:"-webkit-box",WebkitLineClamp:1,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:t.name||t.bage}),e.jsx(v,{variant:t.is_active?"text":"contained",color:t.is_active?"success":"primary",onClick:()=>Hr(t.id),size:"small",sx:{fontSize:"0.7rem",minHeight:0,py:.5,width:"100%",minWidth:"auto",borderRadius:"8px",textTransform:"none",boxShadow:"none"},disabled:er,children:t.is_active?"\u0410\u043A\u0442\u0438\u0432\u0435\u043D":"\u0412\u044B\u0431\u0440\u0430\u0442\u044C"})]})]})},t.id))}),e.jsx(a,{sx:{mt:1,mb:3,display:"flex",justifyContent:"center"},children:e.jsx(n,{variant:"caption",color:"text.secondary",children:"\u0421\u043E\u0431\u0438\u0440\u0430\u0439\u0442\u0435 \u043D\u043E\u0432\u044B\u0435 \u0434\u043E\u0441\u0442\u0438\u0436\u0435\u043D\u0438\u044F, \u0443\u0447\u0430\u0441\u0442\u0432\u0443\u044F \u0432 \u0441\u043E\u043E\u0431\u0449\u0435\u0441\u0442\u0432\u0435"})})]}),Ja.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",mb:2,mt:3},children:[e.jsx(za,{sx:{mr:1,color:r.palette.secondary.main}}),e.jsx(n,{variant:"h6",color:"secondary",sx:{fontWeight:600},children:"\u041F\u0440\u0438\u043E\u0431\u0440\u0435\u0442\u0435\u043D\u043D\u044B\u0435 \u0431\u0435\u0439\u0434\u0436\u0438"})]}),e.jsx(B,{container:!0,spacing:1.5,children:Dt.filter(t=>t.image_path.includes("shop/")).map(t=>e.jsx(B,{item:!0,xs:4,sm:3,md:2,children:e.jsxs(gr,{elevation:0,sx:{position:"relative",height:"100%",borderRadius:2,background:"transparent",border:t.is_active?`2px solid ${r.palette.secondary.main}`:"1px solid rgba(255, 255, 255, 0.05)",transition:"all 0.2s ease",overflow:"visible","&:hover":{transform:"translateY(-3px)",boxShadow:t.is_active?r.shadows[4]:"none"}},children:[t.is_active&&e.jsx(a,{sx:{position:"absolute",top:-6,right:-6,backgroundColor:r.palette.success.main,color:"#fff",borderRadius:"50%",width:16,height:16,display:"flex",alignItems:"center",justifyContent:"center",zIndex:2},children:e.jsx(tt,{sx:{fontSize:12}})}),e.jsx(a,{sx:{position:"absolute",top:-4,left:-4,backgroundColor:r.palette.secondary.main,color:"#fff",borderRadius:"50%",width:14,height:14,display:"flex",alignItems:"center",justifyContent:"center",zIndex:2},children:e.jsx(za,{sx:{fontSize:8}})}),e.jsxs(fr,{sx:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",p:1.5,"&:last-child":{pb:1.5}},children:[e.jsx(a,{component:"img",src:`/static/images/bages/${t.image_path}`,alt:t.name||t.bage,sx:{width:50,height:50,objectFit:"contain",mb:1,filter:t.is_active?"none":"grayscale(30%)",transition:"all 0.3s ease"},onError:s=>{s.target.onerror=null,s.target.src="/static/images/bages/default-badge.png"}}),e.jsx(n,{variant:"caption",sx:{fontWeight:600,mb:.5,display:"-webkit-box",WebkitLineClamp:1,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:t.name||t.bage}),e.jsx(v,{variant:t.is_active?"text":"contained",color:t.is_active?"success":"secondary",onClick:()=>Hr(t.id),size:"small",sx:{fontSize:"0.7rem",minHeight:0,py:.5,width:"100%",minWidth:"auto",borderRadius:"8px",textTransform:"none",boxShadow:"none"},disabled:er,children:t.is_active?"\u0410\u043A\u0442\u0438\u0432\u0435\u043D":"\u0412\u044B\u0431\u0440\u0430\u0442\u044C"})]})]})},t.id))}),e.jsxs(a,{sx:{mt:1,mb:2,display:"flex",alignItems:"center",justifyContent:"center"},children:[e.jsx(n,{variant:"caption",color:"text.secondary",sx:{mr:1},children:"\u041F\u043E\u043A\u0443\u043F\u0430\u0439\u0442\u0435 \u043D\u043E\u0432\u044B\u0435 \u0431\u0435\u0439\u0434\u0436\u0438 \u0432 \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u0435"}),e.jsx(hs,{href:"/badge-shop",sx:{textDecoration:"none"},children:e.jsx(v,{variant:"text",color:"secondary",size:"small",startIcon:e.jsx(Es,{sx:{fontSize:14}}),sx:{textTransform:"none",py:0,ml:-1},children:"\u041F\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043C\u0430\u0433\u0430\u0437\u0438\u043D"})})]})]})]}),e.jsx(a,{component:"style",dangerouslySetInnerHTML:{__html:`
                      @keyframes pulse {
                        0% {
                          transform: scale(1);
                          opacity: 0.8;
                        }
                        50% {
                          transform: scale(1.05);
                          opacity: 0.5;
                        }
                        100% {
                          transform: scale(1);
                          opacity: 0.8;
                        }
                      }
                      
                      @keyframes badge-glow {
                        0% {
                          box-shadow: 0 0 5px 0px ${r.palette.primary.main};
                        }
                        50% {
                          box-shadow: 0 0 15px 2px ${r.palette.primary.main};
                        }
                        100% {
                          box-shadow: 0 0 5px 0px ${r.palette.primary.main};
                        }
                      }
                    `}})]})})}),Ze(A)===4&&!I&&e.jsxs(a,{component:Ve.div,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsxs(ae,{variant:"h5",children:[e.jsx(Cr,{}),"\u041C\u0430\u0433\u0430\u0437\u0438\u043D \u042E\u0437\u0435\u0440\u043D\u0435\u0439\u043C\u043E\u0432"]}),e.jsx(be,{children:e.jsx(ge,{sx:{p:{xs:1,sm:2,md:3}},children:e.jsx(lo,{activeTab:A})})})]}),Ze(A)===5&&!I&&e.jsx(a,{component:Ve.div,initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:e.jsx(Hs,{})}),e.jsx(Ht,{open:sr.open,autoHideDuration:6e3,onClose:Ur,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:e.jsx(K,{onClose:Ur,severity:sr.severity,variant:"filled",sx:{width:"100%",bgcolor:t=>t==="success"?"rgba(46, 125, 50, 0.9)":t==="error"?"rgba(211, 47, 47, 0.9)":t==="warning"?"rgba(237, 108, 2, 0.9)":"rgba(2, 136, 209, 0.9)",backdropFilter:"blur(4px)"},children:sr.message})}),e.jsxs(Pe,{open:Ua,onClose:()=>it(!1),"aria-labelledby":"telegram-dialog-title",maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:3,boxShadow:r.shadows[10],background:"rgba(18, 18, 18, 0.95)",border:"1px solid rgba(255, 255, 255, 0.05)"}},children:[e.jsx(Ge,{sx:{borderBottom:`1px solid ${C(r.palette.divider,.1)}`},children:e.jsxs(a,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsx(n,{variant:"h6",children:"\u041F\u043E\u0434\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u0435 Telegram"}),e.jsx(Q,{onClick:()=>it(!1),size:"small",children:e.jsx(gt,{fontSize:"small"})})]})}),e.jsxs($e,{sx:{mt:2},children:[e.jsxs(n,{variant:"body2",sx:{mb:3},children:["\u0414\u043B\u044F \u043F\u043E\u0434\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u044F Telegram \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448 Telegram ID, \u043A\u043E\u0442\u043E\u0440\u044B\u0439 \u0432\u044B \u043C\u043E\u0436\u0435\u0442\u0435 \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u0447\u0435\u0440\u0435\u0437 \u0431\u043E\u0442\u0430 ",e.jsx("strong",{children:"@getmyid_bot"}),"."]}),e.jsx(K,{severity:"warning",sx:{mb:3},children:e.jsxs(n,{variant:"body2",children:[e.jsx("strong",{children:"\u0412\u043D\u0438\u043C\u0430\u043D\u0438\u0435:"})," \u041D\u0435 \u0432\u0432\u043E\u0434\u0438\u0442\u0435 \u0447\u0443\u0436\u043E\u0439 ID. \u042D\u0442\u043E \u043C\u043E\u0436\u0435\u0442 \u043F\u0440\u0438\u0432\u0435\u0441\u0442\u0438 \u043A \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0435 \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0439 \u043D\u0435 \u0442\u043E\u043C\u0443 \u0447\u0435\u043B\u043E\u0432\u0435\u043A\u0443."]})}),e.jsx(te,{fullWidth:!0,label:"Telegram ID",variant:"outlined",value:nt,onChange:t=>Rr(t.target.value),error:!!Ar,helperText:Ar||"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448 \u0447\u0438\u0441\u043B\u043E\u0432\u043E\u0439 ID \u0438\u0437 Telegram",disabled:cr,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),e.jsx(a,{sx:{mt:3,display:"flex",justifyContent:"center"},children:e.jsx(v,{variant:"contained",color:"primary",href:"https://t.me/getmyid_bot",target:"_blank",rel:"noopener noreferrer",startIcon:e.jsx(et,{}),sx:{borderRadius:2,textTransform:"none"},children:"\u041E\u0442\u043A\u0440\u044B\u0442\u044C @getmyid_bot"})})]}),e.jsxs(Qe,{sx:{p:2,pt:0},children:[e.jsx(v,{onClick:()=>it(!1),color:"inherit",sx:{borderRadius:2},children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),e.jsx(v,{onClick:async()=>{try{if(Pt(""),lt(!0),!nt.trim())return Pt("Telegram ID \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C"),void lt(!1);if(!/^\d+$/.test(nt.trim()))return Pt("Telegram ID \u0434\u043E\u043B\u0436\u0435\u043D \u0431\u044B\u0442\u044C \u0447\u0438\u0441\u043B\u043E\u043C"),void lt(!1);const t=await k.post("/api/profile/telegram-connect",{telegram_id:nt.trim()});if(!t.data||!t.data.success)throw new Error(t.data?.error||"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043F\u0440\u0438\u0432\u044F\u0437\u0430\u0442\u044C Telegram ID");or({...G,telegramConnected:!0}),b("success","Telegram \u0430\u043A\u043A\u0430\u0443\u043D\u0442 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043F\u0440\u0438\u0432\u044F\u0437\u0430\u043D"),it(!1),Rr(""),lt(!1)}catch(t){Pt(t.response?.data?.error||t.message||"\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043F\u0440\u0438\u0432\u044F\u0437\u043A\u0435 Telegram ID"),lt(!1)}},variant:"contained",color:"primary",disabled:cr||!nt.trim(),sx:{borderRadius:2,textTransform:"none"},children:cr?e.jsxs(e.Fragment,{children:[e.jsx(Z,{size:20,sx:{mr:1},color:"inherit"}),"\u0421\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0435..."]}):"\u041F\u043E\u0434\u043A\u043B\u044E\u0447\u0438\u0442\u044C Telegram"})]})]}),e.jsxs(Pe,{open:O,onClose:()=>V(!1),maxWidth:"md",fullWidth:!0,sx:{"& .MuiDialog-paper":{borderRadius:1,background:"rgba(12, 12, 12, 0.95)",backdropFilter:"blur(10px)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)",border:"1px solid rgba(255, 255, 255, 0.05)"}},children:[e.jsx(Ge,{children:e.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ga,{sx:{mr:1}}),"\u0418\u0441\u0442\u043E\u0440\u0438\u044F \u043F\u0440\u0435\u0434\u0443\u043F\u0440\u0435\u0436\u0434\u0435\u043D\u0438\u0439"]})}),e.jsx($e,{dividers:!0,children:q?e.jsx(a,{sx:{display:"flex",justifyContent:"center",p:3},children:e.jsx(Z,{size:40})}):j.length>0?e.jsxs(a,{children:[e.jsx(a,{sx:{display:{xs:"none",md:"block"}},children:e.jsx(Xr,{component:he,sx:{bgcolor:"background.paper",borderRadius:2},children:e.jsxs(ea,{children:[e.jsx(ta,{children:e.jsxs(Jt,{children:[e.jsx(J,{children:"\u0414\u0430\u0442\u0430"}),e.jsx(J,{children:"\u041F\u0440\u0438\u0447\u0438\u043D\u0430"}),e.jsx(J,{children:"\u0414\u0435\u0442\u0430\u043B\u0438"}),e.jsx(J,{children:"\u0421\u0442\u0430\u0442\u0443\u0441"})]})}),e.jsx(ra,{children:j.map(t=>e.jsxs(Jt,{children:[e.jsx(J,{children:ur(t.created_at)}),e.jsx(J,{children:t.reason}),e.jsx(J,{sx:{maxWidth:250,overflow:"hidden",textOverflow:"ellipsis"},children:t.details}),e.jsx(J,{children:e.jsx(Y,{label:t.active?"\u0410\u043A\u0442\u0438\u0432\u043D\u043E":"\u0421\u043D\u044F\u0442\u043E",color:t.active?"warning":"default",size:"small"})})]},t.id))})]})})}),e.jsx(a,{sx:{display:{xs:"flex",md:"none"},flexDirection:"column",gap:2},children:j.map(t=>e.jsxs(he,{elevation:1,sx:{p:2,borderRadius:2,border:`1px solid ${t.active?C(r.palette.warning.main,.3):C(r.palette.divider,.2)}`,background:t.active?C(r.palette.warning.main,.05):"transparent"},children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(n,{variant:"subtitle2",sx:{fontWeight:600},children:t.reason}),e.jsx(Y,{label:t.active?"\u0410\u043A\u0442\u0438\u0432\u043D\u043E":"\u0421\u043D\u044F\u0442\u043E",color:t.active?"warning":"default",size:"small",sx:{height:22,fontSize:"0.75rem"}})]}),e.jsx(n,{variant:"caption",color:"text.secondary",display:"block",sx:{mb:1},children:ur(t.created_at)}),t.details&&e.jsx(n,{variant:"body2",sx:{mt:1,fontSize:"0.875rem",color:C(r.palette.text.primary,.8)},children:t.details})]},t.id))})]}):e.jsxs(a,{sx:{p:3,textAlign:"center"},children:[e.jsx(ba,{sx:{fontSize:48,color:"success.main",mb:2}}),e.jsx(n,{variant:"h6",children:"\u041D\u0435\u0442 \u043F\u0440\u0435\u0434\u0443\u043F\u0440\u0435\u0436\u0434\u0435\u043D\u0438\u0439"}),e.jsx(n,{variant:"body2",color:"text.secondary",children:"\u0423 \u0432\u0430\u0441 \u043D\u0435\u0442 \u0430\u043A\u0442\u0438\u0432\u043D\u044B\u0445 \u0438\u043B\u0438 \u043F\u0440\u043E\u0448\u043B\u044B\u0445 \u043F\u0440\u0435\u0434\u0443\u043F\u0440\u0435\u0436\u0434\u0435\u043D\u0438\u0439."})]})}),e.jsx(Qe,{children:e.jsx(v,{onClick:()=>V(!1),color:"primary",children:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C"})})]}),e.jsx(Vs,{activeTab:A,onTabChange:Lr,user:u}),e.jsxs(a,{sx:{mt:4,borderTop:"1px solid rgba(255, 255, 255, 0.12)",pt:3},children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"\u0411\u0435\u0437\u043E\u043F\u0430\u0441\u043D\u043E\u0441\u0442\u044C \u0438 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u0430"}),e.jsx(v,{variant:"contained",onClick:()=>{ne(!0)},sx:{mt:2,borderRadius:2,py:1.8,justifyContent:"flex-start",textTransform:"none",backgroundColor:"rgba(16, 16, 16, 0.9)",backgroundImage:"linear-gradient(45deg, rgba(16, 16, 16, 0.9), rgba(22, 22, 22, 0.9))",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.4)",border:"1px solid rgba(208, 188, 255, 0.1)",color:"#fff","&:hover":{backgroundColor:"rgba(22, 22, 22, 0.9)",backgroundImage:"linear-gradient(45deg, rgba(22, 22, 22, 0.9), rgba(30, 30, 30, 0.9))",boxShadow:"0 6px 16px rgba(0, 0, 0, 0.5)",transform:"translateY(-2px)",transition:"all 0.3s ease"},width:"100%"},startIcon:e.jsx(ws,{sx:{color:"#d0bcff",fontSize:"1.5rem"}}),children:e.jsxs(a,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",ml:1},children:[e.jsx(n,{variant:"subtitle1",sx:{fontWeight:500,color:"#fff"},children:"\u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0441\u0435\u0441\u0441\u0438\u044F\u043C\u0438"}),e.jsx(n,{variant:"caption",sx:{color:"#d0bcff"},children:"\u0423\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u0430, \u043F\u043E\u0434\u043A\u043B\u044E\u0447\u0435\u043D\u043D\u044B\u0435 \u043A \u0430\u043A\u043A\u0430\u0443\u043D\u0442\u0443"})]})})]}),e.jsx(Ss,{open:M,onClose:()=>{ne(!1)}}),Ie?.user?.account_type==="channel"&&e.jsx(a,{sx:{mt:4,mb:4,textAlign:"center"},children:e.jsx(v,{onClick:()=>Nr(!0),sx:{color:"text.secondary","&:hover":{color:"error.main"}},children:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043A\u0430\u043D\u0430\u043B"})}),e.jsx(ao,{open:Ya,onClose:()=>Nr(!1),channelId:Ie?.user?.id,onDelete:t=>{b("success","\u041A\u0430\u043D\u0430\u043B \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0443\u0434\u0430\u043B\u0435\u043D"),window.location.href="/"}}),e.jsx(Us,{open:qa,onClose:()=>$r(!1)})]})})},ho=({onThemeSelect:r})=>{const l=qe(),{themeSettings:x}=i.useContext(yr),u=localStorage.getItem("theme")||"dark";return e.jsxs(a,{sx:{mb:4},children:[e.jsx(n,{variant:"h6",sx:{mb:2},children:"\u0413\u043E\u0442\u043E\u0432\u044B\u0435 \u0442\u0435\u043C\u044B \u043E\u0444\u043E\u0440\u043C\u043B\u0435\u043D\u0438\u044F"}),e.jsx(B,{container:!0,spacing:2,children:[{id:"dark",name:"\u0422\u0435\u043C\u043D\u0430\u044F \u0442\u0435\u043C\u0430",bg:"#131313",paper:"#1c1c1c",primary:"#D0BCFF",textColor:"#FFFFFF"},{id:"light",name:"\u0421\u0432\u0435\u0442\u043B\u0430\u044F \u0442\u0435\u043C\u0430",bg:"#f5f5f5",paper:"#ffffff",primary:"#8c52ff",textColor:"#121212"},{id:"contrast",name:"\u041A\u043E\u043D\u0442\u0440\u0430\u0441\u0442\u043D\u0430\u044F",bg:"#080808",paper:"#101010",primary:"#7B46E3",textColor:"#FFFFFF"}].map(o=>e.jsx(B,{item:!0,xs:12,sm:4,children:e.jsxs(a,{onClick:()=>r(o.id),sx:{display:"flex",flexDirection:"column",border:`2px solid ${u===o.id?x.primaryColor||l.palette.primary.main:l.palette.mode==="light"?"rgba(0,0,0,0.1)":"rgba(255,255,255,0.1)"}`,borderRadius:2,overflow:"hidden",cursor:"pointer",transition:"all 0.2s","&:hover":{transform:"translateY(-4px)",boxShadow:l.palette.mode==="light"?"0 4px 20px rgba(0,0,0,0.1)":"0 4px 20px rgba(0,0,0,0.2)"}},children:[e.jsxs(a,{sx:{height:120,bgcolor:o.bg,position:"relative",p:1},children:[e.jsx(a,{sx:{height:24,bgcolor:o.paper,borderRadius:1,mb:1}}),e.jsxs(a,{sx:{display:"flex",gap:1,height:60},children:[e.jsx(a,{sx:{width:"30%",bgcolor:o.paper,borderRadius:1}}),e.jsx(a,{sx:{width:"70%",bgcolor:o.paper,borderRadius:1,position:"relative"},children:e.jsx(a,{sx:{position:"absolute",width:30,height:6,bgcolor:o.primary,borderRadius:1,top:10,left:10}})})]})]}),e.jsx(a,{sx:{p:1.5,bgcolor:o.paper,color:o.textColor},children:e.jsx(n,{variant:"body1",sx:{fontWeight:600},children:o.name})})]})},o.id))})]})};export{ae as SectionTitle,be as SettingsCard,ge as SettingsCardContent,po as default};
